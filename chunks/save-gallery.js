(self.webpackChunk=self.webpackChunk||[]).push([[466],{80819:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i}),t(52327),t(911),t(98010),t(95623),t(61514),t(61013);const a={name:"saveGallery",data:function(){return{files:["output-page.js","output-page.css","chunks/487.css","chunks/487.js","chunks/487.js.LICENSE.txt","chunks/564.js","chunks/564.js.LICENSE.txt","chunks/audio-player.css","chunks/audio-player.js","chunks/authors.css","chunks/authors.js","chunks/book-Details.css","chunks/book-Details.js","chunks/book.css","chunks/book.js","chunks/categories.css","chunks/categories.js","chunks/collections.css","chunks/collections.js","chunks/gallery.css","chunks/gallery.js","chunks/grid-view.css","chunks/grid-view.js","chunks/narrators.css","chunks/narrators.js","chunks/save-csv.js","chunks/save-gallery.js","chunks/series.css","chunks/series.js","chunks/sort-values.css","chunks/sort-values.js","chunks/splide.js","chunks/splide.js.LICENSE.txt","chunks/spreadsheet-view.css","chunks/spreadsheet-view.js","chunks/view-mode-switcher.css","chunks/view-mode-switcher.js","favicons/android-chrome-192x192.png","favicons/android-chrome-512x512.png","favicons/apple-touch-icon.png","favicons/browserconfig.xml","favicons/favicon-16x16.png","favicons/favicon-32x32.png","favicons/favicon.ico","favicons/mstile-150x150.png","favicons/safari-pinned-tab.svg","favicons/app.webmanifest"],dataSources:[{checked:!0,disabled:!1,key:"Library"},{checked:!0,disabled:!1,key:"Collections",parent:"Library"},{checked:!0,disabled:!1,key:"Categories",parent:["Library","Wishlist"],subPage:!0},{checked:!0,disabled:!1,key:"Series",parent:["Library","Wishlist"],subPage:!0},{checked:!0,disabled:!1,key:"Authors",parent:["Library","Wishlist"],subPage:!0},{checked:!0,disabled:!1,key:"Narrators",parent:["Library","Wishlist"],subPage:!0},{checked:!0,disabled:!1,key:"Publishers",parent:["Library","Wishlist"],subPage:!0},{checked:!0,disabled:!1,key:"Wishlist"}],zip:null,cacheBuster:null,bundling:!1,saveBtnEnabled:!0}},beforeMount:function(){if(this.$store.state.sticky.exportSettingsGallery){var e=this;_.each(this.$store.state.sticky.exportSettingsGallery,(function(s){var t=_.find(e.dataSources,{key:s.key});t.checked=s.checked,t.disabled=s.disabled}))}_.find(this.dataSources,{key:"Library"}).disabled=!this.$store.state.library.books,_.find(this.dataSources,{key:"Wishlist"}).disabled=!this.$store.state.library.wishlist},beforeDestroy:function(){this.zip=null,this.cacheBuster=null},computed:{chunkSource:function(){return _.chunk(this.dataSources,2)}},methods:{divideLargerDatapoints:function(e,s){var t=this;_.each(s,(function(s){s.peopleAlsoBought&&s.asin&&(e.file("data/people-also-bought/"+s.asin+"."+t.cacheBuster+".js","window.peopleAlsoBoughtJSON = "+JSON.stringify(s.peopleAlsoBought)+";"),delete s.peopleAlsoBought),s.summary&&s.asin&&(e.file("data/summary/"+s.asin+"."+t.cacheBuster+".js","window.bookSummaryJSON = "+JSON.stringify(s.summary)+";"),delete s.summary)}))},saveButtonClicked:function(){if(!this.bundling){var e=this;e.bundling=!0,e.cacheBuster=this.runCachebuster();var s=this.excludeData(JSON.parse(JSON.stringify(this.$store.state.library)));e.zip=new JSZip;var t=e.zip;s.extras.cacheID=e.cacheBuster;var a={books:!!s.books,series:!!s.series,collections:!!s.collections,wishlist:!!s.wishlist,extras:s.extras},i='<!DOCTYPE html><html lang="en" class="theme-light standalone-gallery"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="mobile-web-app-capable" content="yes"><link rel="apple-touch-icon" sizes="180x180" href="favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicons/favicon-16x16.png"><link rel="manifest" href="favicons/app.webmanifest"><link rel="mask-icon" href="favicons/safari-pinned-tab.svg" color="#f29a33"><link rel="shortcut icon" href="favicons/favicon.ico"><meta name="msapplication-TileColor" content="#222222"><meta name="msapplication-config" content="favicons/browserconfig.xml"><meta name="theme-color" content="#f29a33"><title>My Audible Library</title><script id="library-data" type="application/json">'+JSON.stringify(a)+'<\/script><link id="ale-css" rel="stylesheet" href="output-page.'+e.cacheBuster+'.css"></head><body><div id="audible-library-extractor" :data-version="'+this.$store.state.version+'"></div><script id="ale-js" src="output-page.'+e.cacheBuster+'.js"><\/script><noscript>This library requires javascript to work!</noscript></body></html>';t.file("index.html",i),s.wishlist&&this.divideLargerDatapoints(t,s.wishlist),s.books&&this.divideLargerDatapoints(t,s.books),s.books&&t.file("data/library."+e.cacheBuster+".js","window.libraryJSON = "+JSON.stringify(s.books)+";"),s.collections&&t.file("data/collections."+e.cacheBuster+".js","window.collectionsJSON = "+JSON.stringify(s.collections)+";"),s.series&&t.file("data/series."+e.cacheBuster+".js","window.seriesJSON = "+JSON.stringify(s.series)+";"),s.wishlist&&t.file("data/wishlist."+e.cacheBuster+".js","window.wishlistJSON = "+JSON.stringify(s.wishlist)+";");var n=this.files,c=0;_.each(n,(function(s){JSZipUtils.getBinaryContent(s,(function(a,i){if(a)throw a;"output-page.js"===s?s=s.replace(".js","."+e.cacheBuster+".js"):"output-page.css"===s&&(s=s.replace(".css","."+e.cacheBuster+".css")),t.file(s,i,{binary:!0}),++c==n.length&&t.generateAsync({type:"blob"}).then((function(s){setTimeout((function(){e.bundling=!1}),1e3),saveAs(s,"ALE-gallery.zip")}))}))}))}},sourceChecked:function(e,s){var t=this,a=_.filter(this.dataSources,(function(e){return _.isArray(e.parent)?_.includes(e.parent,s.key):e.parent===s.key}));_.each(a,(function(s){if(_.isArray(s.parent)){var a=_.map(s.parent,(function(e){return _.find(t.dataSources,{key:e})})),i=_.filter(a,(function(e){return e.checked&&!e.disabled})).length>0;s.disabled=!e.target.checked&&!i}else s.disabled=!e.target.checked}));var i=_.filter(this.dataSources,{checked:!0,disabled:!1});this.saveBtnEnabled=!!i.length,this.$store.commit("stickyProp",{key:"exportSettingsGallery",value:this.dataSources})},excludeData:function(e){return _.each(this.dataSources,(function(s){var t=s.key.toLowerCase(),a=!s.checked||s.disabled;switch(s.key){case"Library":a&&(delete e.books,delete e.series,delete e.collections);break;case"Series":a&&delete e.series;break;case"Collections":a&&delete e.collections;break;case"Wishlist":a&&delete e.wishlist}s.subPage&&(e.extras.subPageStates=e.extras.subPageStates||[],e.extras.subPageStates.push({key:t,enabled:!a}))})),e},runCachebuster:function(){return(new Date).getTime()}}},i=(0,t(40810).Z)(a,(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"export-group"},[t("h2",[t("font-awesome",{attrs:{fas:"",icon:"th"}}),e._v(" Stand-alone gallery")],1),e._v(" "),t("div",{staticClass:"description"},[e._v("\n    This saves the gallery as a stand-alone web page that can be uploaded online and shared or viewed as is by unpacking the zip file and opening the index.html file in a web browser.\n  ")]),e._v(" "),t("h3",[e._v("Pages:")]),e._v(" "),t("div",{staticClass:"options opt-groups"},e._l(e.chunkSource,(function(s,a){return t("div",{key:a,staticClass:"opt-group"},e._l(s,(function(s){return t("label",{key:s.key},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.checked,expression:"item.checked"}],attrs:{type:"checkbox",disabled:s.disabled},domProps:{checked:Array.isArray(s.checked)?e._i(s.checked,null)>-1:s.checked},on:{change:[function(t){var a=s.checked,i=t.target,n=!!i.checked;if(Array.isArray(a)){var c=e._i(a,null);i.checked?c<0&&e.$set(s,"checked",a.concat([null])):c>-1&&e.$set(s,"checked",a.slice(0,c).concat(a.slice(c+1)))}else e.$set(s,"checked",n)},function(t){return e.sourceChecked(t,s)}]}}),e._v(" "+e._s(s.key)+"\n      ")])})),0)})),0),e._v(" "),t("div",{staticClass:"buttons-footer"},[t("div",{staticClass:"btn-wrapper"},[t("button",{staticClass:"save-btn",class:{saving:e.bundling},attrs:{disabled:e.bundling||!e.saveBtnEnabled},on:{click:e.saveButtonClicked}},[t("span",[e._v("ALE-gallery.zip")]),e._v(" "),e.bundling?t("font-awesome",{attrs:{icon:["fas","spinner"],spin:""}}):t("font-awesome",{attrs:{icon:["fas","download"]}})],1),e._v(" "),t("div",[t("a",{staticClass:"github-btn",attrs:{target:"_blank",href:"https://joonaspaakko.gitbook.io/audible-library-extractor/sharing/uploading-to-github"}},[t("span",[e._v("Upload instructions")]),e._v(" "),t("font-awesome",{attrs:{icon:["fab","github"]}})],1),e._v(" "),t("a",{staticClass:"github-btn",attrs:{target:"_blank",href:"https://joonaspaakko.gitbook.io/audible-library-extractor/sharing/updating-gallery-in-github"}},[t("span",[e._v("Update instructions")]),e._v(" "),t("font-awesome",{attrs:{icon:["fab","github"]}})],1)])])])])}),[],!1,null,null,null).exports}}]);