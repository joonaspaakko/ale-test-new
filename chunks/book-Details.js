(self.webpackChunk=self.webpackChunk||[]).push([[3],{65:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});const o={methods:{makeGoodReadsUrl:function(t){var e=(t=t||this.book).authors?t.authors[0].name+" - ":t.obj&&t.obj.authors?t.obj.authors[0].name+" - ":"",i=e+((e&&t.titleShort?t.titleShort:t.title)||"");return t.titleShort||t.title?"https://www.goodreads.com/search?q="+encodeURIComponent(i):null}}}},1405:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o}),i(3238),i(895);const o={methods:{makeFullUrl:function(t){var e=new domurl(this.$store.state.urlOrigin+t);return e.query.ipRedirectOverride=!0,e.query.overrideBaseCountry=!0,e.toString()},makeUrl:function(t,e){var i=this.$store.state.urlOrigin,o="";switch(t){case"store":case"book":o=i+"/pd/"+encodeURIComponent(e);break;case"author":o=e.url?i+"/author/"+e.url:i+"/search?searchAuthor="+encodeURIComponent(e.name);break;case"narrator":e.name&&(o=i+"/search?searchNarrator="+encodeURIComponent(e.name));break;case"series":e.asin&&(o=i+"/series/"+e.asin);break;case"publisher":e.name&&(o=i+"/search?searchProvider="+encodeURIComponent(e.name));break;case"categories":case"tags":e.url&&(o=i+"/cat/"+e.url)}if(o){var s=new domurl(o);return s.query.ipRedirectOverride=!0,s.query.overrideBaseCountry=!0,s.toString()}return""}}}},4737:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o}),i(266);const o={mixins:[i(5619).Z],methods:{progressbarWidth:function(t){if(t.progress){if("finished"===t.progress.toLowerCase().trim())return{width:"100%"};if(t.length){var e=this.timeStringToSeconds(t.progress),i=this.timeStringToSeconds(t.length);return{width:(e=i-e)/i*100+"%"}}return{width:0}}return{width:0}}}}},2863:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o}),i(2410),i(3512),i(3238),i(895);const o={methods:{secondsToTimeString:function(t,e){var i=function(t,i){return e?t:("000"+t).slice(-1*i)},o=parseFloat(t).toFixed(3),s=Math.floor(o/60/60),r=Math.floor(o/60)%60,n=(Math.floor(o-60*r),o.slice(-3),(s.toString().length>1?s:i(s,2))+(e?"h ":".")),a=i(r,2)+(e?"m ":"");return e&&!s&&(n=""),n+a}}}},1842:(t,e,i)=>{"use strict";var o=i(2086),s=i(8516),r=i(9413),n=i(3060),a=i(7850),l=i(2814),c=i(1956),u=i(2871),h=i(9720),d=i(3546),g=i(1667),p=o.Array;t.exports=function(t){var e=n(t),i=c(this),o=arguments.length,b=o>1?arguments[1]:void 0,m=void 0!==b;m&&(b=s(b,o>2?arguments[2]:void 0));var k,y,v,f,M,S,w=g(e),I=0;if(!w||this==p&&l(w))for(k=u(e),y=i?new this(k):p(k);k>I;I++)S=m?b(e[I],I):e[I],h(y,I,S);else for(M=(f=d(e,w)).next,y=i?new this:[];!(v=r(M,f)).done;I++)S=m?a(f,b,[v.value,I],!0):v.value,h(y,I,S);return y.length=I,y}},7850:(t,e,i)=>{var o=i(6112),s=i(6737);t.exports=function(t,e,i,r){try{return r?e(o(i)[0],i[1]):e(i)}catch(e){s(t,"throw",e)}}},2194:(t,e,i)=>{var o=i(2086),s=i(3677),r=i(8240),n=i(4059),a=i(4080).trim,l=i(9439),c=o.parseInt,u=o.Symbol,h=u&&u.iterator,d=/^[+-]?0x/i,g=r(d.exec),p=8!==c(l+"08")||22!==c(l+"0x16")||h&&!s((function(){c(Object(h))}));t.exports=p?function(t,e){var i=a(n(t));return c(i,e>>>0||(g(d,i)?16:10))}:c},5610:(t,e,i)=>{var o=i(1695),s=i(1842);o({target:"Array",stat:!0,forced:!i(8939)((function(t){Array.from(t)}))},{from:s})},2081:(t,e,i)=>{var o=i(1695),s=i(2194);o({global:!0,forced:parseInt!=s},{parseInt:s})},514:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>q}),i(5699),i(2077),i(911),i(3512),i(266);var o=i(5619),s=i(2863),r=i(4737),n=i(3657),a=(i(5769),i(3238),i(1418),i(7460),i(4078),i(2327),i(8010),i(1405));const l={name:"carousel-slide",props:["detailsBook","book","index","mobileWidth"],mixins:[a.Z,n.Z],data:function(){return{prepworkDone:!1,inLibrary:null,inSeries:{asin:null,obj:null,ownedBooksLength:null},inSameSeries:null,inWishlist:null,storePageURL:null,scrollContainer:null,tippy:null}},computed:{tag:function(){return this.mobileWidth?"div":"a"}},methods:{onShow:function(t){return this.tippy=t,this.prepworkDone||(this.findBookFromLibrary(),this.findBookFromSeries(),this.findSameSeries(),this.findInWishlist(),this.storePageURL=this.makeUrl("book",this.book.asin),this.prepworkDone=!0),this.scrollContainer=document.querySelector(".list-view-inner-wrap")||window,this.scrollContainer.addEventListener("scroll",this.scrollHide,{passive:!0}),this.$updateQueries({carousel:!0}),!!t.props.content},onHide:function(){this.scrollContainer||(this.scrollContainer=document.querySelector(".list-view-inner-wrap")||window),this.scrollContainer.addEventListener("scroll",this.scrollHide,{passive:!0})},scrollHide:function(){var t=this.tippy;t&&t.state.isVisible&&(t.hide(),t.reference.blur())},findBookFromLibrary:function(){var t=this.$store.state.library.books;_.find(t,{asin:this.book.asin})&&(this.inLibrary=!0)},findBookFromSeries:function(){var t=this.book.asin,e=this.$store.state.library.series,i=_.find(e,(function(e){var i=_.get(e,"allBooks");if(i)return _.find(i,{asin:t})}));if(i){this.inSeries.asin=i.asin,this.inSeries.obj=i;var o=_.get(i,"allBooks");o&&(this.inSeries.ownedBooksLength=_.filter(o,(function(t){return!t.notInLibrary})).length)}},findSameSeries:function(){if(this.inSeries.obj){var t=_.get(this.inSeries,"obj.allBooks"),e=_.find(t,{asin:this.detailsBook.asin});this.inSameSeries=!!e}},findInWishlist:function(){var t=this.book.asin,e=this.$store.state.library.wishlist;this.inWishlist=_.find(e,{asin:t}),this.inWishlist&&console.log(this.book.asin,this.book.title)}}};var c=i(810);const u=(0,c.Z)(l,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("tippy",{staticClass:"carousel-cover-tippy",attrs:{delay:520,allowHTML:!0,interactive:!0},on:{show:t.onShow,hide:t.onHide},scopedSlots:t._u([{key:"trigger",fn:function(){return[i(t.tag,{ref:"coverLink",tag:"component",staticClass:"cover-wrapper",attrs:{href:"a"===t.tag?t.storePageURL:null,target:"_blank",rel:"noopener noreferrer"}},[i("img",{staticClass:"cover",attrs:{crossorigin:"anonymous","data-splide-lazy":t.makeCoverUrl(t.book.cover,150),alt:""}})])]},proxy:!0}])},[t._v(" "),t.prepworkDone?i("div",{staticStyle:{"font-weight":"normal","text-align":"left",padding:"10px","font-size":"13px","line-height":"17px"}},[t.book.title?i("div",[i("h3",{staticStyle:{"font-size":"1.2em","font-weight":"bold",margin:"0 0 3px 0"}},[i("a",{attrs:{href:t.storePageURL,target:"_blank",rel:"noopener noreferrer"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.book.title)+"\n\t\t\t\t\t")])])]):t._e(),t._v(" "),t.book.subHeading?i("div",[i("h2",{staticStyle:{"font-size":"1.1em","font-weight":"normal",margin:"0 0 3px 0"}},[t._v(t._s(t.book.subHeading))])]):t._e(),t._v(" "),t.book.authors?i("div",[i("strong",[t._v("Authors: ")]),t._v(t._s(t.book.authors))]):t._e(),t._v(" "),t.book.narrators?i("div",[i("strong",[t._v("Narrators: ")]),t._v(t._s(t.book.narrators))]):t._e(),t._v(" "),t.book.length?i("div",[i("strong",[t._v("Length: ")]),t._v(t._s(t.book.length))]):t._e(),t._v(" "),i("div",{staticStyle:{"padding-top":"10px"}},[t.inSameSeries?i("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{maxWidth:300},expression:"{ maxWidth: 300 }"}],staticClass:"carousel-gallery-link not-link",staticStyle:{background:"#047844"},attrs:{content:"This carousel book is in the same series as the one you have book details open on right now: <strong>"+t.detailsBook.title||0}},[t._v("\n\t\t\t\t\tfrom this series\n\t\t\t\t")]):t._e(),t._v(" "),t.inLibrary?i("router-link",{staticClass:"carousel-gallery-link",staticStyle:{background:"#1065d9"},attrs:{to:{name:"library",query:{book:t.book.asin,refresh:!0}}}},[t._v("\n\t\t\t\t\tbook in library\n\t\t\t\t")]):t._e(),t._v(" "),t.inSeries.asin?i("router-link",{staticClass:"carousel-gallery-link",staticStyle:{background:"#ae2753"},attrs:{to:{name:"series",params:{series:t.inSeries.asin},query:{subPageSource:"library",refresh:!0}}}},[t._v("\n\t\t\t\t\tseries in library \n\t\t\t\t\t"),t.inSeries.ownedBooksLength?i("span",[t._v("\n\t\t\t\t\t\t("+t._s(t.inSeries.ownedBooksLength)),t.inSeries.obj.allBooks?i("span",[t._v("/"+t._s(t.inSeries.obj.allBooks.length))]):t._e(),t._v(")\n\t\t\t\t\t")]):t._e()]):t._e(),t._v(" "),t.inWishlist?i("router-link",{staticClass:"carousel-gallery-link",staticStyle:{background:"#dd7100"},attrs:{to:{name:"wishlist",query:{book:t.book.asin,refresh:!0}}}},[t._v("\n\t\t\t\t\tbook in wishlist \n\t\t\t\t")]):t._e()],1)]):t._e()])],1)}),[],!1,null,"150b74ac",null).exports;var h=i(3462),d=(i(1013),i(3938),i(5901),i(2189),i(1047),i(5610),i(2410),i(1135));function g(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return p(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?p(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}const b={props:{tag:{default:function(){return"div"}},delay:0},mounted:function(){var t=this;this.$nextTick((function(){var e=g(t.$el.querySelectorAll("[data-tippy-component-trigger]")).map((function(t){return t._tippy})),i=g(t.$el.querySelectorAll("[data-tippy-directive]")).map((function(t){return t._tippy}));e.length&&d.pI.group(_.compact([].concat(g(e),g(i))),{delay:t.delay})}))}},m=(0,c.Z)(b,(function(){var t=this,e=t.$createElement;return(t._self._c||e)(t.tag,{tag:"component"},[t._t("default")],2)}),[],!1,null,null,null).exports,k={name:"carousel",props:["book","books","width","mobileWidth"],components:{splide:function(){return i.e(17).then(i.bind(i,7067)).then((function(t){return t.Splide}))},"splide-slide":function(){return i.e(17).then(i.bind(i,7067)).then((function(t){return t.SplideSlide}))},slide:u,lazy:h.Z,TippyGroup:m},data:function(){return{options:{type:"loop",rewind:!0,width:null,trimSpace:!1,gap:"4px",lazyLoad:"nearby",preloadPages:1,perPage:5},coverSize:127,scrolling:!1,scrollContainer:null}},mounted:function(){var t=window.innerWidth,e=t<="716";this.options.width=e?t:this.$el.offsetWidth;var i=e?t-84:this.$el.offsetWidth-84;t<="500"&&(this.coverSize=102),t<="415"&&(this.coverSize=72),this.options.perPage=Math.floor(i/this.coverSize),this.scrollContainer=document.querySelector(".list-view-inner-wrap")||window,this.scrollContainer.addEventListener("scroll",this.windowScrollStarted,{passive:!0})},beforeDestroy:function(){this.scrollContainer.removeEventListener("scroll",this.windowScrollStarted,{passive:!0})},methods:{windowScrollStarted:function(){this.$route.query.carousel&&this.$updateQueries({carousel:null})}}},y=(0,c.Z)(k,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ale-carousel",attrs:{"data-scrolling":t.scrolling}},[i("h3",{staticClass:"ale-heading"},[t._t("default")],2),t._v(" "),i("lazy",{staticClass:"lazyboy",attrs:{offset:-60,delay:10}},[i("TippyGroup",[i("splide",{ref:"splide",attrs:{options:t.options}},t._l(t.books,(function(e,o){return i("splide-slide",{key:o,staticClass:"ale-carousel-item"},[i("slide",{attrs:{detailsBook:t.book,book:e,index:o,mobileWidth:t.mobileWidth}})],1)})),1)],1)],1)],1)}),[],!1,null,null,null).exports;i(1203),i(5623),i(1514);const v={name:"openInApp",props:["book","size","muted"],data:function(){return{url:null}},created:function(){_.get(this.book,"asin")&&(this.url="https://smart.link/o3waqx4wg1gdn?asin="+this.book.asin)}},f=(0,c.Z)(v,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.url||t.muted?i("a",{staticClass:"audible-app-link",class:{muted:t.muted,placeholder:!t.book.asin},attrs:{href:t.url,target:"_blank",rel:"noopener noreferrer",tabindex:t.muted?0:-1}},[i("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:t.muted?"left":"top",flipBehavior:t.muted?["left","top","bottom","right"]:["top","bottom","right","left"]},expression:"{ \n      placement: (muted ? 'left' : 'top'), \n      flipBehavior: (muted ? ['left', 'top', 'bottom', 'right'] : ['top', 'bottom', 'right', 'left']) \n    }"}],staticClass:"gr-icon",style:{width:(t.size||30)+"px",height:(t.size||30)+"px"},attrs:{content:"Open in app"}},[i("img",{attrs:{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNTEuNSA5My43IiB3aWR0aD0iMTUxLjUiIGhlaWdodD0iOTMuNyI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiNmZmY7fTwvc3R5bGU+PC9kZWZzPjxnPjxnPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggODAuN2w3NS43LTQ3LjJ2MTIuOEw3NS44IDkzLjcgMCA0Ni4zVjMzLjVsNzUuOCA0Ny4yeiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggMjEuNWE0OC4xNyA0OC4xNyAwIDAgMC00MC43IDIxLjkgMTIuOTQgMTIuOTQgMCAwIDEgMS44LTEuNmMyMS4zLTE3LjcgNTItMTMuNyA2OC43IDguNmwxMS4xLTcuMWE0OS44MiA0OS44MiAwIDAgMC00MC45LTIxLjgiLz48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik03NS44IDQzLjRhMjcuNzIgMjcuNzIgMCAwIDAtMjIuNCAxMS41IDIyLjcgMjIuNyAwIDAgMSAxMy41LTQuNGM4LjIgMCAxNS41IDQuMiAyMC40IDExLjNsMTAuNi02LjZhMjUuNzkgMjUuNzkgMCAwIDAtMjIuMS0xMS44TTI0LjYgMjQuMkM1NS44LS40IDk5LjkgNi4zIDEyMy40IDM5bC4yLjIgMTEuNS03LjFhNzAuODIgNzAuODIgMCAwIDAtMTE4LjYgMCA2MC42MyA2MC42MyAwIDAgMSA4LjEtNy45Ii8+PC9nPjwvZz48L3N2Zz4=",alt:""}})])]):t._e()}),[],!1,null,"670147d2",null).exports,M={name:"goodReadsLink",props:["book","icon","size","muted"],mixins:[i(65).Z],data:function(){return{goodreadsUrl:null}},created:function(){this.book&&(this.goodreadsUrl=this.makeGoodReadsUrl())}},S=(0,c.Z)(M,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.goodreadsUrl||t.muted?i("a",{staticClass:"good-reads-icon",class:{muted:t.muted,placeholder:!t.goodreadsUrl},attrs:{href:t.goodreadsUrl,target:"_blank",rel:"noopener noreferrer"}},[t.icon?i("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"gr-icon",style:{width:(t.size||30)+"px",height:(t.size||30)+"px"},attrs:{content:"Search for the book in Goodreads"}},[t.muted?i("img",{attrs:{alt:"",src:"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iNTEyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik01LjExMSAxOC45MDdoLjEyOWMuNTg1IDAgMS4xNzYgMCAxLjc2Mi4wMDUuMDc0IDAgLjE0My0uMDE5LjE2Ni4wOTguMzI4IDEuNjM2IDEuMzgzIDIuNTU5IDIuOSAyLjk5NSAxLjI0MS4zNTYgMi40OTUuMzY2IDMuNzQ5LjA4NCAxLjU1OC0uMzQ3IDIuNTgyLTEuMzI3IDMuMTM2LTIuODMxLjM2OS0xLjAwOC40OTQtMi4wNTMuNTA4LTMuMTE3LjAwNS0uMjcyLjAxNC0yLjIwMy0uMDA5LTIuNDc1bC0uMDQxLS4wMTRjLS4wMzcuMDctLjA3OS4xMzYtLjExNS4yMDYtMS4wMTkgMi4wMi0yLjgyNiAzLjE1OS00Ljg2MSAzLjIzOS00Ljc1LjE4OC03LjgxMi0yLjY3Mi03LjkzMi04LjI1OS0uMDIzLTEuMTExLjA4My0yLjE5OC4zODMtMy4yNjcuOTUtMy4zMzMgMy40NC01LjU0MSA3LjA5Ny01LjU2OSAyLjgyNi0uMDE5IDQuNjgxIDEuODE0IDUuMzU5IDMuMjk1LjAyMy4wNTIuMDYuMTA4LjExLjA4OVYuNDk4aDIuMDQzYzAgMTMuMTM5LjAwNSAxNS41NzIuMDA1IDE1LjU3Mi0uMDA1IDMuNjgtMS4yMzIgNi43MzYtNC43NSA3LjYwMy0zLjIwNS43OTItNy4zMzIuMjI1LTkuMDM5LTIuNjgxLS4zNjktLjYzMy0uNTQ0LTEuMzI3LS41OTktMi4wODZ6bTYuNzQ3LTE3LjE5NEM5LjQzNyAxLjY5IDYuODU0IDMuNjIxIDYuNTU0IDcuOTg1Yy0uMTg5IDIuNzY2LjY4MyA1LjcyOCAzLjI5OCA2Ljk2NiAxLjI3My42MDUgMy40MjcuNzAzIDQuOTk1LS40MDggMi4xOTUtMS41NTYgMi44OTEtNC41NDcgMi41MjctNy4yMTktLjQ0OC0zLjMzMy0yLjIwNS01LjYyNS01LjUxNi01LjYxMXoiIGZpbGw9IiNmZmYiLz48L3N2Zz4="}}):i("img",{attrs:{src:"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iNTEyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik01LjExMSAxOC45MDdoLjEyOWMuNTg1IDAgMS4xNzYgMCAxLjc2Mi4wMDUuMDc0IDAgLjE0My0uMDE5LjE2Ni4wOTguMzI4IDEuNjM2IDEuMzgzIDIuNTU5IDIuOSAyLjk5NSAxLjI0MS4zNTYgMi40OTUuMzY2IDMuNzQ5LjA4NCAxLjU1OC0uMzQ3IDIuNTgyLTEuMzI3IDMuMTM2LTIuODMxLjM2OS0xLjAwOC40OTQtMi4wNTMuNTA4LTMuMTE3LjAwNS0uMjcyLjAxNC0yLjIwMy0uMDA5LTIuNDc1bC0uMDQxLS4wMTRjLS4wMzcuMDctLjA3OS4xMzYtLjExNS4yMDYtMS4wMTkgMi4wMi0yLjgyNiAzLjE1OS00Ljg2MSAzLjIzOS00Ljc1LjE4OC03LjgxMi0yLjY3Mi03LjkzMi04LjI1OS0uMDIzLTEuMTExLjA4My0yLjE5OC4zODMtMy4yNjcuOTUtMy4zMzMgMy40NC01LjU0MSA3LjA5Ny01LjU2OSAyLjgyNi0uMDE5IDQuNjgxIDEuODE0IDUuMzU5IDMuMjk1LjAyMy4wNTIuMDYuMTA4LjExLjA4OVYuNDk4aDIuMDQzYzAgMTMuMTM5LjAwNSAxNS41NzIuMDA1IDE1LjU3Mi0uMDA1IDMuNjgtMS4yMzIgNi43MzYtNC43NSA3LjYwMy0zLjIwNS43OTItNy4zMzIuMjI1LTkuMDM5LTIuNjgxLS4zNjktLjYzMy0uNTQ0LTEuMzI3LS41OTktMi4wODZ6bTYuNzQ3LTE3LjE5NEM5LjQzNyAxLjY5IDYuODU0IDMuNjIxIDYuNTU0IDcuOTg1Yy0uMTg5IDIuNzY2LjY4MyA1LjcyOCAzLjI5OCA2Ljk2NiAxLjI3My42MDUgMy40MjcuNzAzIDQuOTk1LS40MDggMi4xOTUtMS41NTYgMi44OTEtNC41NDcgMi41MjctNy4yMTktLjQ0OC0zLjMzMy0yLjIwNS01LjYyNS01LjUxNi01LjYxMXoiIGZpbGw9IiM0ZTM0MmUiLz48L3N2Zz4=",alt:""}})]):i("span",[t._v("Search in Goodreads")])]):t._e()}),[],!1,null,"3eee499a",null).exports,w={name:"booksInSeriesLink",props:["series","book","index","seriesName"],mixins:[a.Z],data:function(){return{seriesPage:!1,routerLink:null,title:null,linkDisabled:!1,sameSeries:null}},created:function(){this.seriesPage="series"===this.$route.name,this.routerLink={name:"series",params:{series:this.series.asin},query:{subPageSource:"library",refresh:!0}},this.seriesName?this.routerLink.query.closeBookDetails=!0:this.routerLink.query.book=this.book.asin;var t=this.seriesPage&&this.$route.params.series===this.series.asin;this.linkDisabled=this.book.notInLibrary||t,this.sameSeries=t},methods:{openBook:function(t){t.preventDefault(),this.book&&!this.book.notInLibrary&&this.book.asin!==this.$route.query.book&&this.$root.$emit("book-clicked",this.book.obj.asin)}}},I=(0,c.Z)(w,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"linky"},[t.seriesName&&t.linkDisabled?i("span",{staticClass:"series-not-link"},[t._v(t._s(t.seriesName))]):!t.seriesName&&t.book.notInLibrary&&t.book.asin?i("a",{directives:[{name:"tippy",rawName:"v-tippy",value:{maxWidth:350,placement:"right",flipBehavior:["right","top","bottom"]},expression:"{ maxWidth: 350, placement: 'right', flipBehavior: ['right', 'top', 'bottom'] }"}],staticClass:"clickety-click cursor-alias",attrs:{target:"_blank",rel:"noopener noreferrer",href:t.makeUrl("book",t.book.asin),content:t.book.title!==t.book.titleShort&&t.book.title}},[i("span",{staticClass:"numbers"},[t._v(t._s(t.book.bookNumbers))]),t._v(" "),i("span",{staticClass:"title"},[t._v(t._s(t.book.titleShort||t.book.title))])]):i("router-link",{directives:[{name:"tippy",rawName:"v-tippy",value:{maxWidth:350,placement:"right",flipBehavior:["right","top","bottom"]},expression:"{ maxWidth: 350, placement: 'right', flipBehavior: ['right', 'top', 'bottom'] }"}],staticClass:"clickety-click",class:{"link-disabled":t.linkDisabled,"same-series":t.sameSeries},attrs:{event:t.linkDisabled?"":"click",to:t.linkDisabled?"":t.routerLink,content:t.seriesName?null:(t.book.notInLibrary?"<strong>Not available:</strong> ":"")+(t.book.title!==t.book.titleShort?t.book.title:"")},nativeOn:{click:function(e){t.linkDisabled&&t.openBook(e)}}},[t.seriesName?i("span",{staticStyle:{"white-space":"normal","padding-bottom":"3px",display:"inline-block"}},[t._v("\n      "+t._s(t.seriesName)+"\n    ")]):t._e(),t._v(" "),t.seriesName?t._e():i("span",{staticClass:"numbers"},[t._v(t._s(t.book.bookNumbers))]),t._v(" "),t.seriesName?t._e():i("span",{staticClass:"title"},[t._v(t._s(t.book.titleShort||t.book.title))])])],1)}),[],!1,null,"2b7de74a",null).exports,L={name:"booksInSeriesFilters",props:["series"],data:function(){return{store:this.$store.state,showAllToggle:!1,showFinishedToggle:!1,count:{notInLibrary:0,finished:0}}},created:function(){this.series.collection&&(this.count.finished=this.countFinished(),this.showFinishedToggle=this.count.finished>0,this.count.notInLibrary=this.countNotInLibrary(),this.showAllToggle=this.count.notInLibrary>0)},methods:{countFinished:function(){var t=0;return _.each(this.series.collection,(function(e){if(e.books){var i=_.filter(e.books,(function(t){var e=_.get(t,"obj.progress");return!!e&&e.match(/finished/i)}));t+=i.length}})),t},countNotInLibrary:function(){var t=0;return _.each(this.series.collection,(function(e){if(e.books){var i=_.filter(e.books,"notInLibrary");t+=i.length}})),t},clickedShowAll:function(){this.$store.commit("stickyProp",{key:"booksInSeriesAll",value:!this.$store.state.sticky.booksInSeriesAll}),this.$nextTick((function(){this.$root.$emit("resizeSummary")}))},clickedShowFinished:function(){this.$store.commit("stickyProp",{key:"booksInSeriesFinished",value:!this.$store.state.sticky.booksInSeriesFinished}),this.$nextTick((function(){this.$root.$emit("resizeSummary")}))}}},x=(0,c.Z)(L,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"list-filter-wrapper",style:{top:"grid"===t.$store.state.sticky.viewMode?t.$store.state.topNavOffset+"px":"31px"}},[i("div",{staticClass:"row"},[t.showAllToggle?i("div",{staticClass:"show-all-toggle",on:{click:t.clickedShowAll}},[i("div",[i("font-awesome",{class:{active:t.$store.state.sticky.booksInSeriesAll},staticStyle:{"padding-right":"4px"},attrs:{icon:["fas","ban"]}}),t._v(" "),t.showFinishedToggle?t._e():i("span",[t._v("Not in library:")]),t._v(" "),i("span",[t._v(t._s(t.count.notInLibrary))])],1)]):t._e(),t._v(" "),t.showFinishedToggle?i("div",{staticClass:"show-finished",on:{click:t.clickedShowFinished}},[i("div",[i("font-awesome",{class:{active:t.$store.state.sticky.booksInSeriesFinished},staticStyle:{"padding-right":"4px"},attrs:{icon:["fas","archive"]}}),t._v(" "),t.showAllToggle?t._e():i("span",[t._v("Finished books:")]),t._v(" "),i("span",[t._v(t._s(t.count.finished))])],1)]):t._e(),t._v(" "),i("div",{staticStyle:{flex:"unset","padding-left":"6px","padding-right":"6px","min-width":"30px"},on:{click:function(e){return t.$store.commit("stickyProp",{key:"booksInSeriesOpenInApp",value:!t.$store.state.sticky.booksInSeriesOpenInApp})}}},[t.$store.state.sticky.booksInSeriesOpenInApp?i("span",[i("img",{staticClass:"img-icon",attrs:{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNTEuNSA5My43IiB3aWR0aD0iMTUxLjUiIGhlaWdodD0iOTMuNyI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiNmZmY7fTwvc3R5bGU+PC9kZWZzPjxnPjxnPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggODAuN2w3NS43LTQ3LjJ2MTIuOEw3NS44IDkzLjcgMCA0Ni4zVjMzLjVsNzUuOCA0Ny4yeiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggMjEuNWE0OC4xNyA0OC4xNyAwIDAgMC00MC43IDIxLjkgMTIuOTQgMTIuOTQgMCAwIDEgMS44LTEuNmMyMS4zLTE3LjcgNTItMTMuNyA2OC43IDguNmwxMS4xLTcuMWE0OS44MiA0OS44MiAwIDAgMC00MC45LTIxLjgiLz48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik03NS44IDQzLjRhMjcuNzIgMjcuNzIgMCAwIDAtMjIuNCAxMS41IDIyLjcgMjIuNyAwIDAgMSAxMy41LTQuNGM4LjIgMCAxNS41IDQuMiAyMC40IDExLjNsMTAuNi02LjZhMjUuNzkgMjUuNzkgMCAwIDAtMjIuMS0xMS44TTI0LjYgMjQuMkM1NS44LS40IDk5LjkgNi4zIDEyMy40IDM5bC4yLjIgMTEuNS03LjFhNzAuODIgNzAuODIgMCAwIDAtMTE4LjYgMCA2MC42MyA2MC42MyAwIDAgMSA4LjEtNy45Ii8+PC9nPjwvZz48L3N2Zz4=",alt:""}})]):i("span",[i("img",{staticClass:"img-icon",attrs:{src:"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iNTEyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik01LjExMSAxOC45MDdoLjEyOWMuNTg1IDAgMS4xNzYgMCAxLjc2Mi4wMDUuMDc0IDAgLjE0My0uMDE5LjE2Ni4wOTguMzI4IDEuNjM2IDEuMzgzIDIuNTU5IDIuOSAyLjk5NSAxLjI0MS4zNTYgMi40OTUuMzY2IDMuNzQ5LjA4NCAxLjU1OC0uMzQ3IDIuNTgyLTEuMzI3IDMuMTM2LTIuODMxLjM2OS0xLjAwOC40OTQtMi4wNTMuNTA4LTMuMTE3LjAwNS0uMjcyLjAxNC0yLjIwMy0uMDA5LTIuNDc1bC0uMDQxLS4wMTRjLS4wMzcuMDctLjA3OS4xMzYtLjExNS4yMDYtMS4wMTkgMi4wMi0yLjgyNiAzLjE1OS00Ljg2MSAzLjIzOS00Ljc1LjE4OC03LjgxMi0yLjY3Mi03LjkzMi04LjI1OS0uMDIzLTEuMTExLjA4My0yLjE5OC4zODMtMy4yNjcuOTUtMy4zMzMgMy40NC01LjU0MSA3LjA5Ny01LjU2OSAyLjgyNi0uMDE5IDQuNjgxIDEuODE0IDUuMzU5IDMuMjk1LjAyMy4wNTIuMDYuMTA4LjExLjA4OVYuNDk4aDIuMDQzYzAgMTMuMTM5LjAwNSAxNS41NzIuMDA1IDE1LjU3Mi0uMDA1IDMuNjgtMS4yMzIgNi43MzYtNC43NSA3LjYwMy0zLjIwNS43OTItNy4zMzIuMjI1LTkuMDM5LTIuNjgxLS4zNjktLjYzMy0uNTQ0LTEuMzI3LS41OTktMi4wODZ6bTYuNzQ3LTE3LjE5NEM5LjQzNyAxLjY5IDYuODU0IDMuNjIxIDYuNTU0IDcuOTg1Yy0uMTg5IDIuNzY2LjY4MyA1LjcyOCAzLjI5OCA2Ljk2NiAxLjI3My42MDUgMy40MjcuNzAzIDQuOTk1LS40MDggMi4xOTUtMS41NTYgMi44OTEtNC41NDcgMi41MjctNy4yMTktLjQ0OC0zLjMzMy0yLjIwNS01LjYyNS01LjUxNi01LjYxMXoiIGZpbGw9IiNmZmYiLz48L3N2Zz4="}})])])])])}),[],!1,null,"097e3802",null).exports,j={name:"booksInSeries",props:["book"],mixins:[a.Z],components:{openInApp:f,goodReadsLink:S,booksInSeriesLink:I,filters:x},data:function(){return{inSeries:!1,series:{collection:null,toggle:!1}}},created:function(){this.seriesPage="series"===this.$route.name,this.series.collection=this.getBooksInSeries(),this.series.count=this.getSeriesCount();var t=this;_.each(this.series.collection,(function(e){if(e.books.length)return t.inSeries=!0,!1}))},mounted:function(){var t=this;this.$store.state.sticky.booksInSeriesToggle&&this.$nextTick((function(){t.$root.$emit("resizeSummary")}))},methods:{inLibraryLength:function(t){return _.filter(t.books,(function(t){return!t.notInLibrary})).length},checkFilter:function(t){if(t.notInLibrary)return this.$store.state.sticky.booksInSeriesAll;if(this.$store.state.sticky.booksInSeriesFinished)return!0;var e=_.get(t,"obj.progress");return!e||!e.match(/finished/i)},getBooksInSeries:function(){var t=this,e=[];return t.book.series&&_.each(t.book.series,(function(i,o){var s=_.find(t.$store.state.library.series,{asin:i.asin});if(s){var r=s.books;s.allBooks&&(r=s.allBooks),e.push({asin:i.asin,name:i.name,length:s.length,books:_.map(r,(function(e){var o=e.asin||e;if(_.includes(s.books,o)){var r=_.find(t.$store.state.library.books,{asin:o}),n=_.find(r.series,{asin:i.asin}),a=s.allBooks?e.bookNumbers:_.isArray(n.bookNumbers)?n.bookNumbers.join(","):n.bookNumbers;return{asin:e.asin||r.asin,bookNumbers:a,title:e.title||r.title,titleShort:e.titleShort||r.titleShort,obj:r}}return e.notInLibrary=!0,e.obj={authors:t.book.authors,notInLibrary:!0},e}))})}})),e.length>0?e:null},getSeriesCount:function(){var t=[];return _.each(this.series.collection,(function(e,i){e.books.length&&_.each(e.books,(function(e){e.notInLibrary||(t[i]||t.push(0),++t[i])}))})),t.join(", ")},booksInSeriesLabelClick:function(){var t=this;this.$store.commit("stickyProp",{key:"booksInSeriesToggle",value:!this.$store.state.sticky.booksInSeriesToggle}),this.$nextTick((function(){t.$root.$emit("resizeSummary")}))},numbersClass:function(t){var e=_.get(t,"obj.progress");return{finished:!(!e||!e.toLowerCase().match("finished")),reading:!(!e||e.toLowerCase().match("finished")),unfinished:!e,current:this.book.asin===_.get(t,"obj.asin"),"not-in-library":t.notInLibrary}},iconTippyContent:function(t){if(t.free&&t.notInLibrary)return"This book is free...";if(t.plus&&t.notInLibrary)return"In the plus catalog...";if(t.notInLibrary)return"Not in library...";var e=this.numbersClass(t),i="";return e.finished?i="Finished!":e.unfinished?i="Not started...":e.reading&&(i="Started..."),i},booksInSeriesIcon:function(t){if(t.free&&t.notInLibrary)return"minus-circle";if(t.plus&&t.notInLibrary)return"plus-circle";if(t.notInLibrary)return"ban";var e=this.numbersClass(t),i="";return e.finished?i="archive":e.unfinished?i="book":e.reading&&(i="book-reader"),i}}},D=(0,c.Z)(j,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.inSeries?i("div",{attrs:{"data-scroll-to-url-param":"&scrollToSeries=true"}},[i("div",{staticClass:"label hidden-section-label my-books-in-series-label",on:{click:t.booksInSeriesLabelClick}},[i("span",{staticClass:"heading"},[t._v("My books in the series")]),t._v(" "),i("span",{staticClass:"count"},[t._v(t._s(t.series.count))]),t._v(" "),i("font-awesome",{attrs:{fas:"",icon:t.$store.state.sticky.booksInSeriesToggle?"chevron-up":"chevron-down"}})],1),t._v(" "),t.$store.state.sticky.booksInSeriesToggle?i("div",{staticClass:"hidden-section my-books-in-series"},[i("filters",{attrs:{series:t.series}}),t._v(" "),t._l(t.series.collection,(function(e,o){return i("div",{key:e.asin,staticClass:"series-section"},[i("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"right",flipBehavior:["right","top","bottom"],maxWidth:300,allowHTML:!0},expression:"{ placement: 'right', flipBehavior: ['right', 'top', 'bottom'], maxWidth: 300, allowHTML: true }"}],staticClass:"series-heading",attrs:{content:"<div style='text-align: left;'>The first number is how many books you have in the series. The total is based on every single listing in the series page, including different versions or bundles with books you may already have.</div>"}},[i("div",{staticClass:"series-name"},[i("books-in-series-link",{attrs:{series:e,book:{},index:-1,seriesName:e.name}})],1),t._v(" "),i("div",{staticClass:"series-length"},[t._v("\n          "+t._s(t.inLibraryLength(e))+" / "+t._s(e.length)+"\n        ")])]),t._v(" "),t._l(e.books,(function(o,s){return t.checkFilter(o)?i("div",{key:o.asin,staticClass:"numbers-list-item",class:t.numbersClass(o),attrs:{"data-series-name":e.name}},[t.$store.state.sticky.booksInSeriesOpenInApp?i("open-in-app",{attrs:{size:14,book:o,muted:!0}}):i("good-reads-link",{attrs:{size:14,book:o,icon:!0,muted:!0}}),t._v(" "),i("span",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"left",flipBehavior:["left","top","bottom"]},expression:"{ placement: 'left', flipBehavior: ['left', 'top', 'bottom'] }"}],staticClass:"icon",attrs:{content:t.iconTippyContent(o)}},[i("font-awesome",{attrs:{fas:"",icon:t.booksInSeriesIcon(o)}})],1),t._v(" "),i("books-in-series-link",{attrs:{series:e,book:o,index:s}})],1):t._e()}))],2)}))],2):t._e()]):t._e()}),[],!1,null,null,null).exports,T={name:"arrayToHTML",data:function(){return{inputDataExists:null}},props:["label","array","delim","noLabel","chevron"],mixins:[a.Z],created:function(){this.inputDataExists=this.checkIfArrayHasData()},computed:{identifierClass:function(){return"details-"+_.kebabCase(this.label)}},methods:{checkIfArrayHasData:function(){return this.array&&!_.isEmpty(this.array)}}},N=(0,c.Z)(T,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.inputDataExists?i("div",{class:t.identifierClass},[t.noLabel?t._e():i("strong",{staticClass:"strong-label"},[t._v(t._s(t.label)+":")]),t._v(" "),t._l(t.array,(function(e,o){return i("span",{key:e.name+"("+o+")"},[i("span",[0!==o?i("span",[t.chevron?i("span",{staticClass:"chevron"},[i("font-awesome",{attrs:{fas:"",icon:"chevron-right"}})],1):i("span",[t._v(t._s(t.delim||", "))])]):t._e(),t._v(" "),i("a",{attrs:{href:t.makeUrl(t.label.toLowerCase(),e),target:"_blank",rel:"noopener noreferrer"}},[t._v(t._s(e.name))]),e.bookNumbers?i("span",{staticClass:"book-number"},[t._v("\n        (book\n        "),t._l(e.bookNumbers,(function(e,o){return i("span",[0!==o?i("span",[t._v(t._s(","))]):t._e(),i("span",[t._v(t._s(e))])])})),t._v(")")],2):t._e()])])}))],2):t._e()}),[],!1,null,"15f1a320",null).exports,C={name:"bookTags",props:["book"],mixins:[a.Z],data:function(){return{}}},z=(0,c.Z)(C,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"book-tags"},t._l(t.book.tags,(function(e){return i("a",{key:e.name,staticClass:"book-tag",attrs:{href:t.makeUrl("tags",e),target:"_blank",rel:"noopener noreferrer"}},[t._v("\n    "+t._s(e.name)+"\n  ")])})),0)}),[],!1,null,"e6a33df2",null).exports,A={name:"bookSummary",props:["book","bookSummary","mobileWidth"],mixins:[a.Z],components:{arrayToHTML:N,bookTags:z},data:function(){return{summary:{readmore:{toggle:!1,exists:!1},maxHeight:null,maxHeightTemp:null,fullHeight:null}}},watch:{summaryHTML:function(t){t&&this.getSummaryMaxHeight()}},computed:{showSubtitle:function(){var t=this.$store.state.sticky.bookDetailSettings.titleShort,e=!!this.book.subtitle,i=!!this.book.title&&!!this.book.titleShort&&this.book.title!==this.book.titleShort;return t&&(e||i)},summaryHTML:function(){return this.book.summary||this.bookSummary||this.book.blurb},showReadMore:function(){var t=this.summary;if(t.maxHeightTemp)return t.fullHeight>t.maxHeightTemp}},mounted:function(){this.getSummaryMaxHeight()},created:function(){this.$root.$on("afterWindowResize",this.windowResized),this.$root.$on("resizeSummary",this.getSummaryMaxHeight)},beforeDestroy:function(){this.$root.$off("afterWindowResize",this.windowResized),this.$root.$off("resizeSummary",this.getSummaryMaxHeight)},methods:{getSummaryMaxHeight:function(){this.summaryHTML&&this.$nextTick((function(){var t=_.get(this.$refs,"summaryMetaTop.offsetHeight",0)+300,e=_.get(this.$refs,"summary.offsetHeight",0);this.summary.fullHeight=e;var i=document.querySelector("#ale-bookdetails .information"),o=_.get(i,"offsetHeight",0),s=o;(this.mobileWidth||e>t&&t>o)&&(s=t),this.summary.maxHeight=s,this.summary.maxHeightTemp=s}))},windowResized:function(){this.getSummaryMaxHeight()},summaryReadMoreclick:function(){if(this.summary.readmore.toggle=!this.summary.readmore.toggle,this.summary.maxHeight=this.summary.readmore.toggle?"none":this.summary.maxHeightTemp,!this.summary.readmore.toggle){var t=this.$refs.readMoreBtn.getBoundingClientRect().top;this.$nextTick((function(){scroll({top:this.$refs.readMoreBtn.getBoundingClientRect().top+window.pageYOffset-t})}))}}}},$=(0,c.Z)(A,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"summaryWrapper",staticClass:"book-summary-wrapper",class:{expanded:t.summary.readmore.toggle},style:{maxHeight:t.summary.maxHeight?t.summary.maxHeight+"px":null,paddingBottom:t.summary.readmore.toggle?"50px":"0px"}},[i("div",{ref:"summary",staticClass:"book-summary"},[i("div",{ref:"summaryMetaTop",staticClass:"summary-meta-top"},[i("h2",{staticClass:"book-title"},[i("a",{attrs:{href:t.makeUrl("book",t.book.asin),target:"_blank",rel:"noopener noreferrer"}},[t.$store.state.sticky.bookDetailSettings.titleShort?i("span",[t._v(t._s(t.book.titleShort||t.book.title))]):i("span",[t._v(t._s(t.book.title||t.book.titleShort))])])]),t._v(" "),t.showSubtitle?i("div",{staticClass:"subblementary-book-title"},[t._v("\n        "+t._s(t.book.subtitle||t.book.title)+"\n      ")]):t._e(),t._v(" "),t.book.categories?i("div",{staticClass:"categories"},[t.book.categories?i("arrayToHTML",{attrs:{label:"categories",noLabel:!0,array:t.book.categories,chevron:!0}}):t._e()],1):t._e(),t._v(" "),i("div",{staticClass:"inline-children smoll-text"},[t.book.tags?i("book-tags",{attrs:{book:t.book}}):t._e(),t._v(" "),i("div",{staticClass:"info-tags"},[t.book.storePageChanged?i("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{maxWidth:300},expression:"{ maxWidth: 300 }"}],staticClass:"info-tag store-page-changed",attrs:{content:"There is a store page for the book, but it's for a different version of the book. <br><br>This is the reason why some data is unavailable."}},[i("font-awesome",{attrs:{icon:["fas","shopping-bag"]}}),t._v("\n            changed\n          ")],1):t.book.storePageMissing?i("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{maxWidth:300},expression:"{ maxWidth: 300 }"}],staticClass:"info-tag store-page-missing",attrs:{content:"Store page was possibly removed or it became unavailable in your region since it was added. In some cases there may still be a store page for a different version of the book. <br><br>This is the reason why some data is unavailable."}},[i("font-awesome",{attrs:{icon:["fas","shopping-bag"]}}),t._v("\n            missing\n          ")],1):t._e(),t._v(" "),t.book.fromPlusCatalog?i("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{maxWidth:300},expression:"{ maxWidth: 300 }"}],staticClass:"info-tag plus-catalog",class:{"plus-catalog-unavailable":t.book.unavailable},attrs:{content:t.book.unavailable?"Used to be in the plus catalog but you no longer have access to it":"In the plus catalog"}},[i("font-awesome",{attrs:{fas:"",icon:["fas","plus-circle"]}}),t._v("\n            Plus catalog\n          ")],1):t._e(),t._v(" "),t.book.whispersync?i("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{maxWidth:300},expression:"{ maxWidth: 300 }"}],staticClass:"info-tag whispersync",class:{owned:"owned"===t.book.whispersync},attrs:{content:"owned"===t.book.whispersync?"I own the Kindle version":"Kindle book available for purchase..."}},[i("font-awesome",{attrs:{icon:["fas","headphones-alt"]}}),t._v("\n            whispersync\n          ")],1):t._e()]),t._v(" "),t.book.releaseDate?i("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"release-date",attrs:{content:"YYYY-MM-DD"}},[i("span",{staticClass:"strong-label"},[t._v("Released:")]),t._v(" "),i("span",[t._v(t._s(t.book.releaseDate))])]):t._e()],1),t._v(" "),i("div",{staticClass:"meta-padding"})]),t._v(" "),t.summaryHTML?i("div",{ref:"summaryInnerWrap",staticClass:"summary-inner-wrap",domProps:{innerHTML:t._s(t.summaryHTML)}}):t._e()]),t._v(" "),t.showReadMore?i("div",{ref:"readMoreBtn",staticClass:"summary-read-more",on:{click:t.summaryReadMoreclick}},[i("span",[t._v(t._s(t.summary.readmore.toggle?"Read less":"Read more"))]),t._v(" "),i("font-awesome",{attrs:{fas:"",icon:t.summary.readmore.toggle?"chevron-up":"chevron-down"}})],1):t._e()])}),[],!1,null,null,null).exports,O={name:"collectionsDrawer",props:["book"],data:function(){return{collections:null,store:this.$store.state}},created:function(){this.compileCollections()},mounted:function(){var t=this;this.$store.state.sticky.collectionsDrawerToggle&&this.$nextTick((function(){t.$root.$emit("resizeSummary")}))},methods:{compileCollections:function(){var t=this.book.collectionIds,e=this.store.library.collections;t&&e&&(this.collections=_.filter(e,(function(e){return _.includes(t,e.id)})))},labelClick:function(){var t=this;this.$store.commit("stickyProp",{key:"collectionsDrawerToggle",value:!this.$store.state.sticky.collectionsDrawerToggle}),this.$nextTick((function(){t.$root.$emit("resizeSummary")}))}}},E=(0,c.Z)(O,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.collections?i("div",[i("div",{staticClass:"label hidden-section-label",on:{click:t.labelClick}},[i("span",{staticClass:"heading"},[t._v("This book in collections")]),t._v(" "),i("span",{staticClass:"count"},[t._v(t._s(t.collections.length))]),t._v(" "),i("font-awesome",{attrs:{fas:"",icon:t.$store.state.sticky.collectionsDrawerToggle?"chevron-up":"chevron-down"}})],1),t._v(" "),t.$store.state.sticky.collectionsDrawerToggle?i("div",{staticClass:"hidden-section"},t._l(t.collections,(function(e){return i("router-link",{key:e.id,staticClass:"collection-link",attrs:{to:{name:"collection",params:{collection:e.id},query:{book:t.book.asin}}}},[i("span",{staticClass:"text"},[t._v(t._s(e.title))]),t._v(" "),i("span",{staticClass:"total-books"},[t._v(t._s(e.books.length))])])})),1):t._e()]):t._e()}),[],!1,null,"dcf1166a",null).exports,B={name:"bookDetailsSettings",data:function(){var t=this,e=this.$store.state,i=this.$store.state.sticky;return{showSettings:!0,settings:[{type:"heading",label:"Grid book cover"},{enabled:!0,type:"checkbox",label:"Show sample play button",info:'<img src="images/info/sample-play-button.jpg" class="tippy-info-image" />',parent:"sampleButton",value:i.bookDetailSettings.playButton,event:function(e){var o=[{key:"sticky.bookDetailSettings.playButton",value:e.target.checked}];i.bookDetailSettings.cloudPlayer&&(o.push({key:"sticky.bookDetailSettings.cloudPlayer",value:!e.target.checked}),t.mutateChildren("cloudButton","value",!e.target.checked)),t.mutateChildren("sampleButton","value",e.target.checked),t.$store.commit("prop",o)}},{enabled:!0,type:"checkbox",label:"Show cloud player button",parent:"cloudButton",info:'You have to be logged in. Try opening <a targer="_blank" href="'+e.urlOrigin+'/library">your library</a> first before opening the cloud player.<br>If you can open your library, you can also open the cloud player through the ALE gallery.<br><br><img src="images/info/book-cover-cloud-player-button.jpg" class="tippy-info-image" />',interactiveTippy:!0,value:i.bookDetailSettings.cloudPlayer,event:function(e){var o=[{key:"sticky.bookDetailSettings.cloudPlayer",value:e.target.checked}];i.bookDetailSettings.playButton&&(o.push({key:"sticky.bookDetailSettings.playButton",value:!e.target.checked}),t.mutateChildren("sampleButton","value",!e.target.checked)),t.mutateChildren("cloudButton","value",e.target.checked),t.$store.commit("prop",o)}},{enabled:!0,type:"checkbox",label:"Show blurb on hover",info:'This is never visible on mobile <br/><img src="images/info/blurb-hover-corner.jpg" class="tippy-info-image" />',value:i.bookDetailSettings.blurb,event:function(e){t.$store.commit("prop",{key:"sticky.bookDetailSettings.blurb",value:e.target.checked})}},{enabled:!0,type:"checkbox",label:"Show whispersync (owned) indicator",info:'<img src="images/info/cover-whispersync-indicator.jpg" class="tippy-info-image" />',value:i.bookDetailSettings.whispersync,event:function(e){t.$store.commit("prop",{key:"sticky.bookDetailSettings.whispersync",value:e.target.checked})}},{enabled:!0,type:"checkbox",label:"Show plus catalog indicator",info:'<img src="images/info/cover-plus-calatog-indicator.jpg" class="tippy-info-image" />',value:i.bookDetailSettings.plusCatalog,event:function(e){t.$store.commit("prop",{key:"sticky.bookDetailSettings.plusCatalog",value:e.target.checked})}},{enabled:!0,type:"checkbox",label:"Show favorite indicator",info:'<strong>The RED dot</strong><br><img src="images/info/cover-favorite-finished-indicators.jpg" class="tippy-info-image" />',value:i.bookDetailSettings.favorite,event:function(e){t.$store.commit("prop",{key:"sticky.bookDetailSettings.favorite",value:e.target.checked})}},{enabled:!0,type:"checkbox",label:"Show finished indicator",info:'<strong>The GREEN dot</strong><br><img src="images/info/cover-favorite-finished-indicators.jpg" class="tippy-info-image" />',value:i.bookDetailSettings.finished,event:function(e){t.$store.commit("prop",{key:"sticky.bookDetailSettings.finished",value:e.target.checked})}},{type:"divider"},{type:"heading",label:"Above summary"},{enabled:!0,type:"checkbox",label:"Prefer short title",info:"This makes the title a little more readable without actually removing anything from the title, just diplaying it differently. Short title is used if available (for newly extracted data since v.0.2.9). Subtitle is shown below with a smaller font similar to Audible store pages. <br/><br/><strong>In case subtitle is not available, the full title is shown below instead, so you always get to see the full title either way.</strong><br/><br/><img src='images/info/prefer-short-title.jpg' class='tippy-info-image' />",value:i.bookDetailSettings.titleShort,event:function(e){t.$store.commit("prop",{key:"sticky.bookDetailSettings.titleShort",value:e.target.checked}),t.$nextTick((function(){t.$root.$emit("resizeSummary")}))}},{type:"divider"},{type:"heading",label:"Sidebar"},{enabled:!0,type:"checkbox",label:"Show sidebar",info:'<strong>The entire sidebar!</strong> <br><img src="images/info/sidebar.jpg" class="tippy-info-image" />',value:i.bookDetailSettings.sidebar.show,event:function(e){var i=e.target.checked;t.$store.commit("prop",{key:"sticky.bookDetailSettings.sidebar.show",value:i}),t.$nextTick((function(){t.$root.$emit("resizeSummary")})),t.mutateChildren("sidebar","enabled",i)},init:function(e){t.mutateChildren("sidebar","enabled",i.bookDetailSettings.sidebar.show)}},{enabled:!0,type:"checkbox",label:"Show book cover",parent:"sidebar",info:'There is also an easy access toggle swith on the left side of the sidebar (arrow up) <br><img src="images/info/sidebar-cover.jpg" class="tippy-info-image" />',value:!i.bookDetailsCollapsedCover,event:function(e){t.$store.commit("prop",{key:"sticky.bookDetailsCollapsedCover",value:!e.target.checked}),t.$nextTick((function(){t.$root.$emit("resizeSummary")}))}},{enabled:!0,type:"checkbox",label:"Show icon toolbar",parent:"sidebar",info:'<img src="images/info/sidebar-toolbar.jpg" class="tippy-info-image" />',value:i.bookDetailSettings.sidebar.iconToolbar,event:function(e){t.$store.commit("prop",{key:"sticky.bookDetailSettings.sidebar.iconToolbar",value:e.target.checked}),t.$nextTick((function(){t.$root.$emit("resizeSummary")}))}},{enabled:!0,type:"checkbox",label:"Show main details",parent:"sidebar",info:'There is also an easy access toggle swith on the left side of the sidebar (arrow up) <br><img src="images/info/sidebar-main-info.jpg" class="tippy-info-image" />',value:!i.bookDetailsCollapsedDetails,event:function(e){t.$store.commit("prop",{key:"sticky.bookDetailsCollapsedDetails",value:!e.target.checked}),t.$nextTick((function(){t.$root.$emit("resizeSummary")}))}},{enabled:!0,type:"checkbox",label:"Show collections list",parent:"sidebar",info:'If a book is in a collection... <br><img src="images/info/sidebar-collections-list.jpg" class="tippy-info-image" />',value:i.bookDetailSettings.sidebar.collectionsList,event:function(e){t.$store.commit("prop",{key:"sticky.bookDetailSettings.sidebar.collectionsList",value:e.target.checked}),t.$nextTick((function(){t.$root.$emit("resizeSummary")}))}},{enabled:!0,type:"checkbox",label:"Show series list",parent:"sidebar",info:'If a book is in a series... <br><img src="images/info/sidebar-series-list.jpg" class="tippy-info-image" />',value:i.bookDetailSettings.sidebar.seriesList,event:function(e){t.$store.commit("prop",{key:"sticky.bookDetailSettings.sidebar.seriesList",value:e.target.checked}),t.$nextTick((function(){t.$root.$emit("resizeSummary")}))}},{type:"divider"},{type:"heading",label:"Bottom of the details view"},{enabled:!0,type:"checkbox",label:"Show carousel",info:'<img src="images/info/carousel.jpg" class="tippy-info-image" />',value:i.bookDetailSettings.carousel,event:function(e){t.$store.commit("prop",{key:"sticky.bookDetailSettings.carousel",value:e.target.checked})}}]}},created:function(){var t=_.filter(this.settings,"init");_.each(t,(function(t){t.init(t)})),this.dividerIds()},mounted:function(){this.$nextTick((function(){this.setMinHeight()}))},methods:{mutateChildren:function(t,e,i){var o=_.filter(this.settings,{parent:t});_.each(o,(function(t){t[e]=i}))},dividerIds:function(){var t=_.filter(this.settings,{type:"divider"});_.each(t,(function(t,e){t.label="divider-"+e}))},setMinHeight:function(){var t=this.$el.offsetHeight;this.$store.state.sticky.bookDetailSettings.minHeight,this.$store.commit("prop",{key:"sticky.bookDetailSettings.minHeight",value:t+"px"})}}},Y=(0,c.Z)(B,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"settings-outer-wrapper"},[i("div",{staticClass:"tabs"},[i("h3",{class:{active:t.showSettings},on:{click:function(e){t.showSettings=!0}}},[t._v("Settings")]),t._v(" "),i("h3",{class:{active:!t.showSettings},on:{click:function(e){t.showSettings=!1}}},[t._v("Shortcuts")])]),t._v(" "),i("div",[t.showSettings?i("div",{staticClass:"settings-wrapper"},[i("div",{staticClass:"settings-info"},[t._v("\n        Your browser will remember these settings!\n      ")]),t._v(" "),t._l(t.settings,(function(e){return i("div",{key:e.label,staticClass:"setting",class:{disabled:!e.enabled}},["heading"===e.type?i("div",{staticClass:"heading"},[i("h3",[t._v(t._s(e.label))])]):"divider"===e.type?i("div",{staticClass:"divider"}):i("div",{staticClass:"inner-wrapper"},[i("label",[i("input",{attrs:{type:"checkbox",disabled:!e.enabled},domProps:{checked:e.value},on:{change:e.event}}),t._v(" "),t._m(0,!0),t._v(" "),i("div",{staticClass:"label-text"},[i("span",[t._v(t._s(e.label))])])]),t._v(" "),e.info?i("font-awesome",{directives:[{name:"tippy",rawName:"v-tippy",value:{trigger:"mouseenter focus click",interactive:e.interactiveTippy,hideOnClick:!1,delay:0,placement:"right",flipBehavior:["right","top","left","bottom"],allowHTML:!0},expression:"{ trigger: 'mouseenter focus click', interactive: setting.interactiveTippy, hideOnClick: false, delay: 0, placement: 'right', flipBehavior: ['right', 'top', 'left', 'bottom'], allowHTML: true, }"}],staticClass:"more-info-icon",attrs:{content:e.info,icon:["fas","question-circle"]}}):t._e()],1)])}))],2):i("div",{staticClass:"shortcuts-wrapper"},[t._m(1)])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"visual-checkbox"},[e("div",{staticClass:"switch"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("table",[i("tr",[i("th",[t._v("description")]),t._v(" "),i("th",[t._v("shortcut")])]),t._v(" "),i("tr",[i("td",[t._v("Close")]),t._v(" "),i("td",[t._v("Esc")])]),t._v(" "),i("tr",[i("td",[t._v("Open adjacent book")]),t._v(" "),i("td",[t._v("Arrow Keys")])]),t._v(" "),i("tr",[i("td",[t._v("Open adjacent book")]),t._v(" "),i("td",[t._v("TAB & Shift+TAB")])])])}],!1,null,"60520970",null).exports,W=(0,c.Z)({name:"sidebarFlipper",data:function(){return{detailSettings:this.$store.state.sticky.bookDetailSettings}},methods:{flip:function(){this.$store.commit("prop",{key:"sticky.bookDetailSettings.reverseDirection",value:!this.detailSettings.reverseDirection})}}},(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"action-reverse-direction",class:{flip:t.detailSettings.reverseDirection}},[i("font-awesome",{attrs:{icon:["fas","retweet"]},on:{click:t.flip}})],1)}),[],!1,null,"37ca0bd8",null).exports,R=(0,c.Z)({name:"sidebarFlipper",data:function(){return{detailSettings:this.$store.state.sticky.bookDetailSettings}},methods:{flip:function(){this.$store.commit("prop",{key:"sticky.bookDetailSettings.hideFirstSection",value:!this.detailSettings.hideFirstSection})}}},(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"details-first-hider",class:{flip:t.detailSettings.hideFirstSection},on:{click:t.flip}},[t.detailSettings.hideFirstSection?i("font-awesome",{attrs:{icon:["fas","fa-eye-slash"]}}):i("font-awesome",{attrs:{icon:["fas","fa-eye"]}})],1)}),[],!1,null,"e679abf6",null).exports,Z={name:"aleBookBasicInfo",props:["book","goodreads"],components:{goodReadsLink:S,arrayToHTML:N,starRating:i(5700).Z},data:function(){return{ratingTippyOpts:{placement:"top",flipBehavior:["top","right","left","bottom"],allowHTML:!0},ratingLegend:'\n        <style>\n        .ratings-tippy {\n          margin: 0; \n          padding: 20px 13px 20px 27px;\n        }\n        .ratings-tippy li {\n          padding-bottom: 5px;\n        }\n        </style>\n        <ol class="ratings-tippy">\n          <li>Not for me</li>\n          <li>It’s okay</li>\n          <li>Pretty good</li>\n          <li>It’s great</li>\n          <li>I love it</li>\n        </ol>\n      '}},methods:{myRatingLabel:function(t){switch(parseFloat(t)){case 1:return"Not for me";case 2:return"It’s okay";case 3:return"Pretty good";case 4:return"It’s great";case 5:return"I love it"}}}},P=(0,c.Z)(Z,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"basic-info"},[t.book.authors?i("arrayToHTML",{attrs:{label:"Author",array:t.book.authors}}):t._e(),t._v(" "),t.book.narrators?i("arrayToHTML",{attrs:{label:"Narrator",array:t.book.narrators}}):t._e(),t._v(" "),t.book.series?i("arrayToHTML",{attrs:{label:"Series",array:t.book.series}}):t._e(),t._v(" "),t.book.publishers?i("arrayToHTML",{attrs:{label:"Publisher",array:t.book.publishers}}):t._e(),t._v(" "),t.book.length?i("div",[i("strong",{staticClass:"strong-label"},[t._v("Length:")]),t._v("\n    "+t._s(t.book.length)+"\n  ")]):t._e(),t._v(" "),t.book.language?i("div",{staticClass:"language"},[i("strong",{staticClass:"strong-label"},[t._v("Language:")]),t._v(" "),i("span",[t._v(t._s(t.book.language))])]):t._e(),t._v(" "),t.book.format?i("div",{staticClass:"format"},[i("strong",{staticClass:"strong-label"},[t._v("Format:")]),t._v(" "),i("span",[t._v(t._s(t.book.format))])]):t._e(),t._v(" "),t.book.releaseDate?i("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"format",attrs:{content:"YYYY-MM-DD"}},[i("strong",{staticClass:"strong-label"},[t._v("Release date:")]),t._v(" "),i("span",[t._v(t._s(t.book.releaseDate))])]):t._e(),t._v(" "),t.book.rating?i("div",{staticClass:"rating"},[i("strong",{directives:[{name:"tippy",rawName:"v-tippy",value:t.ratingTippyOpts,expression:"ratingTippyOpts"}],staticClass:"strong-label",attrs:{content:t.ratingLegend}},[t._v("Rating:")]),t._v(" "),i("star-rating",{attrs:{size:12,rating:t.book.rating,number:"true",ratings:t.book.ratings}})],1):t._e(),t._v(" "),t.book.myRating?i("div",{staticClass:"own-rating"},[i("strong",{directives:[{name:"tippy",rawName:"v-tippy",value:t.ratingTippyOpts,expression:"ratingTippyOpts"}],staticClass:"strong-label",attrs:{content:t.ratingLegend}},[t._v("My rating: ")]),t._v(" "),i("star-rating",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"right",flipBehavior:["right","top","bottom"]},expression:"{ placement: 'right', flipBehavior: ['right', 'top', 'bottom']  }"}],attrs:{size:12,content:t.myRatingLabel(t.book.myRating),rating:t.book.myRating,number:"true"}})],1):t._e()],1)}),[],!1,null,"0325208c",null).exports,U=(0,c.Z)({name:"favoriteBook",props:["topRight","size"]},(function(){var t=this,e=t.$createElement;return(t._self._c||e)("font-awesome",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"favorite",class:{"top-right":t.topRight},style:{width:(t.size||30)+"px",height:"auto"},attrs:{fas:"",icon:"heart",content:"This book is one of my favorites!"}})}),[],!1,null,"35612b41",null).exports;var H=i(2271),Q=i(3235);const F={name:"book-info-toolbar",props:["book"],components:{goodReadsLink:S,favoriteBook:U,sampleButton:H.Z,openInApp:f,openWebPlayer:Q.Z},data:function(){return{size:20}}},G={name:"bookDetails",props:["asin"],components:{bookBasicInfo:P,bookInfoToolbar:(0,c.Z)(F,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"book-info-toolbar"},[t.book.favorite?i("favorite-book",{attrs:{size:t.size,book:t.book}}):t._e(),t._v(" "),i("sampleButton",{attrs:{size:t.size,book:t.book}}),t._v(" "),i("good-reads-link",{attrs:{size:t.size,book:t.book,icon:!0}}),t._v(" "),i("open-in-app",{attrs:{size:t.size,book:t.book}}),t._v(" "),i("open-web-player",{attrs:{size:t.size,book:t.book,icon:!0}})],1)}),[],!1,null,null,null).exports,carousel:y,booksInSeries:D,arrayToHTML:N,bookSummary:$,collectionsDrawer:E,bookDetailsSettings:Y,sidebarFlipper:W,detailsFirstHider:R},mixins:[o.Z,s.Z,r.Z,n.Z,a.Z],data:function(){return{store:this.$store.state,sticky:this.$store.state.sticky,book:null,index:null,maxWidth:"unset",loading:!0,clickedBook:null,peopleAlsoBoughtJSON:null,bookSummaryJSON:null,scrpt:null}},created:function(){this.index=_.findIndex(this.$store.state.chunkCollection,{asin:this.asin}),this.book=this.$store.state.chunkCollection[this.index],this.loadJSON()},mounted:function(){this.$nextTick((function(){this.clickedBook=document.querySelector('.ale-book[data-asin="'+this.book.asin+'"]')||document.querySelector('.ale-row[data-asin="'+this.book.asin+'"]'),this.resetScroll(),this.maxWidth=this.repositionBookDetails()+"px",this.$updateQuery({query:"book",value:this.book.asin}),this.$store.commit("prop",{key:"timeStamp",value:(new Date).getTime()}),this.$root.$on("afterWindowResize",this.onWindowResize),this.loading=!1,this.scrollToCarousel(),this.scrollToMyBooksInTheSeries()}))},beforeDestroy:function(){this.scrpt&&(this.scrpt.remove(),this.scrpt=null),this.$root.$off("afterWindowResize",this.onWindowResize),this.peopleAlsoBoughtJSON=null,this.bookSummaryJSON=null,this.$store.commit("prop",[{key:"bookDetails.book",value:null},{key:"bookDetails.index",value:-1}]),this.$store.commit("prop",{key:"bookDetailSettingsOpen",value:!1})},computed:{peopleAlsoBought:function(){return this.book.peopleAlsoBought||this.peopleAlsoBoughtJSON},getMaxWidth:function(){return"spreadsheet"===this.sticky.viewMode||window.innerWidth>800?this.maxWidth:"800px"},mobileWidth:function(){return this.store.windowWidth<=688}},methods:{collapseBtnClicked:function(t){var e=this;this.$store.commit("stickyProp",{key:t,value:!this.sticky[t]}),this.$nextTick((function(){e.$root.$emit("resizeSummary")}))},loadJSON:function(t){if(this.store.standalone){var e=this,i=document.createElement("script");this.scrpt=i,i.src="data/split-book-data/"+e.book.asin+"."+this.store.library.extras.cacheID+".js",i.type="text/javascript",i.onload=function(){e.bookSummaryJSON=window.bookSummaryJSON,window.bookSummaryJSON=!0,e.peopleAlsoBoughtJSON=window.peopleAlsoBoughtJSON,window.peopleAlsoBoughtJSON=!0,i=null},i.onerror=function(){i=null,setTimeout((function(){t||e.loadJSON("afterError")}),1e3)},document.head.appendChild(i)}},onWindowResize:function(t){t.widthChanged&&(this.maxWidth=this.repositionBookDetails()+"px",this.resetScroll())},changeUrl:function(){_.get(this.$route,"query.book")!==this.book.asin&&this.$router.replace({query:{book:this.book.asin}})},resetScroll:function(){this.$nextTick((function(){if("grid"===this.sticky.viewMode){var t=document.querySelector("#ale-navigation"),e=t?t.offsetHeight:0;scroll({top:this.clickedBook.offsetTop-e-25,behavior:"auto"})}else document.querySelector(".list-view-inner-wrap").scroll({top:this.clickedBook.offsetTop-45})}))},scrollToCarousel:function(){this.$route.query.carousel&&(this.$updateQueries({carousel:null}),this.$nextTick((function(){var t=parseFloat(this.$route.query.y);"grid"===this.sticky.viewMode?scroll({top:t}):document.querySelector(".list-view-inner-wrap").scroll({top:t})})))},scrollToMyBooksInTheSeries:function(){this.$route.query.scrollToSeries&&(this.$updateQueries({scrollToSeries:null}),this.$store.commit("stickyProp",{key:"booksInSeriesToggle",value:!0}),this.$nextTick((function(){var t=this.$el.querySelector(".my-books-in-series-label");if(t){var e=t.getBoundingClientRect().top+window.scrollY,i=document.querySelector("#ale-navigation");e=e-(i?i.offsetHeight:0)-25,"grid"===this.sticky.viewMode?scroll({top:e,behavior:"smooth"}):document.querySelector(".list-view-inner-wrap").scroll({top:e,behavior:"smooth"})}})))},repositionBookDetails:function(){var t=document.querySelector(".ale-books"),e=t.querySelector(".ale-book")?t.querySelectorAll(".ale-book"):t.querySelector("table tbody").querySelectorAll(".ale-row"),i={};i.el=e[this.index],i.index=this.index,i.width=i.el.getBoundingClientRect().width,i.siblings=e;var o={};o.el=t,o.width=o.el.getBoundingClientRect().width;var s={};s.cols=Math.floor(o.width/i.width)||1,s.cols<2?s.rowEndEl=i.el:(s.currentRow=Math.floor(i.index/s.cols)+1,s.rowEnd=s.currentRow*s.cols,s.getRowEndEl=function(t){var e=i.siblings[t];return e||(e=s.getRowEndEl(--t)),e},s.rowEndEl=s.getRowEndEl(s.rowEnd-1));var r=document.querySelector(".target-row-end");return r&&r.classList.remove("target-row-end"),s.rowEndEl.classList.add("target-row-end"),s.rowEndEl.parentNode.insertBefore(this.$refs.bookDetails,s.rowEndEl.nextSibling),"spreadsheet"!==this.sticky.viewMode&&this.repositionBookDetailsArrow(i.el),"spreadsheet"===this.sticky.viewMode?o.width-60:i.width*s.cols},repositionBookDetailsArrow:function(t){var e=t.getBoundingClientRect().left+window.scrollX+t.offsetWidth/2;this.$refs.arrow.style.left=e+"px"},openAdjacentBookDetails:_.throttle((function(t){var e=this;if("grid"===this.sticky.viewMode)switch(t.srcKey){case"left":case"tabShift":e.keyboardMove("prev");break;case"right":case"tab":e.keyboardMove("next");break;case"up":case"down":e.keyboardMove_inGrid_vertically(t)}else switch(t.srcKey){case"left":case"up":case"tabShift":e.keyboardMove("prev");break;case"right":case"down":case"tab":e.keyboardMove("next")}}),70,{leading:!1,trailing:!0}),keyboardMove:function(t){var e="prev"===t,i=e?this.index-1:this.index+1,o=this.store.chunkCollection[i];(e?i>-1:i<this.store.chunkCollection.length)&&(!e&&i>this.store.chunkCollection.length-2?(this.$store.commit("chunkCollectionAdd"),this.$nextTick((function(){this.$root.$emit("book-clicked",o.asin)}))):this.$root.$emit("book-clicked",o.asin))},keyboardMove_inGrid_vertically:function(t){var e=this,i={};i.el=document.querySelector(".ale-books"),i.width=i.el.offsetWidth;var o={};o.el=this.clickedBook,o.index=this.index,o.width=o.el.offsetWidth;var s=Math.floor(i.width/o.width);this.$store.commit("prop",[{key:"bookDetails.book",value:null},{key:"bookDetails.index",value:-1}]),void 0!==_.get(this.$route,"query.book")&&this.$updateQuery({query:"book",value:null});var r=function(){var i=-1;if("up"===t.srcKey)(i=e.index-s)<0&&(i=0);else{i=e.index+s;var o=e.store.chunkCollection.length-1;i>o&&(i=o)}return i}(),n=e.store.chunkCollection[r];"down"===t.srcKey&&r>e.store.chunkCollection.length-2?(this.$store.commit("chunkCollectionAdd"),this.$nextTick((function(){this.$root.$emit("book-clicked",n.asin)}))):this.$root.$emit("book-clicked",n.asin)},closeBookDetails:function(){this.$store.commit("prop",[{key:"bookDetails.book",value:null},{key:"bookDetails.index",value:-1}]),void 0!==_.get(this.$route,"query.book")&&this.$updateQuery({query:"book",value:null})},progressTooltip:function(t){if("finished"===t.progress.toLowerCase().trim()){var e=this.timeStringToSeconds(t.length);return"Finished: ( "+this.secondsToTimeString(e)+" )"}var i=this.timeStringToSeconds(t.progress),o=this.timeStringToSeconds(t.length),s=o-i;return"Progress: "+this.secondsToTimeString(s)+" / "+this.secondsToTimeString(o)},progressInfo:function(t){if(t.progress&&t.length){if("finished"===t.progress.toLowerCase().trim()){var e=this.timeStringToSeconds(t.length);return'<div class="stretch-center" style="flex: 1;"><strong>Finished!</strong> ( '+this.secondsToTimeString(e,!0)+" )</div>"}var i=this.timeStringToSeconds(t.progress),o=this.timeStringToSeconds(t.length),s=o-i;return"<strong>Progress: </strong><div>"+this.secondsToTimeString(s,!0)+" / "+this.secondsToTimeString(o,!0)+"</div>"}return'<div class="stretch-center" style="flex: 1;"><strong>Length:</strong> '+(t.length||"unkown")+"</div>"}}},q=(0,c.Z)(G,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.book?i("div",{directives:[{name:"shortkey",rawName:"v-shortkey.once",value:["esc"],expression:"['esc']",modifiers:{once:!0}}],ref:"bookDetails",class:{"spreadsheet-details":"spreadsheet"===t.sticky.viewMode,"mobile-width":t.mobileWidth},attrs:{id:"ale-bookdetails"},on:{shortkey:t.closeBookDetails}},["spreadsheet"!==t.sticky.viewMode?i("div",{ref:"arrow",staticClass:"arrow"}):t._e(),t._v(" "),i("div",{directives:[{name:"shortkey",rawName:"v-shortkey",value:{left:["arrowleft"],up:["arrowup"],right:["arrowright"],down:["arrowdown"],tab:["tab"],tabShift:["tab","shift"]},expression:"{ left: ['arrowleft'], up: ['arrowup'], right: ['arrowright'], down: ['arrowdown'], tab: ['tab'], tabShift: ['tab', 'shift'] }"}],class:{"book-detail-settings-open":t.store.bookDetailSettingsOpen},attrs:{id:"book-info-container"},on:{shortkey:t.openAdjacentBookDetails}},[i("div",{staticClass:"inner-wrap",style:{maxWidth:t.getMaxWidth,minHeight:t.store.bookDetailSettingsOpen?t.sticky.bookDetailSettings.minHeight:null}},[t.mobileWidth?i("details-first-hider"):t._e(),t._v(" "),i("sidebar-flipper"),t._v(" "),i("font-awesome",{staticClass:"book-details-info",class:{active:t.store.bookDetailSettingsOpen},attrs:{icon:["fas","cog"]},on:{click:function(e){return t.$store.commit("prop",{key:"bookDetailSettingsOpen",value:!t.store.bookDetailSettingsOpen})}}}),t._v(" "),t.store.bookDetailSettingsOpen?i("book-details-settings"):t._e(),t._v(" "),i("div",{staticClass:"top details-wrap",class:{"reverse-direction":t.sticky.bookDetailSettings.reverseDirection}},[!t.sticky.bookDetailSettings.sidebar.show||!t.sticky.bookDetailSettings.reverseDirection&&t.sticky.bookDetailSettings.hideFirstSection&&t.mobileWidth?t._e():i("div",{ref:"information",staticClass:"information"},[t.mobileWidth?t._e():i("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"collapse-btn",style:{top:"5px"},attrs:{content:(t.sticky.bookDetailsCollapsedCover?"Expand":"Collapse")+" cover image."},on:{click:function(e){return t.collapseBtnClicked("bookDetailsCollapsedCover")}}},[i("font-awesome",{attrs:{fas:"",icon:t.sticky.bookDetailsCollapsedCover?"chevron-down":"chevron-up"}})],1),t._v(" "),i("div",{staticClass:"cover-wrap"},[i("a",{attrs:{href:t.makeUrl("book",t.book.asin),target:"_blank",rel:"noopener noreferrer"}},[i("div",{staticClass:"progressbar"},[i("div",{staticClass:"progress",style:t.progressbarWidth(t.book)})]),t._v(" "),t.sticky.bookDetailsCollapsedCover||!t.book.cover||t.mobileWidth?t._e():i("img",{staticClass:"cover",attrs:{crossorigin:"anonymous",src:t.makeCoverUrl(t.book.cover)}})])]),t._v(" "),i("div",{staticClass:"progress-info",domProps:{innerHTML:t._s(t.progressInfo(t.book))}}),t._v(" "),i("div",{staticClass:"basic-details"},[i("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"collapse-btn",style:{top:t.sticky.bookDetailsCollapsedDetails?"-10px":"25px"},attrs:{content:(t.sticky.bookDetailsCollapsedDetails?"Expand":"Collapse")+" book details."},on:{click:function(e){return t.collapseBtnClicked("bookDetailsCollapsedDetails")}}},[i("font-awesome",{attrs:{fas:"",icon:t.sticky.bookDetailsCollapsedDetails?"chevron-down":"chevron-up"}})],1),t._v(" "),t.sticky.bookDetailSettings.sidebar.iconToolbar?i("book-info-toolbar",{attrs:{book:t.book}}):t._e(),t._v(" "),t.sticky.bookDetailsCollapsedDetails?t._e():i("book-basic-info",{attrs:{book:t.book}})],1),t._v(" "),t.sticky.bookDetailSettings.sidebar.seriesList?i("collections-drawer",{attrs:{book:t.book}}):t._e(),t._v(" "),t.sticky.bookDetailSettings.sidebar.collectionsList?i("books-in-series",{attrs:{book:t.book}}):t._e()],1),t._v(" "),t.loading||t.sticky.bookDetailSettings.reverseDirection&&t.sticky.bookDetailSettings.hideFirstSection&&t.mobileWidth?t._e():i("book-summary",{attrs:{book:t.book,bookSummary:t.bookSummaryJSON,mobileWidth:t.mobileWidth}})],1),t._v(" "),t.sticky.bookDetailSettings.carousel&&!t.loading?i("div",{staticClass:"carousel-wrap"},[!t.peopleAlsoBought||!0===t.peopleAlsoBought||t.store.standalone&&!t.store.siteOnline?t._e():i("carousel",{key:t.maxWidth,attrs:{book:t.book,books:t.peopleAlsoBought,mobileWidth:t.mobileWidth}},[t._v("\n          Listeners also enjoyed\n        ")])],1):t._e()],1)])]):t._e()}),[],!1,null,"e6333b42",null).exports},3462:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});const o={name:"lazy",props:["tag","offset","delay"],data:function(){return{observer:null,intersected:!1}},mounted:function(){this.$nextTick((function(){this.observe()}))},destroyed:function(){this.observer&&this.observer.disconnect()},methods:{observe:function(){var t=this;this.observer=new IntersectionObserver((function(e){e[0].isIntersecting&&setTimeout((function(){t.intersected=!0,t.observer.disconnect()}),t.delay||0)}),{threshold:0,rootMargin:(this.offset||100)+"px"}),this.observer.observe(this.$el)}}},s=(0,i(810).Z)(o,(function(){var t=this,e=t.$createElement;return(t._self._c||e)(t.tag||"div",{tag:"component",class:{mounted:t.intersected}},[t.intersected?t._t("default"):t._e()],2)}),[],!1,null,null,null).exports},3235:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});const o=(0,i(810).Z)({name:"openWebPlayer",props:["book","icon","topRight","size","tooltip","noBG"],data:function(){return{url:null}},created:function(){this.book&&(this.url="https://www.audible.com/webplayer?asin="+this.book.asin)}},(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.url?i("a",{class:{"top-right":t.topRight,"no-bg":t.noBG},attrs:{href:t.url,target:"_blank",rel:"noopener noreferrer"}},[t.icon?i("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"gr-icon audible-cloudplayer-link",style:{width:(t.size||30)+"px",height:(t.size||30)+"px"},attrs:{content:t.tooltip?"Open web player":""}},[i("img",{attrs:{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNTEuNSA5My43IiB3aWR0aD0iMTUxLjUiIGhlaWdodD0iOTMuNyI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiNmZmY7fTwvc3R5bGU+PC9kZWZzPjxnPjxnPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggODAuN2w3NS43LTQ3LjJ2MTIuOEw3NS44IDkzLjcgMCA0Ni4zVjMzLjVsNzUuOCA0Ny4yeiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggMjEuNWE0OC4xNyA0OC4xNyAwIDAgMC00MC43IDIxLjkgMTIuOTQgMTIuOTQgMCAwIDEgMS44LTEuNmMyMS4zLTE3LjcgNTItMTMuNyA2OC43IDguNmwxMS4xLTcuMWE0OS44MiA0OS44MiAwIDAgMC00MC45LTIxLjgiLz48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik03NS44IDQzLjRhMjcuNzIgMjcuNzIgMCAwIDAtMjIuNCAxMS41IDIyLjcgMjIuNyAwIDAgMSAxMy41LTQuNGM4LjIgMCAxNS41IDQuMiAyMC40IDExLjNsMTAuNi02LjZhMjUuNzkgMjUuNzkgMCAwIDAtMjIuMS0xMS44TTI0LjYgMjQuMkM1NS44LS40IDk5LjkgNi4zIDEyMy40IDM5bC4yLjIgMTEuNS03LjFhNzAuODIgNzAuODIgMCAwIDAtMTE4LjYgMCA2MC42MyA2MC42MyAwIDAgMSA4LjEtNy45Ii8+PC9nPjwvZz48L3N2Zz4=",alt:""}})]):i("span",[t._v("Search in Goodreads")])]):t._e()}),[],!1,null,"53d97c0c",null).exports},2271:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});const o=(0,i(810).Z)({name:"sampleButton",props:["book","index","topRight","size"],methods:{playSample:function(t,e){this.$root.$emit("play-audio",{from:"sampleButton",route:this.$route,book:t,index:e})}}},(function(){var t=this,e=t.$createElement;return(t._self._c||e)("font-awesome",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"pointer",class:{"top-right":t.topRight},style:{width:(t.size||30)+"px",height:"auto"},attrs:{fas:"",icon:"play-circle",content:"Play sample audio"},on:{click:function(e){return t.playSample(t.book,t.rowIndex)}}})}),[],!1,null,"05b60316",null).exports},5700:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s}),i(2081),i(7471),i(2077),i(2482),i(3512);const o={name:"starRating",props:["size","rating","stars","ratings","ratingsText","prioritizeRatingsText","number","numberOf","block","image","placeholderImage","placeholderOpacity","noPlaceholder"],data:function(){return{opt:null,config:{rating:null,length:null}}},created:function(){this.opt={rating:5,stars:5,size:15,number:!1,numberOf:!1,block:!1,image:!1,placeholderImage:!1,placeholderOpacity:!1,noPlaceholder:!1};var t=this.splitDecimals(this.rating);this.config.rating=this.toPercentage(t);var e=this.noPlaceholder||this.opt.noPlacehoder;this.config.length=e?this.config.rating.whole+(this.config.rating.fraction?1:0):parseInt(this.stars||this.opt.stars,10)},methods:{splitDecimals:function(t){var e,i=""+t;return i.indexOf(".")>-1?e=i.split("."):i.indexOf(",")>-1&&(e=i.split(",")),e?{whole:e[0],fraction:"."+e[1]}:{whole:t,fraction:null}},toPercentage:function(t){var e={whole:parseInt(t.whole,10)};return t.fraction&&(e.originalFraction=t.fraction),t.fraction&&(e.fraction=Math.floor(100*parseFloat(t.fraction,10))),e}}},s=(0,i(810).Z)(o,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.config.rating?i("div",{staticClass:"sRatings-wrapper",class:{"sRatings-block":t.block||t.opt.block,"prioritize-ratings-text":t.prioritizeRatingsText},attrs:{"data-rating":t.rating||0}},[t.ratings&&t.prioritizeRatingsText?i("div",{staticClass:"rating-count"},[t._v(t._s(t.ratings)),!1!==t.ratingsText?i("span",[t._v(" ratings")]):t._e()]):t._e(),t._v(" "),t._l(t.config.length,(function(e,o){return i("div",{key:o,style:{width:t.config.rating.whole===e-1&&(t.noPlaceholder||t.opt.noPlaceholder)&&t.config.rating.fraction?(t.size||t.opt.size)*t.config.rating.originalFraction+"px":(t.size||t.opt.size)+"px",height:(t.size||t.opt.size)+"px"},attrs:{"data-star":e,"data-whole":t.config.rating.whole===e,"data-fraction":t.config.rating.fraction&&t.config.rating.whole===e-1}},[t.config.rating.whole<=e&&!t.noPlaceholder&&!t.opt.noPlaceholder?i("div",{staticClass:"sRatings-placeholder",class:{"sRatings-show":t.config.rating.whole<e},style:{left:t.config.rating.fraction&&t.config.rating.whole===e-1?t.config.rating.fraction+"%":"0%","background-size":(t.size||t.opt.size)+"px","background-image":!!(t.image||t.placeholderImage||t.opt.placeholderImage)&&"url("+(t.image&&!t.placeholderImage?t.image:t.placeholderImage||t.opt.placeholderImage)+")",opacity:t.placeholderOpacity||t.opt.placeholderOpacity}}):t._e(),t._v(" "),t.config.rating.whole>=e||t.config.rating.fraction&&t.config.rating.whole===e-1?i("div",{staticClass:"sRatings-star",style:{width:t.config.rating.whole>=e||t.config.rating.whole===e-1&&(t.noPlaceholder||t.opt.noPlaceholder)?"100%":t.config.rating.fraction+"%","background-size":(t.size||t.opt.size)+"px","background-image":!(!t.image&&!t.opt.image)&&"url("+(t.image||t.opt.image)+")"}}):t._e()])})),t._v(" "),t.number||t.opt.number?i("div",{staticClass:"text-label",style:{width:!(!t.numberOf&&!t.opt.numberOf)&&"auto",padding:!(!t.numberOf&&!t.opt.numberOf)&&"0 6px"}},[t._v(t._s(t.numberOf||t.opt.numberOf?t.rating+"/"+(t.stars||t.opt.stars):t.rating))]):t._e(),t._v(" "),t.ratings&&!t.prioritizeRatingsText?i("div",{staticClass:"rating-count"},[t._v("("+t._s(t.ratings)),!1!==t.ratingsText?i("span",[t._v(" ratings")]):t._e(),t._v(")")]):t._e()],2):t._e()}),[],!1,null,"42209754",null).exports}}]);