(self.webpackChunk=self.webpackChunk||[]).push([["sorter"],{730:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s}),i(2759),i(2077),i(895),i(2482),i(911),i(3238);const s={methods:{slugify:function(e){var t="àáâäæãåāăąçćčđďèéêëēėęěğǵḧîïíīįìłḿñńǹňôöòóœøōõőṕŕřßśšşșťțûüùúūǘůűųẃẍÿýžźż·/_,:;",i=new RegExp(t.split("").join("|"),"g");return encodeURIComponent(e.toString().toLowerCase().replace(/\s+/g,"-").replace(i,(function(e){return"aaaaaaaaaacccddeeeeeeeegghiiiiiilmnnnnoooooooooprrsssssttuuuuuuuuuwxyyzzz------".charAt(t.indexOf(e))})).replace(/&/g,"-and-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,""))}}}},2759:(e,t,i)=>{var s=i(5283),n=i(2086),r=i(7189),a=i(5070),o=i(2585),l=i(7826).f,c=i(62).f,u=i(7994),p=i(4059),m=i(4276),d=i(4930),h=i(1007),g=i(3677),f=i(9606),v=i(3278).enforce,y=i(7420),x=i(211),_=i(2582),k=i(2910),w=x("match"),$=n.RegExp,b=$.prototype,O=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,C=/a/g,A=/a/g,N=new $(C)!==C,R=d.UNSUPPORTED_Y;if(r("RegExp",s&&(!N||R||_||k||g((function(){return A[w]=!1,$(C)!=C||$(A)==A||"/a/i"!=$(C,"i")}))))){for(var S=function(e,t){var i,s,n,r,l,c,d=this instanceof S,h=u(e),g=void 0===t,y=[],x=e;if(!d&&h&&g&&e.constructor===S)return e;if((h||e instanceof S)&&(e=e.source,g&&(t="flags"in x?x.flags:m.call(x))),e=void 0===e?"":p(e),t=void 0===t?"":p(t),x=e,_&&"dotAll"in C&&(s=!!t&&t.indexOf("s")>-1)&&(t=t.replace(/s/g,"")),i=t,R&&"sticky"in C&&(n=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,"")),k&&(r=function(e){for(var t,i=e.length,s=0,n="",r=[],a={},o=!1,l=!1,c=0,u="";s<=i;s++){if("\\"===(t=e.charAt(s)))t+=e.charAt(++s);else if("]"===t)o=!1;else if(!o)switch(!0){case"["===t:o=!0;break;case"("===t:O.test(e.slice(s+1))&&(s+=2,l=!0),n+=t,c++;continue;case">"===t&&l:if(""===u||f(a,u))throw new SyntaxError("Invalid capture group name");a[u]=!0,r.push([u,c]),l=!1,u="";continue}l?u+=t:n+=t}return[n,r]}(e),e=r[0],y=r[1]),l=a($(e,t),d?this:b,S),(s||n||y.length)&&(c=v(l),s&&(c.dotAll=!0,c.raw=S(function(e){for(var t,i=e.length,s=0,n="",r=!1;s<=i;s++)"\\"!==(t=e.charAt(s))?r||"."!==t?("["===t?r=!0:"]"===t&&(r=!1),n+=t):n+="[\\s\\S]":n+=t+e.charAt(++s);return n}(e),i)),n&&(c.sticky=!0),y.length&&(c.groups=y)),e!==x)try{o(l,"source",""===x?"(?:)":x)}catch(e){}return l},I=function(e){e in S||l(S,e,{configurable:!0,get:function(){return $[e]},set:function(t){$[e]=t}})},T=c($),V=0;T.length>V;)I(T[V++]);b.constructor=S,S.prototype=b,h(n,"RegExp",S)}y("RegExp")},6366:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n}),i(5769),i(3238),i(1418),i(7460),i(4078),i(2077),i(1203),i(8010),i(1013),i(5623),i(1514),i(9217),i(5699),i(2482),i(2327);const s={name:"sorter",props:["label","currentList","listName","item","index","tippyTop"],mixins:[i(730).Z],components:{VueSlider:function(){return i.e("rangeslider-and-multiselect").then(i.t.bind(i,7865,23))},Multiselect:function(){return i.e("rangeslider-and-multiselect").then(i.bind(i,6813))}},data:function(){return{range:null,dropdownOptions:null}},created:function(){if(this.item.range){var e={min:this.item.rangeMin(),max:this.item.rangeMax()};e.min<0&&(e.min=0),e.max<0&&(e.max=0),e.min>e.max&&(e.min=e.max),_.isArray(this.item.range)?(e.value=_.clone(this.item.range),(e.value[0]<e.min||e.value[0]>e.max)&&(e.value[0]=e.min),(e.value[1]>e.max||e.value[1]<e.max)&&(e.value[1]=e.max)):e.value=[e.min,e.max],this.item.rangeMarks&&(e.marks=this.item.rangeMarks(e.max)),this.range=e}else this.$store.getters.filterExtrasKeys.match(this.item.key)&&!this.dropdownOptions&&this.item.dropdownOpts&&(this.dropdownOptions=this.item.dropdownOpts())},computed:{filterAmounts:function(){this.$root.$emit("repositionSearchOpts");var e=!(this.item.range||this.item.dropdownOpts),t=!e&&!0===this.item.active;if(e||t){var i=this,s=_.filter(this.$store.state.listRenderingOpts.filter,{type:"filterExtras",active:!0}),n="filter"===this.item.type?this.$store.getters.searchIsActive?this.$store.state.searchCollection:this.$store.getters.collectionSource:this.$store.getters.collection;return _.filter(n,(function(e){return i.item.condition(e)&&function(e){var t=_.map(s,(function(t){return!!t.condition(e)}));return!_.includes(t,!1)}(e)})).length}return 0},rangeVal:function(){return this.range.value},inputVmodel:{get:function(){return this.item.active},set:function(e){var t={listName:this.listName,index:this.index,active:e};this.item.group&&(t.group=!0),this.$store.commit("updateListRenderingOpts",t),this.doTheThings(e)}},isActiveSortItem:function(){if("sort"===this.listName){if(!this.$store.getters.searchIsActive||this.$store.getters.searchIsActive&&this.$route.query.sort)return _.findIndex(this.currentList,"current")===this.index}else if("filter"===this.listName)return!1}},methods:{tooltipFormatter:function(e){return e+this.item.rangeSuffix},dropdownChanged:function(e){var t={listName:this.listName,index:this.index,active:e.length>0,value:e};this.item.group&&(t.group=!0),this.$store.commit("updateListRenderingOpts",t),this.doTheThings(e,!0)},dropdownOpened:function(e){!this.dropdownOptions&&this.item.dropdownOpts&&(this.dropdownOptions=this.item.dropdownOpts())},rangeChanged:function(e){var t={listName:this.listName,index:this.index,range:e,active:!0};this.item.group&&(t.group=!0),this.$store.commit("updateListRenderingOpts",t),this.doTheThings(e,!0)},adjustRange:function(e){var t={listName:this.listName,index:this.index,active:!0,range:_.clone(this.range.value)};"left"===e?t.range[0]=this.range.min:t.range[1]=this.range.max,this.item.group&&(t.group=!0),this.$store.commit("updateListRenderingOpts",t),this.doTheThings(t.range,!0)},doTheThings:function(e,t){this.saveOptions(e,t),"sortValues"===this.item.key&&this.$root.$emit("book-clicked",{book:null}),"scope"===this.listName?this.$root.$emit("start-scope"):"sort"!==this.listName&&("randomize"!==this.item.key||this.$store.getters.searchIsActive)||"sortValues"===this.item.key?"filter"===this.listName&&this.$root.$emit("start-filter"):(this.$store.commit("prop",{key:"searchSort",value:!1}),this.$root.$emit("start-sort"))},saveOptions:function(e,t){if("sortValues"===this.item.key)this.$updateQuery({query:this.item.key,value:e});else if("sort"===this.item.type)this.$updateQuery({query:this.item.type,value:this.item.key}),this.$updateQuery({query:"sortDir",value:e?"desc":"asc"});else if("filter"===this.listName){if("filter"===this.item.type&&this.$updateQuery({query:this.item.type,value:encodeURIComponent(this.$store.getters.filterKeys)}),"filterExtras"===this.item.type){var i=this,s=_.map(i.$store.getters.filterExtrasKeys.split(","),(function(e){var t=_.find(i.$store.state.listRenderingOpts.filter,{key:e});return t&&t.range?encodeURIComponent(e+":"+i.range.value[0]+"-"+i.range.value[1]):t&&t.value&&t.value.length>0?encodeURIComponent(e+":")+_.map(t.value,(function(e){return encodeURIComponent(e)})).join("|"):e?encodeURIComponent(e):void 0}));this.$updateQuery({query:this.item.type,value:(1!==s.length||void 0!==s[0])&&s.join(",")})}}else"scope"===this.listName&&this.$updateQuery({query:this.listName,value:encodeURIComponent(this.$store.getters.scopeKeys)})}}},n=(0,i(810).Z)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"sorter-button-wrapper"},[e.item?i("span",{directives:[{name:"tippy",rawName:"v-tippy",value:{delay:150,maxWidth:350,placement:e.tippyTop?"top":"left",flipBehavior:e.tippyTop?["top","bottom","left","right"]:["left","top","bottom","right"],distance:e.listName?20:10},expression:"{ \n    delay: 150,\n    maxWidth: 350, \n    placement: (tippyTop ? 'top' : 'left'), \n    flipBehavior: (tippyTop ? ['top', 'bottom', 'left', 'right'] : ['left', 'top', 'bottom', 'right']),\n    distance: listName ? 20 : 10,\n  }"}],class:e.item.key,attrs:{content:!!e.item.tippy&&e.item.tippy}},[i("label",{staticClass:"sorter-button",class:{ranged:e.item.range,"faux-disabled":"filterExtras"===e.item.type&&e.filterAmounts<1,"is-dropdown":e.item.dropdownOpts}},[!1===e.label?i("span",{staticClass:"input-label",class:{active:e.isActiveSortItem}},[e._t("default")],2):e._e(),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.inputVmodel,expression:"inputVmodel"}],attrs:{type:"checkbox"},domProps:{value:e.index,checked:Array.isArray(e.inputVmodel)?e._i(e.inputVmodel,e.index)>-1:e.inputVmodel},on:{change:function(t){var i=e.inputVmodel,s=t.target,n=!!s.checked;if(Array.isArray(i)){var r=e.index,a=e._i(i,r);s.checked?a<0&&(e.inputVmodel=i.concat([r])):a>-1&&(e.inputVmodel=i.slice(0,a).concat(i.slice(a+1)))}else e.inputVmodel=n}}}),e._v(" "),"sort"===e.item.type?i("span",{staticClass:"sortbox",class:{active:e.isActiveSortItem}},[i("font-awesome",{attrs:{fas:"",icon:"sort-down"}}),e._v(" "),i("font-awesome",{attrs:{fas:"",icon:"sort-up"}})],1):e.item.radiobutton?i("span",{staticClass:"radiobutton"},[i("font-awesome",{attrs:{fas:"",icon:"circle"}}),e._v(" "),i("font-awesome",{attrs:{fas:"",icon:"circle"}})],1):i("span",{staticClass:"checkbox"},[i("font-awesome",{attrs:{fas:"",icon:"square"}}),e._v(" "),i("font-awesome",{attrs:{fas:"",icon:"check"}})],1),e._v(" "),!1!==e.label?i("span",{staticClass:"input-label",class:{active:e.isActiveSortItem}},[e._v("\n        "+e._s(e.item.label||e.item.key.replace(".name",""))+"\n      ")]):e._e(),e._v(" "),"filter"===e.listName?i("span",{staticClass:"books-in-filter"},[e._v("\n        "+e._s(e.filterAmounts)+"\n        ")]):e._e()]),e._v(" "),e.item.range?i("div",{staticClass:"range-slider"},[i("span",{staticStyle:{cursor:"w-resize"},on:{click:function(t){return e.adjustRange("left")}}},[e._v(e._s(e.range.value[0])+e._s(e.item.rangeSuffix))]),e._v(" "),i("vue-slider",{attrs:{disabled:e.range.disabled,dragOnClick:!0,adsorb:!0,lazy:!0,hideLabel:!0,included:!!e.range.marks,interval:e.range.min===e.range.max?1:e.item.rangeInterval||1,marks:e.range.marks||Math.abs(e.range.min-e.range.max)<=10,value:e.range.value,min:e.range.min,max:e.range.max,"min-range":e.range.min===e.range.max?0:e.item.rangeMinDist||0,"enable-cross":!1,"tooltip-formatter":e.item.tooltipFormatter||e.tooltipFormatter,"tooltip-placement":"top",tooltip:"active","use-keyboard":!1},on:{change:e.rangeChanged,"drag-start":function(t){return e.$store.commit("prop",{key:"searchOptCloseGuard",value:!0})},"drag-end":function(t){return e.$store.commit("prop",{key:"searchOptCloseGuard",value:!1})}}}),e._v(" "),i("span",{staticStyle:{cursor:"e-resize"},on:{click:function(t){return e.adjustRange("right")}}},[e._v(e._s(e.range.value[1])+e._s(e.item.rangeSuffix))])],1):e._e(),e._v(" "),e.item.dropdownOpts?i("div",[i("Multiselect",{ref:"multiselect",attrs:{value:e.item.value,placeholder:"Search...",options:e.dropdownOptions,mode:"tags",hideSelected:!0,clearOnSelect:!1,closeOnSelect:!1,multiple:!0,taggable:!0,searchable:!0},on:{change:e.dropdownChanged,open:e.dropdownOpened}})],1):e._e()]):e._e()])}),[],!1,null,"0a2d4a92",null).exports}}]);