import{c as Ir,V as Dr,f as Nr,g as qr}from"./gallery.a914971c.js";import{m as Ue,o as k,c as S,a as T,e as P,aV as Bt,g as Et,f as R,F as de,i as me,p as te,bP as Rt,t as J,h as tt,an as Mr,a8 as ie,aG as st,K as ae,H,L as fe,C as rt,b0 as Nt,aY as xr,z as Ve,P as Fr,_ as mt,r as Jt,b as qt,w as We,s as jr,d as ce,u as lr,n as Pt,v as Vr}from"./lodash.4793ee9f.js";import{s as Wr,t as Mt,F as Kr}from"./gallery-secondsToTimeString.08fb5a1e.js";import{_ as zr}from"./gallery-findSubPageSource.85dad557.js";import{_ as Hr}from"./gallery-page-title.e3d2bd39.js";const Gr={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Ur(e,r){return k(),S("svg",Gr,r[0]||(r[0]=[T("path",{fill:"currentColor",d:"M3 5v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2"},null,-1)]))}const Qr=Ue({name:"ic-round-square",render:Ur}),Xr={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"};function Yr(e,r){return k(),S("svg",Xr,r[0]||(r[0]=[T("path",{fill:"currentColor",d:"M256 56c110.532 0 200 89.451 200 200c0 110.532-89.451 200-200 200c-110.532 0-200-89.451-200-200c0-110.532 89.451-200 200-200m0-48C119.033 8 8 119.033 8 256s111.033 248 248 248s248-111.033 248-248S392.967 8 256 8m0 168c-44.183 0-80 35.817-80 80s35.817 80 80 80s80-35.817 80-80s-35.817-80-80-80"},null,-1)]))}const Zr=Ue({name:"fa-regular-dot-circle",render:Yr}),Jr={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"};function ea(e,r){return k(),S("svg",Jr,r[0]||(r[0]=[T("path",{fill:"currentColor",d:"M256 8C119 8 8 119 8 256s111 248 248 248s248-111 248-248S393 8 256 8m0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200s-89.5 200-200 200"},null,-1)]))}const ta=Ue({name:"fa-regular-circle",render:ea}),ra={viewBox:"0 0 320 512",width:"0.76em",height:"1.2em"};function aa(e,r){return k(),S("svg",ra,r[0]||(r[0]=[T("path",{fill:"currentColor",d:"M182.6 41.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9S19 224.1 32 224.1h256c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"},null,-1)]))}const na=Ue({name:"fa6-solid-sort-up",render:aa}),sa={viewBox:"0 0 320 512",width:"0.76em",height:"1.2em"};function ia(e,r){return k(),S("svg",sa,r[0]||(r[0]=[T("path",{fill:"currentColor",d:"M182.6 470.6c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-9.2-9.2-11.9-22.9-6.9-34.9S19 287.9 32 287.9h256c12.9 0 24.6 7.8 29.6 19.8s2.2 25.7-6.9 34.9l-128 128z"},null,-1)]))}const la=Ue({name:"fa6-solid-sort-down",render:ia});function ye(e){return e==null}function oa(e,r,t){const{object:n,valueProp:a,mode:i}=ie(e),s=st().proxy,o=t.iv,c=(p,y=!0)=>{o.value=u(p);const g=d(p);r.emit("change",g,s),y&&(r.emit("input",g),r.emit("update:modelValue",g))},d=p=>n.value||ye(p)?p:Array.isArray(p)?p.map(y=>y[a.value]):p[a.value],u=p=>ye(p)?i.value==="single"?{}:[]:p;return{update:c}}function U(e){return Fr(()=>({get:e,set:()=>{}}))}function ua(e,r){const{value:t,modelValue:n,mode:a,valueProp:i}=ie(e),s=ae(a.value!=="single"?[]:{}),o=U(()=>n.value!==void 0?n.value:t.value),c=H(()=>a.value==="single"?s.value[i.value]:s.value.map(u=>u[i.value])),d=U(()=>a.value!=="single"?s.value.map(u=>u[i.value]).join(","):s.value[i.value]);return{iv:s,internalValue:s,ev:o,externalValue:o,textValue:d,plainValue:c}}function ca(e,r,t){const{regex:n}=ie(e),a=st().proxy,i=t.isOpen,s=t.open,o=ae(null),c=()=>{o.value=""},d=y=>{o.value=y.target.value},u=y=>{if(n.value){let g=n.value;typeof g=="string"&&(g=new RegExp(g)),y.key.match(g)||y.preventDefault()}},p=y=>{if(n.value){let C=(y.clipboardData||window.clipboardData).getData("Text"),b=n.value;typeof b=="string"&&(b=new RegExp(b)),C.split("").every(L=>!!L.match(b))||y.preventDefault()}r.emit("paste",y,a)};return fe(o,y=>{!i.value&&y&&s(),r.emit("search-change",y,a)}),{search:o,clearSearch:c,handleSearchInput:d,handleKeypress:u,handlePaste:p}}function da(e,r,t){const{groupSelect:n,mode:a,groups:i,disabledProp:s}=ie(e),o=ae(null),c=u=>{u===void 0||u!==null&&u[s.value]||i.value&&u&&u.group&&(a.value==="single"||!n.value)||(o.value=u)};return{pointer:o,setPointer:c,clearPointer:()=>{c(null)}}}function At(e,r=!0){return r?String(e).toLowerCase().trim():String(e).toLowerCase().normalize("NFD").trim().replace(/æ/g,"ae").replace(/œ/g,"oe").replace(/ø/g,"o").replace(/\p{Diacritic}/gu,"")}function fa(e){return Object.prototype.toString.call(e)==="[object Object]"}function pa(e,r){if(e.length!==r.length)return!1;const t=r.slice().sort();return e.slice().sort().every(function(n,a){return n===t[a]})}const or=(e,r)=>{if(e===r)return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;const t=Object.keys(e),n=Object.keys(r);if(t.length!==n.length)return!1;for(let a of t)if(!n.includes(a)||!or(e[a],r[a]))return!1;return!0};function va(e,r,t){const{options:n,mode:a,trackBy:i,limit:s,hideSelected:o,createTag:c,createOption:d,label:u,appendNewTag:p,appendNewOption:y,multipleLabel:g,object:C,loading:b,delay:L,resolveOnLoad:w,minChars:A,filterResults:f,clearOnSearch:O,clearOnSelect:$,valueProp:m,allowAbsent:N,groupLabel:D,canDeselect:q,max:x,strict:j,closeOnSelect:E,closeOnDeselect:z,groups:Q,reverse:re,infinite:G,groupOptions:V,groupHideEmpty:Oe,groupSelect:F,onCreate:X,disabledProp:W,searchStart:ee,searchFilter:le}=ie(e),K=st().proxy,I=t.iv,h=t.ev,B=t.search,Z=t.clearSearch,ne=t.update,Qe=t.pointer,Xe=t.setPointer,_e=t.clearPointer,it=t.focus,wt=t.deactivate,$e=t.close,lt=t.localize,Be=ae([]),oe=ae([]),ue=ae(!1),ve=ae(null),ke=ae(G.value&&s.value===-1?10:s.value),ot=H({get:()=>oe.value,set:l=>oe.value=l}),Ye=U(()=>c.value||d.value||!1),Ze=U(()=>p.value!==void 0?p.value:y.value!==void 0?y.value:!0),he=H(()=>{if(Q.value){let l=Ie.value||[],v=[];return l.forEach(M=>{_t(M[V.value]).forEach(Y=>{v.push(Object.assign({},Y,M[W.value]?{[W.value]:!0}:{}))})}),v}else{let l=_t(oe.value||[]);return Be.value.length&&(l=l.concat(Be.value)),l}}),Je=H(()=>{let l=he.value;return re.value&&(l=l.reverse()),xe.value.length&&(l=xe.value.concat(l)),Tt(l)}),Ee=H(()=>{let l=Je.value;return ke.value>0&&(l=l.slice(0,ke.value)),l}),Ie=H(()=>{if(!Q.value)return[];let l=[],v=oe.value||[];return Be.value.length&&l.push({[D.value]:" ",[V.value]:[...Be.value],__CREATE__:!0}),l.concat(v)}),mr=H(()=>{let l=[...Ie.value].map(v=>({...v}));return xe.value.length&&(l[0]&&l[0].__CREATE__?l[0][V.value]=[...xe.value,...l[0][V.value]]:l=[{[D.value]:" ",[V.value]:[...xe.value],__CREATE__:!0}].concat(l)),l}),Ot=H(()=>{if(!Q.value)return[];let l=mr.value;return Pr((l||[]).map((v,M)=>{const Y=_t(v[V.value]);return{...v,index:M,group:!0,[V.value]:Tt(Y,!1).map(Ne=>Object.assign({},Ne,v[W.value]?{[W.value]:!0}:{})),__VISIBLE__:Tt(Y).map(Ne=>Object.assign({},Ne,v[W.value]?{[W.value]:!0}:{}))}}))}),kt=H(()=>{switch(a.value){case"single":return!ye(I.value[m.value]);case"multiple":case"tags":return!ye(I.value)&&I.value.length>0}}),gr=H(()=>g.value!==void 0?g.value(I.value,K):I.value&&I.value.length>1?`${I.value.length} options selected`:"1 option selected"),yr=U(()=>!he.value.length&&!ue.value&&!xe.value.length),br=U(()=>he.value.length>0&&Ee.value.length==0&&(B.value&&Q.value||!Q.value)),xe=H(()=>Ye.value===!1||!B.value?[]:$r(B.value)!==-1?[]:[{[m.value]:B.value,[De.value[0]]:B.value,[u.value]:B.value,__CREATE__:!0}]),De=H(()=>i.value?Array.isArray(i.value)?i.value:[i.value]:[u.value]),wr=U(()=>{switch(a.value){case"single":return null;case"multiple":case"tags":return[]}}),Or=U(()=>b.value||ue.value),Fe=l=>{switch(typeof l!="object"&&(l=Ce(l)),a.value){case"single":ne(l);break;case"multiple":case"tags":ne(I.value.concat(l));break}r.emit("select",Ht(l),l,K)},je=l=>{switch(typeof l!="object"&&(l=Ce(l)),a.value){case"single":Ut();break;case"tags":case"multiple":ne(Array.isArray(l)?I.value.filter(v=>l.map(M=>M[m.value]).indexOf(v[m.value])===-1):I.value.filter(v=>v[m.value]!=l[m.value]));break}r.emit("deselect",Ht(l),l,K)},Ht=l=>C.value?l:l[m.value],Gt=l=>{je(l)},kr=(l,v)=>{if(v.button!==0){v.preventDefault();return}Gt(l)},Ut=()=>{ne(wr.value),r.emit("clear",K)},Se=l=>{if(l.group!==void 0)return a.value==="single"?!1:_r(l[V.value])&&l[V.value].length;switch(a.value){case"single":return!ye(I.value)&&(I.value[m.value]==l[m.value]||typeof I.value[m.value]=="object"&&typeof l[m.value]=="object"&&or(I.value[m.value],l[m.value]));case"tags":case"multiple":return!ye(I.value)&&I.value.map(v=>v[m.value]).indexOf(l[m.value])!==-1}},St=l=>l[W.value]===!0,Ct=()=>x===void 0||x.value===-1||!kt.value&&x.value>0?!1:I.value.length>=x.value,Sr=l=>{if(!St(l)){if(X.value&&!Se(l)&&l.__CREATE__&&(l={...l},delete l.__CREATE__,l=X.value(l,K),l instanceof Promise)){ue.value=!0,l.then(v=>{ue.value=!1,Qt(v)});return}Qt(l)}},Qt=l=>{switch(l.__CREATE__&&(l={...l},delete l.__CREATE__),a.value){case"single":if(l&&Se(l)){q.value&&je(l),z.value&&(_e(),$e());return}l&&Lt(l),$.value&&Z(),E.value&&(_e(),$e()),l&&Fe(l);break;case"multiple":if(l&&Se(l)){je(l),z.value&&(_e(),$e());return}if(Ct()){r.emit("max",K);return}l&&(Lt(l),Fe(l)),$.value&&Z(),o.value&&_e(),E.value&&$e();break;case"tags":if(l&&Se(l)){je(l),z.value&&(_e(),$e());return}if(Ct()){r.emit("max",K);return}l&&Lt(l),$.value&&Z(),l&&Fe(l),o.value&&_e(),E.value&&$e();break}E.value||it()},Cr=l=>{if(!(St(l)||a.value==="single"||!F.value)){switch(a.value){case"multiple":case"tags":Tr(l[V.value])?je(l[V.value]):Fe(l[V.value].filter(v=>I.value.map(M=>M[m.value]).indexOf(v[m.value])===-1).filter(v=>!v[W.value]).filter((v,M)=>I.value.length+1+M<=x.value||x.value===-1)),o.value&&Qe.value&&Xe(Ot.value.filter(v=>!v[W.value])[Qe.value.index]);break}E.value&&wt()}},Lt=l=>{Ce(l[m.value])===void 0&&Ye.value&&(r.emit("tag",l[m.value],K),r.emit("option",l[m.value],K),r.emit("create",l[m.value],K),Ze.value&&Er(l),Z())},Lr=()=>{a.value!=="single"&&Fe(Ee.value.filter(l=>!l.disabled&&!Se(l)))},Tr=l=>l.find(v=>!Se(v)&&!v[W.value])===void 0,_r=l=>l.find(v=>!Se(v))===void 0,Ce=l=>he.value[he.value.map(v=>String(v[m.value])).indexOf(String(l))],$r=l=>he.value.findIndex(v=>De.value.some(M=>(parseInt(v[M])==v[M]?parseInt(v[M]):v[M])===(parseInt(l)==l?parseInt(l):l))),Br=l=>["tags","multiple"].indexOf(a.value)!==-1&&o.value&&Se(l),Er=l=>{Be.value.push(l)},Pr=l=>Oe.value?l.filter(v=>B.value?v.__VISIBLE__.length:v[V.value].length):l.filter(v=>B.value?v.__VISIBLE__.length:!0),Tt=(l,v=!0)=>{let M=l;if(B.value&&f.value){let Y=le.value;Y||(Y=(Ne,Yt,Zs)=>De.value.some(Rr=>{let Zt=At(lt(Ne[Rr]),j.value);return ee.value?Zt.startsWith(At(Yt,j.value)):Zt.indexOf(At(Yt,j.value))!==-1})),M=M.filter(Ne=>Y(Ne,B.value,K))}return o.value&&v&&(M=M.filter(Y=>!Br(Y))),M},_t=l=>{let v=l;return fa(v)&&(v=Object.keys(v).map(M=>{let Y=v[M];return{[m.value]:M,[De.value[0]]:Y,[u.value]:Y}})),v&&Array.isArray(v)?v=v.map(M=>typeof M=="object"?M:{[m.value]:M,[De.value[0]]:M,[u.value]:M}):v=[],v},ut=()=>{ye(h.value)||(I.value=dt(h.value))},ct=l=>(ue.value=!0,new Promise((v,M)=>{n.value(B.value,K).then(Y=>{oe.value=Y||[],typeof l=="function"&&l(Y),ue.value=!1}).catch(Y=>{console.error(Y),oe.value=[],ue.value=!1}).finally(()=>{v()})})),$t=()=>{if(!!kt.value)if(a.value==="single"){let l=Ce(I.value[m.value]);if(l!==void 0){let v=l[u.value];I.value[u.value]=v,C.value&&(h.value[u.value]=v)}}else I.value.forEach((l,v)=>{let M=Ce(I.value[v][m.value]);if(M!==void 0){let Y=M[u.value];I.value[v][u.value]=Y,C.value&&(h.value[v][u.value]=Y)}})},Ar=l=>{ct(l)},dt=l=>ye(l)?a.value==="single"?{}:[]:C.value?l:a.value==="single"?Ce(l)||(N.value?{[u.value]:l,[m.value]:l,[De.value[0]]:l}:{}):l.filter(v=>!!Ce(v)||N.value).map(v=>Ce(v)||{[u.value]:v,[m.value]:v,[De.value[0]]:v}),Xt=()=>{ve.value=fe(B,l=>{l.length<A.value||!l&&A.value!==0||(ue.value=!0,O.value&&(oe.value=[]),setTimeout(()=>{l==B.value&&n.value(B.value,K).then(v=>{(l==B.value||!B.value)&&(oe.value=v,Qe.value=Ee.value.filter(M=>M[W.value]!==!0)[0]||null,ue.value=!1)}).catch(v=>{console.error(v)})},L.value))},{flush:"sync"})};if(a.value!=="single"&&!ye(h.value)&&!Array.isArray(h.value))throw new Error(`v-model must be an array when using "${a.value}" mode`);return n&&typeof n.value=="function"?w.value?ct(ut):C.value==!0&&ut():(oe.value=n.value,ut()),L.value>-1&&Xt(),fe(L,(l,v)=>{ve.value&&ve.value(),l>=0&&Xt()}),fe(h,l=>{if(ye(l)){ne(dt(l),!1);return}switch(a.value){case"single":(C.value?l[m.value]!=I.value[m.value]:l!=I.value[m.value])&&ne(dt(l),!1);break;case"multiple":case"tags":pa(C.value?l.map(v=>v[m.value]):l,I.value.map(v=>v[m.value]))||ne(dt(l),!1);break}},{deep:!0}),fe(n,(l,v)=>{typeof e.options=="function"?w.value&&(!v||l&&l.toString()!==v.toString())&&ct():(oe.value=e.options,Object.keys(I.value).length||ut(),$t())}),fe(u,$t),fe(s,(l,v)=>{ke.value=G.value&&l===-1?10:l}),{resolvedOptions:ot,pfo:Je,fo:Ee,filteredOptions:Ee,hasSelected:kt,multipleLabelText:gr,eo:he,extendedOptions:he,eg:Ie,extendedGroups:Ie,fg:Ot,filteredGroups:Ot,noOptions:yr,noResults:br,resolving:ue,busy:Or,offset:ke,select:Fe,deselect:je,remove:Gt,selectAll:Lr,clear:Ut,isSelected:Se,isDisabled:St,isMax:Ct,getOption:Ce,handleOptionClick:Sr,handleGroupClick:Cr,handleTagRemove:kr,refreshOptions:Ar,resolveOptions:ct,refreshLabels:$t}}function ha(e,r,t){const{valueProp:n,showOptions:a,searchable:i,groupLabel:s,groups:o,mode:c,groupSelect:d,disabledProp:u,groupOptions:p}=ie(e),y=t.fo,g=t.fg,C=t.handleOptionClick,b=t.handleGroupClick,L=t.search,w=t.pointer,A=t.setPointer,f=t.clearPointer,O=t.multiselect,$=t.isOpen,m=H(()=>y.value.filter(h=>!h[u.value])),N=H(()=>g.value.filter(h=>!h[u.value])),D=U(()=>c.value!=="single"&&d.value),q=U(()=>w.value&&w.value.group),x=H(()=>K(w.value)),j=H(()=>{const h=q.value?w.value:K(w.value),B=N.value.map(ne=>ne[s.value]).indexOf(h[s.value]);let Z=N.value[B-1];return Z===void 0&&(Z=z.value),Z}),E=H(()=>{let h=N.value.map(B=>B.label).indexOf(q.value?w.value[s.value]:K(w.value)[s.value])+1;return N.value.length<=h&&(h=0),N.value[h]}),z=H(()=>[...N.value].slice(-1)[0]),Q=H(()=>w.value.__VISIBLE__.filter(h=>!h[u.value])[0]),re=H(()=>{const h=x.value.__VISIBLE__.filter(B=>!B[u.value]);return h[h.map(B=>B[n.value]).indexOf(w.value[n.value])-1]}),G=H(()=>{const h=K(w.value).__VISIBLE__.filter(B=>!B[u.value]);return h[h.map(B=>B[n.value]).indexOf(w.value[n.value])+1]}),V=H(()=>[...j.value.__VISIBLE__.filter(h=>!h[u.value])].slice(-1)[0]),Oe=H(()=>[...z.value.__VISIBLE__.filter(h=>!h[u.value])].slice(-1)[0]),F=h=>!!w.value&&(!h.group&&w.value[n.value]===h[n.value]||h.group!==void 0&&w.value[s.value]===h[s.value])?!0:void 0,X=()=>{A(m.value[0]||null)},W=()=>{!w.value||w.value[u.value]===!0||(q.value?b(w.value):C(w.value))},ee=()=>{if(w.value===null)A((o.value&&D.value?N.value[0].__CREATE__?m.value[0]:N.value[0]:m.value[0])||null);else if(o.value&&D.value){let h=q.value?Q.value:G.value;h===void 0&&(h=E.value,h.__CREATE__&&(h=h[p.value][0])),A(h||null)}else{let h=m.value.map(B=>B[n.value]).indexOf(w.value[n.value])+1;m.value.length<=h&&(h=0),A(m.value[h]||null)}rt(()=>{I()})},le=()=>{if(w.value===null){let h=m.value[m.value.length-1];o.value&&D.value&&(h=Oe.value,h===void 0&&(h=z.value)),A(h||null)}else if(o.value&&D.value){let h=q.value?V.value:re.value;h===void 0&&(h=q.value?j.value:x.value,h.__CREATE__&&(h=V.value,h===void 0&&(h=j.value))),A(h||null)}else{let h=m.value.map(B=>B[n.value]).indexOf(w.value[n.value])-1;h<0&&(h=m.value.length-1),A(m.value[h]||null)}rt(()=>{I()})},K=h=>N.value.find(B=>B.__VISIBLE__.map(Z=>Z[n.value]).indexOf(h[n.value])!==-1),I=()=>{let h=O.value.querySelector("[data-pointed]");if(!h)return;let B=h.parentElement.parentElement;o.value&&(B=q.value?h.parentElement.parentElement.parentElement:h.parentElement.parentElement.parentElement.parentElement),h.offsetTop+h.offsetHeight>B.clientHeight+B.scrollTop&&(B.scrollTop=h.offsetTop+h.offsetHeight-B.clientHeight),h.offsetTop<B.scrollTop&&(B.scrollTop=h.offsetTop)};return fe(L,h=>{i.value&&(h.length&&a.value?X():f())}),fe($,h=>{if(h&&O&&O.value){let B=O.value.querySelectorAll("[data-selected]")[0];if(!B)return;let Z=B.parentElement.parentElement;rt(()=>{Z.scrollTop=B.offsetTop})}}),{pointer:w,canPointGroups:D,isPointed:F,setPointerFirst:X,selectPointer:W,forwardPointer:ee,backwardPointer:le}}function se(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var r=e.ownerDocument;return r&&r.defaultView||window}return e}function Me(e){var r=se(e).Element;return e instanceof r||e instanceof Element}function pe(e){var r=se(e).HTMLElement;return e instanceof r||e instanceof HTMLElement}function xt(e){if(typeof ShadowRoot>"u")return!1;var r=se(e).ShadowRoot;return e instanceof r||e instanceof ShadowRoot}var qe=Math.max,ht=Math.min,Ke=Math.round;function It(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(r){return r.brand+"/"+r.version}).join(" "):navigator.userAgent}function ur(){return!/^((?!chrome|android).)*safari/i.test(It())}function ze(e,r,t){r===void 0&&(r=!1),t===void 0&&(t=!1);var n=e.getBoundingClientRect(),a=1,i=1;r&&pe(e)&&(a=e.offsetWidth>0&&Ke(n.width)/e.offsetWidth||1,i=e.offsetHeight>0&&Ke(n.height)/e.offsetHeight||1);var s=Me(e)?se(e):window,o=s.visualViewport,c=!ur()&&t,d=(n.left+(c&&o?o.offsetLeft:0))/a,u=(n.top+(c&&o?o.offsetTop:0))/i,p=n.width/a,y=n.height/i;return{width:p,height:y,top:u,right:d+p,bottom:u+y,left:d,x:d,y:u}}function Ft(e){var r=se(e),t=r.pageXOffset,n=r.pageYOffset;return{scrollLeft:t,scrollTop:n}}function ma(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function ga(e){return e===se(e)||!pe(e)?Ft(e):ma(e)}function be(e){return e?(e.nodeName||"").toLowerCase():null}function Re(e){return((Me(e)?e.ownerDocument:e.document)||window.document).documentElement}function jt(e){return ze(Re(e)).left+Ft(e).scrollLeft}function Te(e){return se(e).getComputedStyle(e)}function Vt(e){var r=Te(e),t=r.overflow,n=r.overflowX,a=r.overflowY;return/auto|scroll|overlay|hidden/.test(t+a+n)}function ya(e){var r=e.getBoundingClientRect(),t=Ke(r.width)/e.offsetWidth||1,n=Ke(r.height)/e.offsetHeight||1;return t!==1||n!==1}function ba(e,r,t){t===void 0&&(t=!1);var n=pe(r),a=pe(r)&&ya(r),i=Re(r),s=ze(e,a,t),o={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(n||!n&&!t)&&((be(r)!=="body"||Vt(i))&&(o=ga(r)),pe(r)?(c=ze(r,!0),c.x+=r.clientLeft,c.y+=r.clientTop):i&&(c.x=jt(i))),{x:s.left+o.scrollLeft-c.x,y:s.top+o.scrollTop-c.y,width:s.width,height:s.height}}function cr(e){var r=ze(e),t=e.offsetWidth,n=e.offsetHeight;return Math.abs(r.width-t)<=1&&(t=r.width),Math.abs(r.height-n)<=1&&(n=r.height),{x:e.offsetLeft,y:e.offsetTop,width:t,height:n}}function gt(e){return be(e)==="html"?e:e.assignedSlot||e.parentNode||(xt(e)?e.host:null)||Re(e)}function dr(e){return["html","body","#document"].indexOf(be(e))>=0?e.ownerDocument.body:pe(e)&&Vt(e)?e:dr(gt(e))}function at(e,r){var t;r===void 0&&(r=[]);var n=dr(e),a=n===((t=e.ownerDocument)==null?void 0:t.body),i=se(n),s=a?[i].concat(i.visualViewport||[],Vt(n)?n:[]):n,o=r.concat(s);return a?o:o.concat(at(gt(s)))}function wa(e){return["table","td","th"].indexOf(be(e))>=0}function er(e){return!pe(e)||Te(e).position==="fixed"?null:e.offsetParent}function Oa(e){var r=/firefox/i.test(It()),t=/Trident/i.test(It());if(t&&pe(e)){var n=Te(e);if(n.position==="fixed")return null}var a=gt(e);for(xt(a)&&(a=a.host);pe(a)&&["html","body"].indexOf(be(a))<0;){var i=Te(a);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||r&&i.willChange==="filter"||r&&i.filter&&i.filter!=="none")return a;a=a.parentNode}return null}function yt(e){for(var r=se(e),t=er(e);t&&wa(t)&&Te(t).position==="static";)t=er(t);return t&&(be(t)==="html"||be(t)==="body"&&Te(t).position==="static")?r:t||Oa(e)||r}var ge="top",we="bottom",Ae="right",Le="left",Wt="auto",bt=[ge,we,Ae,Le],He="start",nt="end",ka="clippingParents",fr="viewport",et="popper",Sa="reference",tr=bt.reduce(function(e,r){return e.concat([r+"-"+He,r+"-"+nt])},[]),Ca=[].concat(bt,[Wt]).reduce(function(e,r){return e.concat([r,r+"-"+He,r+"-"+nt])},[]),La="beforeRead",Ta="read",_a="afterRead",$a="beforeMain",Ba="main",Ea="afterMain",Pa="beforeWrite",Aa="write",Ra="afterWrite",Ia=[La,Ta,_a,$a,Ba,Ea,Pa,Aa,Ra];function Da(e){var r=new Map,t=new Set,n=[];e.forEach(function(i){r.set(i.name,i)});function a(i){t.add(i.name);var s=[].concat(i.requires||[],i.requiresIfExists||[]);s.forEach(function(o){if(!t.has(o)){var c=r.get(o);c&&a(c)}}),n.push(i)}return e.forEach(function(i){t.has(i.name)||a(i)}),n}function Na(e){var r=Da(e);return Ia.reduce(function(t,n){return t.concat(r.filter(function(a){return a.phase===n}))},[])}function qa(e){var r;return function(){return r||(r=new Promise(function(t){Promise.resolve().then(function(){r=void 0,t(e())})})),r}}function Ma(e){var r=e.reduce(function(t,n){var a=t[n.name];return t[n.name]=a?Object.assign({},a,n,{options:Object.assign({},a.options,n.options),data:Object.assign({},a.data,n.data)}):n,t},{});return Object.keys(r).map(function(t){return r[t]})}function xa(e,r){var t=se(e),n=Re(e),a=t.visualViewport,i=n.clientWidth,s=n.clientHeight,o=0,c=0;if(a){i=a.width,s=a.height;var d=ur();(d||!d&&r==="fixed")&&(o=a.offsetLeft,c=a.offsetTop)}return{width:i,height:s,x:o+jt(e),y:c}}function Fa(e){var r,t=Re(e),n=Ft(e),a=(r=e.ownerDocument)==null?void 0:r.body,i=qe(t.scrollWidth,t.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),s=qe(t.scrollHeight,t.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),o=-n.scrollLeft+jt(e),c=-n.scrollTop;return Te(a||t).direction==="rtl"&&(o+=qe(t.clientWidth,a?a.clientWidth:0)-i),{width:i,height:s,x:o,y:c}}function ja(e,r){var t=r.getRootNode&&r.getRootNode();if(e.contains(r))return!0;if(t&&xt(t)){var n=r;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Dt(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Va(e,r){var t=ze(e,!1,r==="fixed");return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function rr(e,r,t){return r===fr?Dt(xa(e,t)):Me(r)?Va(r,t):Dt(Fa(Re(e)))}function Wa(e){var r=at(gt(e)),t=["absolute","fixed"].indexOf(Te(e).position)>=0,n=t&&pe(e)?yt(e):e;return Me(n)?r.filter(function(a){return Me(a)&&ja(a,n)&&be(a)!=="body"}):[]}function Ka(e,r,t,n){var a=r==="clippingParents"?Wa(e):[].concat(r),i=[].concat(a,[t]),s=i[0],o=i.reduce(function(c,d){var u=rr(e,d,n);return c.top=qe(u.top,c.top),c.right=ht(u.right,c.right),c.bottom=ht(u.bottom,c.bottom),c.left=qe(u.left,c.left),c},rr(e,s,n));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function Pe(e){return e.split("-")[0]}function Ge(e){return e.split("-")[1]}function pr(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function vr(e){var r=e.reference,t=e.element,n=e.placement,a=n?Pe(n):null,i=n?Ge(n):null,s=r.x+r.width/2-t.width/2,o=r.y+r.height/2-t.height/2,c;switch(a){case ge:c={x:s,y:r.y-t.height};break;case we:c={x:s,y:r.y+r.height};break;case Ae:c={x:r.x+r.width,y:o};break;case Le:c={x:r.x-t.width,y:o};break;default:c={x:r.x,y:r.y}}var d=a?pr(a):null;if(d!=null){var u=d==="y"?"height":"width";switch(i){case He:c[d]=c[d]-(r[u]/2-t[u]/2);break;case nt:c[d]=c[d]+(r[u]/2-t[u]/2);break}}return c}function hr(){return{top:0,right:0,bottom:0,left:0}}function za(e){return Object.assign({},hr(),e)}function Ha(e,r){return r.reduce(function(t,n){return t[n]=e,t},{})}function Kt(e,r){r===void 0&&(r={});var t=r,n=t.placement,a=n===void 0?e.placement:n,i=t.strategy,s=i===void 0?e.strategy:i,o=t.boundary,c=o===void 0?ka:o,d=t.rootBoundary,u=d===void 0?fr:d,p=t.elementContext,y=p===void 0?et:p,g=t.altBoundary,C=g===void 0?!1:g,b=t.padding,L=b===void 0?0:b,w=za(typeof L!="number"?L:Ha(L,bt)),A=y===et?Sa:et,f=e.rects.popper,O=e.elements[C?A:y],$=Ka(Me(O)?O:O.contextElement||Re(e.elements.popper),c,u,s),m=ze(e.elements.reference),N=vr({reference:m,element:f,strategy:"absolute",placement:a}),D=Dt(Object.assign({},f,N)),q=y===et?D:m,x={top:$.top-q.top+w.top,bottom:q.bottom-$.bottom+w.bottom,left:$.left-q.left+w.left,right:q.right-$.right+w.right},j=e.modifiersData.offset;if(y===et&&j){var E=j[a];Object.keys(x).forEach(function(z){var Q=[Ae,we].indexOf(z)>=0?1:-1,re=[ge,we].indexOf(z)>=0?"y":"x";x[z]+=E[re]*Q})}return x}var ar={placement:"bottom",modifiers:[],strategy:"absolute"};function nr(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return!r.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function Ga(e){e===void 0&&(e={});var r=e,t=r.defaultModifiers,n=t===void 0?[]:t,a=r.defaultOptions,i=a===void 0?ar:a;return function(o,c,d){d===void 0&&(d=i);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},ar,i),modifiersData:{},elements:{reference:o,popper:c},attributes:{},styles:{}},p=[],y=!1,g={state:u,setOptions:function(w){var A=typeof w=="function"?w(u.options):w;b(),u.options=Object.assign({},i,u.options,A),u.scrollParents={reference:Me(o)?at(o):o.contextElement?at(o.contextElement):[],popper:at(c)};var f=Na(Ma([].concat(n,u.options.modifiers)));return u.orderedModifiers=f.filter(function(O){return O.enabled}),C(),g.update()},forceUpdate:function(){if(!y){var w=u.elements,A=w.reference,f=w.popper;if(!!nr(A,f)){u.rects={reference:ba(A,yt(f),u.options.strategy==="fixed"),popper:cr(f)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(x){return u.modifiersData[x.name]=Object.assign({},x.data)});for(var O=0;O<u.orderedModifiers.length;O++){if(u.reset===!0){u.reset=!1,O=-1;continue}var $=u.orderedModifiers[O],m=$.fn,N=$.options,D=N===void 0?{}:N,q=$.name;typeof m=="function"&&(u=m({state:u,options:D,name:q,instance:g})||u)}}}},update:qa(function(){return new Promise(function(L){g.forceUpdate(),L(u)})}),destroy:function(){b(),y=!0}};if(!nr(o,c))return g;g.setOptions(d).then(function(L){!y&&d.onFirstUpdate&&d.onFirstUpdate(L)});function C(){u.orderedModifiers.forEach(function(L){var w=L.name,A=L.options,f=A===void 0?{}:A,O=L.effect;if(typeof O=="function"){var $=O({state:u,name:w,instance:g,options:f}),m=function(){};p.push($||m)}})}function b(){p.forEach(function(L){return L()}),p=[]}return g}}var ft={passive:!0};function Ua(e){var r=e.state,t=e.instance,n=e.options,a=n.scroll,i=a===void 0?!0:a,s=n.resize,o=s===void 0?!0:s,c=se(r.elements.popper),d=[].concat(r.scrollParents.reference,r.scrollParents.popper);return i&&d.forEach(function(u){u.addEventListener("scroll",t.update,ft)}),o&&c.addEventListener("resize",t.update,ft),function(){i&&d.forEach(function(u){u.removeEventListener("scroll",t.update,ft)}),o&&c.removeEventListener("resize",t.update,ft)}}var Qa={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Ua,data:{}};function Xa(e){var r=e.state,t=e.name;r.modifiersData[t]=vr({reference:r.rects.reference,element:r.rects.popper,strategy:"absolute",placement:r.placement})}var Ya={name:"popperOffsets",enabled:!0,phase:"read",fn:Xa,data:{}},Za={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ja(e,r){var t=e.x,n=e.y,a=r.devicePixelRatio||1;return{x:Ke(t*a)/a||0,y:Ke(n*a)/a||0}}function sr(e){var r,t=e.popper,n=e.popperRect,a=e.placement,i=e.variation,s=e.offsets,o=e.position,c=e.gpuAcceleration,d=e.adaptive,u=e.roundOffsets,p=e.isFixed,y=s.x,g=y===void 0?0:y,C=s.y,b=C===void 0?0:C,L=typeof u=="function"?u({x:g,y:b}):{x:g,y:b};g=L.x,b=L.y;var w=s.hasOwnProperty("x"),A=s.hasOwnProperty("y"),f=Le,O=ge,$=window;if(d){var m=yt(t),N="clientHeight",D="clientWidth";if(m===se(t)&&(m=Re(t),Te(m).position!=="static"&&o==="absolute"&&(N="scrollHeight",D="scrollWidth")),m=m,a===ge||(a===Le||a===Ae)&&i===nt){O=we;var q=p&&m===$&&$.visualViewport?$.visualViewport.height:m[N];b-=q-n.height,b*=c?1:-1}if(a===Le||(a===ge||a===we)&&i===nt){f=Ae;var x=p&&m===$&&$.visualViewport?$.visualViewport.width:m[D];g-=x-n.width,g*=c?1:-1}}var j=Object.assign({position:o},d&&Za),E=u===!0?Ja({x:g,y:b},se(t)):{x:g,y:b};if(g=E.x,b=E.y,c){var z;return Object.assign({},j,(z={},z[O]=A?"0":"",z[f]=w?"0":"",z.transform=($.devicePixelRatio||1)<=1?"translate("+g+"px, "+b+"px)":"translate3d("+g+"px, "+b+"px, 0)",z))}return Object.assign({},j,(r={},r[O]=A?b+"px":"",r[f]=w?g+"px":"",r.transform="",r))}function en(e){var r=e.state,t=e.options,n=t.gpuAcceleration,a=n===void 0?!0:n,i=t.adaptive,s=i===void 0?!0:i,o=t.roundOffsets,c=o===void 0?!0:o,d={placement:Pe(r.placement),variation:Ge(r.placement),popper:r.elements.popper,popperRect:r.rects.popper,gpuAcceleration:a,isFixed:r.options.strategy==="fixed"};r.modifiersData.popperOffsets!=null&&(r.styles.popper=Object.assign({},r.styles.popper,sr(Object.assign({},d,{offsets:r.modifiersData.popperOffsets,position:r.options.strategy,adaptive:s,roundOffsets:c})))),r.modifiersData.arrow!=null&&(r.styles.arrow=Object.assign({},r.styles.arrow,sr(Object.assign({},d,{offsets:r.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),r.attributes.popper=Object.assign({},r.attributes.popper,{"data-popper-placement":r.placement})}var tn={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:en,data:{}};function rn(e){var r=e.state;Object.keys(r.elements).forEach(function(t){var n=r.styles[t]||{},a=r.attributes[t]||{},i=r.elements[t];!pe(i)||!be(i)||(Object.assign(i.style,n),Object.keys(a).forEach(function(s){var o=a[s];o===!1?i.removeAttribute(s):i.setAttribute(s,o===!0?"":o)}))})}function an(e){var r=e.state,t={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(r.elements.popper.style,t.popper),r.styles=t,r.elements.arrow&&Object.assign(r.elements.arrow.style,t.arrow),function(){Object.keys(r.elements).forEach(function(n){var a=r.elements[n],i=r.attributes[n]||{},s=Object.keys(r.styles.hasOwnProperty(n)?r.styles[n]:t[n]),o=s.reduce(function(c,d){return c[d]="",c},{});!pe(a)||!be(a)||(Object.assign(a.style,o),Object.keys(i).forEach(function(c){a.removeAttribute(c)}))})}}var nn={name:"applyStyles",enabled:!0,phase:"write",fn:rn,effect:an,requires:["computeStyles"]},sn=[Qa,Ya,tn,nn],ln=Ga({defaultModifiers:sn});function on(e){return e==="x"?"y":"x"}function pt(e,r,t){return qe(e,ht(r,t))}function un(e,r,t){var n=pt(e,r,t);return n>t?t:n}function cn(e){var r=e.state,t=e.options,n=e.name,a=t.mainAxis,i=a===void 0?!0:a,s=t.altAxis,o=s===void 0?!1:s,c=t.boundary,d=t.rootBoundary,u=t.altBoundary,p=t.padding,y=t.tether,g=y===void 0?!0:y,C=t.tetherOffset,b=C===void 0?0:C,L=Kt(r,{boundary:c,rootBoundary:d,padding:p,altBoundary:u}),w=Pe(r.placement),A=Ge(r.placement),f=!A,O=pr(w),$=on(O),m=r.modifiersData.popperOffsets,N=r.rects.reference,D=r.rects.popper,q=typeof b=="function"?b(Object.assign({},r.rects,{placement:r.placement})):b,x=typeof q=="number"?{mainAxis:q,altAxis:q}:Object.assign({mainAxis:0,altAxis:0},q),j=r.modifiersData.offset?r.modifiersData.offset[r.placement]:null,E={x:0,y:0};if(!!m){if(i){var z,Q=O==="y"?ge:Le,re=O==="y"?we:Ae,G=O==="y"?"height":"width",V=m[O],Oe=V+L[Q],F=V-L[re],X=g?-D[G]/2:0,W=A===He?N[G]:D[G],ee=A===He?-D[G]:-N[G],le=r.elements.arrow,K=g&&le?cr(le):{width:0,height:0},I=r.modifiersData["arrow#persistent"]?r.modifiersData["arrow#persistent"].padding:hr(),h=I[Q],B=I[re],Z=pt(0,N[G],K[G]),ne=f?N[G]/2-X-Z-h-x.mainAxis:W-Z-h-x.mainAxis,Qe=f?-N[G]/2+X+Z+B+x.mainAxis:ee+Z+B+x.mainAxis,Xe=r.elements.arrow&&yt(r.elements.arrow),_e=Xe?O==="y"?Xe.clientTop||0:Xe.clientLeft||0:0,it=(z=j==null?void 0:j[O])!=null?z:0,wt=V+ne-it-_e,$e=V+Qe-it,lt=pt(g?ht(Oe,wt):Oe,V,g?qe(F,$e):F);m[O]=lt,E[O]=lt-V}if(o){var Be,oe=O==="x"?ge:Le,ue=O==="x"?we:Ae,ve=m[$],ke=$==="y"?"height":"width",ot=ve+L[oe],Ye=ve-L[ue],Ze=[ge,Le].indexOf(w)!==-1,he=(Be=j==null?void 0:j[$])!=null?Be:0,Je=Ze?ot:ve-N[ke]-D[ke]-he+x.altAxis,Ee=Ze?ve+N[ke]+D[ke]-he-x.altAxis:Ye,Ie=g&&Ze?un(Je,ve,Ee):pt(g?Je:ot,ve,g?Ee:Ye);m[$]=Ie,E[$]=Ie-ve}r.modifiersData[n]=E}}var dn={name:"preventOverflow",enabled:!0,phase:"main",fn:cn,requiresIfExists:["offset"]},fn={left:"right",right:"left",bottom:"top",top:"bottom"};function vt(e){return e.replace(/left|right|bottom|top/g,function(r){return fn[r]})}var pn={start:"end",end:"start"};function ir(e){return e.replace(/start|end/g,function(r){return pn[r]})}function vn(e,r){r===void 0&&(r={});var t=r,n=t.placement,a=t.boundary,i=t.rootBoundary,s=t.padding,o=t.flipVariations,c=t.allowedAutoPlacements,d=c===void 0?Ca:c,u=Ge(n),p=u?o?tr:tr.filter(function(C){return Ge(C)===u}):bt,y=p.filter(function(C){return d.indexOf(C)>=0});y.length===0&&(y=p);var g=y.reduce(function(C,b){return C[b]=Kt(e,{placement:b,boundary:a,rootBoundary:i,padding:s})[Pe(b)],C},{});return Object.keys(g).sort(function(C,b){return g[C]-g[b]})}function hn(e){if(Pe(e)===Wt)return[];var r=vt(e);return[ir(e),r,ir(r)]}function mn(e){var r=e.state,t=e.options,n=e.name;if(!r.modifiersData[n]._skip){for(var a=t.mainAxis,i=a===void 0?!0:a,s=t.altAxis,o=s===void 0?!0:s,c=t.fallbackPlacements,d=t.padding,u=t.boundary,p=t.rootBoundary,y=t.altBoundary,g=t.flipVariations,C=g===void 0?!0:g,b=t.allowedAutoPlacements,L=r.options.placement,w=Pe(L),A=w===L,f=c||(A||!C?[vt(L)]:hn(L)),O=[L].concat(f).reduce(function(K,I){return K.concat(Pe(I)===Wt?vn(r,{placement:I,boundary:u,rootBoundary:p,padding:d,flipVariations:C,allowedAutoPlacements:b}):I)},[]),$=r.rects.reference,m=r.rects.popper,N=new Map,D=!0,q=O[0],x=0;x<O.length;x++){var j=O[x],E=Pe(j),z=Ge(j)===He,Q=[ge,we].indexOf(E)>=0,re=Q?"width":"height",G=Kt(r,{placement:j,boundary:u,rootBoundary:p,altBoundary:y,padding:d}),V=Q?z?Ae:Le:z?we:ge;$[re]>m[re]&&(V=vt(V));var Oe=vt(V),F=[];if(i&&F.push(G[E]<=0),o&&F.push(G[V]<=0,G[Oe]<=0),F.every(function(K){return K})){q=j,D=!1;break}N.set(j,F)}if(D)for(var X=C?3:1,W=function(I){var h=O.find(function(B){var Z=N.get(B);if(Z)return Z.slice(0,I).every(function(ne){return ne})});if(h)return q=h,"break"},ee=X;ee>0;ee--){var le=W(ee);if(le==="break")break}r.placement!==q&&(r.modifiersData[n]._skip=!0,r.placement=q,r.reset=!0)}}var gn={name:"flip",enabled:!0,phase:"main",fn:mn,requiresIfExists:["offset"],data:{_skip:!1}};function yn(e,r,t){const{disabled:n,appendTo:a,appendToBody:i,openDirection:s}=ie(e),o=st().proxy,c=t.multiselect,d=t.dropdown,u=ae(!1),p=ae(null),y=ae(null),g=U(()=>a.value||i.value),C=U(()=>s.value==="top"&&y.value==="bottom"||s.value==="bottom"&&y.value!=="top"?"bottom":"top"),b=()=>{u.value||n.value||(u.value=!0,r.emit("open",o),g.value&&rt(()=>{w()}))},L=()=>{!u.value||(u.value=!1,r.emit("close",o))},w=()=>{if(!p.value)return;let f=parseInt(window.getComputedStyle(d.value).borderTopWidth.replace("px","")),O=parseInt(window.getComputedStyle(d.value).borderBottomWidth.replace("px",""));p.value.setOptions($=>({...$,modifiers:[...$.modifiers,{name:"offset",options:{offset:[0,(C.value==="top"?f:O)*-1]}}]})),p.value.update()},A=f=>{for(;f&&f!==document.body;){if(getComputedStyle(f).position==="fixed")return!0;f=f.parentElement}return!1};return Nt(()=>{!g.value||(p.value=ln(c.value,d.value,{strategy:A(c.value)?"fixed":void 0,placement:s.value,modifiers:[dn,gn,{name:"sameWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:({state:f})=>{f.styles.popper.width=`${f.rects.reference.width}px`},effect:({state:f})=>{f.elements.popper.style.width=`${f.elements.reference.offsetWidth}px`}},{name:"toggleClass",enabled:!0,phase:"write",fn({state:f}){y.value=f.placement}}]}))}),xr(()=>{!g.value||!p.value||(p.value.destroy(),p.value=null)}),{popper:p,isOpen:u,open:b,close:L,placement:C,updatePopper:w}}function bn(e,r,t){const{searchable:n,disabled:a,clearOnBlur:i}=ie(e),s=t.input,o=t.open,c=t.close,d=t.clearSearch,u=t.isOpen,p=t.wrapper,y=t.tags,g=ae(!1),C=ae(!1),b=U(()=>n.value||a.value?-1:0),L=()=>{n.value&&s.value.blur(),p.value.blur()},w=()=>{n.value&&!a.value&&s.value.focus()},A=(D=!0)=>{a.value||(g.value=!0,D&&o())},f=()=>{g.value=!1,setTimeout(()=>{g.value||(c(),i.value&&d())},1)};return{tabindex:b,isActive:g,mouseClicked:C,blur:L,focus:w,activate:A,deactivate:f,handleFocusIn:D=>{D.target.closest("[data-tags]")&&D.target.nodeName!=="INPUT"||D.target.closest("[data-clear]")||A(C.value)},handleFocusOut:()=>{f()},handleCaretClick:()=>{f(),L()},handleMousedown:D=>{C.value=!0,u.value&&(D.target.isEqualNode(p.value)||D.target.isEqualNode(y.value))?setTimeout(()=>{f()},0):!u.value&&(document.activeElement.isEqualNode(p.value)||document.activeElement.isEqualNode(s.value))&&A(),setTimeout(()=>{C.value=!1},0)}}}function wn(e,r,t){const{mode:n,addTagOn:a,openDirection:i,searchable:s,showOptions:o,valueProp:c,groups:d,addOptionOn:u,createTag:p,createOption:y,reverse:g}=ie(e),C=st().proxy,b=t.iv,L=t.update,w=t.deselect,A=t.search,f=t.setPointer,O=t.selectPointer,$=t.backwardPointer,m=t.forwardPointer,N=t.multiselect,D=t.wrapper,q=t.tags,x=t.isOpen,j=t.open,E=t.blur,z=t.fo,Q=U(()=>p.value||y.value||!1),re=U(()=>a.value!==void 0?a.value:u.value!==void 0?u.value:["enter"]),G=()=>{n.value==="tags"&&!o.value&&Q.value&&s.value&&!d.value&&f(z.value[z.value.map(F=>F[c.value]).indexOf(A.value)])};return{handleKeydown:F=>{r.emit("keydown",F,C);let X,W;switch(["ArrowLeft","ArrowRight","Enter"].indexOf(F.key)!==-1&&n.value==="tags"&&(X=[...N.value.querySelectorAll("[data-tags] > *")].filter(ee=>ee!==q.value),W=X.findIndex(ee=>ee===document.activeElement)),F.key){case"Backspace":if(n.value==="single"||s.value&&[null,""].indexOf(A.value)===-1||b.value.length===0)return;let ee=b.value.filter(le=>!le.disabled&&le.remove!==!1);ee.length&&w(ee[ee.length-1]);break;case"Enter":if(F.preventDefault(),F.keyCode===229)return;if(W!==-1&&W!==void 0){L([...b.value].filter((le,K)=>K!==W)),W===X.length-1&&(X.length-1?X[X.length-2].focus():s.value?q.value.querySelector("input").focus():D.value.focus());return}if(re.value.indexOf("enter")===-1&&Q.value)return;G(),O();break;case" ":if(!Q.value&&!s.value){F.preventDefault(),G(),O();return}if(!Q.value)return!1;if(re.value.indexOf("space")===-1&&Q.value)return;F.preventDefault(),G(),O();break;case"Tab":case";":case",":if(re.value.indexOf(F.key.toLowerCase())===-1||!Q.value)return;G(),O(),F.preventDefault();break;case"Escape":E();break;case"ArrowUp":if(F.preventDefault(),!o.value)return;x.value||j(),$();break;case"ArrowDown":if(F.preventDefault(),!o.value)return;x.value||j(),m();break;case"ArrowLeft":if(s.value&&q.value&&q.value.querySelector("input").selectionStart||F.shiftKey||n.value!=="tags"||!b.value||!b.value.length)return;F.preventDefault(),W===-1?X[X.length-1].focus():W>0&&X[W-1].focus();break;case"ArrowRight":if(W===-1||F.shiftKey||n.value!=="tags"||!b.value||!b.value.length)return;F.preventDefault(),X.length>W+1?X[W+1].focus():s.value?q.value.querySelector("input").focus():s.value||D.value.focus();break}},handleKeyup:F=>{r.emit("keyup",F,C)},preparePointer:G}}function On(e,r,t){const{classes:n,disabled:a,showOptions:i,breakTags:s}=ie(e),o=t.isOpen,c=t.isPointed,d=t.isSelected,u=t.isDisabled,p=t.isActive,y=t.canPointGroups,g=t.resolving,C=t.fo,b=t.placement,L=U(()=>({container:"multiselect",containerDisabled:"is-disabled",containerOpen:"is-open",containerOpenTop:"is-open-top",containerActive:"is-active",wrapper:"multiselect-wrapper",singleLabel:"multiselect-single-label",singleLabelText:"multiselect-single-label-text",multipleLabel:"multiselect-multiple-label",search:"multiselect-search",tags:"multiselect-tags",tag:"multiselect-tag",tagWrapper:"multiselect-tag-wrapper",tagWrapperBreak:"multiselect-tag-wrapper-break",tagDisabled:"is-disabled",tagRemove:"multiselect-tag-remove",tagRemoveIcon:"multiselect-tag-remove-icon",tagsSearchWrapper:"multiselect-tags-search-wrapper",tagsSearch:"multiselect-tags-search",tagsSearchCopy:"multiselect-tags-search-copy",placeholder:"multiselect-placeholder",caret:"multiselect-caret",caretOpen:"is-open",clear:"multiselect-clear",clearIcon:"multiselect-clear-icon",spinner:"multiselect-spinner",inifinite:"multiselect-inifite",inifiniteSpinner:"multiselect-inifite-spinner",dropdown:"multiselect-dropdown",dropdownTop:"is-top",dropdownHidden:"is-hidden",options:"multiselect-options",optionsTop:"is-top",group:"multiselect-group",groupLabel:"multiselect-group-label",groupLabelPointable:"is-pointable",groupLabelPointed:"is-pointed",groupLabelSelected:"is-selected",groupLabelDisabled:"is-disabled",groupLabelSelectedPointed:"is-selected is-pointed",groupLabelSelectedDisabled:"is-selected is-disabled",groupOptions:"multiselect-group-options",option:"multiselect-option",optionPointed:"is-pointed",optionSelected:"is-selected",optionDisabled:"is-disabled",optionSelectedPointed:"is-selected is-pointed",optionSelectedDisabled:"is-selected is-disabled",noOptions:"multiselect-no-options",noResults:"multiselect-no-results",fakeInput:"multiselect-fake-input",assist:"multiselect-assistive-text",spacer:"multiselect-spacer",...n.value})),w=U(()=>!!(o.value&&i.value&&(!g.value||g.value&&C.value.length)));return{classList:H(()=>{const f=L.value;return{container:[f.container].concat(a.value?f.containerDisabled:[]).concat(w.value&&b.value==="top"?f.containerOpenTop:[]).concat(w.value&&b.value!=="top"?f.containerOpen:[]).concat(p.value?f.containerActive:[]),wrapper:f.wrapper,spacer:f.spacer,singleLabel:f.singleLabel,singleLabelText:f.singleLabelText,multipleLabel:f.multipleLabel,search:f.search,tags:f.tags,tag:[f.tag].concat(a.value?f.tagDisabled:[]),tagWrapper:[f.tagWrapper,s.value?f.tagWrapperBreak:null],tagDisabled:f.tagDisabled,tagRemove:f.tagRemove,tagRemoveIcon:f.tagRemoveIcon,tagsSearchWrapper:f.tagsSearchWrapper,tagsSearch:f.tagsSearch,tagsSearchCopy:f.tagsSearchCopy,placeholder:f.placeholder,caret:[f.caret].concat(o.value?f.caretOpen:[]),clear:f.clear,clearIcon:f.clearIcon,spinner:f.spinner,inifinite:f.inifinite,inifiniteSpinner:f.inifiniteSpinner,dropdown:[f.dropdown].concat(b.value==="top"?f.dropdownTop:[]).concat(!o.value||!i.value||!w.value?f.dropdownHidden:[]),options:[f.options].concat(b.value==="top"?f.optionsTop:[]),group:f.group,groupLabel:O=>{let $=[f.groupLabel];return c(O)?$.push(d(O)?f.groupLabelSelectedPointed:f.groupLabelPointed):d(O)&&y.value?$.push(u(O)?f.groupLabelSelectedDisabled:f.groupLabelSelected):u(O)&&$.push(f.groupLabelDisabled),y.value&&$.push(f.groupLabelPointable),$},groupOptions:f.groupOptions,option:(O,$)=>{let m=[f.option];return c(O)?m.push(d(O)?f.optionSelectedPointed:f.optionPointed):d(O)?m.push(u(O)?f.optionSelectedDisabled:f.optionSelected):(u(O)||$&&u($))&&m.push(f.optionDisabled),m},noOptions:f.noOptions,noResults:f.noResults,assist:f.assist,fakeInput:f.fakeInput}}),showDropdown:w}}function kn(e,r,t){const{limit:n,infinite:a}=ie(e),i=t.isOpen,s=t.offset,o=t.search,c=t.pfo,d=t.eo,u=ae(null),p=Ve(null),y=U(()=>s.value<c.value.length),g=b=>{const{isIntersecting:L,target:w}=b[0];if(L){const A=w.offsetParent,f=A.scrollTop;s.value+=n.value==-1?10:n.value,rt(()=>{A.scrollTop=f})}},C=()=>{i.value&&s.value<c.value.length?u.value.observe(p.value):!i.value&&u.value&&u.value.disconnect()};return fe(i,()=>{!a.value||C()}),fe(o,()=>{!a.value||(s.value=n.value,C())},{flush:"post"}),fe(d,()=>{!a.value||C()},{immediate:!1,flush:"post"}),Nt(()=>{window&&window.IntersectionObserver&&(u.value=new IntersectionObserver(g))}),{hasMore:y,infiniteLoader:p}}function Sn(e,r,t){const{placeholder:n,id:a,valueProp:i,label:s,mode:o,groupLabel:c,aria:d,searchable:u}=ie(e),p=t.pointer,y=t.iv,g=t.hasSelected,C=t.multipleLabelText,b=ae(null),L=U(()=>`${a.value?a.value+"-":""}assist`),w=U(()=>`${a.value?a.value+"-":""}multiselect-options`),A=U(()=>{if(p.value){let E=a.value?`${a.value}-`:"";return E+=`${p.value.group?"multiselect-group":"multiselect-option"}-`,E+=p.value.group?p.value.index:p.value[i.value],E}}),f=U(()=>n.value),O=U(()=>o.value!=="single"),$=H(()=>o.value==="single"&&g.value?y.value[s.value]:o.value==="multiple"&&g.value?C.value:o.value==="tags"&&g.value?y.value.map(E=>E[s.value]).join(", "):""),m=H(()=>{let E={...d.value};return u.value&&(E["aria-labelledby"]=E["aria-labelledby"]?`${L.value} ${E["aria-labelledby"]}`:L.value,$.value&&E["aria-label"]&&(E["aria-label"]=`${$.value}, ${E["aria-label"]}`)),E}),N=E=>`${a.value?a.value+"-":""}multiselect-option-${E[i.value]}`,D=E=>`${a.value?a.value+"-":""}multiselect-group-${E.index}`,q=E=>`${E}`,x=E=>`${E}`,j=E=>`${E} \u274E`;return Nt(()=>{if(a.value&&document&&document.querySelector){let E=document.querySelector(`[for="${a.value}"]`);b.value=E?E.innerText:null}}),{arias:m,ariaLabel:$,ariaAssist:L,ariaControls:w,ariaPlaceholder:f,ariaMultiselectable:O,ariaActiveDescendant:A,ariaOptionId:N,ariaOptionLabel:q,ariaGroupId:D,ariaGroupLabel:x,ariaTagLabel:j}}function Cn(e,r,t){const{locale:n,fallbackLocale:a}=ie(e);return{localize:s=>!s||typeof s!="object"?s:s&&s[n.value]?s[n.value]:s&&n.value&&s[n.value.toUpperCase()]?s[n.value.toUpperCase()]:s&&s[a.value]?s[a.value]:s&&a.value&&s[a.value.toUpperCase()]?s[a.value.toUpperCase()]:s&&Object.keys(s)[0]?s[Object.keys(s)[0]]:""}}function Ln(e,r,t){const n=Ve(null),a=Ve(null),i=Ve(null),s=Ve(null),o=Ve(null);return{multiselect:n,wrapper:a,tags:i,input:s,dropdown:o}}function Tn(e,r,t,n={}){return t.forEach(a=>{n={...n,...a(e,r,n)}}),n}var zt={name:"Multiselect",emits:["paste","open","close","select","deselect","input","search-change","tag","option","update:modelValue","change","clear","keydown","keyup","max","create"],props:{value:{required:!1},modelValue:{required:!1},options:{type:[Array,Object,Function],required:!1,default:()=>[]},id:{type:[String,Number],required:!1,default:void 0},name:{type:[String,Number],required:!1,default:"multiselect"},disabled:{type:Boolean,required:!1,default:!1},label:{type:String,required:!1,default:"label"},trackBy:{type:[String,Array],required:!1,default:void 0},valueProp:{type:String,required:!1,default:"value"},placeholder:{type:String,required:!1,default:null},mode:{type:String,required:!1,default:"single"},searchable:{type:Boolean,required:!1,default:!1},limit:{type:Number,required:!1,default:-1},hideSelected:{type:Boolean,required:!1,default:!0},createTag:{type:Boolean,required:!1,default:void 0},createOption:{type:Boolean,required:!1,default:void 0},appendNewTag:{type:Boolean,required:!1,default:void 0},appendNewOption:{type:Boolean,required:!1,default:void 0},addTagOn:{type:Array,required:!1,default:void 0},addOptionOn:{type:Array,required:!1,default:void 0},caret:{type:Boolean,required:!1,default:!0},loading:{type:Boolean,required:!1,default:!1},noOptionsText:{type:[String,Object],required:!1,default:"The list is empty"},noResultsText:{type:[String,Object],required:!1,default:"No results found"},multipleLabel:{type:Function,required:!1,default:void 0},object:{type:Boolean,required:!1,default:!1},delay:{type:Number,required:!1,default:-1},minChars:{type:Number,required:!1,default:0},resolveOnLoad:{type:Boolean,required:!1,default:!0},filterResults:{type:Boolean,required:!1,default:!0},clearOnSearch:{type:Boolean,required:!1,default:!1},clearOnSelect:{type:Boolean,required:!1,default:!0},canDeselect:{type:Boolean,required:!1,default:!0},canClear:{type:Boolean,required:!1,default:!0},max:{type:Number,required:!1,default:-1},showOptions:{type:Boolean,required:!1,default:!0},required:{type:Boolean,required:!1,default:!1},openDirection:{type:String,required:!1,default:"bottom"},nativeSupport:{type:Boolean,required:!1,default:!1},classes:{type:Object,required:!1,default:()=>({})},strict:{type:Boolean,required:!1,default:!0},closeOnSelect:{type:Boolean,required:!1,default:!0},closeOnDeselect:{type:Boolean,required:!1,default:!1},autocomplete:{type:String,required:!1,default:void 0},groups:{type:Boolean,required:!1,default:!1},groupLabel:{type:String,required:!1,default:"label"},groupOptions:{type:String,required:!1,default:"options"},groupHideEmpty:{type:Boolean,required:!1,default:!1},groupSelect:{type:Boolean,required:!1,default:!0},inputType:{type:String,required:!1,default:"text"},attrs:{required:!1,type:Object,default:()=>({})},onCreate:{required:!1,type:Function,default:void 0},disabledProp:{type:String,required:!1,default:"disabled"},searchStart:{type:Boolean,required:!1,default:!1},reverse:{type:Boolean,required:!1,default:!1},regex:{type:[Object,String,RegExp],required:!1,default:void 0},rtl:{type:Boolean,required:!1,default:!1},infinite:{type:Boolean,required:!1,default:!1},aria:{required:!1,type:Object,default:()=>({})},clearOnBlur:{required:!1,type:Boolean,default:!0},locale:{required:!1,type:String,default:null},fallbackLocale:{required:!1,type:String,default:"en"},searchFilter:{required:!1,type:Function,default:null},allowAbsent:{required:!1,type:Boolean,default:!1},appendToBody:{required:!1,type:Boolean,default:!1},closeOnScroll:{required:!1,type:Boolean,default:!1},breakTags:{required:!1,type:Boolean,default:!1},appendTo:{required:!1,type:String,default:void 0}},setup(e,r){return Tn(e,r,[Ln,Cn,ua,da,yn,ca,oa,bn,va,kn,ha,wn,On,Sn])},beforeMount(){(this.$root.constructor&&this.$root.constructor.version&&this.$root.constructor.version.match(/^2\./)||this.vueVersionMs===2)&&(this.$options.components.Teleport||(this.$options.components.Teleport={render(){return this.$slots.default?this.$slots.default[0]:null}}))}};const _n=["id","dir"],$n=["tabindex","aria-controls","aria-placeholder","aria-expanded","aria-activedescendant","aria-multiselectable","role"],Bn=["type","modelValue","value","autocomplete","id","aria-controls","aria-placeholder","aria-expanded","aria-activedescendant","aria-multiselectable"],En=["onKeyup","aria-label"],Pn=["onClick"],An=["type","modelValue","value","id","autocomplete","aria-controls","aria-placeholder","aria-expanded","aria-activedescendant","aria-multiselectable"],Rn=["innerHTML"],In=["id"],Dn=["id"],Nn=["id","aria-label","aria-selected"],qn=["data-pointed","onMouseenter","onClick"],Mn=["innerHTML"],xn=["aria-label"],Fn=["data-pointed","data-selected","onMouseenter","onClick","id","aria-selected","aria-label"],jn=["data-pointed","data-selected","onMouseenter","onClick","id","aria-selected","aria-label"],Vn=["innerHTML"],Wn=["innerHTML"],Kn=["value"],zn=["name","value"],Hn=["name","value"],Gn=["id"];function Un(e,r,t,n,a,i){return k(),S("div",{ref:"multiselect",class:R(e.classList.container),id:t.searchable?void 0:t.id,dir:t.rtl?"rtl":void 0,onFocusin:r[12]||(r[12]=(...s)=>e.handleFocusIn&&e.handleFocusIn(...s)),onFocusout:r[13]||(r[13]=(...s)=>e.handleFocusOut&&e.handleFocusOut(...s)),onKeyup:r[14]||(r[14]=(...s)=>e.handleKeyup&&e.handleKeyup(...s)),onKeydown:r[15]||(r[15]=(...s)=>e.handleKeydown&&e.handleKeydown(...s))},[T("div",Bt({class:e.classList.wrapper,onMousedown:r[9]||(r[9]=(...s)=>e.handleMousedown&&e.handleMousedown(...s)),ref:"wrapper",tabindex:e.tabindex,"aria-controls":t.searchable?void 0:e.ariaControls,"aria-placeholder":t.searchable?void 0:e.ariaPlaceholder,"aria-expanded":t.searchable?void 0:e.isOpen,"aria-activedescendant":t.searchable?void 0:e.ariaActiveDescendant,"aria-multiselectable":t.searchable?void 0:e.ariaMultiselectable,role:t.searchable?void 0:"combobox"},t.searchable?{}:e.arias),[P(" Search "),t.mode!=="tags"&&t.searchable&&!t.disabled?(k(),S("input",Bt({key:0,type:t.inputType,modelValue:e.search,value:e.search,class:e.classList.search,autocomplete:t.autocomplete,id:t.searchable?t.id:void 0,onInput:r[0]||(r[0]=(...s)=>e.handleSearchInput&&e.handleSearchInput(...s)),onKeypress:r[1]||(r[1]=(...s)=>e.handleKeypress&&e.handleKeypress(...s)),onPaste:r[2]||(r[2]=Et((...s)=>e.handlePaste&&e.handlePaste(...s),["stop"])),ref:"input","aria-controls":e.ariaControls,"aria-placeholder":e.ariaPlaceholder,"aria-expanded":e.isOpen,"aria-activedescendant":e.ariaActiveDescendant,"aria-multiselectable":e.ariaMultiselectable,role:"combobox"},{...t.attrs,...e.arias}),null,16,Bn)):P("v-if",!0),P(" Tags (with search) "),t.mode=="tags"?(k(),S("div",{key:1,class:R(e.classList.tags),"data-tags":""},[(k(!0),S(de,null,me(e.iv,(s,o,c)=>te(e.$slots,"tag",{option:s,handleTagRemove:e.handleTagRemove,disabled:t.disabled},()=>[(k(),S("span",{class:R([e.classList.tag,s.disabled?e.classList.tagDisabled:null]),tabindex:"-1",onKeyup:Rt(d=>e.handleTagRemove(s,d),["enter"]),key:c,"aria-label":e.ariaTagLabel(e.localize(s[t.label]))},[T("span",{class:R(e.classList.tagWrapper)},J(e.localize(s[t.label])),3),!t.disabled&&!s.disabled?(k(),S("span",{key:0,class:R(e.classList.tagRemove),onClick:Et(d=>e.handleTagRemove(s,d),["stop"])},[T("span",{class:R(e.classList.tagRemoveIcon)},null,2)],10,Pn)):P("v-if",!0)],42,En))])),256)),T("div",{class:R(e.classList.tagsSearchWrapper),ref:"tags"},[P(" Used for measuring search width "),T("span",{class:R(e.classList.tagsSearchCopy)},J(e.search),3),P(" Actual search input "),t.searchable&&!t.disabled?(k(),S("input",Bt({key:0,type:t.inputType,modelValue:e.search,value:e.search,class:e.classList.tagsSearch,id:t.searchable?t.id:void 0,autocomplete:t.autocomplete,onInput:r[3]||(r[3]=(...s)=>e.handleSearchInput&&e.handleSearchInput(...s)),onKeypress:r[4]||(r[4]=(...s)=>e.handleKeypress&&e.handleKeypress(...s)),onPaste:r[5]||(r[5]=Et((...s)=>e.handlePaste&&e.handlePaste(...s),["stop"])),ref:"input","aria-controls":e.ariaControls,"aria-placeholder":e.ariaPlaceholder,"aria-expanded":e.isOpen,"aria-activedescendant":e.ariaActiveDescendant,"aria-multiselectable":e.ariaMultiselectable,role:"combobox"},{...t.attrs,...e.arias}),null,16,An)):P("v-if",!0)],2)],2)):P("v-if",!0),P(" Single label "),t.mode=="single"&&e.hasSelected&&!e.search&&e.iv?te(e.$slots,"singlelabel",{key:2,value:e.iv},()=>[T("div",{class:R(e.classList.singleLabel)},[T("span",{class:R(e.classList.singleLabelText)},J(e.localize(e.iv[t.label])),3)],2)]):P("v-if",!0),P(" Multiple label "),t.mode=="multiple"&&e.hasSelected&&!e.search?te(e.$slots,"multiplelabel",{key:3,values:e.iv},()=>[T("div",{class:R(e.classList.multipleLabel),innerHTML:e.multipleLabelText},null,10,Rn)]):P("v-if",!0),P(" Placeholder "),t.placeholder&&!e.hasSelected&&!e.search?te(e.$slots,"placeholder",{key:4},()=>[T("div",{class:R(e.classList.placeholder),"aria-hidden":"true"},J(t.placeholder),3)]):P("v-if",!0),P(" Spinner "),t.loading||e.resolving?te(e.$slots,"spinner",{key:5},()=>[T("span",{class:R(e.classList.spinner),"aria-hidden":"true"},null,2)]):P("v-if",!0),P(" Clear "),e.hasSelected&&!t.disabled&&t.canClear&&!e.busy?te(e.$slots,"clear",{key:6,clear:e.clear},()=>[T("span",{"aria-hidden":"true",tabindex:"0",role:"button","data-clear":"","aria-roledescription":"\u274E",class:R(e.classList.clear),onClick:r[6]||(r[6]=(...s)=>e.clear&&e.clear(...s)),onKeyup:r[7]||(r[7]=Rt((...s)=>e.clear&&e.clear(...s),["enter"]))},[T("span",{class:R(e.classList.clearIcon)},null,2)],34)]):P("v-if",!0),P(" Caret "),t.caret&&t.showOptions?te(e.$slots,"caret",{key:7,handleCaretClick:e.handleCaretClick,isOpen:e.isOpen},()=>[T("span",{class:R(e.classList.caret),onClick:r[8]||(r[8]=(...s)=>e.handleCaretClick&&e.handleCaretClick(...s)),"aria-hidden":"true"},null,2)]):P("v-if",!0)],16,$n),P(" Options "),(k(),tt(Mr,{to:t.appendTo||"body",disabled:!t.appendToBody&&!t.appendTo},[T("div",{id:t.id?`${t.id}-dropdown`:void 0,class:R(e.classList.dropdown),tabindex:"-1",ref:"dropdown",onFocusin:r[10]||(r[10]=(...s)=>e.handleFocusIn&&e.handleFocusIn(...s)),onFocusout:r[11]||(r[11]=(...s)=>e.handleFocusOut&&e.handleFocusOut(...s))},[te(e.$slots,"beforelist",{options:e.fo}),T("ul",{class:R(e.classList.options),id:e.ariaControls,role:"listbox"},[t.groups?(k(!0),S(de,{key:0},me(e.fg,(s,o,c)=>(k(),S("li",{class:R(e.classList.group),key:c,id:e.ariaGroupId(s),"aria-label":e.ariaGroupLabel(e.localize(s[t.groupLabel])),"aria-selected":e.isSelected(s),role:"option"},[s.__CREATE__?P("v-if",!0):(k(),S("div",{key:0,class:R(e.classList.groupLabel(s)),"data-pointed":e.isPointed(s),onMouseenter:d=>e.setPointer(s,o),onClick:d=>e.handleGroupClick(s)},[te(e.$slots,"grouplabel",{group:s,isSelected:e.isSelected,isPointed:e.isPointed},()=>[T("span",{innerHTML:e.localize(s[t.groupLabel])},null,8,Mn)])],42,qn)),T("ul",{class:R(e.classList.groupOptions),"aria-label":e.ariaGroupLabel(e.localize(s[t.groupLabel])),role:"group"},[(k(!0),S(de,null,me(s.__VISIBLE__,(d,u,p)=>(k(),S("li",{class:R(e.classList.option(d,s)),"data-pointed":e.isPointed(d),"data-selected":e.isSelected(d)||void 0,key:p,onMouseenter:y=>e.setPointer(d),onClick:y=>e.handleOptionClick(d),id:e.ariaOptionId(d),"aria-selected":e.isSelected(d),"aria-label":e.ariaOptionLabel(e.localize(d[t.label])),role:"option"},[te(e.$slots,"option",{option:d,isSelected:e.isSelected,isPointed:e.isPointed,search:e.search},()=>[T("span",null,J(e.localize(d[t.label])),1)])],42,Fn))),128))],10,xn)],10,Nn))),128)):(k(!0),S(de,{key:1},me(e.fo,(s,o,c)=>(k(),S("li",{class:R(e.classList.option(s)),"data-pointed":e.isPointed(s),"data-selected":e.isSelected(s)||void 0,key:c,onMouseenter:d=>e.setPointer(s),onClick:d=>e.handleOptionClick(s),id:e.ariaOptionId(s),"aria-selected":e.isSelected(s),"aria-label":e.ariaOptionLabel(e.localize(s[t.label])),role:"option"},[te(e.$slots,"option",{option:s,isSelected:e.isSelected,isPointed:e.isPointed,search:e.search},()=>[T("span",null,J(e.localize(s[t.label])),1)])],42,jn))),128))],10,Dn),e.noOptions?te(e.$slots,"nooptions",{key:0},()=>[T("div",{class:R(e.classList.noOptions),innerHTML:e.localize(t.noOptionsText)},null,10,Vn)]):P("v-if",!0),e.noResults?te(e.$slots,"noresults",{key:1},()=>[T("div",{class:R(e.classList.noResults),innerHTML:e.localize(t.noResultsText)},null,10,Wn)]):P("v-if",!0),t.infinite&&e.hasMore?(k(),S("div",{key:2,class:R(e.classList.inifinite),ref:"infiniteLoader"},[te(e.$slots,"infinite",{},()=>[T("span",{class:R(e.classList.inifiniteSpinner)},null,2)])],2)):P("v-if",!0),te(e.$slots,"afterlist",{options:e.fo})],42,In)],8,["to","disabled"])),P(" Hacky input element to show HTML5 required warning "),t.required?(k(),S("input",{key:0,class:R(e.classList.fakeInput),tabindex:"-1",value:e.textValue,required:""},null,10,Kn)):P("v-if",!0),P(" Native input support "),t.nativeSupport?(k(),S(de,{key:1},[t.mode=="single"?(k(),S("input",{key:0,type:"hidden",name:t.name,value:e.plainValue!==void 0?e.plainValue:""},null,8,zn)):(k(!0),S(de,{key:1},me(e.plainValue,(s,o)=>(k(),S("input",{type:"hidden",name:`${t.name}[]`,value:s,key:o},null,8,Hn))),128))],64)):P("v-if",!0),P(" Screen reader assistive text "),t.searchable&&e.hasSelected?(k(),S("div",{key:2,class:R(e.classList.assist),id:e.ariaAssist,"aria-hidden":"true"},J(e.ariaLabel),11,Gn)):P("v-if",!0),P(" Create height for empty input "),T("div",{class:R(e.classList.spacer)},null,2)],42,_n)}zt.render=Un;zt.__file="src/Multiselect.vue";const Qn={name:"sorter",props:["label","currentList","listName","item","index","tippyTop"],mixins:[Ir],components:{VueSlider:Dr,Multiselect:zt},data:function(){return{range:null,dropdownOptions:null}},created:function(){if(this.item.range){var e={min:this.item.rangeMin(),max:this.item.rangeMax()};e.min<0&&(e.min=0),e.max<0&&(e.max=0),e.min>e.max&&(e.min=e.max),_.isArray(this.item.range)?(e.value=_.clone(this.item.range),(e.value[0]<e.min||e.value[0]>e.max)&&(e.value[0]=e.min),(e.value[1]<e.min||e.value[1]>e.max)&&(e.value[1]=e.max)):e.value=[e.min,e.max],this.item.rangeMarks&&(e.marks=this.item.rangeMarks(e)),this.range=e}else this.$store.getters.filterExtrasKeys.match(this.item.key)&&!this.dropdownOptions&&!!this.item.dropdownOpts&&(this.dropdownOptions=this.item.dropdownOpts())},computed:{filterBooks:function(){this.$compEmitter.emit("repositionSearchOpts");let e=!(this.item.range||this.item.dropdownOpts),r=!e&&this.item.active===!0;if(e||r){const t=this,n=_.filter(this.$store.state.listRenderingOpts.filter,{type:"filterExtras",active:!0});let a=function(s){let o=_.map(n,function(c){return!!c.condition(s,c)});return!_.includes(o,!1)},i=this.item.type==="filter"?this.$store.getters.searchIsActive?this.$store.state.searchCollection:this.$store.getters.collectionSource:this.$store.getters.collection;return _.filter(i,function(s){return t.item.condition(s)&&a(s)})}else return[]},filterAmounts:function(){return this.filterBooks.length},rangeVal:function(){return this.range.value},inputVmodel:{get:function(){return this.item.active},set:function(e){let r={listName:this.listName,key:this.item.key,active:e};this.item.range&&(r.range=e?_.clone(this.range.value):!0),this.item.group&&(r.group=!0),this.$store.commit("updateListRenderingOpts",r),this.doTheThings(e)}}},methods:{isActiveSortItem:function(e){if(this.listName==="sort"&&e.current){const r=this.$store.getters.searchIsActive;if(!r||r&&this.$route.query.sort)return!0}return!1},tooltipFormatter:function(e){return e+this.item.rangeSuffix},dropdownChanged:function(e){let r={listName:this.listName,key:this.item.key,active:e.length>0,value:e};this.item.group&&(r.group=!0),this.$store.commit("updateListRenderingOpts",r),this.doTheThings(e,!0)},dropdownOpened:function(e){!this.dropdownOptions&&!!this.item.dropdownOpts&&(this.dropdownOptions=this.item.dropdownOpts())},rangeChanged:function(e){this.range.value=e;let r={listName:this.listName,key:this.item.key,range:e,active:!0};this.item.group&&(r.group=!0),this.$store.commit("updateListRenderingOpts",r),this.doTheThings(e,!0)},adjustRange:function(e){let r={listName:this.listName,key:this.item.key,active:!0,range:[0,0]};if(e==="left"){const t=this.range.min;r.range[0]=t,this.range.value=[t,this.range.value[1]]}else{const t=this.range.max;r.range[1]=t,this.range.value=[this.range.value[0],t]}this.item.group&&(r.group=!0),this.$store.commit("updateListRenderingOpts",r),this.doTheThings(r.range,!0)},doTheThings:function(e,r){const t={change:{scope:this.listName==="scope",sort:this.listName==="sort",filter:this.listName==="filter"},randomize:this.item.key==="randomize"&&!this.$store.getters.searchIsActive,noSortvalues:this.item.key!=="sortValues",start:""};t.change.scope?t.start="start-scope":(t.change.sort||t.randomize)&&t.noSortvalues?(this.$store.commit("prop",{key:"searchSort",value:!1}),t.start="start-sort"):t.change.filter&&(t.start="start-filter"),this.saveOptions(e,r),this.$compEmitter.emit(t.start)},saveOptions:function(e,r){const t=this.item.key,n=this.item.type,a={};if(t==="sortValues")a[t]=e;else if(n==="sort")a[n]=t,a.sortDir=e?"desc":"asc";else if(this.listName==="filter"){if(n==="filter"&&(a[n]=encodeURIComponent(this.$store.getters.filterKeys)),n==="filterExtras"){this.$route.name==="series"&&t.match(/inLibrary|notInLibrary/)&&this.$store.commit("prop",{key:"sticky.seriesFilters."+t,value:e});let i=this;const s=i.$store.getters.filterExtrasKeys,o=s?_.map(s.split(","),function(c){const d=_.find(i.$store.state.listRenderingOpts.filter,{key:c});let u=_.get(i.range,"value");if(u||(u=_.get(d,"range")),u&&_.isArray(u))return encodeURIComponent(c+":"+u[0]+"-"+(u[1]||u[0]));if(_.get(d,"value.0"))return encodeURIComponent(c+":")+encodeURIComponent(_.map(d.value,function(p){return p}).join("|"));if(c)return encodeURIComponent(c)}):!1;a[n]=_.isArray(o)?o.join(", "):null}}else this.listName==="scope"&&(a[this.listName]=encodeURIComponent(this.$store.getters.scopeKeys));a.book=null,this.$store.commit("prop",{key:"bookClicked",value:!0}),this.$updateQueries(a,{src:"saveOptions"})}}},Xn={class:"sorter-button-wrapper"},Yn=["content"],Zn=["value"],Jn={key:2,class:"radiobutton"},es={key:3,class:"checkbox"},ts={key:0,class:"dropdown-label-suffix"},rs={key:0,class:"label-exclude"},as={key:1,class:"label-include"},ns={key:5,class:"books-in-filter"},ss={key:0,class:"range-slider"},is={key:1};function ls(e,r,t,n,a,i){const s=la,o=na,c=ta,d=Zr,u=Qr,p=Nr,y=Jt("vue-slider"),g=Jt("Multiselect"),C=qt("tippy");return k(),S("span",Xn,[t.item?We((k(),S("span",{key:0,class:R(t.item.key),content:t.item.tippy?t.item.tippy:!1},[T("label",{class:R(["sorter-button",{ranged:t.item.range,"faux-disabled":t.item.type==="filterExtras"?i.filterAmounts<1:!1,"is-dropdown":t.item.dropdownOpts}])},[t.label===!1?(k(),S("span",{key:0,class:R(["input-label",{active:i.isActiveSortItem(t.item)}])},[te(e.$slots,"default",{},void 0,!0)],2)):P("",!0),We(T("input",{type:"checkbox",value:t.index,"onUpdate:modelValue":r[0]||(r[0]=b=>i.inputVmodel=b)},null,8,Zn),[[jr,i.inputVmodel]]),t.item.type==="sort"?(k(),S("span",{key:1,class:R(["sortbox",{active:i.isActiveSortItem(t.item)}])},[ce(s,{"data-icon":"sort-down"}),ce(o,{"data-icon":"sort-up"})],2)):t.item.radiobutton?(k(),S("span",Jn,[ce(c,{"data-icon":"circle"}),ce(d,{"data-icon":"circle"})])):(k(),S("span",es,[ce(u,{"data-icon":"square"}),ce(p,{"data-icon":"check"})])),t.label!==!1?(k(),S("span",{key:4,class:R(["input-label",{active:i.isActiveSortItem(t.item)}])},[T("span",null,[lr(J(t.item.label||t.item.key.replace(".name",""))+" ",1),t.item.dropdownOpts?(k(),S("span",ts,[t.item.exclude?(k(),S("span",rs,"Exclude")):(k(),S("span",as,"Include"))])):P("",!0)])],2)):P("",!0),t.listName==="filter"?(k(),S("span",ns,J(i.filterAmounts),1)):P("",!0)],2),t.item.range?(k(),S("div",ss,[T("span",{style:{"font-size":"13px","line-height":"13px",cursor:"w-resize"},onClick:r[1]||(r[1]=b=>i.adjustRange("left"))},J(e.range.value[0])+J(t.item.rangeSuffix),1),ce(y,{disabled:e.range.disabled,dragOnClick:!0,adsorb:!0,lazy:!0,hideLabel:!0,included:!!e.range.marks,interval:e.range.min===e.range.max?1:t.item.rangeInterval||1,marks:e.range.marks,modelValue:e.range.value,min:e.range.min,max:e.range.max,"min-range":e.range.min===e.range.max?0:t.item.rangeMinDist||0,"enable-cross":!1,onChange:i.rangeChanged,"tooltip-formatter":t.item.tooltipFormatter||i.tooltipFormatter,"tooltip-placement":"top",tooltip:"active","use-keyboard":!1,onDragStart:r[2]||(r[2]=b=>e.$store.commit("prop",{key:"searchOptCloseGuard",value:!0})),onDragEnd:r[3]||(r[3]=b=>e.$store.commit("prop",{key:"searchOptCloseGuard",value:!1}))},null,8,["disabled","included","interval","marks","modelValue","min","max","min-range","onChange","tooltip-formatter"]),T("span",{style:{"font-size":"13px","line-height":"13px",cursor:"e-resize"},onClick:r[4]||(r[4]=b=>i.adjustRange("right"))},J(e.range.value[1])+J(t.item.rangeSuffix),1)])):P("",!0),t.item.dropdownOpts?(k(),S("div",is,[ce(g,{ref:"multiselect",value:t.item.value,placeholder:t.item.placeholder||"Include...",onChange:i.dropdownChanged,onOpen:i.dropdownOpened,options:e.dropdownOptions,mode:"tags",hideSelected:!0,clearOnSelect:!1,closeOnSelect:!1,multiple:!0,taggable:!0,searchable:!0,"track-by":t.item.dropdownTrackBy,label:t.item.dropdownLabel,valueProp:t.item.dropdownValueProp},null,8,["value","placeholder","onChange","onOpen","options","track-by","label","valueProp"])])):P("",!0)],10,Yn)),[[C,{delay:150,maxWidth:350,placement:t.tippyTop?"top":"left",flipBehavior:t.tippyTop?["top","bottom","left","right"]:["left","top","bottom","right"],distance:t.listName?20:10}]]):P("",!0)])}const os=mt(Qn,[["render",ls],["__scopeId","data-v-2ac66435"]]),us={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"};function cs(e,r){return k(),S("svg",us,r[0]||(r[0]=[T("path",{fill:"currentColor",d:"M256.455 8c66.269.119 126.437 26.233 170.859 68.685l35.715-35.715C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.75c-30.864-28.899-70.801-44.907-113.23-45.273c-92.398-.798-170.283 73.977-169.484 169.442C88.764 348.009 162.184 424 256 424c41.127 0 79.997-14.678 110.629-41.556c4.743-4.161 11.906-3.908 16.368.553l39.662 39.662c4.872 4.872 4.631 12.815-.482 17.433C378.202 479.813 319.926 504 256 504C119.034 504 8.001 392.967 8 256.002C7.999 119.193 119.646 7.755 256.455 8"},null,-1)]))}const ds=Ue({name:"fa-solid-redo-alt",render:cs});const fs={name:"searchOptions",props:["listName"],data:function(){return{css:{arrow:{left:"0px"},options:{right:"0px"}}}},computed:{mainfilters(){const e=this.$route.name==="wishlist",r=this.$route.name==="series",t=this.$route.name==="podcasts";return _.filter(this.optionsList,n=>{let a=this.allTrue({"is regular filter":n.type==="filter","exclude from wishlist":e?!n.excludeFromWishlist:!0,"exclude from series subpage":r?!n.excludeFromSeriesSubPage:!0,"exclude from podcasts":t?!n.excludeFromPodcasts:!0});return!e&&n.onlyWishlist&&(a=!1),a})},filteredOptionsList(){const e=this.$route.name==="wishlist",r=this.$route.name==="series",t=this.$route.name==="podcasts",n=this.$store.state.sticky.viewMode!=="grid";return _.filter(this.optionsList,a=>{let i=this.allTrue({"no sort values in list view":!(n&&a.key==="sortValues"),"is not a regular filter":a.type!=="filter","exclude from wishlist":e?!a.excludeFromWishlist:!0,"exclude from series subpage":r?!a.excludeFromSeriesSubPage:!0,"exclude from podcasts":t?!a.excludeFromPodcasts:!0});return!e&&a.onlyWishlist&&(i=!1),i})}},created:function(){this.$store.commit("prop",{key:"lazyScroll",value:!1}),this.$updateQueries({y:null}),this.optionsList=this.$store.state.listRenderingOpts[this.listName]},mounted:function(){this.repositionSearchOptions(),this.$compEmitter.on("repositionSearchOpts",this.repositionSearchOptions),this.$compEmitter.on("afterWindowResize",this.repositionSearchOptions)},beforeUnmount:function(){this.$compEmitter.off("repositionSearchOpts",this.repositionSearchOptions),this.$compEmitter.off("afterWindowResize",this.repositionSearchOptions),scroll({top:0,behavior:"smooth"}),this.$store.commit("prop",{key:"searchOptOpenHeight",value:null}),this.$store.commit("prop",{key:"lazyScroll",value:!0})},methods:{allTrue(e){return e=_.values(e),_.every(e)},resetFilters:function(){this.$updateQueries({filter:null,filterExtras:null}),this.$store.commit("resetFilters"),this.$compEmitter.emit("start-filter")},repositionSearchOptions:_.debounce(function(){this.$nextTick(function(){const e={};e.el=this.$refs.options,e.width=e.el.offsetWidth,e.left=e.el.offsetLeft;const r={};r.el=document.querySelector("#ale-search > .icons"),r.width=r.el.offsetWidth;const t={};t.el=document.querySelector(".search-opt-btn.active").parentNode,t.width=t.el.offsetWidth,t.left=t.el.offsetLeft,t.middle=r.width-(t.left+t.width/2),e.position=t.middle-e.width/2;const n=t.el.getBoundingClientRect().left+t.width/2+e.width/2-window.innerWidth,a=n>0?n+20:0;this.css.options.right=e.position+a+"px",this.css.arrow.left=e.width/2-10+a+"px"})},150,{leading:!0,trailing:!1}),sortersMounted:_.debounce(function(){if(this.$refs.options){let e=this.$refs.options.offsetHeight+this.$refs.options.offsetTop;window.innerHeight>e?e=window.innerHeight:e=e+100,this.$store.commit("prop",{key:"searchOptOpenHeight",value:e})}},250,{leading:!1,trailing:!0})}},ps={class:"search-options-inner-wrap"},vs={class:"total"};function hs(e,r,t,n,a,i){const s=ds,o=os,c=qt("tippy");return k(),S("div",{id:"search-options",ref:"options",class:R(t.listName+"-options"),style:Pt(e.css.options)},[T("div",ps,[T("div",{class:"search-opts-arrow",style:Pt(e.css.arrow)},null,4),t.listName==="filter"&&e.$store.getters.regularFilters?(k(),S("ul",{key:0,class:"regular-filters",style:Pt({top:e.$store.state.topNavOffset+"px"})},[We((k(),S("li",{class:"reset-filters",onClick:r[0]||(r[0]=(...d)=>i.resetFilters&&i.resetFilters(...d)),content:"Reset filters"},[ce(s)])),[[c,{placement:"top",flipBehavior:["top","right","bottom","left"]}]]),T("li",vs,[T("span",{class:R({difference:e.$store.getters.collection.length!==e.$store.getters.collectionTotal})},J(e.$store.getters.collection.length),3),lr(" / "+J(e.$store.getters.collectionTotal),1)]),(k(!0),S(de,null,me(i.mainfilters,(d,u)=>(k(),S("li",{class:"search-option",key:d.key},[ce(o,{label:d.label,item:d,index:u,currentList:e.optionsList,listName:t.listName,onVnodeMounted:i.sortersMounted},null,8,["label","item","index","currentList","listName","onVnodeMounted"])]))),128))],4)):P("",!0),T("ul",null,[(k(!0),S(de,null,me(i.filteredOptionsList,(d,u)=>(k(),S("li",{class:R(["search-option",{extras:d.type&&d.type.match(/extra/i),divider:d.type==="divider"}]),key:d.key},[d.type!=="divider"?(k(),tt(o,{key:0,label:d.label,item:d,index:u,currentList:e.optionsList,listName:t.listName,onVnodeMounted:i.sortersMounted},null,8,["label","item","index","currentList","listName","onVnodeMounted"])):P("",!0)],2))),128))])])],6)}const ms=mt(fs,[["render",hs]]);const gs={name:"searchIcons",props:["listName"],mixins:[Wr,Mt],data:function(){return{items:[{name:"scope",on:!0,active:!1,icon:"fa-solid fa-microscope",tooltip:"Change the search scope for more accurate results"},{name:"filter",on:!0,active:!1,icon:"fa-solid fa-filter",tooltip:"Filter books"},{name:"sort",on:!0,active:!1,icon:"fa-solid fa-sort",tooltip:"Sort books"}]}},computed:{filtersActive:function(){return this.$store.getters.filterExtrasKeys||this.$store.getters.filterKeys!=="notStarted,started,finished"&&this.$store.getters.filterKeysLength},filteredItems(){return _.filter(this.items,e=>this.showIcon(e))},selectionHours(){let e=_.sumBy(this.$store.getters.collection,r=>r.length?this.timeStringToSeconds(r.length):0);return e&&(e=this.secondsToTimeString(e,!0)),(e||"").trim()}},methods:{openSearchOptions:function(e,r){const t=this.listName;this.$emit("update:listName",!1),t!==e.name&&this.$nextTick(function(){this.$emit("update:listName",e.name)})},showIcon:function(e){if(!!e)switch(e.name){case"scope":return this.$store.state.listRenderingOpts[e.name].length>0;case"filter":let r=!this.$store.getters.regularFilters;return _.filter(this.$store.state.listRenderingOpts[e.name],function(t){let n=t.type==="divider",a=r?!0:t.type===e.name;return!n&&a}).length>0;case"sort":return _.filter(this.$store.state.listRenderingOpts[e.name],function(t){let n=t.type==="divider",a=t.type===e.name;return!n&&a}).length>0}}}},ys={class:"icons"},bs=["content"],ws={class:"book-in-selection"},Os={class:"inner-wrap"},ks=["content","onClick"],Ss=["data-option"];function Cs(e,r,t,n,a,i){const s=qt("tippy");return k(),S("div",ys,[We((k(),S("div",{class:"icon-wrap",content:"Items in current selection: <strong>"+e.$store.getters.collection.length+"</strong> / <strong>"+e.$store.getters.collectionTotal+"</strong>."+(i.selectionHours?"<br> That amounts to: "+i.selectionHours+". ":"")+(e.$route.name==="series"?"Owned books only!":"")},[T("div",ws,[T("div",Os,J(e.$store.getters.collection.length),1)])],8,bs)),[[s,{trigger:"click mouseenter"}]]),(k(!0),S(de,null,me(i.filteredItems,o=>We((k(),S("div",{key:o.name,class:R(["icon-wrap",{disabled:!o.on}]),content:o.tooltip,onClick:c=>i.openSearchOptions(o,c)},[T("div",{class:R(["search-opt-btn",{active:t.listName===o.name,"active-filters":o.name==="filter"&&i.filtersActive}]),"data-option":o.name},[T("i",{class:R(o.icon)},null,2)],10,Ss)],10,ks)),[[s]])),128))])}const Ls=mt(gs,[["render",Cs],["__scopeId","data-v-f710dfbb"]]),Ts={methods:{sortName:function(e){return _.orderBy(e.books,function(r){if(r.name)return r.name},e.direction)}}},_s={methods:{sortIsbns:function(e){return _.orderBy(e.books,function(r){if(r.isbns){if(e.sortKey==="isbn10"){const t=_.find(r.isbns,["type","ISBN_10"]);return t?""+t.identifier:null}else if(e.sortKey==="isbn13"){const t=_.find(r.isbns,["type","ISBN_13"]);return t?""+t.identifier:null}}else return null},e.direction)}}},$s={methods:{sortTitle:function(e){return _.orderBy(e.books,[function(r){const t=r[e.sortKey];return t?e.sortKey==="title"?r.title||r.titleShort:_.isArray(t)&&_.find(t,"name")?_.map(t,"name").join(", "):t:null}],e.direction)}}},Bs={methods:{sortAmount:function(e){return _.orderBy(e.books,function(r){if(e.sortKey==="amountTotal"){if(r.allBooksMinusDupes)return r.allBooksMinusDupes.length;if(r.allBooks)return r.allBooks.length}else if(r.books)return r.books.length},e.direction)}}},Es={mixins:[Mt],methods:{sortLength:function(e){const r=this;return _.orderBy(e.books,function(t){return t.length?r.timeStringToSeconds(t.length):0},e.direction)}}},Ps={methods:{sortRatings:function(e){const r=e.sortKey,t=[],n=[e.direction];switch(t.push(function(a){const i=_.get(a,r,0);return Number(i)}),r){case"myRating":case"rating":t.push(function(a){const i=_.get(a,"ratings",0);return Number(i)}),n.push(e.direction);break;case"ratings":t.push(function(a){const i=_.get(a,"rating",0);return Number(i)}),n.push(e.direction);break}return _.orderBy(e.books,t,n)}}},As={methods:{sortByLength:function(e){return _.orderBy(e.books,function(r){if(e.sortKey==="narratorsNumber")if(r.narrators){let t=_.find(r.narrators,function(n){return n.name.match("full cast")});return t&&r.narrators.length===1?99999999:r.narrators.length-(t?1:0)}else return 0;else return r[e.sortKey].length||0},e.direction)}}},Rs={mixins:[Mt],methods:{sortProgress:function(e){var r=this;return _.orderBy(e.books,[function(t){if(t.progress){if(t.progress.toLowerCase().trim()==="finished")return 100;if(t.length){var n=r.timeStringToSeconds(t.progress);const a=r.timeStringToSeconds(t.length);return n=a-n,n/a*100}else return 0}else return 0},function(t){return t.length?!r.timeStringToSeconds(t.length):0}],e.direction)}}},Is={methods:{sortDateAdded:function(e){return _.orderBy(e.books,function(r){return r.added},e.direction)}}},Ds={methods:{sortFavorites:function(e){return _.orderBy(e.books,function(r){return r.favorite},e.direction)}}},Ns={methods:{sortWhispersync:function(e){return _.orderBy(e.books,function(r){const t=r[e.sortKey];if(t){if(t==="owned")return 2;if(t==="available")return 1}else return 0},e.direction)}}},qs={methods:{sortBookNumbers:function(e){return _.orderBy(e.books,function(r){return r.added},e.direction)},sortBookNumbersOriginal:function(e){const r=this.$route.params.series;return _.orderBy(e.books,function(t){let n=function(a){(_.isEmpty(a)||!a)&&(a=void 0);const i=_.isArray(a)?a[0]:a,s=typeof i=="string"?i.split("-"):[i];return s[0]?parseFloat(s[0]):s[0]};if(r&&t.series){let a=_.find(t.series,{asin:r});return n(a.bookNumbers)}else if(_.find(t.series,"bookNumbers")){let i=_.filter(t.series,"bookNumbers");return i=_.map(i,"bookNumbers"),i=_.flatten(i),n(i)}else return _.find(t.series)?-1:-2},e.direction)}}},Ms={methods:{sortReleaseDate:function(e){return _.orderBy(e.books,function(r){return r.releaseDate?new Date(r.releaseDate.split("-").join("/")):0},e.direction)}}},xs={methods:{sortStringNameProp:function(e){const r=e.sortKey.replace(".name","");return _.orderBy(e.books,function(t){return t[r]?t[r][0].name.toLowerCase():null},e.direction)}}},Fs={methods:{sortMissing:function(e){return _.orderBy(e.books,[r=>r.allBooksMinusDupes?r.allBooksMinusDupes.length-r.books.length:r.allBooks?r.allBooks.length-r.books.length:0,r=>r.myRating],[e.direction,"desc"])}}},js={methods:{sortPrice:function(e){return _.orderBy(e.books,function(r){return r.price},e.direction)}}},Vs={mixins:[Ts,_s,$s,Bs,Es,Ps,Rs,As,Is,Ds,Ns,qs,Ms,xs,Fs,js],methods:{filterBooks:function(e){const r=_.filter(this.$store.state.listRenderingOpts.filter,{type:"filter",active:!0}),t=_.find(this.$store.state.listRenderingOpts.filter,{type:"filter"}),n=_.filter(this.$store.state.listRenderingOpts.filter,{type:"filterExtras",active:!0});if(r||n){let a=function(i){let s=_.map(r,function(c){return!!c.condition(i)}),o=_.map(n,function(c){return!!c.condition(i)});return(t?_.includes(s,!0):!0)&&!_.includes(o,!1)};return _.filter(e,a)}else return e},sortBooks:function(e){const r=_.find(this.$store.state.listRenderingOpts.sort,function(t){if(t.key==="randomize"&&t.active)return!0;if(t.current)return!0});if(r){const t={books:e,direction:r.active?"desc":"asc",sortKey:r.key};switch(t.sortKey){case"randomize":e=_.shuffle(e);break;case"bookNumbers":t.missingNumber=0,e=this.sortBookNumbersOriginal(t);break;case"seriesOrder":t.missingNumber=0,e=this.sortBookNumbers(t);break;case"added":e=this.sortDateAdded(t);break;case"releaseDate":e=this.sortReleaseDate(t);break;case"authors.name":case"narrators.name":case"publishers.name":case"categories":case"tags.name":e=this.sortStringNameProp(t);break;case"narratorsNumber":e=this.sortByLength(t);break;case"title":case"series":case"format":case"isNew":case"language":case"fromPlusCatalog":case"unavailable":case"favorite":case"downloaded":case"storePageMissing":case"storePageChanged":case"archived":e=this.sortTitle(t);break;case"whispersync":e=this.sortWhispersync(t);break;case"length":e=this.sortLength(t);break;case"myRating":case"rating":case"ratings":e=this.sortRatings(t);break;case"progress":e=this.sortProgress(t);break;case"favorite":e=this.sortFavorites(t);break;case"name":e=this.sortName(t);break;case"amount":case"amountTotal":e=this.sortAmount(t);break;case"isbn10":case"isbn13":e=this.sortIsbns(t);break;case"missing":e=this.sortMissing(t);break;case"price":e=this.sortPrice(t);break}}return e}}};const Ws={name:"GallerySearch",mixins:[Vs],props:["collectionSource"],data:function(){return{enableZoomTimer:null,fuse:null,fuseOptions:{keys:[],location:0,threshold:.3,ignoreLocation:!0,shouldSort:!0,includeScore:!0,includeMatches:!0,useExtendedSearch:!0,minMatchCharLength:2},listName:!1,waypointOpts:{rootMargin:"-37px"},fixedSearch:!1,highlightSearch:!1,readyToCloseOpts:!1,autocompleteResults:[],useAutocomplete:!1}},mounted:function(){if(this.$route.query.search){let t=decodeURIComponent(this.$route.query.search);this.$store.commit("prop",{key:"searchQuery",value:t})}this.$store.commit("prop",{key:"collectionSource",value:this.collectionSource});let e=this.$store.getters.collectionSource;this.$route.query.sort||this.$route.query.filter||this.$route.query.filterExtras?((this.$route.query.filter||this.$route.query.filterExtras)&&(e=this.filterBooks(e)),this.$route.query.sort&&(e=this.sortBooks(e)),this.$store.commit("prop",{key:"mutatingCollection",value:e})):this.$store.commit("prop",{key:"mutatingCollection",value:this.sortBooks(this.filterBooks(e))}),this.$route.query.search&&(this.$route.query.sort&&(this.fuseOptions.shouldSort=!1),this.search(null,"on-load")),this.$refs.aleSearch.addEventListener("touchstart",this.iosAutozoomDisable,{passive:!0}),this.$compEmitter.on("ios-auto-zoom-disable",this.iosAutozoomDisable),this.$compEmitter.on("start-scope",this.scope),this.$compEmitter.on("start-sort",this.sort),this.$compEmitter.on("start-filter",this.filter),this.$compEmitter.on("search-focus",this.focusOnSearch),this.$store.commit("prop",{key:"searchMounted",value:!0})},beforeUnmount:function(){this.$store.commit("prop",{key:"searchQuery",value:""}),this.$refs.aleSearch.removeEventListener("touchstart",this.iosAutozoomDisable),this.$compEmitter.off("ios-auto-zoom-disable",this.iosAutozoomDisable),this.$compEmitter.off("start-scope",this.scope),this.$compEmitter.off("start-sort",this.sort),this.$compEmitter.off("start-filter",this.filter),this.$compEmitter.off("search-focus",this.focusOnSearch),this.$store.commit("prop",{key:"searchMounted",value:!1})},methods:{dontCloseOpts:_.throttle(function(){this.readyToCloseOpts&&(this.readyToCloseOpts=!1)},50,{leading:!1,trailing:!0}),closeOpts:function(){this.readyToCloseOpts&&(this.readyToCloseOpts=!1,this.$nextTick(function(){let e=this;setTimeout(function(){e.listName=!1},30)}))},scope:function(){this.$nextTick(()=>{this.$store.getters.searchIsActive&&(this.$store.commit("prop",{key:"mutatingCollection",value:this.sortBooks(this.filterBooks(this.$store.getters.collectionSource))}),this.$store.getters.searchIsActive||(this.fuseOptions.shouldSort=!1),this.search())})},filter:function(){this.$nextTick(()=>{this.$store.commit("prop",{key:"mutatingCollection",value:this.sortBooks(this.filterBooks(this.$store.getters.collectionSource))}),this.$store.getters.searchIsActive||(this.fuseOptions.shouldSort=!1),this.$store.getters.searchIsActive&&this.search()})},sort:function(){this.$nextTick(()=>{this.$store.commit("prop",{key:this.$store.getters.searchIsActive?"searchCollection":"mutatingCollection",value:this.sortBooks(this.$store.getters.collection)})})},search:_.debounce(function(e,r){const t={};if(decodeURIComponent(this.$route.query.search),r||(t.book=null,this.$store.commit("prop",{key:"bookClicked",value:!0})),e)if(this.fuseOptions.shouldSort=!0,this.$store.commit("prop",{key:"searchQuery",value:e.target.value}),t.search=encodeURIComponent(e.target.value),t.search||(t.search=null),e.target.value.trim()!=="")this.$route.query.sort&&(t.sort=null,t.sortDir=null);else{var a=_.find(this.$store.state.listRenderingOpts.sort,"current");t.sort=a.key,t.sortDir=a.active?"desc":"asc"}if(this.$updateQueries(t),this.$store.getters.searchIsActive){const i=this.modifyQuery(this.$store.state.searchQuery);this.fuseOptions.keys=this.aliciaKeys;let s=this;s.fuse=new Kr(s.$store.state.mutatingCollection,s.fuseOptions);let o=s.fuse.search(i);s.useAutocomplete&&s.autocomplete(o),o=_.map(o,"item"),s.$store.commit("prop",{key:"searchCollection",value:o})}else this.$store.commit("prop",{key:"searchCollection",value:[]})},270,{leading:!1,trailing:!0}),autocomplete:function(e){let r=_.map(JSON.parse(JSON.stringify(this.aliciaKeys)),function(t,n){return t.key=t.name,t.name=t.name.replace(".name",""),t.active=n<1,t});_.each(e,function(t){_.each(t.matches,function(n){const a=_.find(r,{key:n.key});a.books=a.books||[],a.books.push({item:t.item,match:n,refIndex:t.refIndex,score:t.score})})}),r=_.filter(r,"books"),_.each(r,function(t,n){t.books=_.uniqBy(t.books,"match.value"),t.books=t.books.slice(0,5),t.books.length<2&&(r[n]=null),t.active=!1}),r=_.compact(r),r.length&&(r[0].active=!0),console.log("sections",r),this.autocompleteResults=r,console.log(r)},active_ac_item:function(e){_.each(this.autocompleteResults,function(r){r.active=!1}),e.active=!0},searchAutocompleteResult:function(e){const r=e.match.value;this.$store.commit("prop",{key:"searchQuery",value:r}),this.search()},searchEnterBlur:_.debounce(function(e){this.$refs.searchInput.blur()},100,{leading:!1,trailing:!0}),restoreOptions:function(){updateListRenderingOpts()},focusOnSearch:function(){scroll({top:0}),this.$refs.searchInput.focus()},modifyQuery:function(e){let r=e;return(e.match(/&/i)||e.match(/ and /i)||e.match(/ a /i)||e.match(/ the /i))&&(r=e+"|"+e.replace(/ & /ig," ")+"|"+e.replace(/ and /ig," ")+"|"+e.replace(/ a /ig," ")+"|"+e.replace(/ an /ig," ")+"|"+e.replace(/ the /ig," ")),r},iosAutozoomDisable:function(){if(document.querySelector(".is-ios")){let r=document.querySelector("head").querySelector("meta[name=viewport]");r.content="width=device-width, initial-scale=1.0, user-scalable=0",clearTimeout(this.enableZoomTimer),this.enableZoomTimer=setTimeout(function(){r.content="width=device-width, initial-scale=1.0, user-scalable=1"},700)}}},computed:{aliciaKeys:function(){const e=_.filter(this.$store.state.listRenderingOpts.scope,["active",!0]);return _.map(e,function(r){return{name:r.key,weight:r.weight||0}})},placeholder:function(){return"Search: "+function(r){return _.map(r,function(t){return t.name.replace(".name","")}).join(", ")}(this.aliciaKeys)}}},Ks={id:"ale-search",ref:"aleSearch"},zs=["value","placeholder"],Hs={key:1,class:"autocomplete"},Gs={class:"header-wrapper"},Us=["onClick"],Qs={class:"content"},Xs=["onClick"];function Ys(e,r,t,n,a,i){const s=Hr,o=zr,c=Ls,d=ms,u=qr;return k(),S("div",null,[ce(s),e.$route.meta.subPage?(k(),tt(o,{key:0,aboveSearch:!0})):P("",!0),T("div",{id:"ale-search-wrap",ref:"searchWrap",class:R({"search-fixed":e.fixedSearch,"highlight-search":e.highlightSearch})},[We(T("div",{id:"search-dropdown-overlay",onMousedown:r[0]||(r[0]=p=>e.readyToCloseOpts=!0),onTouchstart:r[1]||(r[1]=p=>e.readyToCloseOpts=!0),onTouchmove:r[2]||(r[2]=(...p)=>i.dontCloseOpts&&i.dontCloseOpts(...p)),onClick:r[3]||(r[3]=(...p)=>i.closeOpts&&i.closeOpts(...p))},null,544),[[Vr,e.listName]]),T("div",Ks,[T("div",{class:"search-wrapper",onClick:r[7]||(r[7]=p=>e.$refs.searchInput.focus())},[T("input",{type:"search",ref:"searchInput",value:e.$store.state.searchQuery,onInput:r[4]||(r[4]=(...p)=>i.search&&i.search(...p)),onKeyup:r[5]||(r[5]=Rt((...p)=>i.searchEnterBlur&&i.searchEnterBlur(...p),["enter"])),placeholder:i.placeholder,onFocus:r[6]||(r[6]=p=>e.listName=!1)},null,40,zs)]),ce(c,{"list-name":e.listName,"onUpdate:listName":r[8]||(r[8]=p=>e.listName=p)},null,8,["list-name"]),e.listName?(k(),tt(d,{key:0,"list-name":e.listName,"onUpdate:listName":r[9]||(r[9]=p=>e.listName=p)},null,8,["list-name"])):P("",!0)],512),e.$route.meta.gallery&&e.$store.state.windowWidth>=450?(k(),tt(u,{key:0})):P("",!0)],2),e.useAutocomplete&&e.autocompleteResults&&e.autocompleteResults.length?(k(),S("div",Hs,[T("div",Gs,[r[10]||(r[10]=T("div",{class:"title"},"Autocomplete: ",-1)),(k(!0),S(de,null,me(e.autocompleteResults,p=>(k(),S("div",{class:R(["header",{active:p.active}]),key:p.key+"-header",onClick:y=>i.active_ac_item(p)},[T("div",null,J(p.name),1)],10,Us))),128))]),e.item.active?(k(!0),S(de,{key:0},me(e.autocompleteResults,p=>(k(),S("div",{class:"content-wrapper",key:p.key},[T("div",Qs,[(k(!0),S(de,null,me(p.books,y=>(k(),S("div",{onClick:g=>i.searchAutocompleteResult(y)},[T("span",null,J(y.match.value),1)],8,Xs))),256))])]))),128)):P("",!0)])):P("",!0)])}const ni=mt(Ws,[["render",Ys]]);export{os as _,ni as a};
