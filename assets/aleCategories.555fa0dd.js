import{f as B,_ as w}from"./findSubPageSource.4e06428f.js";import{_ as L}from"./page-title.ea8d61bb.js";import{c as R}from"./gallery.d7c4eeb7.js";import{m as $}from"./makeCoverUrl.f6649fcf.js";import{_ as q,c as a,e as p,d as l,b as S,F as b,k as h,j as H,r as M,o as t,a as k,l as y,u as T,t as f,i as C}from"./vendor.c9fc1405.js";/* empty css              */import"./helpers.c1b1b2ae.js";const N={name:"aleCategories",mixins:[R,$,B],data:function(){return{categories:null,listReady:!1,pageTitle:"Categories",pageSubTitle:null}},methods:{getRandomBooks:function(s,n){let i=_.filter(s,function(c){return c.categories&&c.categories.length>1&&c.cover});return _.sampleSize(i,n)},makeCollection:function(){const s=this;let n={};n.parent=[],_.each(s.subPageSource.collection,function(i,c){if(i.categories){const m=_.get(i,"categories[0].name");let r=_.find(n.parent,["name",m]);r||(r=n.parent.push({name:m,slug:s.slugify(m),books:[]})),r=_.find(n.parent,["name",m]),r.books.push(i);const u=_.get(i,"categories[1].name");if(u){r.sub||(r.sub=[]);let g=_.find(r.sub,["name",u]);g||(g=r.sub.push({name:u,slug:s.slugify(u),books:[]})),g=_.find(r.sub,["name",u]),g.books.push(i)}}}),n.parent=_.orderBy(n.parent,"name","asc"),_.each(n.parent,function(i,c){i.sub=_.orderBy(i.sub,"name","asc")}),this.categories=n.parent,this.$store.commit("prop",{key:"pageCollection",value:[]}),this.$store.commit("prop",{key:"mutatingCollection",value:[]}),this.listReady=!0}}},V={key:0,id:"ale-categories",class:"box-layout-wrapper"},j=["data-category"],D={key:1},F=["innerHTML"],O=["innerHTML"],U={key:2,class:"child-categories"},x={key:1},z={key:2,class:"number-of-books"},E={class:"sample-covers"},I=["src"];function W(s,n,i,c,m,r){const u=L,g=w,d=H("router-link"),v=M("tippy");return s.listReady?(t(),a("div",V,[s.pageTitle||s.pageSubTitle?(t(),p(u,{key:0,pageTitle:s.pageTitle,pageSubTitle:s.pageSubTitle},null,8,["pageTitle","pageSubTitle"])):l("",!0),S(g),(t(!0),a(b,null,h(s.categories,(e,A)=>(t(),a("div",{class:"single-box","data-category":e.name,key:e.name},[k("h2",null,[e.slug?(t(),p(d,{key:0,to:{name:"category",params:{parent:e.slug,child:void 0},query:{subPageSource:s.subPageSource.name}}},{default:y(()=>[T(f(e.name),1)]),_:2},1032,["to"])):(t(),a("span",D,f(e.name),1))]),e.slug?(t(),p(d,{key:0,class:"books-total",to:{name:"category",params:{parent:e.slug,child:void 0},query:{subPageSource:s.subPageSource.name}}},{default:y(()=>[e.books?C((t(),a("div",{key:0,innerHTML:e.books.length,content:"Total number of books in this category."},null,8,F)),[[v,{placement:"right"}]]):l("",!0)]),_:2},1032,["to"])):e.books?C((t(),a("div",{key:1,innerHTML:e.books.length,content:"Total number of books in this category."},null,8,O)),[[v,{placement:"right"}]]):l("",!0),e.sub?(t(),a("div",U,[(t(!0),a(b,null,h(e.sub,(o,P)=>(t(),a("div",{key:o.name},[e&&e.slug&&o&&o.slug?(t(),p(d,{key:0,to:{name:"category",params:{parent:e.slug,child:o.slug},query:{subPageSource:s.subPageSource.name}}},{default:y(()=>[T(f(o.name),1)]),_:2},1032,["to"])):(t(),a("span",x)),o.books?(t(),a("span",z,"("+f(o.books.length)+")",1)):l("",!0)]))),128))])):l("",!0),k("div",E,[e&&e.books?(t(!0),a(b,{key:0},h(r.getRandomBooks(e.books,5),(o,P)=>(t(),a("div",{class:"sample-cover",key:o.asin},[S(d,{to:{name:"category",params:{parent:o.categories[0]?s.slugify(o.categories[0].name):null,child:o.categories[1]?s.slugify(o.categories[1].name):null},query:{book:o.asin,subPageSource:s.subPageSource.name}}},{default:y(()=>[k("img",{crossorigin:"anonymous",src:s.makeCoverUrl(o.cover),alt:""},null,8,I)]),_:2},1032,["to"])]))),128)):l("",!0)])],8,j))),128))])):l("",!0)}var ee=q(N,[["render",W],["__scopeId","data-v-10445ba3"]]);export{ee as default};
