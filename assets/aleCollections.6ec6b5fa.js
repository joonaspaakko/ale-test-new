import{_ as $}from"./lazy.b07c228c.js";import{_ as B}from"./page-title.15791cee.js";import{c as w}from"./gallery.20ac0816.js";import{m as H}from"./makeCoverUrl.f6649fcf.js";import{_ as L,c as l,e as d,d as m,a,t as h,F as k,k as y,j as P,r as z,o,n as v,l as r,b,i as D}from"./vendor.e7714c30.js";/* empty css              */import"./helpers.c1b1b2ae.js";const N={name:"aleCategories",mixins:[w,H],data:function(){return{collections:null,pageTitle:null,pageSubTitle:null}},computed:{filteredCollections(){const e=this;return _.filter(this.collections,function(i){return i.key==="audible"?!e.$store.state.sticky.collectionsHidePremade:!0})}},created:function(){this.pageTitle="Collections",this.pageSubTitle=null;const e=this;let t=[];console.log(this.$store.state.library),_.each(this.$store.state.library.collections,function(i){let c={id:i.id,title:i.title,isSpecial:e.isSpecial(i)};c.books=_.filter(e.$store.state.library.books,function(g){return _.includes(i.books,g.asin)}),t.push(c)}),t=_.orderBy(t,[function(i){return e.isSpecial(i)},"title"],["desc","asc"]),this.collections=this.chunkify(t),this.$store.commit("prop",[{key:"pageCollection",value:[]},{key:"mutatingCollection",value:[]}])},methods:{getRandomBooks:function(e,t){return _.sampleSize(e,t)},isSpecial(e){return _.get(e,"id","").indexOf("__")===0},chunkify(e){const t=_.filter(e,{isSpecial:!0}).length,i=e.splice(0,t);return[{key:"audible",items:i},{key:"user",items:e}]}}},V={key:0,id:"ale-collections",class:"box-layout-wrapper"},q={class:"hide-premade-btn-wrapper"},F={class:"sample-covers-square"},M=["src"],R=["innerHTML"];function U(e,t,i,c,g,f){const C=B,u=P("router-link"),S=$,T=z("tippy");return e.collections?(o(),l("div",V,[e.pageTitle||e.pageSubTitle?(o(),d(C,{key:0,pageTitle:e.pageTitle,pageSubTitle:e.pageSubTitle},null,8,["pageTitle","pageSubTitle"])):m("",!0),a("div",q,[a("div",{onClick:t[0]||(t[0]=n=>e.$store.commit("prop",{key:"sticky.collectionsHidePremade",value:!e.$store.state.sticky.collectionsHidePremade}))},h(e.$store.state.sticky.collectionsHidePremade?"show":"hide")+" premade collections ",1)]),(o(!0),l(k,null,y(f.filteredCollections,n=>(o(),l("div",{key:n.key,class:v([n.key+"-collection"])},[(o(!0),l(k,null,y(n.items,(s,j)=>(o(),d(S,{tag:s.isSpecial?"span":"div",class:v(["single-box",{"is-special":s.isSpecial}]),"data-collection-id":s.id,key:s.id},{default:r(()=>[a("div",F,[(o(!0),l(k,null,y(f.getRandomBooks(s.books,4),p=>(o(),l("div",{class:"sample-cover",key:p.asin},[b(u,{to:{name:"collection",params:{collection:s.id},query:{book:p.asin}}},{default:r(()=>[a("img",{crossorigin:"anonymous",src:e.makeCoverUrl(p.cover),alt:""},null,8,M)]),_:2},1032,["to"])]))),128))]),b(u,{class:"collection-title",to:{name:"collection",params:{collection:s.id}}},{default:r(()=>[a("h2",null,h(s.title),1)]),_:2},1032,["to"]),s.books&&s.books.length?(o(),d(u,{key:0,class:"books-total",to:{name:"collection",params:{collection:s.id}}},{default:r(()=>[D(a("div",{innerHTML:s.books.length,content:"Total number of books in this collection."},null,8,R),[[T,{placement:"right"}]])]),_:2},1032,["to"])):m("",!0)]),_:2},1032,["tag","data-collection-id","class"]))),128))],2))),128))])):m("",!0)}var K=L(N,[["render",U],["__scopeId","data-v-6c98c49b"]]);export{K as default};
