import{_ as $}from"./gallery-lazy.9dfaee33.js";import{_ as B}from"./gallery-page-title.5db93fd4.js";import{d as w}from"./gallery.5cc383db.js";import{m as H}from"./gallery-makeCoverUrl.8378190f.js";import{_ as z,c as l,e as d,d as m,a,x as h,F as y,A as g,q as L,z as P,o,n as v,s as n,b,u as q}from"./lodash.9f572fca.js";import"./content-script-helpers.e49fc91b.js";import"./jquery.050764e9.js";import"./howler.22814ddb.js";import"./index.abab9d81.js";import"./tippy.9fe8ff20.js";const D={name:"aleCategories",mixins:[w,H],data:function(){return{collections:null,pageTitle:null,pageSubTitle:null}},computed:{filteredCollections(){const e=this;return _.filter(this.collections,function(i){return i.key==="audible"?!e.$store.state.sticky.collectionsHidePremade:!0})}},created:function(){this.pageTitle="Collections",this.pageSubTitle=null;const e=this;let t=[];console.log(this.$store.state.library),_.each(this.$store.state.library.collections,function(i){let c={id:i.id,title:i.title,isSpecial:e.isSpecial(i)};c.books=_.filter(e.$store.state.library.books,function(k){return _.includes(i.books,k.asin)}),t.push(c)}),t=_.orderBy(t,[function(i){return e.isSpecial(i)},"title"],["desc","asc"]),this.collections=this.chunkify(t),this.$store.commit("prop",[{key:"pageCollection",value:[]},{key:"mutatingCollection",value:[]}])},methods:{getRandomBooks:function(e,t){return _.sampleSize(e,t)},isSpecial(e){return _.get(e,"id","").indexOf("__")===0},chunkify(e){const t=_.filter(e,{isSpecial:!0}).length,i=e.splice(0,t);return[{key:"audible",items:i},{key:"user",items:e}]}}},N={key:0,id:"ale-collections",class:"box-layout-wrapper"},V={class:"hide-premade-btn-wrapper"},x={class:"sample-covers-square"},F=["src"],M=["innerHTML"];function R(e,t,i,c,k,f){const C=B,u=L("router-link"),S=$,T=P("tippy");return e.collections?(o(),l("div",N,[e.pageTitle||e.pageSubTitle?(o(),d(C,{key:0,pageTitle:e.pageTitle,pageSubTitle:e.pageSubTitle},null,8,["pageTitle","pageSubTitle"])):m("",!0),a("div",V,[a("div",{onClick:t[0]||(t[0]=r=>e.$store.commit("prop",{key:"sticky.collectionsHidePremade",value:!e.$store.state.sticky.collectionsHidePremade}))},h(e.$store.state.sticky.collectionsHidePremade?"show":"hide")+" premade collections ",1)]),(o(!0),l(y,null,g(f.filteredCollections,r=>(o(),l("div",{key:r.key,class:v([r.key+"-collection"])},[(o(!0),l(y,null,g(r.items,(s,U)=>(o(),d(S,{tag:s.isSpecial?"span":"div",class:v(["single-box",{"is-special":s.isSpecial}]),"data-collection-id":s.id,key:s.id},{default:n(()=>[a("div",x,[(o(!0),l(y,null,g(f.getRandomBooks(s.books,4),p=>(o(),l("div",{class:"sample-cover",key:p.asin},[b(u,{to:{name:"collection",params:{collection:s.id},query:{book:p.asin}}},{default:n(()=>[a("img",{crossorigin:"anonymous",src:e.makeCoverUrl(p.cover),alt:""},null,8,F)]),_:2},1032,["to"])]))),128))]),b(u,{class:"collection-title",to:{name:"collection",params:{collection:s.id}}},{default:n(()=>[a("h2",null,h(s.title),1)]),_:2},1032,["to"]),s.books&&s.books.length?(o(),d(u,{key:0,class:"books-total",to:{name:"collection",params:{collection:s.id}}},{default:n(()=>[q(a("div",{innerHTML:s.books.length,content:"Total number of books in this collection."},null,8,M),[[T,{placement:"right"}]])]),_:2},1032,["to"])):m("",!0)]),_:2},1032,["tag","data-collection-id","class"]))),128))],2))),128))])):m("",!0)}var X=z(D,[["render",R],["__scopeId","data-v-7d8040d4"]]);export{X as default};
