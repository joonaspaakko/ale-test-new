import{m as wt}from"./gallery-makeCoverUrl.8378190f.js";import{o as g,c as v,a as f,_ as H,b as L,n as B,w as tt,d as P,e as A,f as Q,t as ae,g as $e,r as de,h as q,i as Ue,F as le,j as ce,k as We,l as Qt,m as St,p as Zt,q as Yt,v as Xt,s as J,u as je,x as De,y as nt,z as en,A as ve,B as U,C as $t,D as tn,E as Ct,G as ke,H as Rt,I as Ne,J as nn,K as sn,L as on}from"./lodash.21348ef7.js";import{U as Ve,h as rn}from"./content-script-helpers.e49fc91b.js";import{h as an}from"./howler.22814ddb.js";import{s as ln}from"./index.abab9d81.js";import{c as cn,m as un,V as hn}from"./tippy.f48e1c74.js";import"./jquery.050764e9.js";const dn={viewBox:"0 0 320 512",width:"1.2em",height:"1.2em"},pn=f("path",{fill:"currentColor",d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256L34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},null,-1),fn=[pn];function mn(e,t){return g(),v("svg",dn,fn)}var gn={name:"fa-solid-chevron-right",render:mn};const _n={viewBox:"0 0 320 512",width:"1.2em",height:"1.2em"},vn=f("path",{fill:"currentColor",d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},null,-1),yn=[vn];function bn(e,t){return g(),v("svg",_n,yn)}var kn={name:"fa-solid-chevron-left",render:bn};const wn={name:"backForwardBtns",props:["viewportFloat"],methods:{navigate:function(e){this.$store.state.navHistory[e].length>0&&(this.$store.commit("navHistory",{key:e,value:this.$route.name}),this.$router[e]())}}};function Sn(e,t,n,s,i,o){const r=kn,c=gn;return g(),v("div",{class:B(["mobile-back-btns-wrapper",{"viewport-float":n.viewportFloat}])},[f("div",{class:B(["mobile-back-btns",{disabled:e.$store.state.navHistory.back.length<1}]),onClick:t[0]||(t[0]=tt(a=>o.navigate("back"),["prevent"]))},[L(r)],2),f("div",{class:B(["mobile-back-btns",{disabled:e.$store.state.navHistory.forward.length<1}]),onClick:t[1]||(t[1]=tt(a=>o.navigate("forward"),["prevent"]))},[L(c)],2)],2)}var xt=H(wn,[["render",Sn],["__scopeId","data-v-7ea92576"]]);const $n={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},Cn=f("path",{fill:"currentColor",d:"M470.38 1.51L150.41 96A32 32 0 0 0 128 126.51v261.41A139 139 0 0 0 96 384c-53 0-96 28.66-96 64s43 64 96 64s96-28.66 96-64V214.32l256-75v184.61a138.4 138.4 0 0 0-32-3.93c-53 0-96 28.66-96 64s43 64 96 64s96-28.65 96-64V32a32 32 0 0 0-41.62-30.49z"},null,-1),Rn=[Cn];function xn(e,t){return g(),v("svg",$n,Rn)}var Pn={name:"fa-solid-music",render:xn};const En={viewBox:"0 0 448 512",width:"1.2em",height:"1.2em"},On=f("path",{fill:"currentColor",d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},null,-1),Ln=[On];function Mn(e,t){return g(),v("svg",En,Ln)}var An={name:"fa-solid-bars",render:Mn};const Nn={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},In=f("path",{fill:"currentColor",d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128c0-70.7 57.2-128 128-128c70.7 0 128 57.2 128 128c0 70.7-57.2 128-128 128z"},null,-1),Tn=[In];function Bn(e,t){return g(),v("svg",Nn,Tn)}var Pt={name:"fa-solid-search",render:Bn};const zn={name:"mobileMenuFloaters",props:["mobileMenuOpen"],data:function(){return{store:this.$store.state}}},Vn={class:"second-row"},Hn={key:0,class:"player-open-indicator"};function qn(e,t,n,s,i,o){const r=Pt,c=xt,a=An,h=Pn;return g(),v("div",{id:"mobile-menu-floaters",class:B({mobile:n.mobileMenuOpen})},[f("div",Vn,[e.$store.state.searchMounted&&!n.mobileMenuOpen?(g(),v("div",{key:0,class:"search-btn",onClick:t[0]||(t[0]=l=>e.$emit("startSearching"))},[L(r)])):P("",!0),e.$store.state.displayMode&&!n.mobileMenuOpen?(g(),A(c,{key:1})):P("",!0),f("div",{class:"burger-menu",onClick:t[1]||(t[1]=l=>e.$emit("update:mobileMenuOpen",!n.mobileMenuOpen))},[L(a,{class:"brgr-btn"}),e.$store.state.playingAudio?(g(),v("div",Hn,[L(h,{class:"brgr-btn"})])):P("",!0)])])],2)}var Gn=H(zn,[["render",qn]]);const Un={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},Wn=f("path",{fill:"currentColor",d:"M256.455 8c66.269.119 126.437 26.233 170.859 68.685l35.715-35.715C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.75c-30.864-28.899-70.801-44.907-113.23-45.273c-92.398-.798-170.283 73.977-169.484 169.442C88.764 348.009 162.184 424 256 424c41.127 0 79.997-14.678 110.629-41.556c4.743-4.161 11.906-3.908 16.368.553l39.662 39.662c4.872 4.872 4.631 12.815-.482 17.433C378.202 479.813 319.926 504 256 504C119.034 504 8.001 392.967 8 256.002C7.999 119.193 119.646 7.755 256.455 8z"},null,-1),jn=[Wn];function Dn(e,t){return g(),v("svg",Un,jn)}var Fn={name:"fa-solid-redo-alt",render:Dn};const Jn={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},Kn=f("path",{fill:"currentColor",d:"M255.545 8c-66.269.119-126.438 26.233-170.86 68.685L48.971 40.971C33.851 25.851 8 36.559 8 57.941V192c0 13.255 10.745 24 24 24h134.059c21.382 0 32.09-25.851 16.971-40.971l-41.75-41.75c30.864-28.899 70.801-44.907 113.23-45.273c92.398-.798 170.283 73.977 169.484 169.442C423.236 348.009 349.816 424 256 424c-41.127 0-79.997-14.678-110.63-41.556c-4.743-4.161-11.906-3.908-16.368.553L89.34 422.659c-4.872 4.872-4.631 12.815.482 17.433C133.798 479.813 192.074 504 256 504c136.966 0 247.999-111.033 248-247.998C504.001 119.193 392.354 7.755 255.545 8z"},null,-1),Qn=[Kn];function Zn(e,t){return g(),v("svg",Jn,Qn)}var Yn={name:"fa-solid-undo-alt",render:Zn};const Xn={viewBox:"0 0 352 512",width:"1.2em",height:"1.2em"},es=f("path",{fill:"currentColor",d:"m242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28L75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256L9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},null,-1),ts=[es];function ns(e,t){return g(),v("svg",Xn,ts)}var Et={name:"fa-solid-times",render:ns};const ss={viewBox:"0 0 320 512",width:"1.2em",height:"1.2em"},is=f("path",{fill:"currentColor",d:"M48 64C21.5 64 0 85.5 0 112v288c0 26.5 21.5 48 48 48h32c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H48zm192 0c-26.5 0-48 21.5-48 48v288c0 26.5 21.5 48 48 48h32c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48h-32z"},null,-1),os=[is];function rs(e,t){return g(),v("svg",ss,os)}var as={name:"fa6-solid-pause",render:rs};const ls={viewBox:"0 0 384 512",width:"1.2em",height:"1.2em"},cs=f("path",{fill:"currentColor",d:"M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80v352c0 17.4 9.4 33.4 24.5 41.9S58.2 482 73 473l288-176c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"},null,-1),us=[cs];function hs(e,t){return g(),v("svg",ls,us)}var ds={name:"fa6-solid-play",render:hs};const ps={name:"audioPlayer",data:function(){return{audio:null,howler:null,timeDisplay:"00:00",progress:0,sample:!0}},computed:{book(){return Q.get(this.audio,"book",{})},title(){return this.book.title||this.book.titleShort},audioSource(){const e=Q.get(this.book,"sample");var t=new Ve(e);return window.location.protocol==="http:"&&(t.protocol="http"),t.toString()},route(){return Q.get(this.audio,"route",{})},progressFillerStyle(){const e={};return this.progress&&(e.width=this.progress+"%"),e}},mounted(){this.$compEmitter.on("play-audio",this.initPlayer)},beforeUnmount(){this.$compEmitter.off("play-audio",this.initPlayer),this.destroyHowler()},methods:{initPlayer(e){this.audio=e,this.play()},openBook(){const e=this.book.asin,t=this.$route.query.book;this.route&&this.route.fullPath!==this.$route.fullPath&&this.$router.push(this.route.fullPath),(!t||e&&t!==e)&&this.$nextTick(function(){this.$compEmitter.emit("book-clicked",this.book.asin)})},play:function(){let e=this;this.destroyHowler("keepAudioData"),this.$store.commit("prop",{key:"playingAudio",value:!0}),this.howler=new an.Howl({src:this.audioSource,autoplay:!0,loop:!1,volume:1,onplayerror:function(){e.howler.once("unlock",function(){e.howler.play()})},onloaderror:function(t){},onstop:function(t){}}),this.seekToCachedPosition(),this.howler.customSeek=function(t){t=t||{},t.value=t.value||30;const n=e.howler.duration(),s={going:{forward:t.direction==="forward",backward:t.direction==="backward"},at:{end:!1,start:!1},value:null},i=s.going.forward?"add":"subtract";s.value=Q[i](e.howler.current.time,t.value),s.at.end=s.value>=n,s.at.start=s.value>=n,s.value=s.going.forward?s.at.end?n:s.value:s.at.start?0:s.value,e.howler.seek(s.value),s.at.start||s.at.end?e.updateCurrent():e.howler.playing()||e.howler.play()},this.howler.current={timer:null,time:null,timeDisplay:null,percentage:null},this.howler.current.timer=setInterval(function(){e.howler.playing()&&(e.updateCurrent(),e.$refs.timeline.blur()),e.updateBookProgress()},500)},formatTime(e){const t=[],n=function(r){t.push((r<10?"0":"")+r)};let s=Math.floor(e/3600);n(s);let i=Math.floor(e/60)||0;n(i);let o=e-i*60||0;return n(o),t.shift(),t.join(":")},updateCurrent(){var e=this.howler.seek()||0;this.howler.current.time=e,this.howler.current.timeDisplay=this.formatTime(Math.round(e)),this.howler.current.percentage=e/this.howler.duration()*100||0,this.timeDisplay=this.howler.current.timeDisplay,this.progress=this.howler.current.percentage.toFixed(1)},pause:function(e){this.howler&&this.howler.playing()&&this.howler.pause()},scrubberPause:function(e){let t=this;this.howler&&this.howler.playing()&&(this.howler.pause(),this.clearPause(),this.howler.pauseTimer=setTimeout(function(){t.howler.play()},500))},clearPause:function(){this.howler&&clearTimeout(this.howler.pauseTimer)},stop:function(){this.destroyHowler()},seekBack:function(){this.howler&&this.howler.customSeek({direction:"backward"})},seekForward:function(){this.howler&&this.howler.customSeek({direction:"forward"})},userScrubbed:function(e){if(this.howler){this.clearPause();var t=e.target.value/100*this.howler.duration();this.progress=e.target.value,this.howler.seek(t),this.howler.play()}},destroyHowler(e){this.howler&&(this.clearPause(),Q.get(this.howler,"current.timer")&&clearInterval(this.howler.current.timer),Q.get(this.howler,"unload")&&this.howler.unload(),this.howler=null),e||(this.audio=null),this.$store.commit("prop",{key:"playingAudio",value:!1})},updateBookProgress:Q.throttle(function(){this.sample||this.$store.commit("updatePlayerProgress",{asin:this.book.asin,progress:this.howler.current.time})},3e3,{leading:!1,trailing:!0}),seekToCachedPosition(){const e=Q.find(this.$store.state.sticky.player.books,{asin:this.book.asin});e&&this.howler.seek(e.progress)}}},fs={key:0,id:"audio-player"},ms={class:"inner-wrap"},gs={key:0},_s={class:"player-innards"},vs={key:0,class:"time-display"},ys={class:"scrubber-wrapper"},bs=["value"],ks={class:"progress-filler"},ws={class:"player-buttons"};function Ss(e,t,n,s,i,o){const r=ds,c=as,a=Et,h=Yn,l=Fn;return e.audio?(g(),v("div",fs,[f("div",ms,[o.title?(g(),v("div",{key:0,class:"book",onClick:t[0]||(t[0]=(...u)=>o.openBook&&o.openBook(...u))},[e.sample?(g(),v("strong",gs,"sample\xA0|\xA0")):P("",!0),f("span",null,ae(o.title),1)])):P("",!0),f("div",_s,[e.timeDisplay?(g(),v("div",vs,ae(e.timeDisplay),1)):P("",!0),f("div",ys,[f("input",{class:"scrubber",ref:"timeline",type:"range",step:"0.1",min:"0",value:e.progress,max:"100",onMousedown:t[1]||(t[1]=(...u)=>o.scrubberPause&&o.scrubberPause(...u)),onTouchstart:t[2]||(t[2]=(...u)=>o.scrubberPause&&o.scrubberPause(...u)),onInput:t[3]||(t[3]=(...u)=>o.clearPause&&o.clearPause(...u)),onChange:t[4]||(t[4]=(...u)=>o.userScrubbed&&o.userScrubbed(...u))},null,40,bs),f("div",ks,[f("div",{style:$e(o.progressFillerStyle)},null,4)])]),f("div",ws,[e.howler&&e.howler.playing()?(g(),v("div",{key:1,class:"pause",onClick:t[6]||(t[6]=(...u)=>o.pause&&o.pause(...u))},[L(c)])):(g(),v("div",{key:0,class:"play",onClick:t[5]||(t[5]=(...u)=>o.play&&o.play(...u))},[L(r)])),f("div",{class:"stop",onClick:t[7]||(t[7]=(...u)=>o.stop&&o.stop(...u))},[L(a)]),f("div",{class:"back",onClick:t[8]||(t[8]=(...u)=>o.seekBack&&o.seekBack(...u))},[L(h)]),f("div",{class:"forward",onClick:t[9]||(t[9]=(...u)=>o.seekForward&&o.seekForward(...u))},[L(l)])])])])])):P("",!0)}var $s=H(ps,[["render",Ss],["__scopeId","data-v-a92ad2a0"]]);const Cs={viewBox:"0 0 640 512",width:"1.2em",height:"1.2em"},Rs=f("path",{fill:"currentColor",d:"M579.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0l112.3-112.3zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5l112.2-112.3c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z"},null,-1),xs=[Rs];function Ps(e,t){return g(),v("svg",Cs,xs)}var Es={name:"fa6-solid-link",render:Ps};const Os={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Ls=f("path",{fill:"currentColor",d:"M640 384v256H384V384h256zm64 0h192v256H704V384zm-64 512H384V704h256v192zm64 0V704h192v192H704zm-64-768v192H384V128h256zm64 0h192v192H704V128zM320 384v256H128V384h192zm0 512H128V704h192v192zm0-768v192H128V128h192z"},null,-1),Ms=[Ls];function As(e,t){return g(),v("svg",Os,Ms)}var Ot={name:"ep-grid",render:As};const Ns={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Is=f("path",{fill:"currentColor",d:"M4 3h16a2 2 0 0 1 2 2v15a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2m0 4v3h4V7H4m6 0v3h4V7h-4m10 3V7h-4v3h4M4 12v3h4v-3H4m0 8h4v-3H4v3m6-8v3h4v-3h-4m0 8h4v-3h-4v3m10 0v-3h-4v3h4m0-8h-4v3h4v-3Z"},null,-1),Ts=[Is];function Bs(e,t){return g(),v("svg",Ns,Ts)}var zs={name:"mdi-table-large",render:Bs};const Vs={name:"ViewModeSwitcher",props:["justIcon"],data:function(){return{sticky:this.$store.state.sticky,viewModes:["grid","spreadsheet"]}},methods:{changeViewMode:function(){const e=this;let t=_.findIndex(this.viewModes,function(s){return s===e.sticky.viewMode});t+1>this.viewModes.length-1?t=0:t=t+1;const n=this.viewModes[t];this.$store.commit("stickyProp",{key:"viewMode",value:n}),this.$updateQueries({y:null,view:n})}}},Hs=["content"];function qs(e,t,n,s,i,o){const r=zs,c=Ot,a=de("tippy");return q((g(),v("div",{class:B(["view-mode-switcher icon",{"no-style":n.justIcon}]),onClick:t[0]||(t[0]=(...h)=>o.changeViewMode&&o.changeViewMode(...h)),content:"Change to <strong>"+(e.sticky.viewMode==="grid"?"spreadsheet":"grid")+"</strong> view"},[e.sticky.viewMode==="grid"?(g(),A(r,{key:0,class:"icon"})):e.sticky.viewMode==="spreadsheet"?(g(),A(c,{key:1,class:"icon"})):P("",!0)],10,Hs)),[[a,{allowHTML:!0}]])}var Gs=H(Vs,[["render",qs]]);const Us={props:["float"],methods:{startSearching(){this.$compEmitter.emit("ios-auto-zoom-disable"),this.$compEmitter.emit("search-focus")}}};function Ws(e,t,n,s,i,o){const r=Pt,c=de("tippy");return e.$store.state.searchMounted,q((g(),v("div",{key:0,class:B(["search-btn",{float:n.float}]),onClick:t[0]||(t[0]=(...a)=>o.startSearching&&o.startSearching(...a)),content:`
    Click to scroll up and search. <br>
    Read about advanced search operators 
    <a target="_blank" rel="noopener noreferrer" href="https://joonaspaakko.gitbook.io/audible-library-extractor/gallery/advanced-search">
      here
    </a>.`},[L(r)],2)),[[c,{interactive:!0,allowHTML:!0}]])}var js=H(Us,[["render",Ws],["__scopeId","data-v-518fdf49"]]);const Ds={viewBox:"0 0 384 512",width:"1.2em",height:"1.2em"},Fs=f("path",{fill:"currentColor",d:"M223.5 32C100 32 0 132.3 0 256s100 224 223.5 224c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"},null,-1),Js=[Fs];function Ks(e,t){return g(),v("svg",Ds,Js)}var Qs={name:"fa6-solid-moon",render:Ks};const Zs={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},Ys=f("path",{fill:"currentColor",d:"M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391l-19.9 107.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391L13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256L2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121l19.9-107.9c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1l90.3-62.3c4.5-3.1 10.2-3.7 15.2-1.6zM352 256c0 53-43 96-96 96s-96-43-96-96s43-96 96-96s96 43 96 96zm32 0c0-70.7-57.3-128-128-128s-128 57.3-128 128s57.3 128 128 128s128-57.3 128-128z"},null,-1),Xs=[Ys];function ei(e,t){return g(),v("svg",Zs,Xs)}var ti={name:"fa6-solid-sun",render:ei};const ni={name:"lightSwitch",data:function(){return{tippyContent:""}},created:function(){this.lightSwitchToggle(!0)},methods:{lightSwitchToggle:function(e){e?this.autoLightsOff():(this.$store.commit("stickyProp",{key:"lightSwitch",value:this.$store.state.sticky.lightSwitch?0:1}),this.$store.state.sticky.lightSwitchSetByUser||this.$store.commit("stickyProp",{key:"lightSwitchSetByUser",value:!0}));const t=document.querySelector("html");t.classList.remove("theme-light"),t.classList.remove("theme-dark"),t.classList.add(this.$store.state.sticky.lightSwitch?"theme-light":"theme-dark")},autoLightsOff:function(){window.matchMedia("(prefers-color-scheme)").media!=="not all"&&this.$store.state.sticky.lightSwitch&&!this.$store.state.sticky.lightSwitchSetByUser&&this.$store.commit("stickyProp",{key:"lightSwitch",value:0})}}},si={class:"light-switch text-button"};function ii(e,t,n,s,i,o){const r=ti,c=Qs;return g(),v("div",si,[f("div",{class:"icon",onClick:t[0]||(t[0]=a=>o.lightSwitchToggle(!1))},[e.$store.state.sticky.lightSwitch?(g(),A(r,{key:0})):(g(),A(c,{key:1}))])])}var oi=H(ni,[["render",ii],["__scopeId","data-v-f55d5b5a"]]);const ri={name:"menuLooper",props:["routes","childRoutes","mobileMenuOpen","inRoot"],data:function(){return{menuOpen:!0,copiedToClipboard:!1}},methods:{getHrefAttr(e){return e.tag==="a"?"href":"to"},itemActive(e){const t=this.$route.name;return t===e.name||_.find(e.children,{name:t})?"router-link-active":null},subItemActive(e){const t=this.$route.name;return _.find(e.childItems,function(s){return t===s.name||_.find(s.children,{name:t})})?"router-link-active":null},getRoutePath(e){return _.get(e,"path")?{name:_.get(e,"name")||_.get(e,"children[0].name"),query:{refresh:!0}}:_.get(e,"href")},getRouteName(e){if(e.altName)return e.altName(e);{const t=_.get(e,"children[0].meta.title")||_.get(e,"children[0].name")||e.name;return _.get(e,"meta.nestedGroup")==="extension-tools"?t:_.startCase(t)}},closeMenu(){this.menuOpen=!1,this.$nextTick(function(){this.menuOpen=!0})},additionalClick(e){this.mobileMenuOpen?this.$emit("update:mobileMenuOpen",!this.mobileMenuOpen):this.$emit("closeMenu")},copyToClipboard(){navigator.clipboard.writeText(window.location.href);const e=_.get(this.$refs,"copyToClipboard.$el")||_.get(this.$refs,"copyToClipboard.$el");e._tippy.show(),setTimeout(()=>{e._tippy.hide()},2e3)}}},ai={key:0},li={key:1,class:"mobile-menu-top-spacer"},ci=["onClick"],ui={key:0,class:"menu-item-icon"},hi=["innerHTML"],di={key:0,class:"sub-menu"},pi={key:2,class:"menu-icon-toolbar"},fi={key:0},mi={key:1},gi={key:2};function _i(e,t,n,s,i,o){const r=Ue("menuLooper"),c=oi,a=js,h=Gs,l=Es,u=$s,m=de("tippy");return g(),v("div",{class:B(["menu-items",{"has-sub-menu":n.childRoutes,mobileMenu:n.mobileMenuOpen}])},[e.menuOpen?(g(),v("div",ai,[n.mobileMenuOpen?(g(),v("div",{key:0,class:"mobile-menu-top-filler",onClick:t[0]||(t[0]=d=>e.$emit("update:mobileMenuOpen",!n.mobileMenuOpen))})):P("",!0),n.mobileMenuOpen?(g(),v("div",li)):P("",!0),(g(!0),v(le,null,ce(n.routes,d=>q((g(),A(St(d.tag||"router-link"),Qt({key:d.path,[o.getHrefAttr(d)||""]:o.getRoutePath(d),target:d.href?"_blank":null,class:["menu-item",[d.meta.groupName,o.itemActive(d),o.subItemActive(d),d.disabled||(d.condition?!d.condition():null)?"disabled":""]],content:typeof d.tippy=="function"?d.tippy():d.tippy,onClick:b=>d.click?d.click(d):null}),{default:We(()=>[f("div",{class:"menu-item-inner",onClick:b=>o.additionalClick(d)},[d.meta.icon?(g(),v("span",ui,[f("i",{class:B(d.meta.icon)},null,2)])):P("",!0),f("span",{class:"menu-item-text",innerHTML:o.getRouteName(d)},null,8,hi)],8,ci),d.childItems?(g(),v("div",di,[L(r,{routes:d.childItems,childRoutes:d.childItems,onCloseMenu:o.closeMenu},null,8,["routes","childRoutes","onCloseMenu"])])):P("",!0)]),_:2},1040,["target","class","content","onClick"])),[[m,{placement:"left",flipBehavior:["left","top","bottom"],maxWidth:400}]])),128)),n.inRoot?(g(),v("div",pi,[f("div",null,[L(c)]),n.mobileMenuOpen?P("",!0):(g(),v("div",fi,[L(a)])),n.mobileMenuOpen?(g(),v("div",mi,[e.$store.state.searchMounted?(g(),A(h,{key:0,justIcon:!0})):P("",!0)])):P("",!0),n.mobileMenuOpen?(g(),v("div",gi,[q(L(l,{class:"icon",onClick:t[1]||(t[1]=d=>o.copyToClipboard()),content:"Page URL copied to clipboard!",ref:"copyToClipboard"},null,512),[[m,{trigger:"manual"}]])])):P("",!0)])):P("",!0)])):P("",!0),n.inRoot?(g(),A(u,{key:1})):P("",!0)],2)}var vi=H(ri,[["render",_i],["__scopeId","data-v-6c93cd9e"]]);const yi={name:"modal",props:["toggled"],data:function(){return{modalOpen:!0}},created:function(){},methods:{close:function(){this.$emit("closeModal")},closeOverlay:function(e){let t=this;(e.target===this.$refs.modalGrandpa||e.target===this.$refs.modalPapa)&&t.close()}}},bi={class:"outer-wrap",ref:"modalPapa"},ki={class:"inner-wrap"};function wi(e,t,n,s,i,o){const r=Et,c=de("shortkey");return g(),v("div",{id:"modal-wrapper",ref:"modalGrandpa",onClick:t[2]||(t[2]=(...a)=>o.closeOverlay&&o.closeOverlay(...a))},[f("div",bi,[f("div",ki,[Zt(e.$slots,"default"),q((g(),v("div",{class:"close-btn",onClick:t[0]||(t[0]=(...a)=>o.close&&o.close(...a)),onShortkey:t[1]||(t[1]=(...a)=>o.close&&o.close(...a))},[L(r)],32)),[[c,["esc"],void 0,{once:!0}]])])],512)],512)}var Re=H(yi,[["render",wi]]);const Si={viewBox:"0 0 16 16",width:"1.2em",height:"1.2em"},$i=f("path",{fill:"currentColor","fill-rule":"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59c.4.07.55-.17.55-.38c0-.19-.01-.82-.01-1.49c-2.01.37-2.53-.49-2.69-.94c-.09-.23-.48-.94-.82-1.13c-.28-.15-.68-.52-.01-.53c.63-.01 1.08.58 1.23.82c.72 1.21 1.87.87 2.33.66c.07-.52.28-.87.51-1.07c-1.78-.2-3.64-.89-3.64-3.95c0-.87.31-1.59.82-2.15c-.08-.2-.36-1.02.08-2.12c0 0 .67-.21 2.2.82c.64-.18 1.32-.27 2-.27c.68 0 1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82c.44 1.1.16 1.92.08 2.12c.51.56.82 1.27.82 2.15c0 3.07-1.87 3.75-3.65 3.95c.29.25.54.73.54 1.48c0 1.07-.01 1.93-.01 2.2c0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"},null,-1),Ci=[$i];function Ri(e,t){return g(),v("svg",Si,Ci)}var xi={name:"octicon-mark-github16",render:Ri};const Pi={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},Ei=f("path",{fill:"currentColor",d:"M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32v242.7l-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7V32zM64 352c-35.3 0-64 28.7-64 64v32c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64v-32c0-35.3-28.7-64-64-64H346.5l-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352H64zm368 104c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"},null,-1),Oi=[Ei];function Li(e,t){return g(),v("svg",Pi,Oi)}var Lt={name:"fa6-solid-download",render:Li};const Mi={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ai=Yt('<g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"><path stroke-dasharray="2 4" stroke-dashoffset="6" d="M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21"><animate attributeName="stroke-dashoffset" dur="0.6s" repeatCount="indefinite" values="6;0"></animate></path><path stroke-dasharray="30" stroke-dashoffset="30" d="M12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.1s" dur="0.3s" values="30;0"></animate></path><path stroke-dasharray="10" stroke-dashoffset="10" d="M12 8v7.5"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.5s" dur="0.2s" values="10;0"></animate></path><path stroke-dasharray="6" stroke-dashoffset="6" d="M12 15.5l3.5 -3.5M12 15.5l-3.5 -3.5"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.7s" dur="0.2s" values="6;0"></animate></path></g>',1),Ni=[Ai];function Ii(e,t){return g(),v("svg",Mi,Ni)}var Ti={name:"line-md-downloading-loop",render:Ii};const Bi={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},zi=f("path",{fill:"currentColor",d:"m173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69L432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},null,-1),Vi=[zi];function Hi(e,t){return g(),v("svg",Bi,Vi)}var qi={name:"fa-solid-check",render:Hi};const Gi={name:"saveGallery",components:{modal:Re},data:function(){return{files:[],dataSources:[{checked:!0,disabled:!1,key:"Library"},{checked:!0,disabled:!1,key:"Categories",parent:["Library","Wishlist"],subPage:!0},{checked:!0,disabled:!1,key:"Authors",parent:["Library","Wishlist"],subPage:!0},{checked:!0,disabled:!1,key:"Publishers",parent:["Library","Wishlist"],subPage:!0},{checked:!0,disabled:!1,key:"Collections",parent:"Library"},{checked:!0,disabled:!1,key:"Series",parent:["Library","Wishlist"],subPage:!0},{checked:!0,disabled:!1,key:"Narrators",parent:["Library","Wishlist"],subPage:!0},{checked:!0,disabled:!1,key:"Wishlist"},{checked:!0,disabled:!0,key:"Export archived books",extra:!0,tippy:'If unchecked, the "archive" collection and all archived books are excluded from the export and "My books in the series" will list archived books as not owned. This option is disabled if the archive is empty.'}],zip:null,cacheBuster:null,bundling:!1,saveBtnEnabled:!0,progressWidth:null,iconSize:20}},created:function(){this.files=window.chunksFilePaths;let e=this;this.$store.state.sticky.exportSettingsGallery&&_.each(this.$store.state.sticky.exportSettingsGallery,function(o){var r=_.find(e.dataSources,{key:o.key});r.checked=o.checked,r.disabled=o.disabled});let t=_.find(this.dataSources,{key:"Library"});t.disabled=!this.$store.state.library.books;let n=_.find(this.dataSources,{key:"Wishlist"});n.disabled=!this.$store.state.library.wishlist;let s=this.$store.state.library.collections,i=s?_.find(s,{id:"__ARCHIVE"}):null;if(i&&i.books.length>0){let o=_.find(this.dataSources,{key:"Export archived books"});o&&(o.disabled=!1)}},mounted:function(){let e=this;this.iconSize=this.$refs.textWrapper.offsetHeight,e.$store.getters.saveStandaloneAfter&&this.$nextTick(function(){try{let t=JSON.parse(JSON.stringify(e.$store.state.extractSettings)),n=_.find(t.extraSettings,{name:"saveStandaloneAfter"});n.deactivated=!0,this.$store.commit("prop",{key:"extractSettings",value:t}),chrome.storage.local.set({config:t}).then(function(){e.saveButtonClicked()})}catch{}})},beforeUnmount:function(){this.zip=null,this.cacheBuster=null},computed:{chunkSource:function(){return _.chunk(this.dataSources,4)}},methods:{cancelZipping:function(){window.location.reload()},divideLargerDatapoints:function(e,t){let n=this;_.each(t,function(s){let i="";s.peopleAlsoBought&&s.asin&&(i+="window.peopleAlsoBoughtJSON = "+JSON.stringify(s.peopleAlsoBought)+`; 
`,delete s.peopleAlsoBought),s.summary&&s.asin&&(i+="window.bookSummaryJSON = "+JSON.stringify(s.summary)+`; 
`,delete s.summary),i!==""&&e.file("data/split-book-data/"+s.asin+"."+n.cacheBuster+".js",i)})},saveButtonClicked:async function(){const e=this;if(!(this.bundling||this.$store.state.devMode))try{e.bundling=!0,e.$store.commit("prop",{key:"bundlingGallery",value:!0}),e.cacheBuster=this.runCachebuster(),e.zip=new JSZip;const t=e.zip;t.file(".nojekyll","");let n=this.excludeData(JSON.parse(JSON.stringify(this.$store.state.library)));n.extras.cacheID=e.cacheBuster;let s={books:!!n.books,series:!!n.series,collections:!!n.collections,wishlist:!!n.wishlist,extras:n.extras},i=`
          if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.${e.cacheBuster}.js')
            .then(function(registration) {
              console.log('Registration successful, scope is:', registration.scope);
            })
            .catch(function(error) {
              console.log('Service worker registration failed, error:', error);
            });
          }
        `;i=!1?"<script>"+i+"<\/script>":"";const r=function(h,l){let u="^assets\\/"+h+"\\..+\\."+(l||"js")+"$";return u=new RegExp(u),_.find(e.files,m=>m.match(u))},c='<!DOCTYPE html><html lang="en" class="theme-dark standalone-gallery" style="background: #171717; min-height: 100%;"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta http-equiv="Cache-control" content="no-cache, no-store, must-revalidate"><meta http-equiv="Pragma" content="no-cache"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="mobile-web-app-capable" content="yes"><link rel="apple-touch-icon" sizes="180x180" href="favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicons/favicon-16x16.png"><link rel="manifest" href="app.webmanifest"><link rel="mask-icon" href="favicons/safari-pinned-tab.svg" color="#f29a33"><link rel="shortcut icon" href="favicons/favicon.ico"><meta name="msapplication-TileColor" content="#222222"><meta name="msapplication-config" content="favicons/browserconfig.xml"><meta name="theme-color" content="#f29a33"><title>My Audible Library</title>'+i+'<link id="ale-css" rel="stylesheet" href="'+r("gallery","css")+'"></head><body><div id="audible-library-extractor" data-version="'+this.$store.state.version+'" data-cache-id="'+e.cacheBuster+'"></div><script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"><\/script><script id="ale-js" src="'+r("gallery","js")+'" type="module"><\/script><noscript>This library requires javascript to work!</noscript></body></html>';t.file("index.html",c),t.file("ALE-Documentation.url",`[InternetShortcut]
URL=https://joonaspaakko.gitbook.io/audible-library-extractor/`),n.wishlist&&n.books?this.divideLargerDatapoints(t,_.unionBy(n.books,n.wishlist,"asin")):(n.wishlist&&this.divideLargerDatapoints(t,n.wishlist),n.books&&this.divideLargerDatapoints(t,n.books)),t.file("data/temp-data."+e.cacheBuster+".js","window.tempDataJSON = "+JSON.stringify(s)+";"),n.books&&t.file("data/library."+e.cacheBuster+".js","window.libraryJSON = "+JSON.stringify(n.books)+";"),n.collections&&t.file("data/collections."+e.cacheBuster+".js","window.collectionsJSON = "+JSON.stringify(n.collections)+";"),n.series&&t.file("data/series."+e.cacheBuster+".js","window.seriesJSON = "+JSON.stringify(n.series)+";"),n.wishlist&&t.file("data/wishlist."+e.cacheBuster+".js","window.wishlistJSON = "+JSON.stringify(n.wishlist)+";"),console.log(_.cloneDeep(e.files)),_.remove(e.files,function(h){const l=h.replace(/^assets\//,"");if(l==="gallery.html")return!0;const u=[!!l.match(/^gallery/),!!l.match(/^content-script-helpers/),!!l.match(/^howler/),!!l.match(/^lodash/),!!l.match(/^tippy/),!!l.match(/^jquery/),!!l.match(/^fuse.esm/),!!l.match(/^index\..*\.js$/),!!l.match(/^Roboto/i),!!l.match(/^Inconsolata/i),!!l.match(/^vue\.runtime\.esm-bundler/i),!!l.match(/^fa-.+(woff2?|ttf)/)];return!_.includes(u,!0)}),e.files=e.files.concat(["favicons/android-chrome-192x192.png","favicons/android-chrome-512x512.png","favicons/apple-touch-icon.png","favicons/browserconfig.xml","favicons/favicon-16x16.png","favicons/favicon-32x32.png","favicons/favicon.ico","favicons/mstile-150x150.png","favicons/safari-pinned-tab.svg","app.webmanifest"]),console.log(e.files);for(let h of e.files){const l=await JSZipUtils.getBinaryContent(h);t.file(h,l,{binary:!0})}const a=await t.generateAsync({type:"blob",streamFiles:!0},function(l){e.progressWidth=l.percent+"%"});saveAs(a,"ALE-gallery.zip")}finally{setTimeout(function(){e.bundling=!1,e.$store.commit("prop",{key:"bundlingGallery",value:!1}),e.progressWidth=0},1e3)}},sourceChecked:function(e,t){let n=this,s=_.filter(this.dataSources,function(o){return _.isArray(o.parent)?_.includes(o.parent,t.key):o.parent===t.key});_.each(s,function(o){if(_.isArray(o.parent)){let r=_.map(o.parent,function(a){return _.find(n.dataSources,{key:a})}),c=_.filter(r,function(a){return a.checked&&!a.disabled}).length>0;o.disabled=!e.target.checked&&!c}else o.disabled=!e.target.checked});let i=_.filter(this.dataSources,{checked:!0,disabled:!1});this.saveBtnEnabled=!!i.length,this.$store.commit("stickyProp",{key:"exportSettingsGallery",value:this.dataSources})},excludeData:function(e){return _.each(this.dataSources,function(t){var n=t.key.toLowerCase(),s=!t.checked||t.disabled;switch(t.key){case"Library":s&&(delete e.books,delete e.series,delete e.collections);break;case"Series":s&&delete e.series;break;case"Collections":s&&delete e.collections;break;case"Wishlist":s&&delete e.wishlist;break;case"Export archived books":if(s){let i=e.collections,o=i?_.find(i,{id:"__ARCHIVE"}):null;o&&o.books.length>0&&e.books&&(_.remove(e.books,"archived"),e.series&&(_.each(e.series,function(r){r.books.length>0&&_.remove(r.books,function(c){return _.includes(o.books,c)}),r.allBooks.length>0&&_.each(r.allBooks,function(c){_.includes(o.books,c.asin)&&(c.notInLibrary=!0)})}),_.remove(e.series,function(r){return r.books.length===0})),_.each(i,function(r){_.remove(r.books,function(c){return _.includes(o.books,c)})})),o&&_.remove(i,function(r){return r.id==="__ARCHIVE"||!r.books||r.books.length===0})}break}t.subPage&&(e.extras.subPageStates=e.extras.subPageStates||[],e.extras.subPageStates.push({key:n,enabled:!s}))}),e},serviceWorker:function(){return`
      importScripts('https://storage.googleapis.com/workbox-cdn/releases/6.1.5/workbox-sw.js');

      workbox.setConfig({
        debug: false,
      });

      const {registerRoute} = workbox.routing;
      const {
        NetworkFirst,
        StaleWhileRevalidate,
        CacheFirst
      } = workbox.strategies;
      const CacheableResponsePlugin = workbox.cacheableResponse.CacheableResponsePlugin;
      const ExpirationPlugin = workbox.expiration.ExpirationPlugin;

      // Cache page navigations (html) with a Network First strategy
      registerRoute(
        // Check to see if the request is a navigation to a new page
        ({ request }) => request.mode === 'navigate',
        // Use a Network First caching strategy
        new NetworkFirst({
          // Put all cached files in a cache named 'pages'
          cacheName: 'pages',
          plugins: [
            // Ensure that only requests that result in a 200 status are cached
            new CacheableResponsePlugin({
              statuses: [200],
            }),
          ],
        }),
      );

      // Cache CSS, JS, and Web Worker requests with a Stale While Revalidate strategy
      registerRoute(
        // Check to see if the request's destination is style for stylesheets, script for JavaScript, or worker for web worker
        ({ request }) =>
          request.destination === 'style' ||
          request.destination === 'script' ||
          request.destination === 'worker',
        // Use a Stale While Revalidate caching strategy
        new StaleWhileRevalidate({
          // Put all cached files in a cache named 'assets'
          cacheName: 'assets',
          plugins: [
            // Ensure that only requests that result in a 200 status are cached
            new CacheableResponsePlugin({
              statuses: [200],
            }),
          ],
        }),
      );

      // Cache images with a Cache First strategy
      registerRoute(
        // Check to see if the request's destination is style for an image
        ({ url, request }) =>
          (request.destination === 'image' && url.origin !== 'https://m.media-amazon.com') ||
          (request.destination === 'image' && url.origin === 'https://m.media-amazon.com' && !url.href.match(/_SL200_/) && !url.href.match(/_SL150_/)),
        // Use a Cache First caching strategy
        new CacheFirst({
          // Put all cached files in a cache named 'images'
          cacheName: 'images',
          plugins: [
            // Ensure that only requests that result in a 200 status are cached
            new CacheableResponsePlugin({
              statuses: [200],
            }),
            // Don't cache more than 50 items, and expire them after 30 days
            new ExpirationPlugin({
              maxEntries: 50,
              maxAgeSeconds: 60 * 60 * 24 * 30, // 30 Days
            }),
          ],
        }),
      );

      // Cache the Google Fonts stylesheets with a stale-while-revalidate strategy.
      registerRoute(
        ({url}) => url.origin === 'https://fonts.googleapis.com',
        new StaleWhileRevalidate({
          cacheName: 'google-fonts-stylesheets',
        })
      );

      // Cache the underlying font files with a cache-first strategy for 1 year.
      registerRoute(
        ({url}) => url.origin === 'https://fonts.gstatic.com',
        new CacheFirst({
          cacheName: 'google-fonts-webfonts',
          plugins: [
            new CacheableResponsePlugin({
              statuses: [0, 200],
            }),
            new ExpirationPlugin({
              maxAgeSeconds: 60 * 60 * 24 * 365,
              maxEntries: 30,
            }),
          ],
        })
      );
      `},runCachebuster:function(){return new Date().getTime()}}},K=e=>(je("data-v-db842522"),e=e(),De(),e),Ui={class:"export-group"},Wi={class:"top-wrapper"},ji={class:"text-wrapper",ref:"textWrapper"},Di=K(()=>f("h2",null,"Stand-alone gallery",-1)),Fi=K(()=>f("div",{class:"description"}," This saves the gallery as a stand-alone web page that can be uploaded online and shared or viewed as is by unpacking the zip file and opening the index.html file in a web chrome. ",-1)),Ji=[Di,Fi],Ki=K(()=>f("h3",null,"Include:",-1)),Qi={class:"options opt-groups"},Zi=["data-extra","content"],Yi=["disabled","onUpdate:modelValue","onChange"],Xi={class:"visual-checkbox"},eo={class:"icon"},to=K(()=>f("h3",null,"Output:",-1)),no=K(()=>f("div",null,"Hosted online",-1)),so={content:"Only use this option if you wish to view the gallery locally on your computer. Don't upload this online, unless you're really into slow load times."},io=J("Local viewing"),oo=[io],ro={class:"buttons-footer"},ao={class:"btn-wrapper"},lo={key:0,style:{color:"#999","font-weight":"bold","margin-bottom":"5px"}},co=J(" Saving the standalone gallery is only possible "),uo=K(()=>f("br",null,null,-1)),ho=J(' in "production" builds ('),po=K(()=>f("code",null,"yarn vite build",-1)),fo=J(") "),mo=[co,uo,ho,po,fo],go=["disabled"],_o={key:0},vo=J(" ALE-gallery.zip"),yo={class:"github-btn",target:"_blank",rel:"noopener noreferrer",href:"https://joonaspaakko.gitbook.io/audible-library-extractor/sharing/uploading-to-github"},bo=K(()=>f("span",null,"Upload instructions",-1)),ko={class:"github-btn",target:"_blank",rel:"noopener noreferrer",href:"https://joonaspaakko.gitbook.io/audible-library-extractor/sharing/uploading-to-github/updating-gallery-in-github"},wo=K(()=>f("span",null,"Update instructions",-1));function So(e,t,n,s,i,o){const r=Ot,c=qi,a=Ti,h=Lt,l=xi,u=Re,m=de("tippy");return g(),A(u,{onCloseModal:t[2]||(t[2]=d=>e.$emit("closeComp"))},{default:We(()=>[f("div",Ui,[f("div",Wi,[f("div",{class:"icon-wrapper",style:$e({fontSize:e.iconSize/1.2+"px",lineHeight:e.iconSize/1.2+"px",paddingRight:e.iconSize/2.5+"px"})},[L(r)],4),f("div",ji,Ji,512)]),Ki,f("div",Qi,[(g(!0),v(le,null,ce(o.chunkSource,(d,b)=>(g(),v("div",{class:B(["opt-group",["group-"+b]]),key:b},[(g(!0),v(le,null,ce(d,(S,O)=>q((g(),v("label",{class:B(["item-"+O,S.disabled?"disabled":null]),"data-extra":S.extra,key:S.key,content:S.tippy},[q(f("input",{type:"checkbox",disabled:S.disabled,"onUpdate:modelValue":C=>S.checked=C,onChange:C=>o.sourceChecked(C,S)},null,40,Yi),[[Xt,S.checked]]),f("div",Xi,[f("span",eo,[L(c)])]),f("span",null,ae(S.key),1)],10,Zi)),[[m]])),128))],2))),128))]),to,no,q((g(),v("div",so,oo)),[[m]]),f("div",ro,[f("div",ao,[e.$store.state.devMode?(g(),v("div",lo,mo)):P("",!0),f("button",{class:B(["save-btn save-gallery",{saving:e.bundling}]),onClick:t[1]||(t[1]=(...d)=>o.saveButtonClicked&&o.saveButtonClicked(...d)),disabled:!e.$store.state.devMode&&(e.bundling||!e.saveBtnEnabled)},[f("span",null,[e.bundling?(g(),v("strong",_o,"Packaging:")):P("",!0),vo]),e.bundling?(g(),A(a,{key:0})):(g(),A(h,{key:1})),e.bundling&&e.progressWidth?(g(),v("div",{key:2,class:"progress",style:$e({width:e.progressWidth})},null,4)):P("",!0),e.bundling?(g(),v("button",{key:3,class:"cancel-packaging",onClick:t[0]||(t[0]=(...d)=>o.cancelZipping&&o.cancelZipping(...d))},"cancel")):P("",!0)],10,go),f("div",null,[f("a",yo,[bo,L(l)]),f("a",ko,[wo,L(l)])])])])])]),_:1})}var $o=H(Gi,[["render",So],["__scopeId","data-v-db842522"]]);const Co={viewBox:"0 0 576 512",width:"1.2em",height:"1.2em"},Ro=f("path",{fill:"currentColor",d:"M384 24c0-9.6 5.7-18.2 14.5-22s19-2 26 4.6l144 136c4.8 4.5 7.5 10.8 7.5 17.4s-2.7 12.9-7.5 17.4l-144 136c-7 6.6-17.2 8.4-26 4.6S384 305.5 384 296v-72h-46.5c-45 0-81.5 36.5-81.5 81.5c0 22.3 10.3 34.3 19.2 40.5c6.8 4.7 12.8 12 12.8 20.3c0 9.8-8 17.8-17.8 17.8h-2.5c-2.4 0-4.8-.4-7.1-1.4C242.8 374.8 160 333.4 160 240c0-79.5 64.5-144 144-144h80V24zM0 144c0-44.2 35.8-80 80-80h16c17.7 0 32 14.3 32 32s-14.3 32-32 32H80c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16v-16c0-17.7 14.3-32 32-32s32 14.3 32 32v16c0 44.2-35.8 80-80 80H80c-44.2 0-80-35.8-80-80V144z"},null,-1),xo=[Ro];function Po(e,t){return g(),v("svg",Co,xo)}var Eo={name:"fa6-solid-share-from-square",render:Po};const Oo={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},Lo=f("path",{fill:"currentColor",d:"M222.7 32.1c5 16.9-4.6 34.8-21.5 39.8C121.8 95.6 64 169.1 64 256c0 106 86 192 192 192s192-86 192-192c0-86.9-57.8-160.4-137.1-184.1c-16.9-5-26.6-22.9-21.5-39.8s22.9-26.6 39.8-21.5C434.9 42.1 512 140 512 256c0 141.4-114.6 256-256 256S0 397.4 0 256C0 140 77.1 42.1 182.9 10.6c16.9-5 34.8 4.6 39.8 21.5z"},null,-1),Mo=[Lo];function Ao(e,t){return g(),v("svg",Oo,Mo)}var No={name:"fa6-solid-circle-notch",render:Ao};const Io={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},To=f("path",{fill:"currentColor",d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10s10-4.47 10-10S17.53 2 12 2z"},null,-1),Bo=[To];function zo(e,t){return g(),v("svg",Io,Bo)}var Vo={name:"ic-baseline-circle",render:zo};const Ho={viewBox:"0 0 384 512",width:"1.2em",height:"1.2em"},qo=f("path",{fill:"currentColor",d:"M64 0C28.7 0 0 28.7 0 64v384c0 35.3 28.7 64 64 64h256c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zm192 0v128h128L256 0zM80 224h16c22.1 0 40 17.9 40 40v8c0 8.8-7.2 16-16 16s-16-7.2-16-16v-8c0-4.4-3.6-8-8-8H80c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8h16c4.4 0 8-3.6 8-8v-8c0-8.8 7.2-16 16-16s16 7.2 16 16v8c0 22.1-17.9 40-40 40H80c-22.1 0-40-17.9-40-40v-80c0-22.1 17.9-40 40-40zm72 46.4c0-25.6 20.8-46.4 46.4-46.4H216c8.8 0 16 7.2 16 16s-7.2 16-16 16h-17.6c-7.9 0-14.4 6.4-14.4 14.4c0 5.2 2.8 9.9 7.2 12.5l25.4 14.5C231 305.7 240 321 240 337.7c0 25.6-20.8 46.4-46.4 46.4H168c-8.8 0-16-7.2-16-16s7.2-16 16-16h25.6c7.9 0 14.4-6.4 14.4-14.4c0-5.2-2.8-9.9-7.2-12.5l-25.4-14.5c-14.5-8.3-23.4-23.7-23.4-40.3zM280 240v31.6c0 23 5.5 45.6 16 66c10.5-20.3 16-42.9 16-66V240c0-8.8 7.2-16 16-16s16 7.2 16 16v31.6c0 34.7-10.3 68.7-29.6 97.6l-5.1 7.7c-3 4.5-8 7.1-13.3 7.1s-10.3-2.7-13.3-7.1l-5.1-7.7c-19.3-28.9-29.6-62.9-29.6-97.6V240c0-8.8 7.2-16 16-16s16 7.2 16 16z"},null,-1),Go=[qo];function Uo(e,t){return g(),v("svg",Ho,Go)}var Wo={name:"fa6-solid-file-csv",render:Uo},jo={methods:{stringifyArray:function(e,t,n){return Array.isArray(e)?t?e.map(function(s){return s[t]}).join(n||", "):e.join(", "):e||""}}},Do={methods:{makeFullUrl:function(e){const t=new Ve(this.$store.state.urlOrigin+e);return t.query.ipRedirectOverride=!0,t.query.overrideBaseCountry=!0,t.toString()},makeUrl:function(e,t){const n=this.$store.state.urlOrigin;let s="";switch(e){case"store":case"book":s=n+"/pd/"+encodeURIComponent(t);break;case"author":t.url?s=n+"/author/"+t.url:s=n+"/search?searchAuthor="+encodeURIComponent(t.name);break;case"narrator":t.name&&(s=n+"/search?searchNarrator="+encodeURIComponent(t.name));break;case"series":t.asin&&(s=n+"/series/"+t.asin);break;case"publisher":t.name&&(s=n+"/search?searchProvider="+encodeURIComponent(t.name));break;case"categories":case"tags":t.url&&(s=n+"/cat/"+t.url);break}if(s){let i=new Ve(s);return i.query.ipRedirectOverride=!0,i.query.overrideBaseCountry=!0,i.toString()}else return""}}},Fo={methods:{prepareKeys:function(e){e=e||{};let t=e.collection||_.get(this.$store.state,this.$store.state.collectionSource),n=_.union(_.flatten(_.map(t,r=>_.keys(r))));n=n.concat(["isbn10","isbn13"]);let s=["added","title","series","bookNumbers","authors","narrators","tags","categories","length","progress","releaseDate","publishers","myRating","rating","ratings","favorite","format","language","whispersync","fromPlusCatalog","unavailable","archived","downloaded","storePageChanged","storePageMissing"];e.priorityKeys&&(s=e.priorityKeys);let i=_.remove(n,function(r){return!_.includes(s,r)});n=s.concat(i),s=null,i=null;let o=["titleShort","sample","blurb","url","summary","moreLikeThis","peopleAlsoBought","asin","cover","sample","cover","isbns"];return n=_.remove(n,function(r){return!_.includes(e.removeKeys||o,r)}),n}}},Jo={methods:{slugify:function(e){const t="\xE0\xE1\xE2\xE4\xE6\xE3\xE5\u0101\u0103\u0105\xE7\u0107\u010D\u0111\u010F\xE8\xE9\xEA\xEB\u0113\u0117\u0119\u011B\u011F\u01F5\u1E27\xEE\xEF\xED\u012B\u012F\xEC\u0142\u1E3F\xF1\u0144\u01F9\u0148\xF4\xF6\xF2\xF3\u0153\xF8\u014D\xF5\u0151\u1E55\u0155\u0159\xDF\u015B\u0161\u015F\u0219\u0165\u021B\xFB\xFC\xF9\xFA\u016B\u01D8\u016F\u0171\u0173\u1E83\u1E8D\xFF\xFD\u017E\u017A\u017C\xB7/_,:;",n="aaaaaaaaaacccddeeeeeeeegghiiiiiilmnnnnoooooooooprrsssssttuuuuuuuuuwxyyzzz------",s=new RegExp(t.split("").join("|"),"g");return encodeURIComponent(e.toString().toLowerCase().replace(/\s+/g,"-").replace(s,i=>n.charAt(t.indexOf(i))).replace(/&/g,"-and-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,""))}}},Ko={methods:{makeGoodReadsUrl:function(e){e=e||this.book;const t=e.authors?e.authors[0].name+" - ":e.obj&&e.obj.authors?e.obj.authors[0].name+" - ":"";let n=(t&&e.titleShort?e.titleShort:e.title)||"";const s=t+n;return e.titleShort||e.title?"https://www.goodreads.com/search?q="+encodeURIComponent(s):null}}};const Qo={name:"saveCsv",mixins:[jo,wt,Do,Fo,Jo,Ko],components:{modal:Re},data:function(){return{settings:{dataSourcesChecked:"Library",dataSources:[{key:"Library"},{key:"Wishlist"},{key:"Current list",tippy:"What you see is what you get. For example, in a series sub page this option would export the entire series as listed, unless you modify it by adding filters or by searching. This option also exports with the current sorting, whereas the other two use the default descending sort by added. <strong>This data source only works on gallery pages with books.</strong>"}],compatibilityChecked:"Google Sheets",compatibility:[{key:"Raw data",label:"Raw data",tippy:"This is the format that works with any CSV capable application, like Open Office, Excel, Numbers, Google Sheets (though the GS specific format is recommended)."},{key:"Google Sheets",tippy:"<strong>Google Sheets compatible formulas:</strong> <ul><li>Cover image and store page hyperlink</li><li>Sample audio icon and hyperlink</li><li>Web player icon and hyperlink</li><li>Goodreads search icon and hyperlink</li><li>Title with a hyperlink to store page</li></ul>"},{key:"Goodreads",tippy:"This one has just the columns that are relevant to Goodreads and removes any books that don't have ISBNs because Goodreads won't import books without any. <br><br>Each book is imported in bookshelves as per their status: not started (to-read), started(currently-reading), finished (read). The categories are divided into shelves as well."}]},bundling:!1,iconSize:20}},mounted:function(){this.$store.state.sticky.exportSettingsCSVdataSources&&(this.settings.dataSourcesChecked=this.$store.state.sticky.exportSettingsCSVdataSources),this.$store.state.sticky.exportSettingsCSVcompatibility&&(this.settings.compatibilityChecked=this.$store.state.sticky.exportSettingsCSVcompatibility),this.iconSize=this.$refs.textWrapper.offsetHeight},computed:{dataSourceActive(){return _.find(this.settings.dataSources,{key:this.settings.dataSourcesChecked})},compatibilityActive(){return _.find(this.settings.compatibility,{key:this.settings.compatibilityChecked})},googleSheets:function(){return this.settings.compatibilityChecked==="Google Sheets"},filename:function(){let e="";if(this.settings.dataSourcesChecked==="Library")e="library";else if(this.settings.dataSourcesChecked==="Wishlist")e="wishlist";else if(this.settings.dataSourcesChecked==="Current list"){let t=this.$store.state.pageTitle?this.slugify(this.$store.state.pageTitle):null,n=this.$route.name;e=t||n}return e!==""&&(e="-"+e),"ALE-spreadsheet"+e+".csv"},dataSource:function(){switch(this.settings.dataSourcesChecked){case"Library":return this.$store.state.library.books;case"Wishlist":return this.$store.state.library.wishlist;case"Current list":return this.$store.getters.collection}},saveBtnEnabled:function(){if(this.settings.dataSourcesChecked==="Current list"){if(this.$route.meta.gallery)return!0}else return this.settings.dataSourcesChecked==="Wishlist"&&this.settings.compatibilityChecked==="Goodreads"?!1:this.dataSource&&this.dataSource.length>0}},methods:{saveButtonClicked:function(){if(!this.bundling){const e=this;e.bundling=!0;let t=JSON.parse(JSON.stringify(this.dataSource)),n=this.prepKeys(t),s=Papa.unparse({fields:_.map(n,function(i){return i==="isbn10"&&i==="isbn13"?i.toUpperCase():_.startCase(i)}),data:this.processData(n,t),quotes:!1,quoteChar:'"',escapeChar:'"',delimiter:",",header:!0,newline:`\r
`,skipEmptyLines:!1,columns:null});saveAs(new File([s],this.filename,{type:"text/csv;charset=utf-8"})),setTimeout(function(){e.bundling=!1},1e3)}},inputChanged:function(e){this.$store.state.sticky.exportSettingsCSVdataSources!==this.settings.dataSourcesChecked&&this.$store.commit("stickyProp",{key:"exportSettingsCSVdataSources",value:this.settings.dataSourcesChecked}),this.$store.state.sticky.exportSettingsCSVcompatibility!==this.settings.compatibilityChecked&&this.$store.commit("stickyProp",{key:"exportSettingsCSVcompatibility",value:this.settings.compatibilityChecked})},processData:function(e,t){let n=this;return this.$store.state.sticky.exportSettingsCSVcompatibility==="Goodreads"?this.processDataGoodreads(e,t):_.map(t,function(s){return _.map(e,function(i){switch(i){case"authors":case"narrators":case"categories":case"publishers":case"tags":return n.stringifyArray(s[i],"name",i==="categories"?" > ":null)||"";case"series":let o=s.series;return o&&(o=_.map(o,function(S){let O=S.bookNumbers?" (book "+S.bookNumbers.join(", ")+")":"";return S.name+O}).join(", ")),o;case"bookNumbers":let r=_.filter(s.series,"bookNumbers");return r=_.map(r,"bookNumbers"),r=_.flatten(r),_.isEmpty(r)?r=null:_.isArray(r)&&(r=r.join(", ")),r=r||"\u221E",n.googleSheets&&(r="'"+r),s.series?r:"";case"isbn10":const c=_.find(s.isbns,{type:"ISBN_10"});return c?n.googleSheets?"'"+c.identifier:c.identifier:"";case"isbn13":const a=_.find(s.isbns,{type:"ISBN_13"});return a?n.googleSheets?"'"+a.identifier:a.identifier:"";case"peopleAlsoBought":return s.peopleAlsoBought?n.stringifyArray(s.peopleAlsoBought,"title"):"";case"summary":return s.summary?s.summary.replace(/(\n|\r)/g):"";case"cover":let h=s.cover?n.makeCoverUrl(s.cover):"";return s.cover&&h&&s.asin&&n.googleSheets&&(h=n.googleSheetsLinkifyImage(n.makeUrl("book",s.asin),n.makeCoverUrl(s.cover,75),0)),h;case"title":let l=s[i]||s.titleShort||"";return l&&s.asin&&n.googleSheets&&(l=n.googleSheetsLinkify(l,n.makeUrl("book",s.asin))),l;case"titleShort":let u=s[i]||s.title||"";return u&&s.asin&&n.googleSheets&&(u=n.googleSheetsLinkify(u,n.makeUrl("book",s.asin))),u;case"sample":let m=s[i]||"";return m&&n.googleSheets&&(m=n.googleSheetsLinkifyImage(m,"https://i.imgur.com/R2N6OTy.png",20)),m;case"searchInGoodreads":let d=n.makeGoodReadsUrl(s);return d&&n.googleSheets&&(d=n.googleSheetsLinkifyImage(d,"https://i.imgur.com/RPJRqNX.png",20)),d||"";case"webPlayer":let b=s.asin?"https://www.audible.com/webplayer?asin="+s.asin:"";return b&&n.googleSheets&&(b=n.googleSheetsLinkifyImage(b,"https://i.imgur.com/PdFLCdl.png",20)),b||"";case"parentCategory":return s.categories&&s.categories[0]?s.categories[0].name:"";case"childCategory":return s.categories&&s.categories[1]?s.categories[1].name:"";case"storePage":return s.asin?n.makeUrl("book",s.asin):"";case"asin":case"length":case"progress":case"myRating":case"rating":case"ratings":case"isbn":case"isbn10":case"isbn13":return n.googleSheets?"'"+(s[i]||""):s[i]||"";case"storePageUrl":return s.asin?n.makeUrl("book",s.asin):"";default:return s[i]||""}})})},googleSheetsLinkify:function(e,t){return'=HYPERLINK("'+t+'";"'+e.replace(/\"/g,'""')+'")'},googleSheetsLinkifyImage:function(e,t,n){n=n||0;let s=n?"; 4; "+n+"; "+n:"";return'=HYPERLINK("'+e+'"; IMAGE("'+t+'"'+s+"))"},googleSheetsImagefy:function(e,t){t=t||0;let n=t?"; 4; "+t+"; "+t:"";return'=IMAGE("'+e+'"'+n+")"},processDataGoodreads:function(e,t){let n=this;return t=_.filter(t,function(s){const i=_.find(s.isbns,{type:"ISBN_10"}),o=_.find(s.isbns,{type:"ISBN_13"});return i||o}),_.map(t,function(s){return _.map(e,function(i){switch(i){case"title":return s.title||s.titleShort||"";case"author":case"publisher":return s[i+"s"]&&n.stringifyArray([s[i+"s"][0]],"name")||"";case"myRating":return s.myRating||"";case"binding":return"Audible Audio";case"yearPublished":return s.releaseDate||"";case"dateAdded":let o=new Date,r=o.getTimezoneOffset();return o=new Date(o.getTime()-r*60*1e3),o.toISOString().split("T")[0];case"bookshelves":let c=[],a=!s.progress,h=!!(s.progress&&!s.progress.toLowerCase().match("finished")),l=!!(s.progress&&s.progress.toLowerCase().match("finished")),u=a?"to-read":h?"currently-reading":l?"read":"to-read";c.push(u),c.push("audible"),c.push("audiobook"),s.fromPlusCatalog&&c.push("audible-plus");let m=s.categories&&s.categories[0]?s.categories[0].name:null;m&&c.push(n.slugify(m));let d=s.categories&&s.categories[1]?s.categories[1].name:null;return d&&c.push(n.slugify(d)),c.join(" ");case"isbn":const b=_.find(s.isbns,{type:"ISBN_10"});return b?b.identifier:"";case"isbn13":const S=_.find(s.isbns,{type:"ISBN_13"});return S?S.identifier:"";default:return""}})})},prepKeys:function(e){let t=[];switch(this.settings.compatibilityChecked){case"Google Sheets":case"Raw data":let s=["added","cover","sample","webPlayer","searchInGoodreads","title","titleShort","series","bookNumbers","blurb","authors","narrators","tags","categories","parentCategory","childCategory","length","progress","releaseDate","publishers","myRating","rating","ratings","favorite","format","language","whispersync","fromPlusCatalog","unavailable","archived","downloaded","storePageChanged","storePageMissing","asin","isbn10","isbn13","summary","peopleAlsoBought"];const i=this.settings.compatibilityChecked==="Raw data";if(i&&s.push("storePageUrl"),i){var n=["sample","webPlayer","cover","searchInGoodreads"];s=_.remove(s,function(o){return!_.includes(n,o)}),s=s.concat(n)}t=this.prepareKeys({collection:e||[],removeKeys:["isbns"],priorityKeys:s});break;case"Goodreads":t=["dateRead","myReview","title","bookshelves","author","publisher","myRating","binding","yearPublished","dateAdded","isbn","isbn13"];break}return t}}},te=e=>(je("data-v-578b795e"),e=e(),De(),e),Zo={class:"export-group"},Yo={class:"top-wrapper"},Xo={class:"text-wrapper",ref:"textWrapper"},er=te(()=>f("h2",null," CSV (Spreadsheet)",-1)),tr=te(()=>f("div",{class:"description"}," CSV is a generic file format for tabular data that is supported by any proper spreadsheet application. ",-1)),nr=[er,tr],sr=te(()=>f("h3",null,"Data source:",-1)),ir={class:"options"},or=["content"],rr=["value"],ar={class:"visual-radiobutton"},lr={class:"icon"},cr=te(()=>f("div",{class:"description",style:{"margin-top":"10px"}},[J(" Use "),f("strong",null,"current list"),J(" to export csv file from any page with custom filtering and sorting. ")],-1)),ur=te(()=>f("h3",null,"Compatibility:",-1)),hr={class:"options"},dr=["content"],pr=["value"],fr={class:"visual-radiobutton"},mr={class:"icon"},gr=te(()=>f("div",{class:"description",style:{"margin-top":"10px"}},[J(" Use "),f("strong",null,"raw data"),J(" to export a csv file from any page with any kind of custom filtering and sorting. ")],-1)),_r={class:"buttons-footer"},vr={class:"btn-wrapper"},yr=["disabled"],br={class:"github-btn",target:"_blank",rel:"noopener noreferrer",href:"https://joonaspaakko.gitbook.io/audible-library-extractor/gallery/csv-export/google-sheets-import"},kr=te(()=>f("span",null,"Google Sheets import",-1)),wr={class:"github-btn",target:"_blank",rel:"noopener noreferrer",href:"https://joonaspaakko.gitbook.io/audible-library-extractor/gallery/csv-export/goodreads-import"},Sr=te(()=>f("span",null,"Goodreads import",-1));function $r(e,t,n,s,i,o){const r=Wo,c=Vo,a=No,h=Lt,l=Eo,u=Re,m=de("tippy");return g(),A(u,{onCloseModal:t[5]||(t[5]=d=>e.$emit("closeComp"))},{default:We(()=>[f("div",Zo,[f("div",Yo,[f("div",{class:"icon-wrapper",style:$e({fontSize:e.iconSize/1.2+"px",lineHeight:e.iconSize/1.2+"px",paddingRight:e.iconSize/2.5+"px"})},[L(r)],4),f("div",Xo,nr,512)]),sr,f("div",ir,[(g(!0),v(le,null,ce(e.settings.dataSources,d=>q((g(),v("label",{key:d.key,content:d.tippy},[q(f("input",{type:"radio",name:"dataSources","onUpdate:modelValue":t[0]||(t[0]=b=>e.settings.dataSourcesChecked=b),value:d.key,onChange:t[1]||(t[1]=(...b)=>o.inputChanged&&o.inputChanged(...b))},null,40,rr),[[nt,e.settings.dataSourcesChecked]]),f("div",ar,[f("div",lr,[L(c)])]),f("span",null,ae(d.key),1)],8,or)),[[m,{allowHTML:!0,maxWidth:500}]])),128))]),cr,ur,f("div",hr,[(g(!0),v(le,null,ce(e.settings.compatibility,d=>q((g(),v("label",{key:d.key,content:d.tippy},[q(f("input",{type:"radio",name:"compatibility","onUpdate:modelValue":t[2]||(t[2]=b=>e.settings.compatibilityChecked=b),value:d.key,onChange:t[3]||(t[3]=(...b)=>o.inputChanged&&o.inputChanged(...b))},null,40,pr),[[nt,e.settings.compatibilityChecked]]),f("div",fr,[f("div",mr,[L(c)])]),f("span",null,ae(d.label||d.key),1)],8,dr)),[[m,{allowHTML:!0,maxWidth:500}]])),128))]),gr,f("div",_r,[f("div",vr,[f("button",{class:B(["save-btn save-csv",{saving:e.bundling}]),onClick:t[4]||(t[4]=(...d)=>o.saveButtonClicked&&o.saveButtonClicked(...d)),disabled:e.bundling||!o.saveBtnEnabled},[f("span",null,ae(o.filename),1),e.bundling?(g(),A(a,{key:0,spin:""})):(g(),A(h,{key:1}))],10,yr),f("div",null,[f("a",br,[kr,L(l)]),f("a",wr,[Sr,L(l)])])])])])]),_:1})}var Cr=H(Qo,[["render",$r],["__scopeId","data-v-578b795e"]]);const Rr={name:"aleMenuActions",data:function(){return{store:this.$store.state,mobileMenuOpen:!1,sampleData:null,mobileWidth:630,subMenuActive:null,routeAvailable:{},loading:!0,routes:null,clickedRoute:null}},computed:{clickedRouteComp(){const e=_.get(this.clickedRoute,"meta.component");if(e)return{...e}},mobileThreshold(){return this.$store.state.windowWidth<this.mobileWidth}},watch:{"$store.state.playingAudio":function(){this.globalTopNavHeight(this.mobileSize)},mobileThreshold(e){this.mobileMenuOpen=!1,this.routes=this.getRoutes(),this.globalTopNavHeight(e)},mobileMenuOpen(e){this.$store.commit("prop",{key:"blockScrolling",value:e}),this.routes=this.getRoutes()},clickedRouteComp(e){this.$store.commit("prop",{key:"blockScrolling",value:e})}},created(){this.routes=this.getRoutes()},mounted:function(){this.loading=!1,this.globalTopNavHeight(this.mobileSize)},beforeUnmount:function(){},methods:{startSearching(){this.$compEmitter.emit("ios-auto-zoom-disable"),this.$compEmitter.emit("search-focus")},getRoutes(){let e=_.filter(this.$router.options.routes,"meta.icon");return e=JSON.parse(JSON.stringify(e)),this.mobileThreshold||(this.getExtraItems(e),this.getNestedGroups(e)),e},getNestedGroups(e){const t=this,n=this.getNestedIndexes(e);let s=_.remove(e,function(i){return _.get(i,"meta.nestedGroup")});s=_.groupBy(s,"meta.nestedGroup"),_.each(s,function(i,o){const r=_.find(n,{key:o});r&&e.splice(r.index,0,t.getSubPageSettings(i,o))})},getSubPageSettings(e,t){const n=this,s={name:t,meta:{groupName:e[0].meta.nestedGroup,icon:"fa-solid fa-chevron-down"},tag:"div",childItems:e};switch(e[0].meta.nestedGroup){case"subPages":s.altName=function(o){const r=_.get(n.$route,"meta.title"),c="children.0.meta.title",a=_.find(e,[c,r]);if(a){const h=n.$route.query.subPageSource||n.$store.state.sticky.subPageSource;return _.startCase(h)+": "+_.get(a,c)}else return _.startCase(t)};break}return s},getNestedIndexes(e){e=_.clone(e);const t=[];return _.remove(e,function(n){const s=_.get(n,"meta.nestedGroup"),i=!_.includes(t,s);if(s)if(i)t.push(s);else return!0}),_.each(t,function(n,s){const i=_.findIndex(e,{meta:{nestedGroup:n}});t[s]={key:n,index:i}}),t},getExtraItems(e){const t=this;let n=[];if(!this.$store.state.standalone){const s=[{tag:"a",href:"https://joonaspaakko.gitbook.io/audible-library-extractor/",name:"Extension documentation",disabled:!1,meta:{icon:"fa-solid fa-graduation-cap",nestedGroup:"extension-tools"}},{tag:"div",name:"Save gallery locally",disabled:!1,click:this.routeClick,meta:{icon:"fa-solid fa-floppy-disk",nestedGroup:"extension-tools",component:$o}},{tag:"div",name:"CSV export&nbsp;<small>(spreadsheet)</small>",disabled:!1,click:this.routeClick,meta:{icon:"fa-solid fa-file-csv",nestedGroup:"extension-tools",component:Cr}},{tag:"div",name:"Wallpaper creator",disabled:!1,click:function(i){if(!!i.condition())try{let o=_.filter(t.$store.getters.collection,"asin");o=JSON.parse(JSON.stringify(o)),o=_.chunk(o,50);let r={imageEditorChunks:o,imageEditorChunksLength:o.length,imageEditorTimeCode:new Date().getTime()};t.$store.state.pageTitle&&(r.imageEditorPageTitle=t.$store.state.pageTitle),t.$store.state.pageSubTitle&&(r.imageEditorPageSubTitle=t.$store.state.pageSubTitle),chrome.storage.local.set(r).then(()=>{chrome.runtime.sendMessage({action:"openImageEditor"})})}catch{}},condition:function(){return t.$route.meta.gallery&&t.$store.getters.collection&&t.$store.getters.collection.length},tippy:function(){let i="When you open wallpaper creator, books are imported from the current page with the active sorting. Search and filters also affect what gets imported.";const o=!(t.$route.meta.gallery&&t.$store.getters.collection&&t.$store.getters.collection.length),r=_.filter(t.$store.getters.collection,"cover");return o?i+="<br><br> <strong style='color: #f79a1c; font-size: 19px;'>Can't be opened on pages that don't have any books.</strong>":i+="<br><br> <strong style='color: #f79a1c;'>"+r.length+" importable book covers on this page.</strong>",i},meta:{icon:"fa-solid fa-table-cells-large",nestedGroup:"extension-tools"}},{tag:"div",name:"Set as gallery landing page",tippy:"Click here and any links leading to the extension gallery (in browser context menu or extraction settings) will open this exact page. The url will be saved as is, so all url parameters will be saved as well. This includes: searches, filters, sorting, and some other things. <br><br>For example, open the library page, filter out finished books, click this menu item, and now you don't have to do that every time you open the gallery, if that is what you prefer...",disabled:!1,click:function(i){try{const o=window.location.pathname,r="."+o+window.location.href.split(o)[1];chrome.runtime.sendMessage({action:"changeGalleryUrl",url:r}).then(()=>{chrome.storage.local.get(["extras"]).then(c=>{c.extras.galleryUrl=r,chrome.storage.local.set({extras:c.extras}).then(()=>{})})})}catch{}},meta:{icon:"fa-solid fa-crosshairs",nestedGroup:"extension-tools"}},{tag:"div",name:"Reset gallery landing page",disabled:!1,click:function(i){try{chrome.runtime.sendMessage({action:"changeGalleryUrl",url:null}).then(()=>{chrome.storage.local.get(["extras"]).then(r=>{r.extras.galleryUrl=null,chrome.storage.local.set({extras:r.extras}).then(()=>{})})})}catch{}},meta:{icon:"fa-solid fa-house",nestedGroup:"extension-tools"}}];n=n.concat(s)}n.length&&_.each(n,function(s){e.push(s)})},routeClick(e){this.clickedRoute=e},globalTopNavHeight(e){this.$nextTick(function(){let t=0;if(!e){const n=this.$refs.navigation;n&&(t=Math.floor(n.getBoundingClientRect().height))}this.$store.commit("prop",{key:"topNavOffset",value:t})})}}},xr={id:"ale-navigation",ref:"navigation"},Pr={key:0,class:"floater-components"};function Er(e,t,n,s,i,o){const r=vi,c=Gn,a=xt;return e.loading?P("",!0):(g(),v("div",{key:0,id:"nav-outer-wrapper",class:B({regular:!o.mobileThreshold,"mobile-nav":o.mobileThreshold,"mobile-nav-open":e.mobileMenuOpen})},[f("div",xr,[L(r,{routes:e.routes,mobileMenuOpen:e.mobileMenuOpen,"onUpdate:mobileMenuOpen":t[0]||(t[0]=h=>e.mobileMenuOpen=h),inRoot:!0},null,8,["routes","mobileMenuOpen"]),o.mobileThreshold?P("",!0):(g(),v("div",Pr,[o.clickedRouteComp?(g(),A(St(o.clickedRouteComp),{key:0,onCloseComp:t[1]||(t[1]=h=>e.clickedRoute=null)},null,32)):P("",!0)]))],512),o.mobileThreshold?(g(),A(c,{key:0,mobileMenuOpen:e.mobileMenuOpen,"onUpdate:mobileMenuOpen":t[2]||(t[2]=h=>e.mobileMenuOpen=h),onStartSearching:o.startSearching},null,8,["mobileMenuOpen","onStartSearching"])):P("",!0),e.$store.state.displayMode&&!o.mobileThreshold?(g(),A(a,{key:1,viewportFloat:!0})):P("",!0)],2))}var Or=H(Rr,[["render",Er]]);const Lr={name:"aleBackground",mixins:[wt],data:function(){return{coverSource:null,books:null,booksLength:null,windowWidth:null,timer1:null,timer2:null}},mounted:function(){this.windowWidth=window.innerWidth,this.books=this.getBooks(),this.flipAnimationRandomizer(),this.$compEmitter.on("afterWindowResize",this.onWindowResize)},beforeUnmounted:function(){this.$compEmitter.off("afterWindowResize",this.onWindowResize),clearInterval(this.timer1),clearInterval(this.timer2)},methods:{bgGridSize:function(){let e=t(15);this.windowWidth<530?e=t(5):this.windowWidth<760?e=t(6):this.windowWidth<1e3?e=t(8):this.windowWidth<1300&&(e=t(12));function t(n){return 6*n}return e},getBooks:function(){const e=this.bgGridSize();this.coverSource=this.$store.state.library.books?this.$store.state.library.books:this.$store.state.library.wishlist;let t=function(n){const s=n.length;if(s<=e){const i=Math.floor(e/s),o=e-s*i,r=i;let c=[];for(let a=0;a<r;a++)c=c.concat(n);return o>0&&(c=c.concat(n.splice(-1,o))),c}else return _.sampleSize(n,e)}(_.filter(this.coverSource,"cover"));return t=_.map(t,function(n){let s=_.pick(n,["cover"]);return s.flipOut=!1,s}),this.booksLength=t.length,t},flipAnimationRandomizer:function(){const e=this;clearInterval(e.timer1),clearInterval(e.timer2),e.timer1=setInterval(function(){e.coverSwitcheroo()},e.randomNumber(1500,3e3)),e.timer2=setInterval(function(){e.coverSwitcheroo()},e.randomNumber(3500,5e3))},coverSwitcheroo:function(){const e=this,t=this.randomNumber(0,this.booksLength-1),n=this.books[t];n.flipOut=!0,setTimeout(function(){const s=_.filter(e.coverSource,"cover"),i=e.randomNumber(0,s.length-1),o=s[i];n.cover=o.cover,n.flipOut=!1},850)},randomNumber:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},onWindowResize:function(e){e.widthChanged&&(this.windowWidth=e.width,this.books=this.getBooks())}}},Mr=e=>(je("data-v-b8b56ef4"),e=e(),De(),e),Ar={key:0,id:"ale-background"},Nr=["src"],Ir=Mr(()=>f("div",{class:"dimmer-overlay"},null,-1));function Tr(e,t,n,s,i,o){return e.books?(g(),v("div",Ar,[(g(!0),v(le,null,ce(e.books,(r,c)=>(g(),v("div",{key:r.cover+c,class:B(["image-wrapper",{"flip-out":r.flipOut}])},[f("img",{crossorigin:"anonymous",src:e.makeCoverUrl(r.cover,200),alt:""},null,8,Nr)],2))),128)),Ir])):P("",!0)}var Br=H(Lr,[["render",Tr],["__scopeId","data-v-b8b56ef4"]]);const zr={data:function(){return{general:{route:null,standalone:null,categories:null,tippyTheme:"dark"},window:{width:window.innerWidth,height:window.innerHeight}}},created:function(){if(!this.$store.state.sticky.lightSwitchSetByUser){const t=document.querySelector("html");t.classList.remove("theme-dark"),t.classList.add("theme-light")}let e=this;this.checkIf_iOS()&&document.querySelector("body").classList.add("is-ios"),this.$compEmitter.on("refresh-page",this.refreshPage),this.$store.commit("prop",{key:"siteOnline",value:navigator.onLine}),window.addEventListener("offline",function(){e.$store.commit("prop",{key:"siteOnline",value:!1})},{passive:!0}),window.addEventListener("online",function(){e.$store.commit("prop",{key:"siteOnline",value:!0})},{passive:!0})},mounted:function(){const e=this;window.addEventListener("resize",e.onWindowResize,{passive:!0}),this.showTheBackgroundGrid()},beforeUnmount:function(){this.$compEmitter.off("refresh-page",this.refreshPage)},methods:{refreshPage:function(e){this.$store.commit("prop",{key:"showRoute",value:!1}),this.$nextTick(function(){this.$store.commit("prop",{key:"showRoute",value:!0}),this.$nextTick(function(){typeof e=="function"&&e(this)})})},checkIf_iOS:function(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},showTheBackgroundGrid:function(){if(!this.$store.state.showBackground){const e=this;this.$nextTick(function(){setTimeout(function(){e.$store.commit("prop",{key:"showBackground",value:!0})},1200)})}},onWindowResize:_.debounce(function(){const e=window.innerWidth,t=window.innerHeight,n=this.window.width!==e,s=this.window.height!==t;(n||s)&&(this.window.width=e,this.window.height=t,n&&this.$store.commit("prop",{key:"windowWidth",value:e}),this.$compEmitter.emit("afterWindowResize",{from:"app",width:e,widthChanged:n,height:t,heightChanged:s}))},320,{leading:!0,trailing:!0})},watch:{$route:function(e,t){let n=e.params?_.map(e.params,function(s,i){return i+":"+s}).join(","):null;this.$store.commit("prop",[{key:"route",value:e},{key:"routeParams",value:n}]),this.$nextTick(function(){this.$store.state.pageTitle&&(this.$route.meta.title||this.$route.meta.title==="")?document.title="ALE \u2022 "+(this.$route.meta.title===this.$store.state.pageTitle?this.$store.state.pageTitle:this.$route.meta.title+": "+this.$store.state.pageTitle):e.meta.title&&(document.title="ALE \u2022 "+(e.meta.title||"My Audible Library"))})},"$store.state.refreshView"(){this.refreshPage()}}},Vr=["data-version","data-block-scrolling"],Hr={key:1},qr={key:2,id:"nothing-here-404"},Gr={key:0},Ur={key:1};function Wr(e,t,n,s,i,o){const r=Br,c=Or,a=Ue("router-view");return g(),v("div",{"data-version":e.$store.state.version,class:B({"mobile-threshold":e.$store.state.windowWidth<630}),"data-block-scrolling":e.$store.state.blockScrolling},[e.$store.state.showBackground&&!(e.$store.state.standalone&&!e.$store.state.siteOnline)?(g(),A(r,{key:0})):P("",!0),L(c),e.$route.name!=="404"?(g(),v("div",Hr,[(g(),A(a,{key:e.$route.name+"-"+e.$store.state.routeParams+"-"+e.$store.state.refreshView}))])):(g(),v("div",qr,[e.$store.getters.searchIsActive&&!e.$store.state.searchCollection.length?(g(),v("h3",Gr,"Search: no results")):(g(),v("h3",Ur,"404: There's nothing here"))]))],10,Vr)}var jr=H(zr,[["render",Wr]]);/*!
  * vue-router v4.1.5
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const re=typeof window!="undefined";function Dr(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const E=Object.assign;function Ie(e,t){const n={};for(const s in t){const i=t[s];n[s]=W(i)?i.map(e):e(i)}return n}const ye=()=>{},W=Array.isArray,Fr=/\/$/,Jr=e=>e.replace(Fr,"");function Te(e,t,n="/"){let s,i={},o="",r="";const c=t.indexOf("#");let a=t.indexOf("?");return c<a&&c>=0&&(a=-1),a>-1&&(s=t.slice(0,a),o=t.slice(a+1,c>-1?c:t.length),i=e(o)),c>-1&&(s=s||t.slice(0,c),r=t.slice(c,t.length)),s=Yr(s!=null?s:t,n),{fullPath:s+(o&&"?")+o+r,path:s,query:i,hash:r}}function Kr(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function st(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Qr(e,t,n){const s=t.matched.length-1,i=n.matched.length-1;return s>-1&&s===i&&ue(t.matched[s],n.matched[i])&&Mt(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function ue(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Mt(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Zr(e[n],t[n]))return!1;return!0}function Zr(e,t){return W(e)?it(e,t):W(t)?it(t,e):e===t}function it(e,t){return W(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function Yr(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/");let i=n.length-1,o,r;for(o=0;o<s.length;o++)if(r=s[o],r!==".")if(r==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o-(o===s.length?1:0)).join("/")}var we;(function(e){e.pop="pop",e.push="push"})(we||(we={}));var be;(function(e){e.back="back",e.forward="forward",e.unknown=""})(be||(be={}));function Xr(e){if(!e)if(re){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Jr(e)}const ea=/^[^#]+#/;function ta(e,t){return e.replace(ea,"#")+t}function na(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const xe=()=>({left:window.pageXOffset,top:window.pageYOffset});function sa(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=na(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function ot(e,t){return(history.state?history.state.position-t:-1)+e}const He=new Map;function ia(e,t){He.set(e,t)}function oa(e){const t=He.get(e);return He.delete(e),t}let ra=()=>location.protocol+"//"+location.host;function At(e,t){const{pathname:n,search:s,hash:i}=t,o=e.indexOf("#");if(o>-1){let c=i.includes(e.slice(o))?e.slice(o).length:1,a=i.slice(c);return a[0]!=="/"&&(a="/"+a),st(a,"")}return st(n,e)+s+i}function aa(e,t,n,s){let i=[],o=[],r=null;const c=({state:m})=>{const d=At(e,location),b=n.value,S=t.value;let O=0;if(m){if(n.value=d,t.value=m,r&&r===b){r=null;return}O=S?m.position-S.position:0}else s(d);i.forEach(C=>{C(n.value,b,{delta:O,type:we.pop,direction:O?O>0?be.forward:be.back:be.unknown})})};function a(){r=n.value}function h(m){i.push(m);const d=()=>{const b=i.indexOf(m);b>-1&&i.splice(b,1)};return o.push(d),d}function l(){const{history:m}=window;!m.state||m.replaceState(E({},m.state,{scroll:xe()}),"")}function u(){for(const m of o)m();o=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",l)}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",l),{pauseListeners:a,listen:h,destroy:u}}function rt(e,t,n,s=!1,i=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:i?xe():null}}function la(e){const{history:t,location:n}=window,s={value:At(e,n)},i={value:t.state};i.value||o(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(a,h,l){const u=e.indexOf("#"),m=u>-1?(n.host&&document.querySelector("base")?e:e.slice(u))+a:ra()+e+a;try{t[l?"replaceState":"pushState"](h,"",m),i.value=h}catch(d){console.error(d),n[l?"replace":"assign"](m)}}function r(a,h){const l=E({},t.state,rt(i.value.back,a,i.value.forward,!0),h,{position:i.value.position});o(a,l,!0),s.value=a}function c(a,h){const l=E({},i.value,t.state,{forward:a,scroll:xe()});o(l.current,l,!0);const u=E({},rt(s.value,a,null),{position:l.position+1},h);o(a,u,!1),s.value=a}return{location:s,state:i,push:c,replace:r}}function ca(e){e=Xr(e);const t=la(e),n=aa(e,t.state,t.location,t.replace);function s(o,r=!0){r||n.pauseListeners(),history.go(o)}const i=E({location:"",base:e,go:s,createHref:ta.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function ua(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),ca(e)}function ha(e){return typeof e=="string"||e&&typeof e=="object"}function Nt(e){return typeof e=="string"||typeof e=="symbol"}const Z={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},It=Symbol("");var at;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(at||(at={}));function he(e,t){return E(new Error,{type:e,[It]:!0},t)}function F(e,t){return e instanceof Error&&It in e&&(t==null||!!(e.type&t))}const lt="[^/]+?",da={sensitive:!1,strict:!1,start:!0,end:!0},pa=/[.+*?^${}()[\]/\\]/g;function fa(e,t){const n=E({},da,t),s=[];let i=n.start?"^":"";const o=[];for(const h of e){const l=h.length?[]:[90];n.strict&&!h.length&&(i+="/");for(let u=0;u<h.length;u++){const m=h[u];let d=40+(n.sensitive?.25:0);if(m.type===0)u||(i+="/"),i+=m.value.replace(pa,"\\$&"),d+=40;else if(m.type===1){const{value:b,repeatable:S,optional:O,regexp:C}=m;o.push({name:b,repeatable:S,optional:O});const x=C||lt;if(x!==lt){d+=10;try{new RegExp(`(${x})`)}catch(G){throw new Error(`Invalid custom RegExp for param "${b}" (${x}): `+G.message)}}let z=S?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;u||(z=O&&h.length<2?`(?:/${z})`:"/"+z),O&&(z+="?"),i+=z,d+=20,O&&(d+=-8),S&&(d+=-20),x===".*"&&(d+=-50)}l.push(d)}s.push(l)}if(n.strict&&n.end){const h=s.length-1;s[h][s[h].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const r=new RegExp(i,n.sensitive?"":"i");function c(h){const l=h.match(r),u={};if(!l)return null;for(let m=1;m<l.length;m++){const d=l[m]||"",b=o[m-1];u[b.name]=d&&b.repeatable?d.split("/"):d}return u}function a(h){let l="",u=!1;for(const m of e){(!u||!l.endsWith("/"))&&(l+="/"),u=!1;for(const d of m)if(d.type===0)l+=d.value;else if(d.type===1){const{value:b,repeatable:S,optional:O}=d,C=b in h?h[b]:"";if(W(C)&&!S)throw new Error(`Provided param "${b}" is an array but it is not repeatable (* or + modifiers)`);const x=W(C)?C.join("/"):C;if(!x)if(O)m.length<2&&(l.endsWith("/")?l=l.slice(0,-1):u=!0);else throw new Error(`Missing required param "${b}"`);l+=x}}return l||"/"}return{re:r,score:s,keys:o,parse:c,stringify:a}}function ma(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function ga(e,t){let n=0;const s=e.score,i=t.score;for(;n<s.length&&n<i.length;){const o=ma(s[n],i[n]);if(o)return o;n++}if(Math.abs(i.length-s.length)===1){if(ct(s))return 1;if(ct(i))return-1}return i.length-s.length}function ct(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const _a={type:0,value:""},va=/[a-zA-Z0-9_]/;function ya(e){if(!e)return[[]];if(e==="/")return[[_a]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(d){throw new Error(`ERR (${n})/"${h}": ${d}`)}let n=0,s=n;const i=[];let o;function r(){o&&i.push(o),o=[]}let c=0,a,h="",l="";function u(){!h||(n===0?o.push({type:0,value:h}):n===1||n===2||n===3?(o.length>1&&(a==="*"||a==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:h,regexp:l,repeatable:a==="*"||a==="+",optional:a==="*"||a==="?"})):t("Invalid state to consume buffer"),h="")}function m(){h+=a}for(;c<e.length;){if(a=e[c++],a==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:a==="/"?(h&&u(),r()):a===":"?(u(),n=1):m();break;case 4:m(),n=s;break;case 1:a==="("?n=2:va.test(a)?m():(u(),n=0,a!=="*"&&a!=="?"&&a!=="+"&&c--);break;case 2:a===")"?l[l.length-1]=="\\"?l=l.slice(0,-1)+a:n=3:l+=a;break;case 3:u(),n=0,a!=="*"&&a!=="?"&&a!=="+"&&c--,l="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${h}"`),u(),r(),i}function ba(e,t,n){const s=fa(ya(e.path),n),i=E(s,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function ka(e,t){const n=[],s=new Map;t=dt({strict:!1,end:!0,sensitive:!1},t);function i(l){return s.get(l)}function o(l,u,m){const d=!m,b=wa(l);b.aliasOf=m&&m.record;const S=dt(t,l),O=[b];if("alias"in l){const z=typeof l.alias=="string"?[l.alias]:l.alias;for(const G of z)O.push(E({},b,{components:m?m.record.components:b.components,path:G,aliasOf:m?m.record:b}))}let C,x;for(const z of O){const{path:G}=z;if(u&&G[0]!=="/"){const ne=u.record.path,D=ne[ne.length-1]==="/"?"":"/";z.path=u.record.path+(G&&D+G)}if(C=ba(z,u,S),m?m.alias.push(C):(x=x||C,x!==C&&x.alias.push(C),d&&l.name&&!ht(C)&&r(l.name)),b.children){const ne=b.children;for(let D=0;D<ne.length;D++)o(ne[D],C,m&&m.children[D])}m=m||C,a(C)}return x?()=>{r(x)}:ye}function r(l){if(Nt(l)){const u=s.get(l);u&&(s.delete(l),n.splice(n.indexOf(u),1),u.children.forEach(r),u.alias.forEach(r))}else{const u=n.indexOf(l);u>-1&&(n.splice(u,1),l.record.name&&s.delete(l.record.name),l.children.forEach(r),l.alias.forEach(r))}}function c(){return n}function a(l){let u=0;for(;u<n.length&&ga(l,n[u])>=0&&(l.record.path!==n[u].record.path||!Tt(l,n[u]));)u++;n.splice(u,0,l),l.record.name&&!ht(l)&&s.set(l.record.name,l)}function h(l,u){let m,d={},b,S;if("name"in l&&l.name){if(m=s.get(l.name),!m)throw he(1,{location:l});S=m.record.name,d=E(ut(u.params,m.keys.filter(x=>!x.optional).map(x=>x.name)),l.params&&ut(l.params,m.keys.map(x=>x.name))),b=m.stringify(d)}else if("path"in l)b=l.path,m=n.find(x=>x.re.test(b)),m&&(d=m.parse(b),S=m.record.name);else{if(m=u.name?s.get(u.name):n.find(x=>x.re.test(u.path)),!m)throw he(1,{location:l,currentLocation:u});S=m.record.name,d=E({},u.params,l.params),b=m.stringify(d)}const O=[];let C=m;for(;C;)O.unshift(C.record),C=C.parent;return{name:S,path:b,params:d,matched:O,meta:$a(O)}}return e.forEach(l=>o(l)),{addRoute:o,resolve:h,removeRoute:r,getRoutes:c,getRecordMatcher:i}}function ut(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function wa(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:Sa(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function Sa(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="boolean"?n:n[s];return t}function ht(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function $a(e){return e.reduce((t,n)=>E(t,n.meta),{})}function dt(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}function Tt(e,t){return t.children.some(n=>n===e||Tt(e,n))}const Bt=/#/g,Ca=/&/g,Ra=/\//g,xa=/=/g,Pa=/\?/g,zt=/\+/g,Ea=/%5B/g,Oa=/%5D/g,Vt=/%5E/g,La=/%60/g,Ht=/%7B/g,Ma=/%7C/g,qt=/%7D/g,Aa=/%20/g;function Fe(e){return encodeURI(""+e).replace(Ma,"|").replace(Ea,"[").replace(Oa,"]")}function Na(e){return Fe(e).replace(Ht,"{").replace(qt,"}").replace(Vt,"^")}function qe(e){return Fe(e).replace(zt,"%2B").replace(Aa,"+").replace(Bt,"%23").replace(Ca,"%26").replace(La,"`").replace(Ht,"{").replace(qt,"}").replace(Vt,"^")}function Ia(e){return qe(e).replace(xa,"%3D")}function Ta(e){return Fe(e).replace(Bt,"%23").replace(Pa,"%3F")}function Ba(e){return e==null?"":Ta(e).replace(Ra,"%2F")}function Ce(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function za(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<s.length;++i){const o=s[i].replace(zt," "),r=o.indexOf("="),c=Ce(r<0?o:o.slice(0,r)),a=r<0?null:Ce(o.slice(r+1));if(c in t){let h=t[c];W(h)||(h=t[c]=[h]),h.push(a)}else t[c]=a}return t}function pt(e){let t="";for(let n in e){const s=e[n];if(n=Ia(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(W(s)?s.map(o=>o&&qe(o)):[s&&qe(s)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+n,o!=null&&(t+="="+o))})}return t}function Va(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=W(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return t}const Ha=Symbol(""),ft=Symbol(""),Je=Symbol(""),Gt=Symbol(""),Ge=Symbol("");function ge(){let e=[];function t(s){return e.push(s),()=>{const i=e.indexOf(s);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function ee(e,t,n,s,i){const o=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((r,c)=>{const a=u=>{u===!1?c(he(4,{from:n,to:t})):u instanceof Error?c(u):ha(u)?c(he(2,{from:t,to:u})):(o&&s.enterCallbacks[i]===o&&typeof u=="function"&&o.push(u),r())},h=e.call(s&&s.instances[i],t,n,a);let l=Promise.resolve(h);e.length<3&&(l=l.then(a)),l.catch(u=>c(u))})}function Be(e,t,n,s){const i=[];for(const o of e)for(const r in o.components){let c=o.components[r];if(!(t!=="beforeRouteEnter"&&!o.instances[r]))if(qa(c)){const h=(c.__vccOpts||c)[t];h&&i.push(ee(h,n,s,o,r))}else{let a=c();i.push(()=>a.then(h=>{if(!h)return Promise.reject(new Error(`Couldn't resolve component "${r}" at "${o.path}"`));const l=Dr(h)?h.default:h;o.components[r]=l;const m=(l.__vccOpts||l)[t];return m&&ee(m,n,s,o,r)()}))}}return i}function qa(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function mt(e){const t=ke(Je),n=ke(Gt),s=U(()=>t.resolve(ve(e.to))),i=U(()=>{const{matched:a}=s.value,{length:h}=a,l=a[h-1],u=n.matched;if(!l||!u.length)return-1;const m=u.findIndex(ue.bind(null,l));if(m>-1)return m;const d=gt(a[h-2]);return h>1&&gt(l)===d&&u[u.length-1].path!==d?u.findIndex(ue.bind(null,a[h-2])):m}),o=U(()=>i.value>-1&&ja(n.params,s.value.params)),r=U(()=>i.value>-1&&i.value===n.matched.length-1&&Mt(n.params,s.value.params));function c(a={}){return Wa(a)?t[ve(e.replace)?"replace":"push"](ve(e.to)).catch(ye):Promise.resolve()}return{route:s,href:U(()=>s.value.href),isActive:o,isExactActive:r,navigate:c}}const Ga=Ct({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:mt,setup(e,{slots:t}){const n=$t(mt(e)),{options:s}=ke(Je),i=U(()=>({[_t(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[_t(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const o=t.default&&t.default(n);return e.custom?o:Rt("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},o)}}}),Ua=Ga;function Wa(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function ja(e,t){for(const n in t){const s=t[n],i=e[n];if(typeof s=="string"){if(s!==i)return!1}else if(!W(i)||i.length!==s.length||s.some((o,r)=>o!==i[r]))return!1}return!0}function gt(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const _t=(e,t,n)=>e!=null?e:t!=null?t:n,Da=Ct({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=ke(Ge),i=U(()=>e.route||s.value),o=ke(ft,0),r=U(()=>{let h=ve(o);const{matched:l}=i.value;let u;for(;(u=l[h])&&!u.components;)h++;return h}),c=U(()=>i.value.matched[r.value]);Ne(ft,U(()=>r.value+1)),Ne(Ha,c),Ne(Ge,i);const a=nn();return sn(()=>[a.value,c.value,e.name],([h,l,u],[m,d,b])=>{l&&(l.instances[u]=h,d&&d!==l&&h&&h===m&&(l.leaveGuards.size||(l.leaveGuards=d.leaveGuards),l.updateGuards.size||(l.updateGuards=d.updateGuards))),h&&l&&(!d||!ue(l,d)||!m)&&(l.enterCallbacks[u]||[]).forEach(S=>S(h))},{flush:"post"}),()=>{const h=i.value,l=e.name,u=c.value,m=u&&u.components[l];if(!m)return vt(n.default,{Component:m,route:h});const d=u.props[l],b=d?d===!0?h.params:typeof d=="function"?d(h):d:null,O=Rt(m,E({},b,t,{onVnodeUnmounted:C=>{C.component.isUnmounted&&(u.instances[l]=null)},ref:a}));return vt(n.default,{Component:O,route:h})||O}}});function vt(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Fa=Da;function Ja(e){const t=ka(e.routes,e),n=e.parseQuery||za,s=e.stringifyQuery||pt,i=e.history,o=ge(),r=ge(),c=ge(),a=en(Z);let h=Z;re&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const l=Ie.bind(null,p=>""+p),u=Ie.bind(null,Ba),m=Ie.bind(null,Ce);function d(p,k){let y,w;return Nt(p)?(y=t.getRecordMatcher(p),w=k):w=p,t.addRoute(w,y)}function b(p){const k=t.getRecordMatcher(p);k&&t.removeRoute(k)}function S(){return t.getRoutes().map(p=>p.record)}function O(p){return!!t.getRecordMatcher(p)}function C(p,k){if(k=E({},k||a.value),typeof p=="string"){const $=Te(n,p,k.path),I=t.resolve({path:$.path},k),me=i.createHref($.fullPath);return E($,I,{params:m(I.params),hash:Ce($.hash),redirectedFrom:void 0,href:me})}let y;if("path"in p)y=E({},p,{path:Te(n,p.path,k.path).path});else{const $=E({},p.params);for(const I in $)$[I]==null&&delete $[I];y=E({},p,{params:u(p.params)}),k.params=u(k.params)}const w=t.resolve(y,k),M=p.hash||"";w.params=l(m(w.params));const N=Kr(s,E({},p,{hash:Na(M),path:w.path})),R=i.createHref(N);return E({fullPath:N,hash:M,query:s===pt?Va(p.query):p.query||{}},w,{redirectedFrom:void 0,href:R})}function x(p){return typeof p=="string"?Te(n,p,a.value.path):E({},p)}function z(p,k){if(h!==p)return he(8,{from:k,to:p})}function G(p){return pe(p)}function ne(p){return G(E(x(p),{replace:!0}))}function D(p){const k=p.matched[p.matched.length-1];if(k&&k.redirect){const{redirect:y}=k;let w=typeof y=="function"?y(p):y;return typeof w=="string"&&(w=w.includes("?")||w.includes("#")?w=x(w):{path:w},w.params={}),E({query:p.query,hash:p.hash,params:"path"in w?{}:p.params},w)}}function pe(p,k){const y=h=C(p),w=a.value,M=p.state,N=p.force,R=p.replace===!0,$=D(y);if($)return pe(E(x($),{state:typeof $=="object"?E({},M,$.state):M,force:N,replace:R}),k||y);const I=y;I.redirectedFrom=k;let me;return!N&&Qr(s,w,y)&&(me=he(16,{to:I,from:w}),Xe(w,w,!0,!1)),(me?Promise.resolve(me):Ke(I,w)).catch(V=>F(V)?F(V,2)?V:Oe(V):Ee(V,I,w)).then(V=>{if(V){if(F(V,2))return pe(E({replace:R},x(V.to),{state:typeof V.to=="object"?E({},M,V.to.state):M,force:N}),k||I)}else V=Ze(I,w,!0,R,M);return Qe(I,w,V),V})}function Ft(p,k){const y=z(p,k);return y?Promise.reject(y):Promise.resolve()}function Ke(p,k){let y;const[w,M,N]=Ka(p,k);y=Be(w.reverse(),"beforeRouteLeave",p,k);for(const $ of w)$.leaveGuards.forEach(I=>{y.push(ee(I,p,k))});const R=Ft.bind(null,p,k);return y.push(R),ie(y).then(()=>{y=[];for(const $ of o.list())y.push(ee($,p,k));return y.push(R),ie(y)}).then(()=>{y=Be(M,"beforeRouteUpdate",p,k);for(const $ of M)$.updateGuards.forEach(I=>{y.push(ee(I,p,k))});return y.push(R),ie(y)}).then(()=>{y=[];for(const $ of p.matched)if($.beforeEnter&&!k.matched.includes($))if(W($.beforeEnter))for(const I of $.beforeEnter)y.push(ee(I,p,k));else y.push(ee($.beforeEnter,p,k));return y.push(R),ie(y)}).then(()=>(p.matched.forEach($=>$.enterCallbacks={}),y=Be(N,"beforeRouteEnter",p,k),y.push(R),ie(y))).then(()=>{y=[];for(const $ of r.list())y.push(ee($,p,k));return y.push(R),ie(y)}).catch($=>F($,8)?$:Promise.reject($))}function Qe(p,k,y){for(const w of c.list())w(p,k,y)}function Ze(p,k,y,w,M){const N=z(p,k);if(N)return N;const R=k===Z,$=re?history.state:{};y&&(w||R?i.replace(p.fullPath,E({scroll:R&&$&&$.scroll},M)):i.push(p.fullPath,M)),a.value=p,Xe(p,k,y,R),Oe()}let fe;function Jt(){fe||(fe=i.listen((p,k,y)=>{if(!et.listening)return;const w=C(p),M=D(w);if(M){pe(E(M,{replace:!0}),w).catch(ye);return}h=w;const N=a.value;re&&ia(ot(N.fullPath,y.delta),xe()),Ke(w,N).catch(R=>F(R,12)?R:F(R,2)?(pe(R.to,w).then($=>{F($,20)&&!y.delta&&y.type===we.pop&&i.go(-1,!1)}).catch(ye),Promise.reject()):(y.delta&&i.go(-y.delta,!1),Ee(R,w,N))).then(R=>{R=R||Ze(w,N,!1),R&&(y.delta&&!F(R,8)?i.go(-y.delta,!1):y.type===we.pop&&F(R,20)&&i.go(-1,!1)),Qe(w,N,R)}).catch(ye)}))}let Pe=ge(),Ye=ge(),Se;function Ee(p,k,y){Oe(p);const w=Ye.list();return w.length?w.forEach(M=>M(p,k,y)):console.error(p),Promise.reject(p)}function Kt(){return Se&&a.value!==Z?Promise.resolve():new Promise((p,k)=>{Pe.add([p,k])})}function Oe(p){return Se||(Se=!p,Jt(),Pe.list().forEach(([k,y])=>p?y(p):k()),Pe.reset()),p}function Xe(p,k,y,w){const{scrollBehavior:M}=e;if(!re||!M)return Promise.resolve();const N=!y&&oa(ot(p.fullPath,0))||(w||!y)&&history.state&&history.state.scroll||null;return tn().then(()=>M(p,k,N)).then(R=>R&&sa(R)).catch(R=>Ee(R,p,k))}const Le=p=>i.go(p);let Me;const Ae=new Set,et={currentRoute:a,listening:!0,addRoute:d,removeRoute:b,hasRoute:O,getRoutes:S,resolve:C,options:e,push:G,replace:ne,go:Le,back:()=>Le(-1),forward:()=>Le(1),beforeEach:o.add,beforeResolve:r.add,afterEach:c.add,onError:Ye.add,isReady:Kt,install(p){const k=this;p.component("RouterLink",Ua),p.component("RouterView",Fa),p.config.globalProperties.$router=k,Object.defineProperty(p.config.globalProperties,"$route",{enumerable:!0,get:()=>ve(a)}),re&&!Me&&a.value===Z&&(Me=!0,G(i.location).catch(M=>{}));const y={};for(const M in Z)y[M]=U(()=>a.value[M]);p.provide(Je,k),p.provide(Gt,$t(y)),p.provide(Ge,a);const w=p.unmount;Ae.add(p),p.unmount=function(){Ae.delete(p),Ae.size<1&&(h=Z,fe&&fe(),fe=null,a.value=Z,Me=!1,Se=!1),w()}}};return et}function ie(e){return e.reduce((t,n)=>t.then(()=>n()),Promise.resolve())}function Ka(e,t){const n=[],s=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let r=0;r<o;r++){const c=t.matched[r];c&&(e.matched.find(h=>ue(h,c))?s.push(c):n.push(c));const a=e.matched[r];a&&(t.matched.find(h=>ue(h,a))||i.push(a))}return[n,s,i]}var Qa={sticky:{lightSwitch:1,lightSwitchSetByUser:!1,viewMode:"grid",chunkLocation:0,booksInSeriesToggle:!1,collectionsDrawerToggle:!0,exportSettingsGallery:null,exportSettingsCSVdataSources:null,exportSettingsCSVcompatibility:null,booksInSeriesAll:!0,booksInSeriesFinished:!0,booksInSeriesOpenInApp:!0,subPageSource:"library",bookDetailsCollapsedCover:!1,bookDetailsCollapsedDetails:!1,contextMenuReminder:!0,bookDetailSettings:{minHeight:null,titleShort:!0,sidebar:{show:!0,iconToolbar:!0,seriesList:!0,collectionsList:!0},carousel:!0,playButton:!0,cloudPlayer:!1,blurb:!0,statusIndicators:!0,whispersync:!0,plusCatalog:!0,favorite:!0,finished:!0,reverseDirection:!1,hideFirstSection:!1},collectionsHidePremade:!1,player:{books:[]}},bookDetailSettingsOpen:!1,searchMounted:!1,searchCollection:[],mutatingCollection:[],collectionSource:null,pageCollection:null,route:null,routeParams:null,library:null,urlOrigin:null,searchQuery:"",standalone:null,displayMode:null,listRenderingOpts:null,windowWidth:window.innerWidth,showBackground:!1,chunkCollection:[],chunkDistance:40,refreshView:new Date().getTime(),showRoute:!0,pageTitle:null,pageSubTitle:null,version:"0.2.9",extractSettings:null,siteOnline:!0,searchOptCloseGuard:!1,bundlingGallery:!1,bookDetails:{book:null,index:-1},searchOptOpenHeight:null,devMode:!1,lazyScroll:!0,navHistory:{btnNavigation:!1,forward:[],back:[]},modal:{saveLocally:!1},blockScrolling:!1,playingAudio:!1,topNavOffset:0,bookClicked:!1},Za={fromLocalStorage:function(e){const t=JSON.parse(localStorage.getItem("aleSettings"));t&&_.merge(e.sticky,t)},prop(e,t){let n=function(s){if(s=s||{},s.key){let i=s.freeze?Object.freeze(s.value):s.value;s.key==="refreshView"&&(i=new Date().getTime()),_.set(e,s.key,i)}};_.isArray(t)?_.each(t,function(s){n(s)}):n(t)},buildStandaloneData:function(e,t){e.library=e.library||{},_.each(t,function(n){n.key&&_.set(e,"library."+n.key,Object.freeze(n.value))})},stickyProp:function(e,t){e.sticky[t.key]=t.value},addListRenderingOpts:function(e,t){if(t.sortValues!==void 0){let n=_.find(e.listRenderingOpts.sort,{key:"sortValues"});n&&(n.active=t.sortValues)}if(t.splice?e.listRenderingOpts[t.listName].splice(t.splice,0,t.option):t.unshift?e.listRenderingOpts[t.listName].unshift(t.option):e.listRenderingOpts[t.listName].push(t.option),t.activate)if(t.listName==="sort"){const n=_.find(e.listRenderingOpts[t.listName],"current");n&&(n.current=!1),t.option.current=!0}else{const n=_.find(e.listRenderingOpts[t.listName],"active");n.active=!1,t.option.active=!0}},updateListRenderingOpts:function(e,t){let n=e.listRenderingOpts[t.listName],s=n[t.index===0||t.index?t.index:_.findIndex(n,{key:t.key})];if(t.sortValues!==void 0){let i=_.find(e.listRenderingOpts.sort,{key:"sortValues"});i&&(i.active=t.sortValues)}if((t.active===!1||t.active===!0)&&(s.active=t.active),s.type==="filterExtras"&&(t.range&&(s.range=t.range),t.value&&(s.value=t.value)),t.listName==="sort"&&s.type==="sort"){const i=_.find(n,"current");i.current=!1,s.current=!0}},resetFilters:function(e,t){_.each(e.listRenderingOpts.filter,function(n){n.active=n.type==="filter"})},chunkCollectionReset:function(e){e.chunkDistance=e.sticky.viewMode==="grid"?52:80,e.sticky.chunkLocation=0,e.chunkCollection=[]},chunkCollectionAdd:function(e,t){t=t||{};const s=e.searchQuery.trim()!==""?e.searchCollection:e.mutatingCollection;if(s.length>0){const i=t.chunkDistance?t.chunkDistance:parseFloat(e.sticky.chunkLocation);let o=t.chunkDistance?s.slice(0,i):s.slice(i,i+e.chunkDistance);o.length>0&&(t.chunkDistance?e.chunkCollection=o:e.chunkCollection=e.chunkCollection.concat(o),e.sticky.chunkLocation=i+e.chunkDistance)}},navHistory:function(e,t){const n=t.pushOnly?t.key:t.key==="back"?"forward":"back";e.navHistory[n].push(t.value),t.pushOnly||(e.navHistory[t.key].pop,e.navHistory.btnNavigation=!0)},updatePlayerProgress:function(e,t){const n=_.findIndex(e.sticky.player.books,{asin:t.asin});n>-1?_.set(e.sticky.player,"books["+n+"].progress",t.progress):e.sticky.player.books.push(t)}},Ya={sortValues:function(e){return _.find(e.listRenderingOpts.sort,{key:"sortValues"}).active},sortBy:function(e){return _.find(e.listRenderingOpts.sort,"current").key},regularFilters:function(e){return _.filter(e.listRenderingOpts.filter,{type:"filter"}).length>0},filterKeys:function(e){return _.map(_.filter(e.listRenderingOpts.filter,{type:"filter",active:!0}),function(t){return t.key}).join(",")},filterKeysLength:function(e){return _.filter(e.listRenderingOpts.filter,{type:"filter"}).length},filterExtrasKeys:function(e){return _.map(_.filter(e.listRenderingOpts.filter,{type:"filterExtras",active:!0}),function(t){return t.key}).join(",")},scopeKeys:function(e){return _.map(_.filter(e.listRenderingOpts.scope,"active"),function(t){return t.key}).join(",")},searchIsActive:function(e){return e.searchQuery.trim()!==""},collectionSource:function(e){return e.searchQuery.trim()!==""?e.searchCollection:_.get(e,e.collectionSource)},collectionTotal:function(e){return _.get(e,e.collectionSource,[]).length},collection:function(e){return e.searchQuery.trim()!==""?e.searchCollection:e.mutatingCollection},saveStandaloneAfter:function(e){let t=_.get(e,"extractSettings.extraSettings");if(t&&_.find(t,{name:"saveStandaloneAfter",value:!0,deactivated:!1}))return!0}},T=cn({state:Qa,mutations:Za,getters:Ya});const Xa="modulepreload",yt={},el="",se=function(t,n){return!n||n.length===0?t():Promise.all(n.map(s=>{if(s=`${el}${s}`,s in yt)return;yt[s]=!0;const i=s.endsWith(".css"),o=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${o}`))return;const r=document.createElement("link");if(r.rel=i?"stylesheet":Xa,i||(r.as="script",r.crossOrigin=""),r.href=s,document.head.appendChild(r),i)return new Promise((c,a)=>{r.addEventListener("load",c),r.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t())},tl={name:"aleLibraryView",mounted(){}},nl={key:1,id:"nothing-here-404"},sl={key:0},il={key:1};function ol(e,t,n,s,i,o){const r=Ue("router-view");return g(),v("div",null,[e.$route.name!=="404"?(g(),A(r,{key:e.$route.name+"-"+e.$store.state.routeParams+"-"+e.$store.state.refreshView})):(g(),v("div",nl,[e.$store.getters.searchIsActive&&!e.$store.state.searchCollection.length?(g(),v("h3",sl,"Search: no results")):(g(),v("h3",il,"404: There's nothing here"))]))])}var Y=H(tl,[["render",ol]]);const X=()=>se(()=>import("./gallery-root.d5e3892e.js"),["assets/gallery-root.d5e3892e.js","assets/gallery-root.3c57f42b.css","assets/gallery-lazy.bcb33703.js","assets/lodash.21348ef7.js","assets/jquery.050764e9.js","assets/gallery-makeCoverUrl.8378190f.js","assets/gallery-timeStringToSeconds.9aa0cb6a.js","assets/gallery-secondsToTimeString.0a6fc9ec.js","assets/gallery-search.7161cf3a.js","assets/gallery-search.dfe51e84.css","assets/vue.runtime.esm-bundler.a995c875.js","assets/gallery-findSubPageSource.b5dbe77b.js","assets/gallery-findSubPageSource.9caea48c.css","assets/gallery-page-title.2c997460.js","assets/gallery-page-title.e76a09b5.css","assets/content-script-helpers.e49fc91b.js","assets/howler.22814ddb.js","assets/index.abab9d81.js","assets/tippy.f48e1c74.js","assets/tippy.c4165dec.css"]),rl=()=>se(()=>import("./gallery-collections.4d6aae81.js"),["assets/gallery-collections.4d6aae81.js","assets/gallery-collections.ec2b6005.css","assets/gallery-lazy.bcb33703.js","assets/lodash.21348ef7.js","assets/jquery.050764e9.js","assets/gallery-page-title.2c997460.js","assets/gallery-page-title.e76a09b5.css","assets/gallery-makeCoverUrl.8378190f.js","assets/content-script-helpers.e49fc91b.js","assets/howler.22814ddb.js","assets/index.abab9d81.js","assets/tippy.f48e1c74.js","assets/tippy.c4165dec.css"]),al=()=>se(()=>import("./gallery-categories.f7011a96.js"),["assets/gallery-categories.f7011a96.js","assets/gallery-categories.75a71719.css","assets/gallery-findSubPageSource.b5dbe77b.js","assets/gallery-findSubPageSource.9caea48c.css","assets/lodash.21348ef7.js","assets/jquery.050764e9.js","assets/gallery-page-title.2c997460.js","assets/gallery-page-title.e76a09b5.css","assets/gallery-makeCoverUrl.8378190f.js","assets/content-script-helpers.e49fc91b.js","assets/howler.22814ddb.js","assets/index.abab9d81.js","assets/tippy.f48e1c74.js","assets/tippy.c4165dec.css"]),ll=()=>se(()=>import("./gallery-series.91649087.js"),["assets/gallery-series.91649087.js","assets/gallery-series.eae4fe5b.css","assets/gallery-lazy.bcb33703.js","assets/lodash.21348ef7.js","assets/jquery.050764e9.js","assets/gallery-search.7161cf3a.js","assets/gallery-search.dfe51e84.css","assets/vue.runtime.esm-bundler.a995c875.js","assets/gallery-findSubPageSource.b5dbe77b.js","assets/gallery-findSubPageSource.9caea48c.css","assets/gallery-page-title.2c997460.js","assets/gallery-page-title.e76a09b5.css","assets/gallery-timeStringToSeconds.9aa0cb6a.js","assets/gallery-makeCoverUrl.8378190f.js","assets/content-script-helpers.e49fc91b.js","assets/howler.22814ddb.js","assets/index.abab9d81.js","assets/tippy.f48e1c74.js","assets/tippy.c4165dec.css"]),cl=()=>se(()=>import("./gallery-authors.5b5755b7.js"),["assets/gallery-authors.5b5755b7.js","assets/gallery-authors.a5ca8b56.css","assets/gallery-lazy.bcb33703.js","assets/lodash.21348ef7.js","assets/jquery.050764e9.js","assets/gallery-search.7161cf3a.js","assets/gallery-search.dfe51e84.css","assets/vue.runtime.esm-bundler.a995c875.js","assets/gallery-findSubPageSource.b5dbe77b.js","assets/gallery-findSubPageSource.9caea48c.css","assets/gallery-page-title.2c997460.js","assets/gallery-page-title.e76a09b5.css","assets/gallery-timeStringToSeconds.9aa0cb6a.js","assets/gallery-makeCoverUrl.8378190f.js","assets/content-script-helpers.e49fc91b.js","assets/howler.22814ddb.js","assets/index.abab9d81.js","assets/tippy.f48e1c74.js","assets/tippy.c4165dec.css"]),ul=()=>se(()=>import("./gallery-narrators.bbc6490f.js"),["assets/gallery-narrators.bbc6490f.js","assets/gallery-narrators.c3d48860.css","assets/gallery-lazy.bcb33703.js","assets/lodash.21348ef7.js","assets/jquery.050764e9.js","assets/gallery-search.7161cf3a.js","assets/gallery-search.dfe51e84.css","assets/vue.runtime.esm-bundler.a995c875.js","assets/gallery-findSubPageSource.b5dbe77b.js","assets/gallery-findSubPageSource.9caea48c.css","assets/gallery-page-title.2c997460.js","assets/gallery-page-title.e76a09b5.css","assets/gallery-timeStringToSeconds.9aa0cb6a.js","assets/gallery-makeCoverUrl.8378190f.js","assets/content-script-helpers.e49fc91b.js","assets/howler.22814ddb.js","assets/index.abab9d81.js","assets/tippy.f48e1c74.js","assets/tippy.c4165dec.css"]),hl=()=>se(()=>import("./gallery-publishers.f6186f3a.js"),["assets/gallery-publishers.f6186f3a.js","assets/gallery-publishers.961201d0.css","assets/gallery-lazy.bcb33703.js","assets/lodash.21348ef7.js","assets/jquery.050764e9.js","assets/gallery-search.7161cf3a.js","assets/gallery-search.dfe51e84.css","assets/vue.runtime.esm-bundler.a995c875.js","assets/gallery-findSubPageSource.b5dbe77b.js","assets/gallery-findSubPageSource.9caea48c.css","assets/gallery-page-title.2c997460.js","assets/gallery-page-title.e76a09b5.css","assets/gallery-timeStringToSeconds.9aa0cb6a.js","assets/gallery-makeCoverUrl.8378190f.js","assets/content-script-helpers.e49fc91b.js","assets/howler.22814ddb.js","assets/index.abab9d81.js","assets/tippy.f48e1c74.js","assets/tippy.c4165dec.css"]);var oe={library:{name:"library",path:"/library",component:X,meta:{gallery:!0,title:"Library",icon:"fa-solid fa-book"}},collections:{path:"/collections",component:Y,meta:{icon:"fa-regular fa-folder-open"},children:[{name:"collections",path:"",component:rl,meta:{title:"Collections"}},{name:"collection",path:":collection",component:X,meta:{gallery:!0,title:"Collections"}}]},wishlist:{path:"/wishlist",component:Y,meta:{icon:"fa-solid fa-bookmark"},children:[{name:"wishlist",path:"",component:X,meta:{gallery:!0,title:"Wishlist"}}]},subPages:{categories:{path:"/categories",meta:{icon:"fa-solid fa-indent",nestedGroup:"subPages"},component:Y,children:[{name:"categories",path:"",component:al,meta:{subPage:!0,title:"Categories"}},{name:"category",path:":parent/:child?",component:X,meta:{gallery:!0,subPage:!0,title:"Categories"}}]},series:{path:"/series",component:Y,meta:{icon:"fa-solid fa-list-ol",nestedGroup:"subPages"},children:[{name:"all-series",path:"",component:ll,meta:{subPage:!0,title:"Series"}},{name:"series",path:":series",component:X,meta:{gallery:!0,subPage:!0,title:"Series"}}]},authors:{path:"/authors",component:Y,meta:{icon:"fa-solid fa-user-group",nestedGroup:"subPages"},children:[{name:"authors",path:"",component:cl,meta:{subPage:!0,title:"Authors"}},{name:"author",path:":author",component:X,meta:{gallery:!0,subPage:!0,title:"Authors"}}]},narrators:{path:"/narrators",component:Y,meta:{icon:"fa-solid fa-users",nestedGroup:"subPages"},children:[{name:"narrators",path:"",component:ul,meta:{subPage:!0,title:"Narrators"}},{name:"narrator",path:":narrator",component:X,meta:{gallery:!0,subPage:!0,title:"Narrators"}}]},publishers:{path:"/publishers",component:Y,meta:{icon:"fa-solid fa-book",nestedGroup:"subPages"},children:[{name:"publishers",path:"",component:hl,meta:{subPage:!0,title:"Publishers"}},{name:"publisher",path:":publisher",component:X,meta:{gallery:!0,subPage:!0,title:"Publishers"}}]}},fallback:{path:"/:pathMatch(.*)*",name:"404",component:Y,meta:{}}};function dl(e){if(e){let n=[];e.books?n.push({path:"/",redirect:"/library"}):e.wishlist&&n.push({path:"/",redirect:"/wishlist"}),e.books&&n.push(oe.library),!e.books&&e.wishlist&&n.push(oe.wishlist);var t=oe.subPages;let s=_.get(e,"extras.subPageStates");s?_.each(s,function(r){r.enabled&&n.push(t[r.key])}):(e.books||e.wishlist)&&_.each(t,function(r){n.push(r)}),e.collections&&n.push(oe.collections),e.books&&e.wishlist&&n.push(oe.wishlist),n.push(oe.fallback);const i=Ja({history:ua(""),routes:n,scrollBehavior(r,c,a){return a||(c&&r.name===c.name&&_.isEqual(r.params,c.params)?void 0:{x:0,y:0})}});if(document.querySelector("html.standalone-gallery")){let r=function(a){return new Promise(function(h,l){let u=document.createElement("script");u.src=(a.prefix||"data/")+a.name+"."+e.extras.cacheID+".js",u.type="text/javascript",u.onload=function(){h(a),u=null},u.onerror=function(){l(a),u=null},document.body.appendChild(u)})},c=function(a,h,l,u,m){u=_.filter(u,function(b){return window[b.name+"JSON"]!==!0});let d=[];u.forEach(function(b){d.push(r(b))}),Promise.all(d).catch(function(){m||setTimeout(function(){c(a,h,l,u,"afterError")},1e3)}).finally(function(){let b=_.map(u,function(S){return{key:S.keyOverride||S.name,value:window[S.name+"JSON"]}});T.commit("buildStandaloneData",b),_.each(u,function(S){window[S.name+"JSON"]=!0}),ze(a,h,l)})};i.beforeEach((a,h,l)=>{if(a.name&&(h.name!==a.name||_.get(h,"query.book")!==_.get(a,"query.book")||h.query.subPageSource!==a.query.subPageSource)){const u=[],m=a.name==="wishlist"||a.query.subPageSource==="wishlist"||a.meta.subPage&&!a.query.subPageSource&&T.state.sticky.subPageSource==="wishlist";e.wishlist&&m?u.push({name:"wishlist"}):e.books&&u.push({name:"library",keyOverride:"books"}),e.series&&u.push({name:"series"}),e.collections&&u.push({name:"collections"}),c(a,h,l,u)}else ze(a,h,l)})}else i.beforeEach((r,c,a)=>{ze(r,c,a)});return i.afterEach((r,c,a)=>{if(c.name!==r.name){const h=T.state.navHistory.forward,l=T.state.navHistory.back;c.name&&c.name!==h[h.length-1]&&c.name!==l[l.length-1]&&T.commit("navHistory",{key:"back",value:c.name,pushOnly:!0}),T.state.navHistory.btnNavigation||T.commit("prop",{key:"navHistory.forward",value:[]}),T.commit("prop",{key:"navHistory.btnNavigation",value:!1})}}),i}}function ze(e,t,n){e.query.refresh?(delete e.query.refresh,T.commit("prop",{key:"refreshView"}),n(e)):n()}const Ut={};Ut.install=function(e,t){e.config.globalProperties.$updateQuery=function(n){n=n||{};let s=n.query,i=n.value,o=n.history,r=n.queries||this.$route.query,c=JSON.parse(JSON.stringify(r));i===void 0?c[s]?delete c[s]:c[s]=!0:i?c[s]=i:delete c[s],console.log(s,c),o?this.$router.push({query:c}).catch(()=>{}):this.$router.replace({query:c}).catch(()=>{})},e.config.globalProperties.$updateQueries=function(n,s){s=s||{};let i=s.history,o=JSON.parse(JSON.stringify(s.queries||this.$route.query));_.merge(o,n),_.each(o,function(r,c){_.isNil(r)&&delete o[c]}),i?this.$router.push({query:o}).catch(()=>{}):this.$router.replace({query:o}).catch(()=>{})}};let Wt=null,_e=null,bt=function(){const e=Wt;e&&e.state.isVisible&&(e.hide(),e.reference.blur())};var pl={directive:"tippy",component:"tippy",componentSingleton:"tippy-singleton",defaultProps:{placement:"top",flipBehavior:["top","bottom","left","right"],allowHTML:!0,arrow:!0,theme:"dark",maxWidth:650,delay:[500,0],a11y:!1,onShow:e=>{Wt=e,_e=document.querySelector(".list-view-inner-wrap")||window,_e.addEventListener("scroll",bt,{passive:!0});let t=e.props.content;return(!t||t==="false")&&(t=!1),t},onHide:e=>{_e||(_e=document.querySelector(".list-view-inner-wrap")||window),_e.addEventListener("scroll",bt,{passive:!0})},boundary:"viewport",flipDuration:0}};const fl=700;var ml={created:function(e,{value:t},n){if(typeof t!="function"){console.warn(`Expect a function, got ${t}`);return}let s=null;const i=r=>{r.type==="touchstart"&&r.preventDefault(),!(r.type==="click"&&r.button!==0)&&s===null&&(s=setTimeout(()=>t(r),fl))},o=()=>{s!==null&&(clearTimeout(s),s=null)};["mousedown","touchstart"].forEach(r=>e.addEventListener(r,i,{passive:!0})),["click","mouseout","touchend","touchcancel"].forEach(r=>e.addEventListener(r,o,{passive:!0}))},unmounted:function(e,t){["mousedown","touchstart"].forEach(n=>e.removeEventListener(n,start,{passive:!0})),["click","mouseout","touchend","touchcancel"].forEach(n=>e.removeEventListener(n,cancel,{passive:!0}))}};const jt={};jt.install=function(e,t){e.config.globalProperties.$setListRenderingOpts=function(n){if(this.$route.query.sortValues){const s=_.findIndex(n.sort,{key:"sortValues"});n.sort[s].active=this.$route.query.sortValues}if(this.$route.query.sort){let s=_.find(n.sort,{current:!0});s.current=!1;const i=_.findIndex(n.sort,{key:this.$route.query.sort});i>-1&&(n.sort[i].current=!0,n.sort[i].active=this.$route.query.sortDir==="desc")}if(this.$route.query.filter){let s=decodeURIComponent(this.$route.query.filter).split(",");_.each(_.filter(n.filter,{type:"filter"}),function(i){i.active=!1,_.each(s,function(o){i.key===o&&(i.active=!0)})})}if(this.$route.query.filterExtras){let s=this.$route.query.filterExtras.split(",");s=_.map(s,function(i){return decodeURIComponent(i)}),_.each(s,function(i){let o=i.split(":"),r=o[0],c=_.find(n.filter,{type:"filterExtras",key:r});if(console.log(c),c&&(c.active=!0,o.length>1)){if(c.dropdownOpts)c.value=o[1].split("|"),console.log(c.value);else if(c.range){let a=o[1].split("-"),h=parseFloat(a[0]),l=parseFloat(a[1]);c.range=[h,l]}}})}if(this.$route.query.scope){let s=decodeURIComponent(this.$route.query.scope).split(",");_.each(n.scope,function(i){i.active=!1,_.each(s,function(o){i.key===o&&(i.active=!0)})})}this.$store.commit("prop",{key:"listRenderingOpts",value:n})}};function gl(e){T.commit("fromLocalStorage"),T.subscribe(function(n,s){n.type==="stickyProp"||n.type==="updatePlayerProgress"?localStorage.setItem("aleSettings",JSON.stringify(s.sticky)):n.type==="prop"&&_.each(_.isArray(n.payload)?n.payload:[n.payload],function(i){const o=_.get(i,"key","");(_.get(o,"0")==="sticky"||!!o.match(/^sticky\./i))&&localStorage.setItem("aleSettings",JSON.stringify(s.sticky))})});const t=document.querySelector("html.standalone-gallery");T.commit("prop",[{key:"library",value:e,freeze:!t},{key:"standalone",value:!!t},{key:"displayMode",value:window.matchMedia("(display-mode: standalone)").matches},{key:"urlOrigin",value:"https://audible"+e.extras["domain-extension"]},{key:"extractSettings",value:e.config}]),e.extras.pages.wishlist?e.extras.pages.books||T.commit("stickyProp",{key:"subPageSource",value:"wishlist"}):T.commit("stickyProp",{key:"subPageSource",value:"library"}),!e.books&&e.wishlist&&T.commit("stickyProp",{key:"subPageSource",value:"wishlist"})}const Dt=document.querySelector("html.standalone-gallery"),j=on(jr);j.config.devtools=!1;j.config.productionTip=!1;j.use(ln);j.use(Ut);j.config.globalProperties.$compEmitter=new un;j.use(T);j.use(hn,pl);j.directive("longpress",ml);j.use(jt);if(Dt){let e=function(t){let n=document.createElement("script"),s=document.querySelector("#audible-library-extractor").getAttribute("data-cache-id");n.src="data/temp-data."+s+".js",n.type="text/javascript",n.onload=function(){let i=window.tempDataJSON;window.bookSummaryJSON=!0,n=null,kt(i)},n.onerror=function(){n=null,setTimeout(function(){t||e("afterError")},1e3)},document.head.appendChild(n)};e()}else try{chrome.storage.local.get(null).then(e=>{!_.isEmpty(e)&&e.chunks?(console.log("%cIf this page is empty and you're getting an error, try to reload a few times...","background: #f41b1b; color: #fff; padding: 2px 5px; border-radius: 8px;"),rn.methods.glueFriesBackTogether(e),kt(e)):alert("No existing data found: extract your library again.")})}catch{}function kt(e){let t;if(e.extras.pages=e.extras.pages||{},Dt){t=JSON.parse(JSON.stringify(e));var n=["books","series","collections","wishlist"];_.each(n,function(i){_.get(e,i)===!0&&(delete e[i],_.set(e,"extras.pages.books",!0),e.extras.pages.books=!0)})}gl(e);let s=dl(t||e);j.use(s),j.mount("#audible-library-extractor")}export{gn as _,Ko as a,ds as b,Jo as c,Et as d,qi as e,Fn as f,se as g,Gs as h,Do as m,Fo as p,jo as s};
