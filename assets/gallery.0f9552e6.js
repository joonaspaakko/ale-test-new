import{m as ot}from"./gallery-makeCoverUrl.8378190f.js";import{o as S,c as C,a as k,_ as fe,r as tt,b as Ae,w as ge,v as on,n as Ne,d as F,t as be,e as q,p as it,f as at,g as pe,h as Dt,i as re,F as Ie,j as je,k as Pt,l as Zn,m as an,q as es,s as ts,u as ns,x as lt,y as Vt,z as Oe,A as ss,B as Xe,C as _e,D as ln,E as rs,G as cn,H as Ze,I as un,J as vt,K as os,L as is,M as as}from"./lodash.1321b47a.js";import{c as ls,g as cs}from"./jquery.050764e9.js";import{r as us,s as ds}from"./index.ee874ed1.js";import{U as wt,h as hs}from"./content-script-helpers.e49fc91b.js";import{h as ps}from"./howler.22814ddb.js";import{c as fs,m as ms,V as gs}from"./tippy.82bfa66a.js";const vs={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ys=k("path",{fill:"currentColor",d:"M18 13c0 3.31-2.69 6-6 6s-6-2.69-6-6s2.69-6 6-6v4l5-5l-5-5v4c-4.42 0-8 3.58-8 8s3.58 8 8 8s8-3.58 8-8h-2z"},null,-1),bs=k("path",{fill:"currentColor",d:"M10.06 15.38c-.29 0-.62-.17-.62-.54h-.85c0 .97.9 1.23 1.45 1.23c.87 0 1.51-.46 1.51-1.25c0-.66-.45-.9-.71-1c.11-.05.65-.32.65-.92c0-.21-.05-1.22-1.44-1.22c-.62 0-1.4.35-1.4 1.16h.85c0-.34.31-.48.57-.48c.59 0 .58.5.58.54c0 .52-.41.59-.63.59h-.46v.66h.45c.65 0 .7.42.7.64c0 .32-.21.59-.65.59zm3.79-3.7c-.14 0-1.44-.08-1.44 1.82v.74c0 1.9 1.31 1.82 1.44 1.82c.14 0 1.44.09 1.44-1.82v-.74c.01-1.91-1.3-1.82-1.44-1.82zm.6 2.67c0 .77-.21 1.03-.59 1.03s-.6-.26-.6-1.03v-.97c0-.75.22-1.01.59-1.01c.38 0 .6.26.6 1.01v.97z"},null,-1),_s=[ys,bs];function ks(e,t){return S(),C("svg",vs,_s)}var dn={name:"ic-baseline-forward30",render:ks};const ws={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ss=k("path",{fill:"currentColor",d:"M8 19c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2v10c0 1.1.9 2 2 2zm6-12v10c0 1.1.9 2 2 2s2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2z"},null,-1),$s=[Ss];function Cs(e,t){return S(),C("svg",ws,$s)}var Ps={name:"ic-round-pause",render:Cs};const Es={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},xs=k("path",{fill:"currentColor",d:"M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18a1 1 0 0 0 0-1.69L9.54 5.98A.998.998 0 0 0 8 6.82z"},null,-1),Rs=[xs];function Os(e,t){return S(),C("svg",Es,Rs)}var As={name:"ic-round-play-arrow",render:Os};const Ms={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ls=k("path",{fill:"currentColor",d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6s-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8s-3.58-8-8-8z"},null,-1),Ts=k("path",{fill:"currentColor",d:"M9.56 13.49h.45c.21 0 .37-.05.48-.16s.16-.25.16-.43a.538.538 0 0 0-.15-.39c-.05-.05-.11-.09-.18-.11s-.16-.04-.25-.04c-.08 0-.15.01-.22.03s-.13.05-.18.1s-.09.09-.12.15s-.05.13-.05.2h-.85a1.06 1.06 0 0 1 .41-.85c.13-.1.27-.18.44-.23s.35-.08.54-.08c.21 0 .41.03.59.08s.33.13.46.23s.23.23.3.38s.11.33.11.53a.842.842 0 0 1-.17.52a1.1 1.1 0 0 1-.48.39c.24.09.42.21.54.39s.18.38.18.61c0 .2-.04.38-.12.53s-.18.29-.32.39s-.29.19-.48.24s-.38.08-.6.08c-.18 0-.36-.02-.53-.07s-.33-.12-.46-.23s-.25-.23-.33-.38s-.12-.34-.12-.55h.85c0 .08.02.15.05.22s.07.12.13.17s.12.09.2.11s.16.04.25.04c.1 0 .19-.01.27-.04s.15-.07.2-.12s.1-.11.13-.18s.04-.15.04-.24c0-.11-.02-.21-.05-.29s-.08-.15-.14-.2s-.13-.09-.22-.11s-.18-.04-.29-.04h-.47v-.65zm5.74.75c0 .32-.03.6-.1.82s-.17.42-.29.57s-.28.26-.45.33s-.37.1-.59.1s-.41-.03-.59-.1s-.33-.18-.46-.33s-.23-.34-.3-.57s-.11-.5-.11-.82v-.74c0-.32.03-.6.1-.82s.17-.42.29-.57s.28-.26.45-.33s.37-.1.59-.1s.41.03.59.1s.33.18.46.33s.23.34.3.57s.11.5.11.82v.74zm-.85-.86c0-.19-.01-.35-.04-.48s-.07-.23-.12-.31s-.11-.14-.19-.17s-.16-.05-.25-.05s-.18.02-.25.05s-.14.09-.19.17s-.09.18-.12.31s-.04.29-.04.48v.97c0 .19.01.35.04.48s.07.24.12.32s.11.14.19.17s.16.05.25.05s.18-.02.25-.05s.14-.09.19-.17s.09-.19.11-.32c.03-.13.04-.29.04-.48v-.97z"},null,-1),Bs=[Ls,Ts];function Ds(e,t){return S(),C("svg",Ms,Bs)}var hn={name:"ic-baseline-replay30",render:Ds};var pn={exports:{}};(function(e,t){(function(n,r){e.exports=r(us)})(typeof self!="undefined"?self:ls,function(n){return function(){var r={679:function(h,d){var p,i,m;(function(g,y){i=[],p=y,m=typeof p=="function"?p.apply(d,i):p,m===void 0||(h.exports=m)})(typeof self!="undefined"&&self,function(){function g(){var y=Object.getOwnPropertyDescriptor(document,"currentScript");if(!y&&"currentScript"in document&&document.currentScript||y&&y.get!==g&&document.currentScript)return document.currentScript;try{throw new Error}catch(we){var P,v,b,E=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,O=/@([^@]*):(\d+):(\d+)\s*$/gi,M=E.exec(we.stack)||O.exec(we.stack),I=M&&M[1]||!1,G=M&&M[2]||!1,j=document.location.href.replace(document.location.hash,""),Y=document.getElementsByTagName("script");I===j&&(P=document.documentElement.outerHTML,v=new RegExp("(?:[^\\n]+?\\n){0,"+(G-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),b=P.replace(v,"$1").trim());for(var Q=0;Q<Y.length;Q++)if(Y[Q].readyState==="interactive"||Y[Q].src===I||I===j&&Y[Q].innerHTML&&Y[Q].innerHTML.trim()===b)return Y[Q];return null}}return g})},724:function(h,d,p){p.r(d);var i=p(81),m=p.n(i),g=p(645),y=p.n(g),P=y()(m());P.push([h.id,".vue-slider-dot{position:absolute;-webkit-transition:all 0s;transition:all 0s;z-index:5}.vue-slider-dot:focus{outline:none}.vue-slider-dot-tooltip{position:absolute;visibility:hidden}.vue-slider-dot-hover:hover .vue-slider-dot-tooltip,.vue-slider-dot-tooltip-show{visibility:visible}.vue-slider-dot-tooltip-top{top:-10px;left:50%;-webkit-transform:translate(-50%,-100%);transform:translate(-50%,-100%)}.vue-slider-dot-tooltip-bottom{bottom:-10px;left:50%;-webkit-transform:translate(-50%,100%);transform:translate(-50%,100%)}.vue-slider-dot-tooltip-left{left:-10px;top:50%;-webkit-transform:translate(-100%,-50%);transform:translate(-100%,-50%)}.vue-slider-dot-tooltip-right{right:-10px;top:50%;-webkit-transform:translate(100%,-50%);transform:translate(100%,-50%)}",""]),d.default=P},554:function(h,d,p){p.r(d);var i=p(81),m=p.n(i),g=p(645),y=p.n(g),P=y()(m());P.push([h.id,".vue-slider-marks{position:relative;width:100%;height:100%}.vue-slider-mark{position:absolute;z-index:1}.vue-slider-ltr .vue-slider-mark,.vue-slider-rtl .vue-slider-mark{width:0;height:100%;top:50%}.vue-slider-ltr .vue-slider-mark-step,.vue-slider-rtl .vue-slider-mark-step{top:0}.vue-slider-ltr .vue-slider-mark-label,.vue-slider-rtl .vue-slider-mark-label{top:100%;margin-top:10px}.vue-slider-ltr .vue-slider-mark{-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.vue-slider-ltr .vue-slider-mark-step{left:0}.vue-slider-ltr .vue-slider-mark-label{left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.vue-slider-rtl .vue-slider-mark{-webkit-transform:translate(50%,-50%);transform:translate(50%,-50%)}.vue-slider-rtl .vue-slider-mark-step{right:0}.vue-slider-rtl .vue-slider-mark-label{right:50%;-webkit-transform:translateX(50%);transform:translateX(50%)}.vue-slider-btt .vue-slider-mark,.vue-slider-ttb .vue-slider-mark{width:100%;height:0;left:50%}.vue-slider-btt .vue-slider-mark-step,.vue-slider-ttb .vue-slider-mark-step{left:0}.vue-slider-btt .vue-slider-mark-label,.vue-slider-ttb .vue-slider-mark-label{left:100%;margin-left:10px}.vue-slider-btt .vue-slider-mark{-webkit-transform:translate(-50%,50%);transform:translate(-50%,50%)}.vue-slider-btt .vue-slider-mark-step{top:0}.vue-slider-btt .vue-slider-mark-label{top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.vue-slider-ttb .vue-slider-mark{-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.vue-slider-ttb .vue-slider-mark-step{bottom:0}.vue-slider-ttb .vue-slider-mark-label{bottom:50%;-webkit-transform:translateY(50%);transform:translateY(50%)}.vue-slider-mark-label,.vue-slider-mark-step{position:absolute}",""]),d.default=P},894:function(h,d,p){p.r(d);var i=p(81),m=p.n(i),g=p(645),y=p.n(g),P=y()(m());P.push([h.id,".vue-slider{position:relative;-webkit-box-sizing:content-box;box-sizing:content-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:block;-webkit-tap-highlight-color:rgba(0,0,0,0)}.vue-slider-rail{position:relative;width:100%;height:100%;-webkit-transition-property:width,height,left,right,top,bottom;transition-property:width,height,left,right,top,bottom}.vue-slider-process{position:absolute;z-index:1}",""]),d.default=P},645:function(h){h.exports=function(d){var p=[];return p.toString=function(){return this.map(function(i){var m="",g=typeof i[5]!="undefined";return i[4]&&(m+="@supports (".concat(i[4],") {")),i[2]&&(m+="@media ".concat(i[2]," {")),g&&(m+="@layer".concat(i[5].length>0?" ".concat(i[5]):""," {")),m+=d(i),g&&(m+="}"),i[2]&&(m+="}"),i[4]&&(m+="}"),m}).join("")},p.i=function(i,m,g,y,P){typeof i=="string"&&(i=[[null,i,void 0]]);var v={};if(g)for(var b=0;b<this.length;b++){var E=this[b][0];E!=null&&(v[E]=!0)}for(var O=0;O<i.length;O++){var M=[].concat(i[O]);g&&v[M[0]]||(typeof P!="undefined"&&(typeof M[5]=="undefined"||(M[1]="@layer".concat(M[5].length>0?" ".concat(M[5]):""," {").concat(M[1],"}")),M[5]=P),m&&(M[2]&&(M[1]="@media ".concat(M[2]," {").concat(M[1],"}")),M[2]=m),y&&(M[4]?(M[1]="@supports (".concat(M[4],") {").concat(M[1],"}"),M[4]=y):M[4]="".concat(y)),p.push(M))}},p}},81:function(h){h.exports=function(d){return d[1]}},744:function(h,d){d.Z=(p,i)=>{const m=p.__vccOpts||p;for(const[g,y]of i)m[g]=y;return m}},456:function(h,d,p){var i=p(724);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[h.id,i,""]]),i.locals&&(h.exports=i.locals);var m=p(402).Z;m("70c8b59e",i,!0,{sourceMap:!1,shadowMode:!1})},560:function(h,d,p){var i=p(554);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[h.id,i,""]]),i.locals&&(h.exports=i.locals);var m=p(402).Z;m("63658205",i,!0,{sourceMap:!1,shadowMode:!1})},562:function(h,d,p){var i=p(894);i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[h.id,i,""]]),i.locals&&(h.exports=i.locals);var m=p(402).Z;m("21173b05",i,!0,{sourceMap:!1,shadowMode:!1})},402:function(h,d,p){function i(T,W){for(var U=[],H={},N=0;N<W.length;N++){var Z=W[N],te=Z[0],X=Z[1],ae=Z[2],de=Z[3],me={id:T+":"+N,css:X,media:ae,sourceMap:de};H[te]?H[te].parts.push(me):U.push(H[te]={id:te,parts:[me]})}return U}p.d(d,{Z:function(){return G}});var m=typeof document!="undefined";if(typeof DEBUG!="undefined"&&DEBUG&&!m)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var g={},y=m&&(document.head||document.getElementsByTagName("head")[0]),P=null,v=0,b=!1,E=function(){},O=null,M="data-vue-ssr-id",I=typeof navigator!="undefined"&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function G(T,W,U,H){b=U,O=H||{};var N=i(T,W);return j(N),function(Z){for(var te=[],X=0;X<N.length;X++){var ae=N[X],de=g[ae.id];de.refs--,te.push(de)}for(Z?(N=i(T,Z),j(N)):N=[],X=0;X<te.length;X++)if(de=te[X],de.refs===0){for(var me=0;me<de.parts.length;me++)de.parts[me]();delete g[de.id]}}}function j(T){for(var W=0;W<T.length;W++){var U=T[W],H=g[U.id];if(H){H.refs++;for(var N=0;N<H.parts.length;N++)H.parts[N](U.parts[N]);for(;N<U.parts.length;N++)H.parts.push(Q(U.parts[N]));H.parts.length>U.parts.length&&(H.parts.length=U.parts.length)}else{var Z=[];for(N=0;N<U.parts.length;N++)Z.push(Q(U.parts[N]));g[U.id]={id:U.id,refs:1,parts:Z}}}}function Y(){var T=document.createElement("style");return T.type="text/css",y.appendChild(T),T}function Q(T){var W,U,H=document.querySelector("style["+M+'~="'+T.id+'"]');if(H){if(b)return E;H.parentNode.removeChild(H)}if(I){var N=v++;H=P||(P=Y()),W=ye.bind(null,H,N,!1),U=ye.bind(null,H,N,!0)}else H=Y(),W=Te.bind(null,H),U=function(){H.parentNode.removeChild(H)};return W(T),function(Z){if(Z){if(Z.css===T.css&&Z.media===T.media&&Z.sourceMap===T.sourceMap)return;W(T=Z)}else U()}}var we=function(){var T=[];return function(W,U){return T[W]=U,T.filter(Boolean).join(`
`)}}();function ye(T,W,U,H){var N=U?"":H.css;if(T.styleSheet)T.styleSheet.cssText=we(W,N);else{var Z=document.createTextNode(N),te=T.childNodes;te[W]&&T.removeChild(te[W]),te.length?T.insertBefore(Z,te[W]):T.appendChild(Z)}}function Te(T,W){var U=W.css,H=W.media,N=W.sourceMap;if(H&&T.setAttribute("media",H),O.ssrId&&T.setAttribute(M,W.id),N&&(U+=`
/*# sourceURL=`+N.sources[0]+" */",U+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(N))))+" */"),T.styleSheet)T.styleSheet.cssText=U;else{for(;T.firstChild;)T.removeChild(T.firstChild);T.appendChild(document.createTextNode(U))}}},927:function(h){h.exports=n}},a={};function l(h){var d=a[h];if(d!==void 0)return d.exports;var p=a[h]={id:h,exports:{}};return r[h].call(p.exports,p,p.exports,l),p.exports}(function(){l.n=function(h){var d=h&&h.__esModule?function(){return h.default}:function(){return h};return l.d(d,{a:d}),d}})(),function(){l.d=function(h,d){for(var p in d)l.o(d,p)&&!l.o(h,p)&&Object.defineProperty(h,p,{enumerable:!0,get:d[p]})}}(),function(){l.o=function(h,d){return Object.prototype.hasOwnProperty.call(h,d)}}(),function(){l.r=function(h){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})}}(),function(){l.p=""}();var u={};return function(){if(l.d(u,{default:function(){return Jn}}),typeof window!="undefined"){var h=window.document.currentScript,d=l(679);h=d(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:d});var p=h&&h.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);p&&(l.p=p[1])}var i=l(927);function m(s,o,c){return o in s?Object.defineProperty(s,o,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[o]=c,s}var g={key:0,class:"vue-slider-marks"};function y(s,o,c,f,$,R){var B=(0,i.resolveComponent)("vue-slider-mark"),ce=(0,i.resolveComponent)("vue-slider-dot");return(0,i.openBlock)(),(0,i.createElementBlock)("div",(0,i.mergeProps)({ref:"container",class:s.containerClasses,style:s.containerStyles,onClick:o[1]||(o[1]=function(){return s.clickHandle&&s.clickHandle.apply(s,arguments)}),onTouchstartPassive:o[2]||(o[2]=function(){return s.dragStartOnProcess&&s.dragStartOnProcess.apply(s,arguments)}),onMousedownPassive:o[3]||(o[3]=function(){return s.dragStartOnProcess&&s.dragStartOnProcess.apply(s,arguments)})},s.$attrs),[(0,i.createElementVNode)("div",{class:"vue-slider-rail",style:(0,i.normalizeStyle)(s.railStyle)},[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(s.processArray,function(V,oe){return(0,i.renderSlot)(s.$slots,"process",(0,i.normalizeProps)((0,i.guardReactiveProps)(V)),function(){return[((0,i.openBlock)(),(0,i.createElementBlock)("div",{class:"vue-slider-process",key:"process-".concat(oe),style:(0,i.normalizeStyle)(V.style)},null,4))]})}),256)),s.sliderMarks&&s.control?((0,i.openBlock)(),(0,i.createElementBlock)("div",g,[((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(s.control.markList,function(V,oe){return(0,i.renderSlot)(s.$slots,"mark",(0,i.normalizeProps)((0,i.guardReactiveProps)(V)),function(){var he;return[((0,i.openBlock)(),(0,i.createBlock)(B,{key:"mark-".concat(oe),mark:V,hideLabel:s.hideLabel,style:(0,i.normalizeStyle)((he={},m(he,s.isHorizontal?"height":"width","100%"),m(he,s.isHorizontal?"width":"height",s.tailSize),m(he,s.mainDirection,"".concat(V.pos,"%")),he)),stepStyle:s.stepStyle,stepActiveStyle:s.stepActiveStyle,labelStyle:s.labelStyle,labelActiveStyle:s.labelActiveStyle,onPressLabel:function(Fe){return s.clickable&&s.setValueByPos(Fe)}},{step:(0,i.withCtx)(function(){return[(0,i.renderSlot)(s.$slots,"step",(0,i.normalizeProps)((0,i.guardReactiveProps)(V)))]}),label:(0,i.withCtx)(function(){return[(0,i.renderSlot)(s.$slots,"label",(0,i.normalizeProps)((0,i.guardReactiveProps)(V)))]}),_:2},1032,["mark","hideLabel","style","stepStyle","stepActiveStyle","labelStyle","labelActiveStyle","onPressLabel"]))]})}),256))])):(0,i.createCommentVNode)("",!0),((0,i.openBlock)(!0),(0,i.createElementBlock)(i.Fragment,null,(0,i.renderList)(s.dots,function(V,oe){var he;return(0,i.openBlock)(),(0,i.createBlock)(ce,(0,i.mergeProps)({ref_for:!0,ref:"dot-".concat(oe),key:"dot-".concat(oe),value:V.value,disabled:V.disabled,focus:V.focus,"dot-style":[V.style,V.disabled?V.disabledStyle:null,V.focus?V.focusStyle:null],tooltip:V.tooltip||s.tooltip,"tooltip-style":[s.tooltipStyle,V.tooltipStyle,V.disabled?V.tooltipDisabledStyle:null,V.focus?V.tooltipFocusStyle:null],"tooltip-formatter":Array.isArray(s.sliderTooltipFormatter)?s.sliderTooltipFormatter[oe]:s.sliderTooltipFormatter,"tooltip-placement":s.tooltipDirections[oe],style:[s.dotBaseStyle,(he={},m(he,s.mainDirection,"".concat(V.pos,"%")),m(he,"transition","".concat(s.mainDirection," ").concat(s.animateTime,"s")),he)],onDragStart:function(){return s.dragStart(oe)},role:"slider","aria-valuenow":V.value,"aria-valuemin":s.min,"aria-valuemax":s.max,"aria-orientation":s.isHorizontal?"horizontal":"vertical",tabindex:"0",onFocus:function(){return s.focus(V,oe)},onBlur:o[0]||(o[0]=function(){return s.blur()})},s.dotAttrs),{dot:(0,i.withCtx)(function(){return[(0,i.renderSlot)(s.$slots,"dot",(0,i.normalizeProps)((0,i.guardReactiveProps)(V)))]}),tooltip:(0,i.withCtx)(function(){return[(0,i.renderSlot)(s.$slots,"tooltip",(0,i.normalizeProps)((0,i.guardReactiveProps)(V)))]}),_:2},1040,["value","disabled","focus","dot-style","tooltip","tooltip-style","tooltip-formatter","tooltip-placement","style","onDragStart","aria-valuenow","aria-valuemin","aria-valuemax","aria-orientation","onFocus"])}),128))],4),(0,i.renderSlot)(s.$slots,"default",{value:s.getValue()})],16)}var P=["aria-valuetext"],v={class:"vue-slider-dot-tooltip-text"};function b(s,o,c,f,$,R){return(0,i.openBlock)(),(0,i.createElementBlock)("div",{ref:"dot",class:(0,i.normalizeClass)(s.dotClasses),"aria-valuetext":s.tooltipValue.toString(),onMousedownPassive:o[0]||(o[0]=function(){return s.dragStart&&s.dragStart.apply(s,arguments)}),onTouchstartPassive:o[1]||(o[1]=function(){return s.dragStart&&s.dragStart.apply(s,arguments)})},[(0,i.renderSlot)(s.$slots,"dot",{},function(){return[(0,i.createElementVNode)("div",{class:(0,i.normalizeClass)(s.handleClasses),style:(0,i.normalizeStyle)(s.dotStyle)},null,6)]}),s.tooltip!=="none"?((0,i.openBlock)(),(0,i.createElementBlock)("div",{key:0,class:(0,i.normalizeClass)(s.tooltipClasses)},[(0,i.renderSlot)(s.$slots,"tooltip",{},function(){return[(0,i.createElementVNode)("div",{class:(0,i.normalizeClass)(s.tooltipInnerClasses),style:(0,i.normalizeStyle)(s.tooltipStyle)},[(0,i.createElementVNode)("span",v,(0,i.toDisplayString)(s.tooltipValue),1)],6)]})],2)):(0,i.createCommentVNode)("",!0)],42,P)}l(456);var E=(0,i.defineComponent)({name:"VueSliderDot",emits:["DragStart"],props:{value:{type:[String,Number],default:0},tooltip:{type:String,required:!0},tooltipPlacement:{type:String,validator:function(s){return["top","right","bottom","left"].indexOf(s)>-1},required:!0},tooltipFormatter:{type:[String,Function]},focus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},dotStyle:{type:Object},tooltipStyle:{type:Object}},computed:{dotClasses:function(){return["vue-slider-dot",{"vue-slider-dot-hover":this.tooltip==="hover"||this.tooltip==="active","vue-slider-dot-disabled":this.disabled,"vue-slider-dot-focus":this.focus}]},handleClasses:function(){return["vue-slider-dot-handle",{"vue-slider-dot-handle-disabled":this.disabled,"vue-slider-dot-handle-focus":this.focus}]},tooltipClasses:function(){return["vue-slider-dot-tooltip",["vue-slider-dot-tooltip-".concat(this.tooltipPlacement)],{"vue-slider-dot-tooltip-show":this.showTooltip}]},tooltipInnerClasses:function(){return["vue-slider-dot-tooltip-inner",["vue-slider-dot-tooltip-inner-".concat(this.tooltipPlacement)],{"vue-slider-dot-tooltip-inner-disabled":this.disabled,"vue-slider-dot-tooltip-inner-focus":this.focus}]},showTooltip:function(){switch(this.tooltip){case"always":return!0;case"none":return!1;case"focus":case"active":return!!this.focus;default:return!1}},tooltipValue:function(){return this.tooltipFormatter?typeof this.tooltipFormatter=="string"?this.tooltipFormatter.replace(/\{value\}/,String(this.value)):this.tooltipFormatter(this.value):this.value}},methods:{dragStart:function(){if(this.disabled)return!1;this.$emit("DragStart")}}}),O=l(744),I=(0,O.Z)(E,[["render",b]]);function G(s,o,c,f,$,R){return(0,i.openBlock)(),(0,i.createElementBlock)("div",{class:(0,i.normalizeClass)(s.marksClasses)},[(0,i.renderSlot)(s.$slots,"step",{},function(){return[(0,i.createElementVNode)("div",{class:(0,i.normalizeClass)(s.stepClasses),style:(0,i.normalizeStyle)([s.stepStyle,s.mark.style||{},s.mark.active&&s.stepActiveStyle?s.stepActiveStyle:{},s.mark.active&&s.mark.activeStyle?s.mark.activeStyle:{}])},null,6)]}),s.hideLabel?(0,i.createCommentVNode)("",!0):(0,i.renderSlot)(s.$slots,"label",{key:0},function(){return[(0,i.createElementVNode)("div",{class:(0,i.normalizeClass)(s.labelClasses),style:(0,i.normalizeStyle)([s.labelStyle,s.mark.labelStyle||{},s.mark.active&&s.labelActiveStyle?s.labelActiveStyle:{},s.mark.active&&s.mark.labelActiveStyle?s.mark.labelActiveStyle:{}]),onClick:o[0]||(o[0]=function(){return s.labelClickHandle&&s.labelClickHandle.apply(s,arguments)})},(0,i.toDisplayString)(s.mark.label),7)]})],2)}l(560);var j=(0,i.defineComponent)({name:"VueSliderMark",emits:["PressLabel"],props:{mark:{type:Object,required:!0},hideLabel:{type:Boolean},stepStyle:{type:Object,default:function(){return{}}},stepActiveStyle:{type:Object,default:function(){return{}}},labelStyle:{type:Object,default:function(){return{}}},labelActiveStyle:{type:Object,default:function(){return{}}}},computed:{marksClasses:function(){return["vue-slider-mark",{"vue-slider-mark-active":this.mark.active}]},stepClasses:function(){return["vue-slider-mark-step",{"vue-slider-mark-step-active":this.mark.active}]},labelClasses:function(){return["vue-slider-mark-label",{"vue-slider-mark-label-active":this.mark.active}]}},methods:{labelClickHandle:function(s){s.stopPropagation(),this.$emit("PressLabel",this.mark.pos)}}});const Y=(0,O.Z)(j,[["render",G]]);var Q,we=Y,ye=function(s){return typeof s=="number"?"".concat(s,"px"):s},Te=function(s){var o=document.documentElement,c=document.body,f=s.getBoundingClientRect(),$={y:f.top+(window.pageYOffset||o.scrollTop)-(o.clientTop||c.clientTop||0),x:f.left+(window.pageXOffset||o.scrollLeft)-(o.clientLeft||c.clientLeft||0)};return $},T=function(s,o,c){var f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,$="targetTouches"in s?s.targetTouches[0]:s,R=Te(o),B={x:$.pageX-R.x,y:$.pageY-R.y};return{x:c?o.offsetWidth*f-B.x:B.x,y:c?o.offsetHeight*f-B.y:B.y}};(function(s){s[s.PAGE_UP=33]="PAGE_UP",s[s.PAGE_DOWN=34]="PAGE_DOWN",s[s.END=35]="END",s[s.HOME=36]="HOME",s[s.LEFT=37]="LEFT",s[s.UP=38]="UP",s[s.RIGHT=39]="RIGHT",s[s.DOWN=40]="DOWN"})(Q||(Q={}));var W=function(s,o){if(o.hook){var c=o.hook(s);if(typeof c=="function")return c;if(!c)return null}switch(s.keyCode){case Q.UP:return function(f){return o.direction==="ttb"?f-1:f+1};case Q.RIGHT:return function(f){return o.direction==="rtl"?f-1:f+1};case Q.DOWN:return function(f){return o.direction==="ttb"?f+1:f-1};case Q.LEFT:return function(f){return o.direction==="rtl"?f+1:f-1};case Q.END:return function(){return o.max};case Q.HOME:return function(){return o.min};case Q.PAGE_UP:return function(f){return f+10};case Q.PAGE_DOWN:return function(f){return f-10};default:return null}};function U(s,o){if(!(s instanceof o))throw new TypeError("Cannot call a class as a function")}function H(s,o){for(var c=0;c<o.length;c++){var f=o[c];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(s,f.key,f)}}function N(s,o,c){return o&&H(s.prototype,o),c&&H(s,c),Object.defineProperty(s,"prototype",{writable:!1}),s}function Z(s,o,c){return o in s?Object.defineProperty(s,o,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[o]=c,s}var te,X,ae=function(){function s(o){U(this,s),Z(this,"num",void 0),this.num=o}return N(s,[{key:"decimal",value:function(o,c){var f=this.num,$=this.getDecimalLen(f),R=this.getDecimalLen(o),B=0;switch(c){case"+":B=this.getExponent($,R),this.num=(this.safeRoundUp(f,B)+this.safeRoundUp(o,B))/B;break;case"-":B=this.getExponent($,R),this.num=(this.safeRoundUp(f,B)-this.safeRoundUp(o,B))/B;break;case"*":this.num=this.safeRoundUp(this.safeRoundUp(f,this.getExponent($)),this.safeRoundUp(o,this.getExponent(R)))/this.getExponent($+R);break;case"/":B=this.getExponent($,R),this.num=this.safeRoundUp(f,B)/this.safeRoundUp(o,B);break;case"%":B=this.getExponent($,R),this.num=this.safeRoundUp(f,B)%this.safeRoundUp(o,B)/B;break}return this}},{key:"plus",value:function(o){return this.decimal(o,"+")}},{key:"minus",value:function(o){return this.decimal(o,"-")}},{key:"multiply",value:function(o){return this.decimal(o,"*")}},{key:"divide",value:function(o){return this.decimal(o,"/")}},{key:"remainder",value:function(o){return this.decimal(o,"%")}},{key:"toNumber",value:function(){return this.num}},{key:"getDecimalLen",value:function(o){var c="".concat(o).split("e");return("".concat(c[0]).split(".")[1]||"").length-(c[1]?+c[1]:0)}},{key:"getExponent",value:function(o,c){return Math.pow(10,c!==void 0?Math.max(o,c):o)}},{key:"safeRoundUp",value:function(o,c){return Math.round(o*c)}}]),s}();function de(s,o){return nt(s)||qe(s,o)||J(s,o)||me()}function me(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qe(s,o){var c=s==null?null:typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(c!=null){var f,$,R=[],B=!0,ce=!1;try{for(c=c.call(s);!(B=(f=c.next()).done)&&(R.push(f.value),!(o&&R.length===o));B=!0);}catch(V){ce=!0,$=V}finally{try{B||c.return==null||c.return()}finally{if(ce)throw $}}return R}}function nt(s){if(Array.isArray(s))return s}function w(s,o){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(s);o&&(f=f.filter(function($){return Object.getOwnPropertyDescriptor(s,$).enumerable})),c.push.apply(c,f)}return c}function A(s){for(var o=1;o<arguments.length;o++){var c=arguments[o]!=null?arguments[o]:{};o%2?w(Object(c),!0).forEach(function(f){ee(s,f,c[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):w(Object(c)).forEach(function(f){Object.defineProperty(s,f,Object.getOwnPropertyDescriptor(c,f))})}return s}function x(s){return z(s)||ne(s)||J(s)||L()}function L(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J(s,o){if(s){if(typeof s=="string")return D(s,o);var c=Object.prototype.toString.call(s).slice(8,-1);return c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set"?Array.from(s):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?D(s,o):void 0}}function ne(s){if(typeof Symbol!="undefined"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function z(s){if(Array.isArray(s))return D(s)}function D(s,o){(o==null||o>s.length)&&(o=s.length);for(var c=0,f=new Array(o);c<o;c++)f[c]=s[c];return f}function se(s,o){if(!(s instanceof o))throw new TypeError("Cannot call a class as a function")}function Ce(s,o){for(var c=0;c<o.length;c++){var f=o[c];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(s,f.key,f)}}function le(s,o,c){return o&&Ce(s.prototype,o),c&&Ce(s,c),Object.defineProperty(s,"prototype",{writable:!1}),s}function ee(s,o,c){return o in s?Object.defineProperty(s,o,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[o]=c,s}(function(s){s[s.VALUE=1]="VALUE",s[s.INTERVAL=2]="INTERVAL",s[s.MIN=3]="MIN",s[s.MAX=4]="MAX",s[s.ORDER=5]="ORDER"})(X||(X={}));var Bn=(te={},ee(te,X.VALUE,'The type of the "value" is illegal'),ee(te,X.INTERVAL,'The prop "interval" is invalid, "(max - min)" must be divisible by "interval"'),ee(te,X.MIN,'The "value" must be greater than or equal to the "min".'),ee(te,X.MAX,'The "value" must be less than or equal to the "max".'),ee(te,X.ORDER,'When "order" is false, the parameters "minRange", "maxRange", "fixed", "enabled" are invalid.'),te),Dn=function(){function s(o){se(this,s),ee(this,"dotsPos",[]),ee(this,"dotsValue",[]),ee(this,"data",void 0),ee(this,"enableCross",void 0),ee(this,"fixed",void 0),ee(this,"max",void 0),ee(this,"min",void 0),ee(this,"interval",void 0),ee(this,"minRange",void 0),ee(this,"maxRange",void 0),ee(this,"order",void 0),ee(this,"marks",void 0),ee(this,"included",void 0),ee(this,"process",void 0),ee(this,"adsorb",void 0),ee(this,"dotOptions",void 0),ee(this,"onError",void 0),ee(this,"cacheRangeDir",{}),this.data=o.data,this.max=o.max,this.min=o.min,this.interval=o.interval,this.order=o.order,this.marks=o.marks,this.included=o.included,this.process=o.process,this.adsorb=o.adsorb,this.dotOptions=o.dotOptions,this.onError=o.onError,this.order?(this.minRange=o.minRange||0,this.maxRange=o.maxRange||0,this.enableCross=o.enableCross,this.fixed=o.fixed):((o.minRange||o.maxRange||!o.enableCross||o.fixed)&&this.emitError(X.ORDER),this.minRange=0,this.maxRange=0,this.enableCross=!0,this.fixed=!1),this.setValue(o.value)}return le(s,[{key:"setValue",value:function(o){this.setDotsValue(Array.isArray(o)?x(o):[o],!0)}},{key:"setDotsValue",value:function(o,c){this.dotsValue=o,c&&this.syncDotsPos()}},{key:"setDotsPos",value:function(o){var c=this,f=this.order?x(o).sort(function($,R){return $-R}):o;this.dotsPos=f,this.setDotsValue(f.map(function($){return c.getValueByPos($)}),this.adsorb)}},{key:"getValueByPos",value:function(o){var c=this.parsePos(o);if(this.included){var f=100;this.markList.forEach(function($){var R=Math.abs($.pos-o);R<f&&(f=R,c=$.value)})}return c}},{key:"syncDotsPos",value:function(){var o=this;this.dotsPos=this.dotsValue.map(function(c){return o.parseValue(c)})}},{key:"markList",get:function(){var o=this;if(!this.marks)return[];var c=function(f,$){var R=o.parseValue(f);return A({pos:R,value:f,label:f,active:o.isActiveByPos(R)},$)};return this.marks===!0?this.getValues().map(function(f){return c(f)}):Object.prototype.toString.call(this.marks)==="[object Object]"?Object.keys(this.marks).sort(function(f,$){return+f-+$}).map(function(f){var $=o.marks[f];return c(f,typeof $!="string"?$:{label:$})}):Array.isArray(this.marks)?this.marks.map(function(f){return c(f)}):typeof this.marks=="function"?this.getValues().map(function(f){return{value:f,result:o.marks(f)}}).filter(function(f){var $=f.result;return!!$}).map(function(f){var $=f.value,R=f.result;return c($,R)}):[]}},{key:"getRecentDot",value:function(o){var c=this.dotsPos.map(function(f){return Math.abs(f-o)});return c.indexOf(Math.min.apply(Math,x(c)))}},{key:"getIndexByValue",value:function(o){return this.data?this.data.indexOf(o):new ae(+o).minus(this.min).divide(this.interval).toNumber()}},{key:"getValueByIndex",value:function(o){return o<0?o=0:o>this.total&&(o=this.total),this.data?this.data[o]:new ae(o).multiply(this.interval).plus(this.min).toNumber()}},{key:"setDotPos",value:function(o,c){o=this.getValidPos(o,c).pos;var f=o-this.dotsPos[c];if(f){var $=new Array(this.dotsPos.length);this.fixed?$=this.getFixedChangePosArr(f,c):this.minRange||this.maxRange?$=this.getLimitRangeChangePosArr(o,f,c):$[c]=f,this.setDotsPos(this.dotsPos.map(function(R,B){return R+($[B]||0)}))}}},{key:"getFixedChangePosArr",value:function(o,c){var f=this;return this.dotsPos.forEach(function($,R){if(R!==c){var B=f.getValidPos($+o,R),ce=B.pos,V=B.inRange;V||(o=Math.min(Math.abs(ce-$),Math.abs(o))*(o<0?-1:1))}}),this.dotsPos.map(function($){return o})}},{key:"getLimitRangeChangePosArr",value:function(o,c,f){var $=this,R=[{index:f,changePos:c}],B=c;return[this.minRange,this.maxRange].forEach(function(ce,V){if(!ce)return!1;var oe=V===0,he=c>0,Fe=0;Fe=oe?he?1:-1:he?-1:1;for(var Kn=function(Yn,Qn){var Bt=Math.abs(Yn-Qn);return oe?Bt<$.minRangeDir:Bt>$.maxRangeDir},Ge=f+Fe,We=$.dotsPos[Ge],Lt=o;$.isPos(We)&&Kn(We,Lt);){var Xn=$.getValidPos(We+B,Ge),Tt=Xn.pos;R.push({index:Ge,changePos:Tt-We}),Ge+=Fe,Lt=Tt,We=$.dotsPos[Ge]}}),this.dotsPos.map(function(ce,V){var oe=R.filter(function(he){return he.index===V});return oe.length?oe[0].changePos:0})}},{key:"isPos",value:function(o){return typeof o=="number"}},{key:"getValidPos",value:function(o,c){var f=this.valuePosRange[c],$=!0;return o<f[0]?(o=f[0],$=!1):o>f[1]&&(o=f[1],$=!1),{pos:o,inRange:$}}},{key:"parseValue",value:function(o){if(this.data)o=this.data.indexOf(o);else if(typeof o=="number"||typeof o=="string"){if(o=+o,o<this.min)return this.emitError(X.MIN),0;if(o>this.max)return this.emitError(X.MAX),0;if(typeof o!="number"||o!==o)return this.emitError(X.VALUE),0;o=new ae(o).minus(this.min).divide(this.interval).toNumber()}var c=new ae(o).multiply(this.gap).toNumber();return c<0?0:c>100?100:c}},{key:"parsePos",value:function(o){var c=Math.round(o/this.gap);return this.getValueByIndex(c)}},{key:"isActiveByPos",value:function(o){return this.processArray.some(function(c){var f=de(c,2),$=f[0],R=f[1];return o>=$&&o<=R})}},{key:"getValues",value:function(){if(this.data)return this.data;for(var o=[],c=0;c<=this.total;c++)o.push(new ae(c).multiply(this.interval).plus(this.min).toNumber());return o}},{key:"getRangeDir",value:function(o){return o?new ae(o).divide(new ae(this.data?this.data.length-1:this.max).minus(this.data?0:this.min).toNumber()).multiply(100).toNumber():100}},{key:"emitError",value:function(o){this.onError&&this.onError(o,Bn[o])}},{key:"processArray",get:function(){if(this.process){if(typeof this.process=="function")return this.process(this.dotsPos);if(this.dotsPos.length===1)return[[0,this.dotsPos[0]]];if(this.dotsPos.length>1)return[[Math.min.apply(Math,x(this.dotsPos)),Math.max.apply(Math,x(this.dotsPos))]]}return[]}},{key:"total",get:function(){var o=0;return o=this.data?this.data.length-1:new ae(this.max).minus(this.min).divide(this.interval).toNumber(),o-Math.floor(o)!==0?(this.emitError(X.INTERVAL),0):o}},{key:"gap",get:function(){return 100/this.total}},{key:"minRangeDir",get:function(){return this.cacheRangeDir[this.minRange]?this.cacheRangeDir[this.minRange]:this.cacheRangeDir[this.minRange]=this.getRangeDir(this.minRange)}},{key:"maxRangeDir",get:function(){return this.cacheRangeDir[this.maxRange]?this.cacheRangeDir[this.maxRange]:this.cacheRangeDir[this.maxRange]=this.getRangeDir(this.maxRange)}},{key:"getDotRange",value:function(o,c,f){if(!this.dotOptions)return f;var $=Array.isArray(this.dotOptions)?this.dotOptions[o]:this.dotOptions;return $&&$[c]!==void 0?this.parseValue($[c]):f}},{key:"valuePosRange",get:function(){var o=this,c=this.dotsPos,f=[];return c.forEach(function($,R){f.push([Math.max(o.minRange?o.minRangeDir*R:0,o.enableCross?0:c[R-1]||0,o.getDotRange(R,"min",0)),Math.min(o.minRange?100-o.minRangeDir*(c.length-1-R):100,o.enableCross?100:c[R+1]||100,o.getDotRange(R,"max",100))])}),f}},{key:"dotsIndex",get:function(){var o=this;return this.dotsValue.map(function(c){return o.getIndexByValue(c)})}}]),s}();function Vn(s,o){if(!(s instanceof o))throw new TypeError("Cannot call a class as a function")}function Rt(s,o){for(var c=0;c<o.length;c++){var f=o[c];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(s,f.key,f)}}function Nn(s,o,c){return o&&Rt(s.prototype,o),c&&Rt(s,c),Object.defineProperty(s,"prototype",{writable:!1}),s}function Ot(s,o,c){return o in s?Object.defineProperty(s,o,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[o]=c,s}var In=function(){function s(o){Vn(this,s),Ot(this,"map",void 0),Ot(this,"states",0),this.map=o}return Nn(s,[{key:"add",value:function(o){this.states|=o}},{key:"delete",value:function(o){this.states&=~o}},{key:"toggle",value:function(o){this.has(o)?this.delete(o):this.add(o)}},{key:"has",value:function(o){return!!(this.states&o)}}]),s}();l(562);function dt(s){return Hn(s)||zn(s)||Mt(s)||jn()}function jn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zn(s){if(typeof Symbol!="undefined"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function Hn(s){if(Array.isArray(s))return ft(s)}function ht(s){return ht=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ht(s)}function At(s,o){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(s);o&&(f=f.filter(function($){return Object.getOwnPropertyDescriptor(s,$).enumerable})),c.push.apply(c,f)}return c}function st(s){for(var o=1;o<arguments.length;o++){var c=arguments[o]!=null?arguments[o]:{};o%2?At(Object(c),!0).forEach(function(f){Se(s,f,c[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):At(Object(c)).forEach(function(f){Object.defineProperty(s,f,Object.getOwnPropertyDescriptor(c,f))})}return s}function Se(s,o,c){return o in s?Object.defineProperty(s,o,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[o]=c,s}function pt(s,o){return Fn(s)||qn(s,o)||Mt(s,o)||Un()}function Un(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mt(s,o){if(s){if(typeof s=="string")return ft(s,o);var c=Object.prototype.toString.call(s).slice(8,-1);return c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set"?Array.from(s):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?ft(s,o):void 0}}function ft(s,o){(o==null||o>s.length)&&(o=s.length);for(var c=0,f=new Array(o);c<o;c++)f[c]=s[c];return f}function qn(s,o){var c=s==null?null:typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(c!=null){var f,$,R=[],B=!0,ce=!1;try{for(c=c.call(s);!(B=(f=c.next()).done)&&(R.push(f.value),!(o&&R.length===o));B=!0);}catch(V){ce=!0,$=V}finally{try{B||c.return==null||c.return()}finally{if(ce)throw $}}return R}}function Fn(s){if(Array.isArray(s))return s}var ie={None:0,Drag:2,Focus:4},mt=4,Gn=(0,i.defineComponent)({name:"VueSlider",components:{VueSliderDot:I,VueSliderMark:we},emits:["change","drag-start","dragging","drag-end","error","update:modelValue"],data:function(){return{control:null,states:new In(ie),scale:1,focusDotIndex:0}},props:{modelValue:{type:[Number,String,Array],default:0},silent:{type:Boolean,default:!1},direction:{type:String,default:"ltr",validator:function(s){return["ltr","rtl","ttb","btt"].indexOf(s)>-1}},width:{type:[Number,String]},height:{type:[Number,String]},dotSize:{type:[Number,Array],default:14},contained:{type:Boolean,default:!1},min:{type:Number,default:0},max:{type:Number,default:100},interval:{type:Number,default:1},disabled:{type:Boolean,default:!1},clickable:{type:Boolean,default:!0},dragOnClick:{type:Boolean,default:!1},duration:{type:Number,default:.5},data:{type:[Object,Array]},dataValue:{type:String,default:"value"},dataLabel:{type:String,default:"label"},lazy:{type:Boolean,default:!1},tooltip:{type:String,default:"active",validator:function(s){return["none","always","focus","hover","active"].indexOf(s)>-1}},tooltipPlacement:{type:[String,Array],validator:function(s){return(Array.isArray(s)?s:[s]).every(function(o){return["top","right","bottom","left"].indexOf(o)>-1})}},tooltipFormatter:{type:[String,Array,Function]},useKeyboard:{type:Boolean,default:!0},keydownHook:{type:Function},enableCross:{type:Boolean,default:!0},fixed:{type:Boolean,default:!1},order:{type:Boolean,default:!0},minRange:{type:Number},maxRange:{type:Number},marks:{type:[Boolean,Object,Array,Function],default:!1},process:{type:[Boolean,Function],default:!0},zoom:{type:Number},included:{type:Boolean},adsorb:{type:Boolean},hideLabel:{type:Boolean},dotOptions:{type:[Object,Array]},dotAttrs:{type:Object},railStyle:{type:Object},processStyle:{type:Object},dotStyle:{type:Object},tooltipStyle:{type:Object},stepStyle:{type:Object},stepActiveStyle:{type:Object},labelStyle:{type:Object},labelActiveStyle:{type:Object}},computed:{isHorizontal:function(){return this.direction==="ltr"||this.direction==="rtl"},isReverse:function(){return this.direction==="rtl"||this.direction==="btt"},tailSize:function(){return ye((this.isHorizontal?this.height:this.width)||mt)},containerClasses:function(){return["vue-slider",["vue-slider-".concat(this.direction)],{"vue-slider-disabled":this.disabled}]},containerStyles:function(){var s=Array.isArray(this.dotSize)?this.dotSize:[this.dotSize,this.dotSize],o=pt(s,2),c=o[0],f=o[1],$=this.width?ye(this.width):this.isHorizontal?"auto":ye(mt),R=this.height?ye(this.height):this.isHorizontal?ye(mt):"auto";return{padding:this.contained?"".concat(f/2,"px ").concat(c/2,"px"):this.isHorizontal?"".concat(f/2,"px 0"):"0 ".concat(c/2,"px"),width:$,height:R}},processArray:function(){var s=this;return this.control.processArray.map(function(o,c){var f,$=pt(o,3),R=$[0],B=$[1],ce=$[2];if(R>B){var V=[B,R];R=V[0],B=V[1]}var oe=s.isHorizontal?"width":"height";return{start:R,end:B,index:c,style:st(st((f={},Se(f,s.isHorizontal?"height":"width","100%"),Se(f,s.isHorizontal?"top":"left",0),Se(f,s.mainDirection,"".concat(R,"%")),Se(f,oe,"".concat(B-R,"%")),Se(f,"transitionProperty","".concat(oe,",").concat(s.mainDirection)),Se(f,"transitionDuration","".concat(s.animateTime,"s")),f),s.processStyle),ce)}})},dotBaseStyle:function(){var s,o=Array.isArray(this.dotSize)?this.dotSize:[this.dotSize,this.dotSize],c=pt(o,2),f=c[0],$=c[1];return s=this.isHorizontal?Se({transform:"translate(".concat(this.isReverse?"50%":"-50%",", -50%)"),WebkitTransform:"translate(".concat(this.isReverse?"50%":"-50%",", -50%)"),top:"50%"},this.direction==="ltr"?"left":"right","0"):Se({transform:"translate(-50%, ".concat(this.isReverse?"50%":"-50%",")"),WebkitTransform:"translate(-50%, ".concat(this.isReverse?"50%":"-50%",")"),left:"50%"},this.direction==="btt"?"bottom":"top","0"),st({width:"".concat(f,"px"),height:"".concat($,"px")},s)},mainDirection:function(){switch(this.direction){case"ltr":return"left";case"rtl":return"right";case"btt":return"bottom";case"ttb":return"top";default:return"left"}},tooltipDirections:function(){var s=this.tooltipPlacement||(this.isHorizontal?"top":"left");return Array.isArray(s)?s:this.dots.map(function(){return s})},dots:function(){var s=this;return this.control.dotsPos.map(function(o,c){return st({pos:o,index:c,value:s.control.dotsValue[c],focus:s.states.has(ie.Focus)&&s.focusDotIndex===c,disabled:s.disabled,style:s.dotStyle},(Array.isArray(s.dotOptions)?s.dotOptions[c]:s.dotOptions)||{})})},animateTime:function(){return this.states.has(ie.Drag)?0:this.duration},canSort:function(){return this.order&&!this.minRange&&!this.maxRange&&!this.fixed&&this.enableCross},sliderData:function(){var s=this;return this.isObjectArrayData(this.data)?this.data.map(function(o){return o[s.dataValue]}):this.isObjectData(this.data)?Object.keys(this.data):this.data},sliderMarks:function(){var s=this;return this.marks?this.marks:this.isObjectArrayData(this.data)?function(o){var c={label:o};return s.data.some(function(f){return f[s.dataValue]===o&&(c.label=f[s.dataLabel],!0)}),c}:this.isObjectData(this.data)?this.data:void 0},sliderTooltipFormatter:function(){var s=this;if(this.tooltipFormatter)return this.tooltipFormatter;if(this.isObjectArrayData(this.data))return function(c){var f=""+c;return s.data.some(function($){return $[s.dataValue]===c&&(f=$[s.dataLabel],!0)}),f};if(this.isObjectData(this.data)){var o=this.data;return function(c){return o[c]}}},isNotSync:function(){var s=this.control.dotsValue;return Array.isArray(this.modelValue)?this.modelValue.length!==s.length||this.modelValue.some(function(o,c){return o!==s[c]}):this.modelValue!==s[0]},dragRange:function(){var s=this.dots[this.focusDotIndex-1],o=this.dots[this.focusDotIndex+1];return[s?s.pos:-1/0,o?o.pos:1/0]}},watch:{modelValue:function(){this.control&&!this.states.has(ie.Drag)&&this.isNotSync&&this.control.setValue(this.modelValue)}},methods:{isObjectData:function(s){return!!s&&Object.prototype.toString.call(s)==="[object Object]"},isObjectArrayData:function(s){return!!s&&Array.isArray(s)&&s.length>0&&ht(s[0])==="object"},bindEvent:function(){document.addEventListener("touchmove",this.dragMove,{passive:!1}),document.addEventListener("touchend",this.dragEnd,{passive:!1}),document.addEventListener("mousedown",this.blurHandle),document.addEventListener("mousemove",this.dragMove),document.addEventListener("mouseup",this.dragEnd),document.addEventListener("mouseleave",this.dragEnd),document.addEventListener("keydown",this.keydownHandle)},unbindEvent:function(){document.removeEventListener("touchmove",this.dragMove),document.removeEventListener("touchend",this.dragEnd),document.removeEventListener("mousedown",this.blurHandle),document.removeEventListener("mousemove",this.dragMove),document.removeEventListener("mouseup",this.dragEnd),document.removeEventListener("mouseleave",this.dragEnd),document.removeEventListener("keydown",this.keydownHandle)},setScale:function(){this.scale=new ae(Math.floor(this.isHorizontal?this.$el.offsetWidth:this.$el.offsetHeight)).multiply(this.zoom||1).divide(100).toNumber()},initControl:function(){var s=this;this.control=new Dn({value:this.modelValue,data:this.sliderData,enableCross:this.enableCross,fixed:this.fixed,max:this.max,min:this.min,interval:this.interval,minRange:this.minRange,maxRange:this.maxRange,order:this.order,marks:this.sliderMarks,included:this.included,process:this.process,adsorb:this.adsorb,dotOptions:this.dotOptions,onError:this.emitError}),["data","enableCross","fixed","max","min","interval","minRange","maxRange","order","marks","process","adsorb","included","dotOptions"].forEach(function(o){s.$watch(o,function(c){if(o==="data"&&Array.isArray(s.control.data)&&Array.isArray(c)&&s.control.data.length===c.length&&c.every(function(f,$){return f===s.control.data[$]}))return!1;switch(o){case"data":case"dataLabel":case"dataValue":s.control.data=s.sliderData;break;case"mark":s.control.marks=s.sliderMarks;break;default:s.control[o]=c}["data","max","min","interval"].indexOf(o)>-1&&s.control.syncDotsPos()})})},syncValueByPos:function(){var s=this.control.dotsValue;if(this.isDiff(s,Array.isArray(this.modelValue)?this.modelValue:[this.modelValue])){var o=s.length===1?s[0]:dt(s);this.$emit("change",o,this.focusDotIndex),this.$emit("update:modelValue",o)}},isDiff:function(s,o){return s.length!==o.length||s.some(function(c,f){return c!==o[f]})},emitError:function(s,o){this.silent||console.error("[VueSlider error]: ".concat(o)),this.$emit("error",s,o)},dragStartOnProcess:function(s){if(this.dragOnClick){this.setScale();var o=this.getPosByEvent(s),c=this.control.getRecentDot(o);if(this.dots[c].disabled)return;this.dragStart(c),this.control.setDotPos(o,this.focusDotIndex),this.lazy||this.syncValueByPos()}},dragStart:function(s){this.focusDotIndex=s,this.setScale(),this.states.add(ie.Drag),this.states.add(ie.Focus),this.$emit("drag-start",this.focusDotIndex)},dragMove:function(s){if(!this.states.has(ie.Drag))return!1;s.preventDefault();var o=this.getPosByEvent(s);this.isCrossDot(o),this.control.setDotPos(o,this.focusDotIndex),this.lazy||this.syncValueByPos();var c=this.control.dotsValue;this.$emit("dragging",c.length===1?c[0]:dt(c),this.focusDotIndex)},isCrossDot:function(s){if(this.canSort){var o=this.focusDotIndex,c=s;if(c>this.dragRange[1]?(c=this.dragRange[1],this.focusDotIndex++):c<this.dragRange[0]&&(c=this.dragRange[0],this.focusDotIndex--),o!==this.focusDotIndex){var f=this.$refs["dot-".concat(this.focusDotIndex)];f&&f.$el&&f.$el.focus(),this.control.setDotPos(c,o)}}},dragEnd:function(s){var o=this;if(!this.states.has(ie.Drag))return!1;setTimeout(function(){o.lazy&&o.syncValueByPos(),o.included&&o.isNotSync?o.control.setValue(o.modelValue):o.control.syncDotsPos(),o.states.delete(ie.Drag),o.useKeyboard&&!("targetTouches"in s)||o.states.delete(ie.Focus),o.$emit("drag-end",o.focusDotIndex)})},blurHandle:function(s){if(!this.states.has(ie.Focus)||!this.$refs.container||this.$refs.container.contains(s.target))return!1;this.states.delete(ie.Focus)},clickHandle:function(s){if(!this.clickable||this.disabled)return!1;if(!this.states.has(ie.Drag)){this.setScale();var o=this.getPosByEvent(s);this.setValueByPos(o)}},focus:function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;s.disabled||(this.states.add(ie.Focus),this.focusDotIndex=o)},blur:function(){this.states.delete(ie.Focus)},getValue:function(){var s=this.control.dotsValue;return s.length===1?s[0]:s},getIndex:function(){var s=this.control.dotsIndex;return s.length===1?s[0]:s},setValue:function(s){this.control.setValue(Array.isArray(s)?dt(s):[s]),this.syncValueByPos()},setIndex:function(s){var o=this,c=Array.isArray(s)?s.map(function(f){return o.control.getValueByIndex(f)}):this.control.getValueByIndex(s);this.setValue(c)},setValueByPos:function(s){var o=this,c=this.control.getRecentDot(s);if(this.disabled||this.dots[c].disabled)return!1;this.focusDotIndex=c,this.control.setDotPos(s,c),this.syncValueByPos(),this.useKeyboard&&this.states.add(ie.Focus),setTimeout(function(){o.included&&o.isNotSync?o.control.setValue(o.modelValue):o.control.syncDotsPos()})},keydownHandle:function(s){var o=this;if(!this.useKeyboard||!this.states.has(ie.Focus))return!1;var c=this.included&&this.marks,f=W(s,{direction:this.direction,max:c?this.control.markList.length-1:this.control.total,min:0,hook:this.keydownHook});if(f){s.preventDefault();var $=-1,R=0;c?(this.control.markList.some(function(B,ce){return B.value===o.control.dotsValue[o.focusDotIndex]&&($=f(ce),!0)}),$<0?$=0:$>this.control.markList.length-1&&($=this.control.markList.length-1),R=this.control.markList[$].pos):($=f(this.control.getIndexByValue(this.control.dotsValue[this.focusDotIndex])),R=this.control.parseValue(this.control.getValueByIndex($))),this.isCrossDot(R),this.control.setDotPos(R,this.focusDotIndex),this.syncValueByPos()}},getPosByEvent:function(s){return T(s,this.$el,this.isReverse,this.zoom)[this.isHorizontal?"x":"y"]/this.scale},renderSlot:function(s,o,c){var f=this.$slots[s];return f?f(o):c}},created:function(){this.initControl()},mounted:function(){this.bindEvent()},beforeUnmount:function(){this.unbindEvent()}}),gt=(0,O.Z)(Gn,[["render",y]]);gt.VueSliderMark=we,gt.VueSliderDot=I;var Wn=gt,Jn=Wn}(),u=u.default,u}()})})(pn);var fn=cs(pn.exports);const Vs={name:"audioPlayerUiDesktop",mixins:[ot],components:{VueSlider:fn},data:function(){return{store:this.$store.state}},computed:{cover(){return this.makeCoverUrl(this.$store.getters.audioPlayerBook.cover,500)},progress:{get(){return this.store.audioPlayer.progress},set(e){this.$compEmitter.emit("audio-player-scrubbed",{target:{value:e}})}}},mounted(){this.$store.commit("prop",{key:"preventScrolling",value:!0})},beforeUnmount(){this.$store.commit("prop",{key:"preventScrolling",value:!1})},methods:{swipeHandler(){this.$store.commit("prop",{key:"showMobilePlayer",value:!1})}}},Ns=e=>(it("data-v-05c91d38"),e=e(),at(),e),Is={id:"audio-player"},js={class:"inner-wrap"},zs={class:"cover-wrap"},Hs=Ns(()=>k("div",{class:"close-instructions"},[k("div",{class:"text"}," swipe down to close ")],-1)),Us={class:"cover-inner-wrap"},qs=["src"],Fs={class:"bottom"},Gs={class:"player-timeline"},Ws={class:"duration-wrapper"},Js={key:0,class:"time-display"},Ks={key:1,class:"time-display"},Xs={class:"player-buttons"},Ys={class:"play-pause"};function Qs(e,t,n,r,a,l){const u=tt("vue-slider"),h=hn,d=As,p=Ps,i=dn,m=Ae("touch");return ge((S(),C("div",Is,[k("div",js,[k("div",zs,[Hs,k("div",Us,[k("img",{class:"book-cover",src:l.cover,alt:"",draggable:"false"},null,8,qs)]),k("div",{class:"book-cover-bg",style:Ne({backgroundImage:`url('${l.cover}')`})},null,4)]),k("div",Fs,[k("div",Gs,[F(u,{style:{width:"100%"},modelValue:l.progress,"onUpdate:modelValue":t[0]||(t[0]=g=>l.progress=g),tooltip:"none"},null,8,["modelValue"]),k("div",Ws,[e.store.audioPlayer.timeDisplay?(S(),C("div",Js,be(e.store.audioPlayer.timeDisplay),1)):q("",!0),e.store.audioPlayer.timeDisplayLeft?(S(),C("div",Ks,"-"+be(e.store.audioPlayer.timeDisplayLeft),1)):q("",!0)])]),e.$store.getters.audioPlayerTitle?(S(),C("div",{key:0,class:"book",onClick:t[1]||(t[1]=(...g)=>e.openBook&&e.openBook(...g))},[k("span",null,be(e.$store.getters.audioPlayerTitle),1)])):q("",!0),k("div",Xs,[k("div",{class:"back",onClick:t[2]||(t[2]=g=>e.$compEmitter.emit("audio-player-seek-back"))},[F(h)]),k("div",Ys,[e.$store.state.audioPlayer.playing?(S(),C("div",{key:1,class:"pause",onClick:t[4]||(t[4]=g=>e.$compEmitter.emit("audio-player-pause"))},[F(p)])):(S(),C("div",{key:0,class:"play",onClick:t[3]||(t[3]=g=>e.$compEmitter.emit("audio-player-play"))},[F(d)]))]),k("div",{class:"forward",onClick:t[5]||(t[5]=g=>e.$compEmitter.emit("audio-player-seek-forward"))},[F(i)])])])])])),[[on,e.store.audioPlayer.audio],[m,l.swipeHandler,"swipe",{bottom:!0}],[m,l.swipeHandler,"swipe",{top:!0}]])}var Zs=fe(Vs,[["render",Qs],["__scopeId","data-v-05c91d38"]]);const er={viewBox:"0 0 320 512",width:"1.2em",height:"1.2em"},tr=k("path",{fill:"currentColor",d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256L34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},null,-1),nr=[tr];function sr(e,t){return S(),C("svg",er,nr)}var rr={name:"fa-solid-chevron-right",render:sr};const or={viewBox:"0 0 320 512",width:"1.2em",height:"1.2em"},ir=k("path",{fill:"currentColor",d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},null,-1),ar=[ir];function lr(e,t){return S(),C("svg",or,ar)}var cr={name:"fa-solid-chevron-left",render:lr};const ur={name:"backForwardBtns",props:["viewportFloat"],methods:{navigate:function(e){this.$store.state.navHistory[e].length>0&&(this.$store.commit("navHistory",{key:e,value:this.$route.name}),this.$router[e]())}}};function dr(e,t,n,r,a,l){const u=cr,h=rr;return S(),C("div",{class:pe(["mobile-back-btns-wrapper",{"viewport-float":n.viewportFloat}])},[k("div",{class:pe(["mobile-back-btns",{disabled:e.$store.state.navHistory.back.length<1}]),onClick:t[0]||(t[0]=Dt(d=>l.navigate("back"),["prevent"]))},[F(u)],2),k("div",{class:pe(["mobile-back-btns",{disabled:e.$store.state.navHistory.forward.length<1}]),onClick:t[1]||(t[1]=Dt(d=>l.navigate("forward"),["prevent"]))},[F(h)],2)],2)}var mn=fe(ur,[["render",dr],["__scopeId","data-v-7ea92576"]]);const hr={viewBox:"0 0 448 512",width:"1.2em",height:"1.2em"},pr=k("path",{fill:"currentColor",d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},null,-1),fr=[pr];function mr(e,t){return S(),C("svg",hr,fr)}var gr={name:"fa-solid-bars",render:mr};const vr={viewBox:"0 0 256 256",width:"1.2em",height:"1.2em"},yr=k("path",{fill:"currentColor",d:"M240 128a16.1 16.1 0 0 1-7.7 13.7l-144 87.9a15.5 15.5 0 0 1-16.1.3A15.8 15.8 0 0 1 64 216V40a15.8 15.8 0 0 1 8.2-13.9a15.5 15.5 0 0 1 16.1.3l144 87.9A16.1 16.1 0 0 1 240 128Z"},null,-1),br=[yr];function _r(e,t){return S(),C("svg",vr,br)}var kr={name:"ph-play-fill",render:_r};const wr={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},Sr=k("path",{fill:"currentColor",d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128c0-70.7 57.2-128 128-128c70.7 0 128 57.2 128 128c0 70.7-57.2 128-128 128z"},null,-1),$r=[Sr];function Cr(e,t){return S(),C("svg",wr,$r)}var gn={name:"fa-solid-search",render:Cr};const Pr={name:"mobileMenuFloaters",props:["mobileMenuOpen","mobileThreshold"],data:function(){return{store:this.$store.state}},computed:{showMobilePlayerButton(){return!this.mobileMenuOpen&&this.mobileThreshold&&!this.store.showMobilePlayer&&this.store.audioPlayer.audio}}},Er={class:"second-row"};function xr(e,t,n,r,a,l){const u=gn,h=kr,d=mn,p=gr;return S(),C("div",{id:"mobile-menu-floaters",class:pe({mobile:n.mobileMenuOpen})},[k("div",Er,[e.$store.state.searchMounted&&!n.mobileMenuOpen?(S(),C("div",{key:0,class:"search-btn",onClick:t[0]||(t[0]=i=>e.$emit("startSearching")),style:Ne({top:l.showMobilePlayerButton?"-93px":"-46px"})},[F(u)],4)):q("",!0),l.showMobilePlayerButton?(S(),C("div",{key:1,class:"mobile-player-button",onClick:t[1]||(t[1]=i=>{e.$store.commit("prop",{key:"showMobilePlayer",value:!0})})},[F(h)])):q("",!0),e.$store.state.displayMode&&!n.mobileMenuOpen?(S(),re(d,{key:2})):q("",!0),k("div",{class:"burger-menu",onClick:t[2]||(t[2]=i=>e.$emit("update:mobileMenuOpen",!n.mobileMenuOpen))},[F(p,{class:"brgr-btn"})])])],2)}var Rr=fe(Pr,[["render",xr]]);const Or={viewBox:"0 0 352 512",width:"1.2em",height:"1.2em"},Ar=k("path",{fill:"currentColor",d:"m242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28L75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256L9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},null,-1),Mr=[Ar];function Lr(e,t){return S(),C("svg",Or,Mr)}var vn={name:"fa-solid-times",render:Lr};const Tr={viewBox:"0 0 320 512",width:"1.2em",height:"1.2em"},Br=k("path",{fill:"currentColor",d:"M48 64C21.5 64 0 85.5 0 112v288c0 26.5 21.5 48 48 48h32c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H48zm192 0c-26.5 0-48 21.5-48 48v288c0 26.5 21.5 48 48 48h32c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48h-32z"},null,-1),Dr=[Br];function Vr(e,t){return S(),C("svg",Tr,Dr)}var Nr={name:"fa6-solid-pause",render:Vr};const Ir={viewBox:"0 0 384 512",width:"1.2em",height:"1.2em"},jr=k("path",{fill:"currentColor",d:"M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80v352c0 17.4 9.4 33.4 24.5 41.9S58.2 482 73 473l288-176c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"},null,-1),zr=[jr];function Hr(e,t){return S(),C("svg",Ir,zr)}var Ur={name:"fa6-solid-play",render:Hr};const qr={name:"audioPlayerUiDesktop",mixins:[ot],components:{VueSlider:fn},data:function(){return{store:this.$store.state}},watch:{"store.audioPlayer.audio"(e){this.$nextTick(()=>{this.$store.commit("prop",{key:"desktopPlayerHeight",value:e?this.$refs.player.offsetHeight/2+"px":null})})}},computed:{progress:{get(){return this.store.audioPlayer.progress},set(e){this.$compEmitter.emit("audio-player-scrubbed",{target:{value:e}})}}}},Fr={id:"audio-player",ref:"player"},Gr={class:"inner-wrap"},Wr={class:"player-innards"},Jr=["src","content"],Kr={key:0,class:"time-display left"},Xr={key:1,class:"time-display right"},Yr={class:"player-buttons"};function Qr(e,t,n,r,a,l){const u=tt("vue-slider"),h=Ur,d=Nr,p=vn,i=hn,m=dn,g=Ae("tippy");return ge((S(),C("div",Fr,[k("div",Gr,[k("div",Wr,[ge(k("img",{class:"book-cover",src:e.makeCoverUrl(e.$store.getters.audioPlayerBook.cover,280),alt:"",content:(e.$store.state.audioPlayer.sample?"<strong>sample</strong> | ":"")+e.$store.getters.audioPlayerTitle},null,8,Jr),[[g,{placement:"right",flipBehavior:["right","bottom"]}]]),e.store.audioPlayer.timeDisplay?(S(),C("div",Kr,be(e.store.audioPlayer.timeDisplay),1)):q("",!0),F(u,{style:{width:"100%"},modelValue:l.progress,"onUpdate:modelValue":t[0]||(t[0]=y=>l.progress=y),tooltip:"none"},null,8,["modelValue"]),e.store.audioPlayer.timeDisplayLeft?(S(),C("div",Xr,"-"+be(e.store.audioPlayer.timeDisplayLeft),1)):q("",!0),k("div",Yr,[e.$store.state.audioPlayer.playing?(S(),C("div",{key:1,class:"pause",onClick:t[2]||(t[2]=y=>e.$compEmitter.emit("audio-player-pause"))},[F(d)])):(S(),C("div",{key:0,class:"play",onClick:t[1]||(t[1]=y=>e.$compEmitter.emit("audio-player-play"))},[F(h)])),k("div",{class:"stop",onClick:t[3]||(t[3]=y=>e.$compEmitter.emit("audio-player-stop"))},[F(p)]),k("div",{class:"back",onClick:t[4]||(t[4]=y=>e.$compEmitter.emit("audio-player-seek-back"))},[F(i)]),k("div",{class:"forward",onClick:t[5]||(t[5]=y=>e.$compEmitter.emit("audio-player-seek-forward"))},[F(m)])])])])],512)),[[on,e.store.audioPlayer.audio]])}var Zr=fe(qr,[["render",Qr],["__scopeId","data-v-ba6d5ef2"]]);const eo={viewBox:"0 0 640 512",width:"1.2em",height:"1.2em"},to=k("path",{fill:"currentColor",d:"M579.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0l112.3-112.3zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5l112.2-112.3c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z"},null,-1),no=[to];function so(e,t){return S(),C("svg",eo,no)}var ro={name:"fa6-solid-link",render:so};const oo={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},io=k("path",{fill:"currentColor",d:"M640 384v256H384V384h256zm64 0h192v256H704V384zm-64 512H384V704h256v192zm64 0V704h192v192H704zm-64-768v192H384V128h256zm64 0h192v192H704V128zM320 384v256H128V384h192zm0 512H128V704h192v192zm0-768v192H128V128h192z"},null,-1),ao=[io];function lo(e,t){return S(),C("svg",oo,ao)}var yn={name:"ep-grid",render:lo};const co={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},uo=k("path",{fill:"currentColor",d:"M4 3h16a2 2 0 0 1 2 2v15a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2m0 4v3h4V7H4m6 0v3h4V7h-4m10 3V7h-4v3h4M4 12v3h4v-3H4m0 8h4v-3H4v3m6-8v3h4v-3h-4m0 8h4v-3h-4v3m10 0v-3h-4v3h4m0-8h-4v3h4v-3Z"},null,-1),ho=[uo];function po(e,t){return S(),C("svg",co,ho)}var fo={name:"mdi-table-large",render:po};const mo={name:"ViewModeSwitcher",props:["justIcon"],data:function(){return{sticky:this.$store.state.sticky,viewModes:["grid","spreadsheet"]}},methods:{changeViewMode:function(){const e=this;let t=_.findIndex(this.viewModes,function(r){return r===e.sticky.viewMode});t+1>this.viewModes.length-1?t=0:t=t+1;const n=this.viewModes[t];this.$store.commit("stickyProp",{key:"viewMode",value:n}),this.$updateQueries({y:null,view:n})}}},go=["content"];function vo(e,t,n,r,a,l){const u=fo,h=yn,d=Ae("tippy");return ge((S(),C("div",{class:pe(["view-mode-switcher icon",{"no-style":n.justIcon}]),onClick:t[0]||(t[0]=(...p)=>l.changeViewMode&&l.changeViewMode(...p)),content:"Change to <strong>"+(e.sticky.viewMode==="grid"?"spreadsheet":"grid")+"</strong> view"},[e.sticky.viewMode==="grid"?(S(),re(u,{key:0,class:"icon"})):e.sticky.viewMode==="spreadsheet"?(S(),re(h,{key:1,class:"icon"})):q("",!0)],10,go)),[[d,{allowHTML:!0}]])}var yo=fe(mo,[["render",vo]]);const bo={props:["float"],methods:{startSearching(){this.$compEmitter.emit("ios-auto-zoom-disable"),this.$compEmitter.emit("search-focus")}}};function _o(e,t,n,r,a,l){const u=gn,h=Ae("tippy");return e.$store.state.searchMounted,ge((S(),C("div",{key:0,class:pe(["search-btn icon",{float:n.float}]),onClick:t[0]||(t[0]=(...d)=>l.startSearching&&l.startSearching(...d)),content:`
    Click to scroll up and search. <br>
    Read about advanced search operators 
    <a target="_blank" rel="noopener noreferrer" href="https://joonaspaakko.gitbook.io/audible-library-extractor/gallery/advanced-search">
      here
    </a>.`},[F(u)],2)),[[h,{interactive:!0,allowHTML:!0}]])}var ko=fe(bo,[["render",_o],["__scopeId","data-v-3a7ede6c"]]);const wo={viewBox:"0 0 384 512",width:"1.2em",height:"1.2em"},So=k("path",{fill:"currentColor",d:"M223.5 32C100 32 0 132.3 0 256s100 224 223.5 224c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"},null,-1),$o=[So];function Co(e,t){return S(),C("svg",wo,$o)}var Po={name:"fa6-solid-moon",render:Co};const Eo={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},xo=k("path",{fill:"currentColor",d:"M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391l-19.9 107.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391L13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256L2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121l19.9-107.9c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1l90.3-62.3c4.5-3.1 10.2-3.7 15.2-1.6zM352 256c0 53-43 96-96 96s-96-43-96-96s43-96 96-96s96 43 96 96zm32 0c0-70.7-57.3-128-128-128s-128 57.3-128 128s57.3 128 128 128s128-57.3 128-128z"},null,-1),Ro=[xo];function Oo(e,t){return S(),C("svg",Eo,Ro)}var Ao={name:"fa6-solid-sun",render:Oo};const Mo={name:"lightSwitch",data:function(){return{tippyContent:""}},created:function(){this.lightSwitchToggle(!0)},methods:{lightSwitchToggle:function(e){e?this.autoLightsOff():(this.$store.commit("stickyProp",{key:"lightSwitch",value:this.$store.state.sticky.lightSwitch?0:1}),this.$store.state.sticky.lightSwitchSetByUser||this.$store.commit("stickyProp",{key:"lightSwitchSetByUser",value:!0}));const t=document.querySelector("html");t.classList.remove("theme-light"),t.classList.remove("theme-dark"),t.classList.add(this.$store.state.sticky.lightSwitch?"theme-light":"theme-dark")},autoLightsOff:function(){window.matchMedia("(prefers-color-scheme)").media!=="not all"&&this.$store.state.sticky.lightSwitch&&!this.$store.state.sticky.lightSwitchSetByUser&&this.$store.commit("stickyProp",{key:"lightSwitch",value:0})}}},Lo={class:"light-switch text-button"};function To(e,t,n,r,a,l){const u=Ao,h=Po;return S(),C("div",Lo,[k("div",{class:"icon",onClick:t[0]||(t[0]=d=>l.lightSwitchToggle(!1))},[e.$store.state.sticky.lightSwitch?(S(),re(u,{key:0})):(S(),re(h,{key:1}))])])}var Bo=fe(Mo,[["render",To],["__scopeId","data-v-f55d5b5a"]]);const Do={name:"menuLooper",props:["routes","childRoutes","mobileMenuOpen","inRoot","desktopMenu"],data:function(){return{menuOpen:!0,copiedToClipboard:!1}},methods:{getHrefAttr(e){return e.tag==="a"?"href":"to"},itemActive(e){const t=this.$route.name;return t===e.name||_.find(e.children,{name:t})?"router-link-active":null},subItemActive(e){const t=this.$route.name;return _.find(e.childItems,function(r){return t===r.name||_.find(r.children,{name:t})})?"router-link-active":null},getRoutePath(e){return _.get(e,"path")?{name:_.get(e,"name")||_.get(e,"children[0].name"),query:{refresh:!0}}:_.get(e,"href")},getRouteName(e){if(e.altName)return e.altName(e);{const t=_.get(e,"children[0].meta.title")||_.get(e,"children[0].name")||e.name;return _.get(e,"meta.nestedGroup")==="extension-tools"?t:_.startCase(t)}},closeMenu(){this.menuOpen=!1,this.$nextTick(function(){this.menuOpen=!0})},additionalClick(e){this.mobileMenuOpen?this.$emit("update:mobileMenuOpen",!this.mobileMenuOpen):this.$emit("closeMenu")},copyToClipboard(){navigator.clipboard.writeText(window.location.href);const e=_.get(this.$refs,"copyToClipboard.$el")||_.get(this.$refs,"copyToClipboard.$el");e._tippy.show(),setTimeout(()=>{e._tippy.hide()},2e3)}}},Vo={key:0},No={key:1,class:"mobile-menu-top-spacer"},Io=["onClick"],jo={key:0,class:"menu-item-icon"},zo=["innerHTML"],Ho={key:0,class:"sub-menu"},Uo={key:2,class:"menu-icon-toolbar"},qo={key:0},Fo={key:1},Go={key:2};function Wo(e,t,n,r,a,l){const u=tt("menuLooper"),h=Bo,d=ko,p=yo,i=ro,m=Zr,g=Ae("tippy");return S(),C("div",{class:pe(["menu-items",{"has-sub-menu":n.childRoutes,mobileMenu:n.mobileMenuOpen}])},[e.menuOpen?(S(),C("div",Vo,[n.mobileMenuOpen?(S(),C("div",{key:0,class:"mobile-menu-top-filler",onClick:t[0]||(t[0]=y=>e.$emit("update:mobileMenuOpen",!n.mobileMenuOpen))})):q("",!0),n.mobileMenuOpen?(S(),C("div",No)):q("",!0),(S(!0),C(Ie,null,je(n.routes,y=>ge((S(),re(an(y.tag||"router-link"),Zn({tabindex:"0",key:y.path,[l.getHrefAttr(y)||""]:l.getRoutePath(y),target:y.href?"_blank":null,class:["menu-item",[y.meta.groupName,l.itemActive(y),l.subItemActive(y),y.disabled||(y.condition?!y.condition():null)?"disabled":"",y.highlight?"highlight":"null"]],content:typeof y.tippy=="function"?y.tippy():y.tippy,onClick:P=>y.click?y.click(y):null}),{default:Pt(()=>[k("div",{class:"menu-item-inner",onClick:P=>l.additionalClick(y)},[y.meta.icon?(S(),C("span",jo,[k("i",{class:pe(y.meta.icon)},null,2)])):q("",!0),k("span",{class:"menu-item-text",innerHTML:l.getRouteName(y)},null,8,zo)],8,Io),y.childItems?(S(),C("div",Ho,[F(u,{routes:y.childItems,childRoutes:y.childItems,onCloseMenu:l.closeMenu},null,8,["routes","childRoutes","onCloseMenu"])])):q("",!0)]),_:2},1040,["target","class","content","onClick"])),[[g,{placement:"left",flipBehavior:["left","top","bottom"],maxWidth:400}]])),128)),n.inRoot?(S(),C("div",Uo,[k("div",null,[F(h)]),n.mobileMenuOpen?q("",!0):(S(),C("div",qo,[F(d)])),n.mobileMenuOpen?(S(),C("div",Fo,[e.$store.state.searchMounted?(S(),re(p,{key:0,justIcon:!0})):q("",!0)])):q("",!0),n.mobileMenuOpen?(S(),C("div",Go,[ge(F(i,{class:"icon",onClick:t[1]||(t[1]=y=>l.copyToClipboard()),content:"Page URL copied to clipboard!",ref:"copyToClipboard"},null,512),[[g,{trigger:"manual"}]])])):q("",!0)])):q("",!0)])):q("",!0),n.inRoot&&n.desktopMenu?(S(),re(m,{key:1})):q("",!0)],2)}var Jo=fe(Do,[["render",Wo],["__scopeId","data-v-6c173dab"]]);const Ko={name:"modal",props:["toggled"],data:function(){return{modalOpen:!0}},created:function(){},methods:{close:function(){this.$emit("closeModal")},closeOverlay:function(e){let t=this;(e.target===this.$refs.modalGrandpa||e.target===this.$refs.modalPapa)&&t.close()}}},Xo={class:"outer-wrap",ref:"modalPapa"},Yo={class:"inner-wrap"};function Qo(e,t,n,r,a,l){const u=vn,h=Ae("shortkey");return S(),C("div",{id:"modal-wrapper",ref:"modalGrandpa",onClick:t[2]||(t[2]=(...d)=>l.closeOverlay&&l.closeOverlay(...d))},[k("div",Xo,[k("div",Yo,[es(e.$slots,"default"),ge((S(),C("div",{class:"close-btn",onClick:t[0]||(t[0]=(...d)=>l.close&&l.close(...d)),onShortkey:t[1]||(t[1]=(...d)=>l.close&&l.close(...d))},[F(u)],32)),[[h,["esc"],void 0,{once:!0}]])])],512)],512)}var ct=fe(Ko,[["render",Qo]]);const Zo={viewBox:"0 0 16 16",width:"1.2em",height:"1.2em"},ei=k("path",{fill:"currentColor","fill-rule":"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59c.4.07.55-.17.55-.38c0-.19-.01-.82-.01-1.49c-2.01.37-2.53-.49-2.69-.94c-.09-.23-.48-.94-.82-1.13c-.28-.15-.68-.52-.01-.53c.63-.01 1.08.58 1.23.82c.72 1.21 1.87.87 2.33.66c.07-.52.28-.87.51-1.07c-1.78-.2-3.64-.89-3.64-3.95c0-.87.31-1.59.82-2.15c-.08-.2-.36-1.02.08-2.12c0 0 .67-.21 2.2.82c.64-.18 1.32-.27 2-.27c.68 0 1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82c.44 1.1.16 1.92.08 2.12c.51.56.82 1.27.82 2.15c0 3.07-1.87 3.75-3.65 3.95c.29.25.54.73.54 1.48c0 1.07-.01 1.93-.01 2.2c0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"},null,-1),ti=[ei];function ni(e,t){return S(),C("svg",Zo,ti)}var si={name:"octicon-mark-github16",render:ni};const ri={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},oi=k("path",{fill:"currentColor",d:"M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32v242.7l-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7V32zM64 352c-35.3 0-64 28.7-64 64v32c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64v-32c0-35.3-28.7-64-64-64H346.5l-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352H64zm368 104c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"},null,-1),ii=[oi];function ai(e,t){return S(),C("svg",ri,ii)}var bn={name:"fa6-solid-download",render:ai};const li={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ci=ts('<g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"><path stroke-dasharray="2 4" stroke-dashoffset="6" d="M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21"><animate attributeName="stroke-dashoffset" dur="0.6s" repeatCount="indefinite" values="6;0"></animate></path><path stroke-dasharray="30" stroke-dashoffset="30" d="M12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.1s" dur="0.3s" values="30;0"></animate></path><path stroke-dasharray="10" stroke-dashoffset="10" d="M12 8v7.5"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.5s" dur="0.2s" values="10;0"></animate></path><path stroke-dasharray="6" stroke-dashoffset="6" d="M12 15.5l3.5 -3.5M12 15.5l-3.5 -3.5"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.7s" dur="0.2s" values="6;0"></animate></path></g>',1),ui=[ci];function di(e,t){return S(),C("svg",li,ui)}var hi={name:"line-md-downloading-loop",render:di};const pi={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},fi=k("path",{fill:"currentColor",d:"m173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69L432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},null,-1),mi=[fi];function gi(e,t){return S(),C("svg",pi,mi)}var vi={name:"fa-solid-check",render:gi};const yi={name:"saveGallery",components:{modal:ct},data:function(){return{files:[],dataSources:[{checked:!0,disabled:!1,key:"Library"},{checked:!0,disabled:!1,key:"Categories",parent:["Library","Wishlist"],subPage:!0},{checked:!0,disabled:!1,key:"Authors",parent:["Library","Wishlist"],subPage:!0},{checked:!0,disabled:!1,key:"Publishers",parent:["Library","Wishlist"],subPage:!0},{checked:!0,disabled:!1,key:"Collections",parent:"Library"},{checked:!0,disabled:!1,key:"Series",parent:["Library","Wishlist"],subPage:!0},{checked:!0,disabled:!1,key:"Narrators",parent:["Library","Wishlist"],subPage:!0},{checked:!0,disabled:!1,key:"Wishlist"},{checked:!0,disabled:!0,key:"Export archived books",extra:!0,tippy:'If unchecked, the "archive" collection and all archived books are excluded from the export and "My books in the series" will list archived books as not owned. This option is disabled if the archive is empty.'}],zip:null,cacheBuster:null,bundling:!1,saveBtnEnabled:!0,progressWidth:null,iconSize:20}},created:function(){this.files=window.chunksFilePaths;let e=this;this.$store.state.sticky.exportSettingsGallery&&_.each(this.$store.state.sticky.exportSettingsGallery,function(l){var u=_.find(e.dataSources,{key:l.key});u.checked=l.checked,u.disabled=l.disabled});let t=_.find(this.dataSources,{key:"Library"});t.disabled=!this.$store.state.library.books;let n=_.find(this.dataSources,{key:"Wishlist"});n.disabled=!this.$store.state.library.wishlist;let r=this.$store.state.library.collections,a=r?_.find(r,{id:"__ARCHIVE"}):null;if(a&&a.books.length>0){let l=_.find(this.dataSources,{key:"Export archived books"});l&&(l.disabled=!1)}},mounted:function(){let e=this;this.iconSize=this.$refs.textWrapper.offsetHeight,e.$store.getters.saveStandaloneAfter&&this.$nextTick(function(){try{let t=JSON.parse(JSON.stringify(e.$store.state.extractSettings)),n=_.find(t.extraSettings,{name:"saveStandaloneAfter"});n.deactivated=!0,this.$store.commit("prop",{key:"extractSettings",value:t}),chrome.storage.local.set({config:t}).then(function(){e.saveButtonClicked()})}catch{}})},beforeUnmount:function(){this.zip=null,this.cacheBuster=null},computed:{chunkSource:function(){return _.chunk(this.dataSources,4)}},methods:{cancelZipping:function(){window.location.reload()},divideLargerDatapoints:function(e,t){let n=this;_.each(t,function(r){let a="";r.peopleAlsoBought&&r.asin&&(a+="window.peopleAlsoBoughtJSON = "+JSON.stringify(r.peopleAlsoBought)+`; 
`,delete r.peopleAlsoBought),r.summary&&r.asin&&(a+="window.bookSummaryJSON = "+JSON.stringify(r.summary)+`; 
`,delete r.summary),a!==""&&e.file("data/split-book-data/"+r.asin+"."+n.cacheBuster+".js",a)})},saveButtonClicked:async function(){const e=this;if(!(this.bundling||this.$store.state.devMode))try{e.bundling=!0,e.$store.commit("prop",{key:"bundlingGallery",value:!0}),e.cacheBuster=this.runCachebuster(),e.zip=new JSZip;const t=e.zip;t.file(".nojekyll","");let n=this.excludeData(JSON.parse(JSON.stringify(this.$store.state.library)));n.extras.cacheID=e.cacheBuster;let r={books:!!n.books,series:!!n.series,collections:!!n.collections,wishlist:!!n.wishlist,extras:n.extras},a=`
          if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.${e.cacheBuster}.js')
            .then(function(registration) {
              console.log('Registration successful, scope is:', registration.scope);
            })
            .catch(function(error) {
              console.log('Service worker registration failed, error:', error);
            });
          }
        `;a=!1?"<script>"+a+"<\/script>":"";const u=function(p,i){let m="^assets\\/"+p+"\\..+\\."+(i||"js")+"$";return m=new RegExp(m),_.find(e.files,g=>g.match(m))},h='<!DOCTYPE html><html lang="en" class="theme-dark standalone-gallery" style="background: #171717; min-height: 100%;"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta http-equiv="Cache-control" content="no-cache, no-store, must-revalidate"><meta http-equiv="Pragma" content="no-cache"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="mobile-web-app-capable" content="yes"><link rel="apple-touch-icon" sizes="180x180" href="favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicons/favicon-16x16.png"><link rel="manifest" href="app.webmanifest"><link rel="mask-icon" href="favicons/safari-pinned-tab.svg" color="#f29a33"><link rel="shortcut icon" href="favicons/favicon.ico"><meta name="msapplication-TileColor" content="#222222"><meta name="msapplication-config" content="favicons/browserconfig.xml"><meta name="theme-color" content="#f29a33"><title>My Audible Library</title>'+a+'<link id="ale-css" rel="stylesheet" href="'+u("gallery","css")+'"></head><body><div id="audible-library-extractor" data-version="'+this.$store.state.version+'" data-cache-id="'+e.cacheBuster+'"></div><script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"><\/script><script id="ale-js" src="'+u("gallery","js")+'" type="module"><\/script><noscript>This library requires javascript to work!</noscript></body></html>';t.file("index.html",h),t.file("ALE-Documentation.url",`[InternetShortcut]
URL=https://joonaspaakko.gitbook.io/audible-library-extractor/`),n.wishlist&&n.books?this.divideLargerDatapoints(t,_.unionBy(n.books,n.wishlist,"asin")):(n.wishlist&&this.divideLargerDatapoints(t,n.wishlist),n.books&&this.divideLargerDatapoints(t,n.books)),t.file("data/temp-data."+e.cacheBuster+".js","window.tempDataJSON = "+JSON.stringify(r)+";"),n.books&&t.file("data/library."+e.cacheBuster+".js","window.libraryJSON = "+JSON.stringify(n.books)+";"),n.collections&&t.file("data/collections."+e.cacheBuster+".js","window.collectionsJSON = "+JSON.stringify(n.collections)+";"),n.series&&t.file("data/series."+e.cacheBuster+".js","window.seriesJSON = "+JSON.stringify(n.series)+";"),n.wishlist&&t.file("data/wishlist."+e.cacheBuster+".js","window.wishlistJSON = "+JSON.stringify(n.wishlist)+";"),console.log(_.cloneDeep(e.files)),_.remove(e.files,function(p){const i=p.replace(/^assets\//,"");if(i==="gallery.html")return!0;const m=[!!i.match(/^gallery/),!!i.match(/^content-script-helpers/),!!i.match(/^howler/),!!i.match(/^lodash/),!!i.match(/^tippy/),!!i.match(/^jquery/),!!i.match(/^fuse.esm/),!!i.match(/^index\..*\.js$/),!!i.match(/^Roboto/i),!!i.match(/^Inconsolata/i),!!i.match(/^vue\.runtime\.esm-bundler/i),!!i.match(/^fa-.+(woff2?|ttf)/)];return!_.includes(m,!0)}),e.files=e.files.concat(["favicons/android-chrome-192x192.png","favicons/android-chrome-512x512.png","favicons/apple-touch-icon.png","favicons/browserconfig.xml","favicons/favicon-16x16.png","favicons/favicon-32x32.png","favicons/favicon.ico","favicons/mstile-150x150.png","favicons/safari-pinned-tab.svg","app.webmanifest"]),console.log(e.files);for(let p of e.files){const i=await JSZipUtils.getBinaryContent(p);t.file(p,i,{binary:!0})}const d=await t.generateAsync({type:"blob",streamFiles:!0},function(i){e.progressWidth=i.percent+"%"});saveAs(d,"ALE-gallery.zip")}finally{setTimeout(function(){e.bundling=!1,e.$store.commit("prop",{key:"bundlingGallery",value:!1}),e.progressWidth=0},1e3)}},sourceChecked:function(e,t){let n=this,r=_.filter(this.dataSources,function(l){return _.isArray(l.parent)?_.includes(l.parent,t.key):l.parent===t.key});_.each(r,function(l){if(_.isArray(l.parent)){let u=_.map(l.parent,function(d){return _.find(n.dataSources,{key:d})}),h=_.filter(u,function(d){return d.checked&&!d.disabled}).length>0;l.disabled=!e.target.checked&&!h}else l.disabled=!e.target.checked});let a=_.filter(this.dataSources,{checked:!0,disabled:!1});this.saveBtnEnabled=!!a.length,this.$store.commit("stickyProp",{key:"exportSettingsGallery",value:this.dataSources})},excludeData:function(e){return _.each(this.dataSources,function(t){var n=t.key.toLowerCase(),r=!t.checked||t.disabled;switch(t.key){case"Library":r&&(delete e.books,delete e.series,delete e.collections);break;case"Series":r&&delete e.series;break;case"Collections":r&&delete e.collections;break;case"Wishlist":r&&delete e.wishlist;break;case"Export archived books":if(r){let a=e.collections,l=a?_.find(a,{id:"__ARCHIVE"}):null;l&&l.books.length>0&&e.books&&(_.remove(e.books,"archived"),e.series&&(_.each(e.series,function(u){u.books.length>0&&_.remove(u.books,function(h){return _.includes(l.books,h)}),u.allBooks.length>0&&_.each(u.allBooks,function(h){_.includes(l.books,h.asin)&&(h.notInLibrary=!0)})}),_.remove(e.series,function(u){return u.books.length===0})),_.each(a,function(u){_.remove(u.books,function(h){return _.includes(l.books,h)})})),l&&_.remove(a,function(u){return u.id==="__ARCHIVE"||!u.books||u.books.length===0})}break}t.subPage&&(e.extras.subPageStates=e.extras.subPageStates||[],e.extras.subPageStates.push({key:n,enabled:!r}))}),e},serviceWorker:function(){return`
      importScripts('https://storage.googleapis.com/workbox-cdn/releases/6.1.5/workbox-sw.js');

      workbox.setConfig({
        debug: false,
      });

      const {registerRoute} = workbox.routing;
      const {
        NetworkFirst,
        StaleWhileRevalidate,
        CacheFirst
      } = workbox.strategies;
      const CacheableResponsePlugin = workbox.cacheableResponse.CacheableResponsePlugin;
      const ExpirationPlugin = workbox.expiration.ExpirationPlugin;

      // Cache page navigations (html) with a Network First strategy
      registerRoute(
        // Check to see if the request is a navigation to a new page
        ({ request }) => request.mode === 'navigate',
        // Use a Network First caching strategy
        new NetworkFirst({
          // Put all cached files in a cache named 'pages'
          cacheName: 'pages',
          plugins: [
            // Ensure that only requests that result in a 200 status are cached
            new CacheableResponsePlugin({
              statuses: [200],
            }),
          ],
        }),
      );

      // Cache CSS, JS, and Web Worker requests with a Stale While Revalidate strategy
      registerRoute(
        // Check to see if the request's destination is style for stylesheets, script for JavaScript, or worker for web worker
        ({ request }) =>
          request.destination === 'style' ||
          request.destination === 'script' ||
          request.destination === 'worker',
        // Use a Stale While Revalidate caching strategy
        new StaleWhileRevalidate({
          // Put all cached files in a cache named 'assets'
          cacheName: 'assets',
          plugins: [
            // Ensure that only requests that result in a 200 status are cached
            new CacheableResponsePlugin({
              statuses: [200],
            }),
          ],
        }),
      );

      // Cache images with a Cache First strategy
      registerRoute(
        // Check to see if the request's destination is style for an image
        ({ url, request }) =>
          (request.destination === 'image' && url.origin !== 'https://m.media-amazon.com') ||
          (request.destination === 'image' && url.origin === 'https://m.media-amazon.com' && !url.href.match(/_SL200_/) && !url.href.match(/_SL150_/)),
        // Use a Cache First caching strategy
        new CacheFirst({
          // Put all cached files in a cache named 'images'
          cacheName: 'images',
          plugins: [
            // Ensure that only requests that result in a 200 status are cached
            new CacheableResponsePlugin({
              statuses: [200],
            }),
            // Don't cache more than 50 items, and expire them after 30 days
            new ExpirationPlugin({
              maxEntries: 50,
              maxAgeSeconds: 60 * 60 * 24 * 30, // 30 Days
            }),
          ],
        }),
      );

      // Cache the Google Fonts stylesheets with a stale-while-revalidate strategy.
      registerRoute(
        ({url}) => url.origin === 'https://fonts.googleapis.com',
        new StaleWhileRevalidate({
          cacheName: 'google-fonts-stylesheets',
        })
      );

      // Cache the underlying font files with a cache-first strategy for 1 year.
      registerRoute(
        ({url}) => url.origin === 'https://fonts.gstatic.com',
        new CacheFirst({
          cacheName: 'google-fonts-webfonts',
          plugins: [
            new CacheableResponsePlugin({
              statuses: [0, 200],
            }),
            new ExpirationPlugin({
              maxAgeSeconds: 60 * 60 * 24 * 365,
              maxEntries: 30,
            }),
          ],
        })
      );
      `},runCachebuster:function(){return new Date().getTime()}}},Me=e=>(it("data-v-143fa700"),e=e(),at(),e),bi={class:"export-group"},_i={class:"top-wrapper"},ki={class:"text-wrapper",ref:"textWrapper"},wi=Me(()=>k("h2",null,"Stand-alone gallery",-1)),Si=Me(()=>k("div",{class:"description"}," This saves the gallery as a web page that can be uploaded online and shared with others. ",-1)),$i=[wi,Si],Ci=Me(()=>k("h3",null,"Include:",-1)),Pi={class:"options opt-groups"},Ei=["data-extra","content"],xi=["disabled","onUpdate:modelValue","onChange"],Ri={class:"visual-checkbox"},Oi={class:"icon"},Ai={class:"buttons-footer"},Mi={class:"btn-wrapper"},Li={key:0,style:{color:"#999","font-weight":"bold","margin-bottom":"5px"}},Ti=lt(" Saving the standalone gallery is only possible "),Bi=Me(()=>k("br",null,null,-1)),Di=lt(' in "production" builds ('),Vi=Me(()=>k("code",null,"yarn vite build",-1)),Ni=lt(") "),Ii=[Ti,Bi,Di,Vi,Ni],ji=["disabled"],zi={key:0},Hi=lt(" ALE-gallery.zip"),Ui={class:"github-btn",target:"_blank",rel:"noopener noreferrer",href:"https://joonaspaakko.gitbook.io/audible-library-extractor/sharing/uploading-to-github"},qi=Me(()=>k("span",null,"Upload instructions",-1)),Fi={class:"github-btn",target:"_blank",rel:"noopener noreferrer",href:"https://joonaspaakko.gitbook.io/audible-library-extractor/sharing/uploading-to-github/updating-gallery-in-github"},Gi=Me(()=>k("span",null,"Update instructions",-1));function Wi(e,t,n,r,a,l){const u=yn,h=vi,d=hi,p=bn,i=si,m=ct,g=Ae("tippy");return S(),re(m,{onCloseModal:t[2]||(t[2]=y=>e.$emit("closeComp"))},{default:Pt(()=>[k("div",bi,[k("div",_i,[k("div",{class:"icon-wrapper",style:Ne({fontSize:e.iconSize/1.2+"px",lineHeight:e.iconSize/1.2+"px",paddingRight:e.iconSize/2.5+"px"})},[F(u)],4),k("div",ki,$i,512)]),Ci,k("div",Pi,[(S(!0),C(Ie,null,je(l.chunkSource,(y,P)=>(S(),C("div",{class:pe(["opt-group",["group-"+P]]),key:P},[(S(!0),C(Ie,null,je(y,(v,b)=>ge((S(),C("label",{class:pe(["item-"+b,v.disabled?"disabled":null]),"data-extra":v.extra,key:v.key,content:v.tippy},[ge(k("input",{type:"checkbox",disabled:v.disabled,"onUpdate:modelValue":E=>v.checked=E,onChange:E=>l.sourceChecked(E,v)},null,40,xi),[[ns,v.checked]]),k("div",Ri,[k("span",Oi,[F(h)])]),k("span",null,be(v.key),1)],10,Ei)),[[g]])),128))],2))),128))]),k("div",Ai,[k("div",Mi,[e.$store.state.devMode?(S(),C("div",Li,Ii)):q("",!0),k("button",{class:pe(["save-btn save-gallery",{saving:e.bundling}]),onClick:t[1]||(t[1]=(...y)=>l.saveButtonClicked&&l.saveButtonClicked(...y)),disabled:!e.$store.state.devMode&&(e.bundling||!e.saveBtnEnabled)},[k("span",null,[e.bundling?(S(),C("strong",zi,"Packaging:")):q("",!0),Hi]),e.bundling?(S(),re(d,{key:0})):(S(),re(p,{key:1})),e.bundling&&e.progressWidth?(S(),C("div",{key:2,class:"progress",style:Ne({width:e.progressWidth})},null,4)):q("",!0),e.bundling?(S(),C("button",{key:3,class:"cancel-packaging",onClick:t[0]||(t[0]=(...y)=>l.cancelZipping&&l.cancelZipping(...y))},"cancel")):q("",!0)],10,ji),k("div",null,[k("a",Ui,[qi,F(i)]),k("a",Fi,[Gi,F(i)])])])])])]),_:1})}var Ji=fe(yi,[["render",Wi],["__scopeId","data-v-143fa700"]]);const Ki={viewBox:"0 0 576 512",width:"1.2em",height:"1.2em"},Xi=k("path",{fill:"currentColor",d:"M384 24c0-9.6 5.7-18.2 14.5-22s19-2 26 4.6l144 136c4.8 4.5 7.5 10.8 7.5 17.4s-2.7 12.9-7.5 17.4l-144 136c-7 6.6-17.2 8.4-26 4.6S384 305.5 384 296v-72h-46.5c-45 0-81.5 36.5-81.5 81.5c0 22.3 10.3 34.3 19.2 40.5c6.8 4.7 12.8 12 12.8 20.3c0 9.8-8 17.8-17.8 17.8h-2.5c-2.4 0-4.8-.4-7.1-1.4C242.8 374.8 160 333.4 160 240c0-79.5 64.5-144 144-144h80V24zM0 144c0-44.2 35.8-80 80-80h16c17.7 0 32 14.3 32 32s-14.3 32-32 32H80c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16v-16c0-17.7 14.3-32 32-32s32 14.3 32 32v16c0 44.2-35.8 80-80 80H80c-44.2 0-80-35.8-80-80V144z"},null,-1),Yi=[Xi];function Qi(e,t){return S(),C("svg",Ki,Yi)}var Zi={name:"fa6-solid-share-from-square",render:Qi};const ea={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},ta=k("path",{fill:"currentColor",d:"M222.7 32.1c5 16.9-4.6 34.8-21.5 39.8C121.8 95.6 64 169.1 64 256c0 106 86 192 192 192s192-86 192-192c0-86.9-57.8-160.4-137.1-184.1c-16.9-5-26.6-22.9-21.5-39.8s22.9-26.6 39.8-21.5C434.9 42.1 512 140 512 256c0 141.4-114.6 256-256 256S0 397.4 0 256C0 140 77.1 42.1 182.9 10.6c16.9-5 34.8 4.6 39.8 21.5z"},null,-1),na=[ta];function sa(e,t){return S(),C("svg",ea,na)}var ra={name:"fa6-solid-circle-notch",render:sa};const oa={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ia=k("path",{fill:"currentColor",d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10s10-4.47 10-10S17.53 2 12 2z"},null,-1),aa=[ia];function la(e,t){return S(),C("svg",oa,aa)}var ca={name:"ic-baseline-circle",render:la};const ua={viewBox:"0 0 384 512",width:"1.2em",height:"1.2em"},da=k("path",{fill:"currentColor",d:"M64 0C28.7 0 0 28.7 0 64v384c0 35.3 28.7 64 64 64h256c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zm192 0v128h128L256 0zM80 224h16c22.1 0 40 17.9 40 40v8c0 8.8-7.2 16-16 16s-16-7.2-16-16v-8c0-4.4-3.6-8-8-8H80c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8h16c4.4 0 8-3.6 8-8v-8c0-8.8 7.2-16 16-16s16 7.2 16 16v8c0 22.1-17.9 40-40 40H80c-22.1 0-40-17.9-40-40v-80c0-22.1 17.9-40 40-40zm72 46.4c0-25.6 20.8-46.4 46.4-46.4H216c8.8 0 16 7.2 16 16s-7.2 16-16 16h-17.6c-7.9 0-14.4 6.4-14.4 14.4c0 5.2 2.8 9.9 7.2 12.5l25.4 14.5C231 305.7 240 321 240 337.7c0 25.6-20.8 46.4-46.4 46.4H168c-8.8 0-16-7.2-16-16s7.2-16 16-16h25.6c7.9 0 14.4-6.4 14.4-14.4c0-5.2-2.8-9.9-7.2-12.5l-25.4-14.5c-14.5-8.3-23.4-23.7-23.4-40.3zM280 240v31.6c0 23 5.5 45.6 16 66c10.5-20.3 16-42.9 16-66V240c0-8.8 7.2-16 16-16s16 7.2 16 16v31.6c0 34.7-10.3 68.7-29.6 97.6l-5.1 7.7c-3 4.5-8 7.1-13.3 7.1s-10.3-2.7-13.3-7.1l-5.1-7.7c-19.3-28.9-29.6-62.9-29.6-97.6V240c0-8.8 7.2-16 16-16s16 7.2 16 16z"},null,-1),ha=[da];function pa(e,t){return S(),C("svg",ua,ha)}var fa={name:"fa6-solid-file-csv",render:pa},ma={methods:{stringifyArray:function(e,t,n){return Array.isArray(e)?t?e.map(function(r){return r[t]}).join(n||", "):e.join(", "):e||""}}},ga={methods:{makeFullUrl:function(e){const t=new wt(this.$store.state.urlOrigin+e);return t.query.ipRedirectOverride=!0,t.query.overrideBaseCountry=!0,t.toString()},makeUrl:function(e,t){const n=this.$store.state.urlOrigin;let r="";switch(e){case"store":case"book":r=n+"/pd/"+encodeURIComponent(t);break;case"author":t.url?r=n+"/author/"+t.url:r=n+"/search?searchAuthor="+encodeURIComponent(t.name);break;case"narrator":t.name&&(r=n+"/search?searchNarrator="+encodeURIComponent(t.name));break;case"series":t.asin&&(r=n+"/series/"+t.asin);break;case"publisher":t.name&&(r=n+"/search?searchProvider="+encodeURIComponent(t.name));break;case"categories":case"tags":t.url&&(r=n+"/cat/"+t.url);break}if(r){let a=new wt(r);return a.query.ipRedirectOverride=!0,a.query.overrideBaseCountry=!0,a.toString()}else return""}}},va={methods:{prepareKeys:function(e){e=e||{};let t=e.collection||_.get(this.$store.state,this.$store.state.collectionSource),n=_.union(_.flatten(_.map(t,u=>_.keys(u))));n=n.concat(["isbn10","isbn13"]);let r=["added","title","series","bookNumbers","authors","narrators","tags","categories","length","progress","releaseDate","publishers","myRating","rating","ratings","favorite","format","language","whispersync","fromPlusCatalog","unavailable","archived","downloaded","storePageChanged","storePageMissing"];e.priorityKeys&&(r=e.priorityKeys);let a=_.remove(n,function(u){return!_.includes(r,u)});n=r.concat(a),r=null,a=null;let l=["titleShort","sample","blurb","url","summary","moreLikeThis","peopleAlsoBought","asin","cover","sample","cover","isbns"];return n=_.remove(n,function(u){return!_.includes(e.removeKeys||l,u)}),n}}},ya={methods:{slugify:function(e){const t="\xE0\xE1\xE2\xE4\xE6\xE3\xE5\u0101\u0103\u0105\xE7\u0107\u010D\u0111\u010F\xE8\xE9\xEA\xEB\u0113\u0117\u0119\u011B\u011F\u01F5\u1E27\xEE\xEF\xED\u012B\u012F\xEC\u0142\u1E3F\xF1\u0144\u01F9\u0148\xF4\xF6\xF2\xF3\u0153\xF8\u014D\xF5\u0151\u1E55\u0155\u0159\xDF\u015B\u0161\u015F\u0219\u0165\u021B\xFB\xFC\xF9\xFA\u016B\u01D8\u016F\u0171\u0173\u1E83\u1E8D\xFF\xFD\u017E\u017A\u017C\xB7/_,:;",n="aaaaaaaaaacccddeeeeeeeegghiiiiiilmnnnnoooooooooprrsssssttuuuuuuuuuwxyyzzz------",r=new RegExp(t.split("").join("|"),"g");return encodeURIComponent(e.toString().toLowerCase().replace(/\s+/g,"-").replace(r,a=>n.charAt(t.indexOf(a))).replace(/&/g,"-and-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,""))}}},ba={methods:{makeGoodReadsUrl:function(e){e=e||this.book;const t=e.authors?e.authors[0].name+" - ":e.obj&&e.obj.authors?e.obj.authors[0].name+" - ":"";let n=(t&&e.titleShort?e.titleShort:e.title)||"";const r=t+n;return e.titleShort||e.title?"https://www.goodreads.com/search?q="+encodeURIComponent(r):null}}};const _a={name:"saveCsv",mixins:[ma,ot,ga,va,ya,ba],components:{modal:ct},data:function(){return{settings:{dataSourcesChecked:"Library",dataSources:[{key:"Library",description:"Export library data as spreadsheet. Default sorting (added): new books at the top."},{key:"Wishlist",description:"Export wishlist data as spreadsheet.  Default sorting (added): new books at the top."},{key:"Current page",description:"Export contents from any page with books. Search, filtering, and sorting affect this source."}],compatibilityChecked:"Google Sheets",compatibility:[{key:"Raw data",label:"Raw data",description:"Raw data with no special formulas, so it will work in any spreadsheet application."},{key:"Google Sheets",description:`Adds Google Sheets compatible formulas that add icons and links. If you don't like the formulas, you can use "raw data" instead.`},{key:"Goodreads",description:"This spreadsheet includes Goodreads relevant columns and removes any books that don't have ISBNs since Goodreads won't import books without them. Book status determines the bookshelve: not started (to-read), started(currently-reading), finished (read). Book categories are divided into shelves as well."}]},bundling:!1,iconSize:20}},mounted:function(){this.$store.state.sticky.exportSettingsCSVdataSources&&(this.settings.dataSourcesChecked=this.$store.state.sticky.exportSettingsCSVdataSources),this.$store.state.sticky.exportSettingsCSVcompatibility&&(this.settings.compatibilityChecked=this.$store.state.sticky.exportSettingsCSVcompatibility),this.iconSize=this.$refs.textWrapper.offsetHeight},computed:{dataSourceActive(){return _.find(this.settings.dataSources,{key:this.settings.dataSourcesChecked})},compatibilityActive(){return _.find(this.settings.compatibility,{key:this.settings.compatibilityChecked})},googleSheets:function(){return this.settings.compatibilityChecked==="Google Sheets"},filename:function(){let e="";if(this.settings.dataSourcesChecked==="Library")e="library";else if(this.settings.dataSourcesChecked==="Wishlist")e="wishlist";else if(this.settings.dataSourcesChecked==="Current page"){let t=this.$store.state.pageTitle?this.slugify(this.$store.state.pageTitle):null,n=this.$route.name;e=t||n}return e!==""&&(e="-"+e),"ALE-spreadsheet"+e+".csv"},dataSource:function(){switch(this.settings.dataSourcesChecked){case"Library":return this.$store.state.library.books;case"Wishlist":return this.$store.state.library.wishlist;case"Current page":return this.$store.getters.collection}},saveBtnEnabled:function(){if(this.settings.dataSourcesChecked==="Current page"){if(this.$route.meta.gallery)return!0}else return this.settings.dataSourcesChecked==="Wishlist"&&this.settings.compatibilityChecked==="Goodreads"?!1:this.dataSource&&this.dataSource.length>0}},methods:{saveButtonClicked:function(){if(!this.bundling){const e=this;e.bundling=!0;let t=JSON.parse(JSON.stringify(this.dataSource)),n=this.prepKeys(t),r=Papa.unparse({fields:_.map(n,function(a){return a==="isbn10"&&a==="isbn13"?a.toUpperCase():_.startCase(a)}),data:this.processData(n,t),quotes:!1,quoteChar:'"',escapeChar:'"',delimiter:",",header:!0,newline:`\r
`,skipEmptyLines:!1,columns:null});saveAs(new File([r],this.filename,{type:"text/csv;charset=utf-8"})),setTimeout(function(){e.bundling=!1},1e3)}},inputChanged:function(e){this.$store.state.sticky.exportSettingsCSVdataSources!==this.settings.dataSourcesChecked&&this.$store.commit("stickyProp",{key:"exportSettingsCSVdataSources",value:this.settings.dataSourcesChecked}),this.$store.state.sticky.exportSettingsCSVcompatibility!==this.settings.compatibilityChecked&&this.$store.commit("stickyProp",{key:"exportSettingsCSVcompatibility",value:this.settings.compatibilityChecked})},processData:function(e,t){let n=this;return this.$store.state.sticky.exportSettingsCSVcompatibility==="Goodreads"?this.processDataGoodreads(e,t):_.map(t,function(r){return _.map(e,function(a){switch(a){case"authors":case"narrators":case"categories":case"publishers":case"tags":return n.stringifyArray(r[a],"name",a==="categories"?" > ":null)||"";case"series":let l=r.series;return l&&(l=_.map(l,function(v){let b=v.bookNumbers?" (book "+v.bookNumbers.join(", ")+")":"";return v.name+b}).join(", ")),l;case"bookNumbers":let u=_.filter(r.series,"bookNumbers");return u=_.map(u,"bookNumbers"),u=_.flatten(u),_.isEmpty(u)?u=null:_.isArray(u)&&(u=u.join(", ")),u=u||"\u221E",n.googleSheets&&(u="'"+u),r.series?u:"";case"isbn10":const h=_.find(r.isbns,{type:"ISBN_10"});return h?n.googleSheets?"'"+h.identifier:h.identifier:"";case"isbn13":const d=_.find(r.isbns,{type:"ISBN_13"});return d?n.googleSheets?"'"+d.identifier:d.identifier:"";case"peopleAlsoBought":return r.peopleAlsoBought?n.stringifyArray(r.peopleAlsoBought,"title"):"";case"summary":return r.summary?r.summary.replace(/(\n|\r)/g):"";case"cover":let p=r.cover?n.makeCoverUrl(r.cover):"";return r.cover&&p&&r.asin&&n.googleSheets&&(p=n.googleSheetsLinkifyImage(n.makeUrl("book",r.asin),n.makeCoverUrl(r.cover,75),0)),p;case"title":let i=r[a]||r.titleShort||"";return i&&r.asin&&n.googleSheets&&(i=n.googleSheetsLinkify(i,n.makeUrl("book",r.asin))),i;case"titleShort":let m=r[a]||r.title||"";return m&&r.asin&&n.googleSheets&&(m=n.googleSheetsLinkify(m,n.makeUrl("book",r.asin))),m;case"sample":let g=r[a]||"";return g&&n.googleSheets&&(g=n.googleSheetsLinkifyImage(g,"https://i.imgur.com/R2N6OTy.png",20)),g;case"searchInGoodreads":let y=n.makeGoodReadsUrl(r);return y&&n.googleSheets&&(y=n.googleSheetsLinkifyImage(y,"https://i.imgur.com/RPJRqNX.png",20)),y||"";case"webPlayer":let P=r.asin?"https://www.audible.com/webplayer?asin="+r.asin:"";return P&&n.googleSheets&&(P=n.googleSheetsLinkifyImage(P,"https://i.imgur.com/PdFLCdl.png",20)),P||"";case"parentCategory":return r.categories&&r.categories[0]?r.categories[0].name:"";case"childCategory":return r.categories&&r.categories[1]?r.categories[1].name:"";case"storePage":return r.asin?n.makeUrl("book",r.asin):"";case"asin":case"length":case"progress":case"myRating":case"rating":case"ratings":case"isbn":case"isbn10":case"isbn13":return n.googleSheets?"'"+(r[a]||""):r[a]||"";case"storePageUrl":return r.asin?n.makeUrl("book",r.asin):"";default:return r[a]||""}})})},googleSheetsLinkify:function(e,t){return'=HYPERLINK("'+t+'";"'+e.replace(/\"/g,'""')+'")'},googleSheetsLinkifyImage:function(e,t,n){n=n||0;let r=n?"; 4; "+n+"; "+n:"";return'=HYPERLINK("'+e+'"; IMAGE("'+t+'"'+r+"))"},googleSheetsImagefy:function(e,t){t=t||0;let n=t?"; 4; "+t+"; "+t:"";return'=IMAGE("'+e+'"'+n+")"},processDataGoodreads:function(e,t){let n=this;return t=_.filter(t,function(r){const a=_.find(r.isbns,{type:"ISBN_10"}),l=_.find(r.isbns,{type:"ISBN_13"});return a||l}),_.map(t,function(r){return _.map(e,function(a){switch(a){case"title":return r.title||r.titleShort||"";case"author":case"publisher":return r[a+"s"]&&n.stringifyArray([r[a+"s"][0]],"name")||"";case"myRating":return r.myRating||"";case"binding":return"Audible Audio";case"yearPublished":return r.releaseDate||"";case"dateAdded":let l=new Date,u=l.getTimezoneOffset();return l=new Date(l.getTime()-u*60*1e3),l.toISOString().split("T")[0];case"bookshelves":let h=[],d=!r.progress,p=!!(r.progress&&!r.progress.toLowerCase().match("finished")),i=!!(r.progress&&r.progress.toLowerCase().match("finished")),m=d?"to-read":p?"currently-reading":i?"read":"to-read";h.push(m),h.push("audible"),h.push("audiobook"),r.fromPlusCatalog&&h.push("audible-plus");let g=r.categories&&r.categories[0]?r.categories[0].name:null;g&&h.push(n.slugify(g));let y=r.categories&&r.categories[1]?r.categories[1].name:null;return y&&h.push(n.slugify(y)),h.join(" ");case"isbn":const P=_.find(r.isbns,{type:"ISBN_10"});return P?P.identifier:"";case"isbn13":const v=_.find(r.isbns,{type:"ISBN_13"});return v?v.identifier:"";default:return""}})})},prepKeys:function(e){let t=[];switch(this.settings.compatibilityChecked){case"Google Sheets":case"Raw data":let r=["added","cover","sample","webPlayer","searchInGoodreads","title","titleShort","series","bookNumbers","blurb","authors","narrators","tags","categories","parentCategory","childCategory","length","progress","releaseDate","publishers","myRating","rating","ratings","favorite","format","language","whispersync","fromPlusCatalog","unavailable","archived","downloaded","storePageChanged","storePageMissing","asin","isbn10","isbn13","summary","peopleAlsoBought"];const a=this.settings.compatibilityChecked==="Raw data";if(a&&r.push("storePageUrl"),a){var n=["sample","webPlayer","cover","searchInGoodreads"];r=_.remove(r,function(l){return!_.includes(n,l)}),r=r.concat(n)}t=this.prepareKeys({collection:e||[],removeKeys:["isbns"],priorityKeys:r});break;case"Goodreads":t=["dateRead","myReview","title","bookshelves","author","publisher","myRating","binding","yearPublished","dateAdded","isbn","isbn13"];break}return t}}},Ue=e=>(it("data-v-bb384960"),e=e(),at(),e),ka={class:"export-group"},wa={class:"top-wrapper"},Sa={class:"text-wrapper",ref:"textWrapper"},$a=Ue(()=>k("h2",null," CSV (Spreadsheet)",-1)),Ca=Ue(()=>k("div",{class:"description"}," CSV is a generic file format for tabular data that is supported by any proper spreadsheet application. ",-1)),Pa=[$a,Ca],Ea=Ue(()=>k("h3",null,"Data source:",-1)),xa={class:"options"},Ra=["value"],Oa={class:"visual-radiobutton"},Aa={class:"icon"},Ma={class:"description",style:{"margin-top":"10px"}},La=Ue(()=>k("h3",null,"Format:",-1)),Ta={class:"options"},Ba=["value"],Da={class:"visual-radiobutton"},Va={class:"icon"},Na={class:"description",style:{"margin-top":"10px"}},Ia={class:"buttons-footer"},ja={class:"btn-wrapper"},za=["disabled"],Ha={class:"github-btn",target:"_blank",rel:"noopener noreferrer",href:"https://joonaspaakko.gitbook.io/audible-library-extractor/gallery/csv-export/google-sheets-import"},Ua=Ue(()=>k("span",null,"Google Sheets import",-1)),qa={class:"github-btn",target:"_blank",rel:"noopener noreferrer",href:"https://joonaspaakko.gitbook.io/audible-library-extractor/gallery/csv-export/goodreads-import"},Fa=Ue(()=>k("span",null,"Goodreads import",-1));function Ga(e,t,n,r,a,l){const u=fa,h=ca,d=ra,p=bn,i=Zi,m=ct;return S(),re(m,{onCloseModal:t[5]||(t[5]=g=>e.$emit("closeComp"))},{default:Pt(()=>[k("div",ka,[k("div",wa,[k("div",{class:"icon-wrapper",style:Ne({fontSize:e.iconSize/1.2+"px",lineHeight:e.iconSize/1.2+"px",paddingRight:e.iconSize/2.5+"px"})},[F(u)],4),k("div",Sa,Pa,512)]),Ea,k("div",xa,[(S(!0),C(Ie,null,je(e.settings.dataSources,g=>(S(),C("label",{key:g.key},[ge(k("input",{type:"radio",name:"dataSources","onUpdate:modelValue":t[0]||(t[0]=y=>e.settings.dataSourcesChecked=y),value:g.key,onChange:t[1]||(t[1]=(...y)=>l.inputChanged&&l.inputChanged(...y))},null,40,Ra),[[Vt,e.settings.dataSourcesChecked]]),k("div",Oa,[k("div",Aa,[F(h)])]),k("span",null,be(g.key),1)]))),128))]),k("div",Ma,be(l.dataSourceActive.description),1),La,k("div",Ta,[(S(!0),C(Ie,null,je(e.settings.compatibility,g=>(S(),C("label",{key:g.key},[ge(k("input",{type:"radio",name:"compatibility","onUpdate:modelValue":t[2]||(t[2]=y=>e.settings.compatibilityChecked=y),value:g.key,onChange:t[3]||(t[3]=(...y)=>l.inputChanged&&l.inputChanged(...y))},null,40,Ba),[[Vt,e.settings.compatibilityChecked]]),k("div",Da,[k("div",Va,[F(h)])]),k("span",null,be(g.label||g.key),1)]))),128))]),k("div",Na,be(l.compatibilityActive.description),1),k("div",Ia,[k("div",ja,[k("button",{class:pe(["save-btn save-csv",{saving:e.bundling}]),onClick:t[4]||(t[4]=(...g)=>l.saveButtonClicked&&l.saveButtonClicked(...g)),disabled:e.bundling||!l.saveBtnEnabled},[k("span",null,be(l.filename),1),e.bundling?(S(),re(d,{key:0,spin:""})):(S(),re(p,{key:1}))],10,za),k("div",null,[k("a",Ha,[Ua,F(i)]),k("a",qa,[Fa,F(i)])])])])])]),_:1})}var Wa=fe(_a,[["render",Ga],["__scopeId","data-v-bb384960"]]);const Ja={name:"aleMenuActions",data:function(){return{store:this.$store.state,mobileMenuOpen:!1,sampleData:null,subMenuActive:null,routeAvailable:{},loading:!0,routes:null,clickedRoute:null}},computed:{clickedRouteComp(){const e=_.get(this.clickedRoute,"meta.component");if(e)return{...e}},mobileThreshold(){return this.$store.getters.mobileThreshold}},watch:{"$store.state.playingAudio":function(){this.globalTopNavHeight(this.mobileSize)},mobileThreshold(e){this.mobileMenuOpen=!1,this.routes=this.getRoutes(),this.globalTopNavHeight(e)},mobileMenuOpen(e){this.$store.commit("prop",{key:"preventScrolling",value:e}),this.routes=this.getRoutes()},clickedRouteComp(e){this.$store.commit("prop",{key:"preventScrolling",value:e})}},created(){this.routes=this.getRoutes()},mounted:function(){this.loading=!1,this.globalTopNavHeight(this.mobileSize)},beforeUnmount:function(){},methods:{startSearching(){this.$compEmitter.emit("ios-auto-zoom-disable"),this.$compEmitter.emit("search-focus")},getRoutes(){let e=_.filter(this.$router.options.routes,"meta.icon");return e=JSON.parse(JSON.stringify(e)),this.mobileThreshold||(this.getExtraItems(e),this.getNestedGroups(e)),e},getNestedGroups(e){const t=this,n=this.getNestedIndexes(e);let r=_.remove(e,function(a){return _.get(a,"meta.nestedGroup")});r=_.groupBy(r,"meta.nestedGroup"),_.each(r,function(a,l){const u=_.find(n,{key:l});u&&e.splice(u.index,0,t.getSubPageSettings(a,l))})},getSubPageSettings(e,t){const n=this,r={name:t,meta:{groupName:e[0].meta.nestedGroup,icon:"fa-solid fa-chevron-down"},tag:"div",childItems:e};switch(e[0].meta.nestedGroup){case"subPages":r.altName=function(l){const u=_.get(n.$route,"meta.title"),h="children.0.meta.title",d=_.find(e,[h,u]);if(d){const p=n.$route.query.subPageSource||n.$store.state.sticky.subPageSource;return _.startCase(p)+": "+_.get(d,h)}else return _.startCase(t)};break}return r},getNestedIndexes(e){e=_.clone(e);const t=[];return _.remove(e,function(n){const r=_.get(n,"meta.nestedGroup"),a=!_.includes(t,r);if(r)if(a)t.push(r);else return!0}),_.each(t,function(n,r){const a=_.findIndex(e,{meta:{nestedGroup:n}});t[r]={key:n,index:a}}),t},getExtraItems(e){const t=this;let n=[];if(!this.$store.state.standalone){const r=[{tag:"a",href:this.$store.state.urlOrigin+"/library",name:"Open Audible library",disabled:!1,meta:{icon:"fa-brands fa-audible",nestedGroup:"extension-tools"}},{tag:"a",href:"https://joonaspaakko.gitbook.io/audible-library-extractor/",name:"Extension documentation",disabled:!1,meta:{icon:"fa-solid fa-graduation-cap",nestedGroup:"extension-tools"}},{highlight:!0,tag:"div",name:"Save gallery website",disabled:!1,click:this.routeClick,meta:{icon:"fa-solid fa-download",nestedGroup:"extension-tools",component:Ji}},{highlight:!0,tag:"div",name:"CSV export&nbsp;<small>(spreadsheet)</small>",disabled:!1,click:this.routeClick,meta:{icon:"fa-solid fa-file-csv",nestedGroup:"extension-tools",component:Wa}},{highlight:!0,tag:"div",name:"Wallpaper creator",disabled:!1,click:function(a){if(!!a.condition())try{let l=_.filter(t.$store.getters.collection,"asin");l=JSON.parse(JSON.stringify(l)),l=_.chunk(l,50);let u={imageEditorChunks:l,imageEditorChunksLength:l.length,imageEditorTimeCode:new Date().getTime()};t.$store.state.pageTitle&&(u.imageEditorPageTitle=t.$store.state.pageTitle),t.$store.state.pageSubTitle&&(u.imageEditorPageSubTitle=t.$store.state.pageSubTitle),chrome.storage.local.set(u).then(()=>{chrome.runtime.sendMessage({action:"openImageEditor"})})}catch{}},condition:function(){return t.$route.meta.gallery&&t.$store.getters.collection&&t.$store.getters.collection.length},tippy:function(){let a="When you open wallpaper creator, books are imported from the current page with the active sorting. Search and filters also affect what gets imported.";const l=!(t.$route.meta.gallery&&t.$store.getters.collection&&t.$store.getters.collection.length),u=_.filter(t.$store.getters.collection,"cover");return l?a+="<br><br> <strong style='color: #db7e00; font-size: 19px;'>Can't be opened on pages that don't have any books.</strong>":a+="<br><br> <strong style='color: #db7e00;'>Current selection of books "+t.$store.getters.collection.length+" / "+t.$store.getters.collectionTotal+". <br> Importable book covers: <span style='color: #50a900;'>"+u.length+"</span></strong>",a},meta:{icon:"fa-regular fa-image",nestedGroup:"extension-tools"}},{tag:"div",name:"Set as gallery landing page",tippy:"Click here and any links leading to the extension gallery (in browser context menu or extraction settings) will open this exact page. The url will be saved as is, so all url parameters will be saved as well. This includes: searches, filters, sorting, and some other things. <br><br>For example, open the library page, filter out finished books, click this menu item, and now you don't have to do that every time you open the gallery, if that is what you prefer...",disabled:!1,click:function(a){try{const l=window.location.pathname,u="."+l+window.location.href.split(l)[1];chrome.runtime.sendMessage({action:"changeGalleryUrl",url:u}).then(()=>{chrome.storage.local.get(["extras"]).then(h=>{h.extras.galleryUrl=u,chrome.storage.local.set({extras:h.extras}).then(()=>{})})})}catch{}},meta:{icon:"fa-solid fa-house-user",nestedGroup:"extension-tools"}},{tag:"div",name:"Reset gallery landing page",disabled:!1,click:function(a){try{chrome.runtime.sendMessage({action:"changeGalleryUrl",url:null}).then(()=>{chrome.storage.local.get(["extras"]).then(u=>{u.extras.galleryUrl=null,chrome.storage.local.set({extras:u.extras}).then(()=>{})})})}catch{}},meta:{icon:"fa-solid fa-house",nestedGroup:"extension-tools"}}];n=n.concat(r)}n.length&&_.each(n,function(r){e.push(r)})},routeClick(e){this.clickedRoute=e},globalTopNavHeight(e){this.$nextTick(function(){let t=0;if(!e){const n=this.$refs.navigation;n&&(t=Math.floor(n.getBoundingClientRect().height))}this.$store.commit("prop",{key:"topNavOffset",value:t})})}}},Ka={id:"ale-navigation",ref:"navigation"},Xa={key:0,class:"floater-components"};function Ya(e,t,n,r,a,l){const u=Jo,h=Rr,d=mn,p=Zs;return e.loading?q("",!0):(S(),C("div",{key:0,id:"nav-outer-wrapper",class:pe({regular:!l.mobileThreshold,"mobile-nav":l.mobileThreshold,"mobile-nav-open":e.mobileMenuOpen})},[k("div",Ka,[F(u,{routes:e.routes,mobileMenuOpen:e.mobileMenuOpen,"onUpdate:mobileMenuOpen":t[0]||(t[0]=i=>e.mobileMenuOpen=i),inRoot:!0,desktopMenu:!e.mobileMenuOpen},null,8,["routes","mobileMenuOpen","desktopMenu"]),l.mobileThreshold?q("",!0):(S(),C("div",Xa,[l.clickedRouteComp?(S(),re(an(l.clickedRouteComp),{key:0,onCloseComp:t[1]||(t[1]=i=>e.clickedRoute=null)},null,32)):q("",!0)]))],512),l.mobileThreshold?(S(),re(h,{key:0,mobileMenuOpen:e.mobileMenuOpen,"onUpdate:mobileMenuOpen":t[2]||(t[2]=i=>e.mobileMenuOpen=i),mobileThreshold:l.mobileThreshold,onStartSearching:l.startSearching},null,8,["mobileMenuOpen","mobileThreshold","onStartSearching"])):q("",!0),e.$store.state.displayMode&&!l.mobileThreshold?(S(),re(d,{key:1,viewportFloat:!0})):q("",!0),l.mobileThreshold&&e.store.showMobilePlayer?(S(),re(p,{key:2})):q("",!0)],2))}var Qa=fe(Ja,[["render",Ya]]);const Za={name:"aleBackground",mixins:[ot],data:function(){return{coverSource:null,books:null,booksLength:null,windowWidth:null,timer1:null,timer2:null}},mounted:function(){this.windowWidth=window.innerWidth,this.books=this.getBooks(),this.flipAnimationRandomizer(),this.$compEmitter.on("afterWindowResize",this.onWindowResize)},beforeUnmounted:function(){this.$compEmitter.off("afterWindowResize",this.onWindowResize),clearInterval(this.timer1),clearInterval(this.timer2)},methods:{bgGridSize:function(){let e=t(15);this.windowWidth<530?e=t(5):this.windowWidth<760?e=t(6):this.windowWidth<1e3?e=t(8):this.windowWidth<1300&&(e=t(12));function t(n){return 6*n}return e},getBooks:function(){const e=this.bgGridSize();this.coverSource=this.$store.state.library.books?this.$store.state.library.books:this.$store.state.library.wishlist;let t=function(n){const r=n.length;if(r<=e){const a=Math.floor(e/r),l=e-r*a,u=a;let h=[];for(let d=0;d<u;d++)h=h.concat(n);return l>0&&(h=h.concat(n.splice(-1,l))),h}else return _.sampleSize(n,e)}(_.filter(this.coverSource,"cover"));return t=_.map(t,function(n){let r=_.pick(n,["cover"]);return r.flipOut=!1,r}),this.booksLength=t.length,t},flipAnimationRandomizer:function(){const e=this;clearInterval(e.timer1),clearInterval(e.timer2),e.timer1=setInterval(function(){e.coverSwitcheroo()},e.randomNumber(1500,3e3)),e.timer2=setInterval(function(){e.coverSwitcheroo()},e.randomNumber(3500,5e3))},coverSwitcheroo:function(){const e=this,t=this.randomNumber(0,this.booksLength-1),n=this.books[t];n.flipOut=!0,setTimeout(function(){const r=_.filter(e.coverSource,"cover"),a=e.randomNumber(0,r.length-1),l=r[a];n.cover=l.cover,n.flipOut=!1},850)},randomNumber:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},onWindowResize:function(e){e.widthChanged&&(this.windowWidth=e.width,this.books=this.getBooks())}}},el=e=>(it("data-v-b8b56ef4"),e=e(),at(),e),tl={key:0,id:"ale-background"},nl=["src"],sl=el(()=>k("div",{class:"dimmer-overlay"},null,-1));function rl(e,t,n,r,a,l){return e.books?(S(),C("div",tl,[(S(!0),C(Ie,null,je(e.books,(u,h)=>(S(),C("div",{key:u.cover+h,class:pe(["image-wrapper",{"flip-out":u.flipOut}])},[k("img",{crossorigin:"anonymous",src:e.makeCoverUrl(u.cover,200),alt:""},null,8,nl)],2))),128)),sl])):q("",!0)}var ol=fe(Za,[["render",rl],["__scopeId","data-v-b8b56ef4"]]),il={name:"audioPlayerGlobal",data:function(){return{store:this.$store.state,howler:null}},watch:{"store.audioPlayer.audio"(e){e?this.initPlayer():this.destroyHowler()}},computed:{audio:{get(){return this.store.audioPlayer.audio},set(e){this.$store.commit("prop",{key:"audioPlayer.audio",value:e})}},timeDisplay:{get(){return this.store.audioPlayer.timeDisplay},set(e){this.$store.commit("prop",{key:"audioPlayer.timeDisplay",value:e})}},timeDisplayLeft:{get(){return this.store.audioPlayer.timeDisplayLeft},set(e){this.$store.commit("prop",{key:"audioPlayer.timeDisplayLeft",value:e})}},progress:{get(){return this.store.audioPlayer.progress},set(e){this.$store.commit("prop",{key:"audioPlayer.progress",value:e})}},sample:{get(){return this.store.audioPlayer.sample},set(e){this.$store.commit("prop",{key:"audioPlayer.sample",value:e})}},audioSource(){const e=Oe.get(this.$store.getters.audioPlayerBook,"sample");var t=new wt(e);return window.location.protocol==="http:"&&(t.protocol="http"),t.toString()},route(){return Oe.get(this.audio,"route",{})},progressFillerStyle(){const e={};return this.progress&&(e.width=this.progress+"%"),e}},mounted(){this.$compEmitter.on("audio-player-scubber-pause",this.scrubberPause),this.$compEmitter.on("audio-player-clear-pause",this.clearPause),this.$compEmitter.on("audio-player-scrubbed",this.userScrubbed),this.$compEmitter.on("audio-player-play",this.play),this.$compEmitter.on("audio-player-pause",this.pause),this.$compEmitter.on("audio-player-stop",this.stop),this.$compEmitter.on("audio-player-seek-back",this.seekBack),this.$compEmitter.on("audio-player-seek-forward",this.seekForward)},beforeUnmount(){this.$compEmitter.off("audio-player-scubber-pause",this.scrubberPause),this.$compEmitter.off("audio-player-clear-pause",this.clearPause),this.$compEmitter.off("audio-player-scrubbed",this.userScrubbed),this.$compEmitter.off("audio-player-play",this.play),this.$compEmitter.off("audio-player-pause",this.pause),this.$compEmitter.off("audio-stop-pause",this.stop),this.$compEmitter.off("audio-stop-seek-back",this.seekBack),this.$compEmitter.off("audio-stop-seek-forward",this.seekForward),this.destroyHowler()},methods:{openBook(){const e=this.book.asin,t=this.$route.query.book;this.route&&this.route.fullPath!==this.$route.fullPath&&this.$router.push(this.route.fullPath),(!t||e&&t!==e)&&this.$nextTick(function(){this.$compEmitter.emit("book-clicked",this.book.asin)})},initPlayer:function(){let e=this;this.destroyHowler("keepAudioData"),this.$store.getters.mobileThreshold&&this.$store.commit("prop",{key:"showMobilePlayer",value:!0}),this.$store.commit("prop",{key:"playingAudio",value:!0}),this.howler=new ps.Howl({src:this.audioSource,autoplay:!0,loop:!1,volume:1,onplayerror:function(){e.howler.once("unlock",function(){e.howler.play()}),e.$store.commit("prop",{key:"audioPlayer.playing",value:e.howler.playing()})},onplay(t,n){e.$store.commit("prop",{key:"audioPlayer.playing",value:e.howler.playing()})},onend(t){e.$store.commit("prop",{key:"audioPlayer.playing",value:e.howler.playing()})},onpause(t){e.$store.commit("prop",{key:"audioPlayer.playing",value:e.howler.playing()})},onstop(t){e.$store.commit("prop",{key:"audioPlayer.playing",value:e.howler?e.howler.playing():!1})}}),this.seekToCachedPosition(),this.howler.customSeek=function(t){t=t||{},t.value=t.value||30;const n=e.howler.duration(),r={going:{forward:t.direction==="forward",backward:t.direction==="backward"},at:{end:!1,start:!1},value:null},a=r.going.forward?"add":"subtract";r.value=Oe[a](e.howler.current.time,t.value),r.at.end=r.value>=n,r.at.start=r.value<=0,r.value=r.going.forward?r.at.end?n-1e-8:r.value:r.at.start?0:r.value,e.howler.seek(r.value),r.at.start||r.at.end?e.updateCurrent():e.howler.playing()||e.howler.play()},this.howler.current={timer:null,time:null,timeDisplay:null,timeDisplayLeft:null,percentage:null},this.howler.current.timer=setInterval(function(){e.howler.playing()&&(e.updateCurrent(),document.activeElement&&document.activeElement.blur()),e.updateBookProgress()},500)},formatTime(e){const t=[],n=function(u){t.push((u<10?"0":"")+u)};let r=Math.floor(e/3600);n(r);let a=Math.floor(e/60)||0;n(a);let l=e-a*60||0;return n(l),t.shift(),t.join(":")},updateCurrent(){var e=this.howler.seek()||0,t=this.howler.duration()||0;this.howler.current.time=e,this.howler.current.timeDisplay=this.formatTime(Math.round(e)),this.howler.current.timeDisplayLeft=this.formatTime(Math.round(t-e)),this.howler.current.percentage=e/t*100||0,this.timeDisplay=this.howler.current.timeDisplay,this.timeDisplayLeft=this.howler.current.timeDisplayLeft,this.progress=this.howler.current.percentage.toFixed(1)},play:function(e){this.howler&&!this.howler.playing()&&this.howler.play()},pause:function(e){this.howler&&this.howler.playing()&&this.howler.pause()},scrubberPause:function(e){let t=this;this.howler&&this.howler.playing()&&(this.howler.pause(),this.clearPause(),this.howler.pauseTimer=setTimeout(function(){t.howler.play()},500))},clearPause:function(){this.howler&&clearTimeout(this.howler.pauseTimer)},stop:function(){this.destroyHowler()},seekBack:function(){this.howler&&this.howler.customSeek({direction:"backward"})},seekForward:function(){this.howler&&this.howler.customSeek({direction:"forward"})},userScrubbed:function(e){if(this.howler){var t=e.target.value/100*this.howler.duration();this.progress=e.target.value,this.howler.seek(t),this.howler.playing()||this.howler.play()}},destroyHowler(e){this.$store.getters.mobileThreshold&&this.$store.commit("prop",{key:"showMobilePlayer",value:!1}),this.howler&&(this.clearPause(),Oe.get(this.howler,"current.timer")&&clearInterval(this.howler.current.timer),Oe.get(this.howler,"unload")&&this.howler.unload(),this.howler=null),e||(this.audio=null),this.$store.commit("prop",{key:"playingAudio",value:!1})},updateBookProgress:Oe.throttle(function(){this.sample||this.$store.commit("updatePlayerProgress",{asin:this.$store.getters.audioPlayerBook.asin,progress:this.howler.current.time})},3e3,{leading:!1,trailing:!0}),seekToCachedPosition(){const e=Oe.find(this.$store.state.sticky.player.books,{asin:this.$store.getters.audioPlayerBook.asin});e&&this.howler.seek(e.progress)}}};const al={mixins:[il],data:function(){return{general:{route:null,standalone:null,categories:null,tippyTheme:"dark"},window:{width:window.innerWidth,height:window.innerHeight}}},created:function(){if(!this.$store.state.sticky.lightSwitchSetByUser){const t=document.querySelector("html");t.classList.remove("theme-dark"),t.classList.add("theme-light")}let e=this;this.checkIf_iOS()&&document.querySelector("body").classList.add("is-ios"),this.checkIf_Mobile()&&document.querySelector("body").classList.add("is-mobile"),this.$compEmitter.on("refresh-page",this.refreshPage),this.$store.commit("prop",{key:"siteOnline",value:navigator.onLine}),window.addEventListener("offline",function(){e.$store.commit("prop",{key:"siteOnline",value:!1})},{passive:!0}),window.addEventListener("online",function(){e.$store.commit("prop",{key:"siteOnline",value:!0})},{passive:!0})},mounted:function(){const e=this;window.addEventListener("resize",e.onWindowResize,{passive:!0}),this.showTheBackgroundGrid()},beforeUnmount:function(){this.$compEmitter.off("refresh-page",this.refreshPage)},methods:{refreshPage:function(e){this.$store.state.showRoute&&this.$store.commit("prop",{key:"showRoute",value:!1}),this.$nextTick(function(){setTimeout(()=>{this.$store.commit("prop",{key:"showRoute",value:!0}),this.$nextTick(function(){typeof e=="function"&&e(this)})},10)})},checkIf_iOS:function(){return["iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},checkIf_Mobile(){return[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(t=>navigator.userAgent.match(t))},showTheBackgroundGrid:function(){if(!this.$store.state.showBackground){const e=this;this.$nextTick(function(){setTimeout(function(){e.$store.commit("prop",{key:"showBackground",value:!0})},1200)})}},onWindowResize:_.debounce(function(){const e=window.innerWidth,t=window.innerHeight,n=this.window.width!==e,r=this.window.height!==t;(n||r)&&(this.window.width=e,this.window.height=t,n&&this.$store.commit("prop",{key:"windowWidth",value:e}),this.$compEmitter.emit("afterWindowResize",{from:"app",width:e,widthChanged:n,height:t,heightChanged:r}))},320,{leading:!0,trailing:!0})},watch:{$route:function(e,t){let n=e.params?_.map(e.params,function(r,a){return a+":"+r}).join(","):null;this.$store.commit("prop",[{key:"route",value:e},{key:"routeParams",value:n}]),this.$nextTick(function(){this.$store.state.pageTitle&&(this.$route.meta.title||this.$route.meta.title==="")?document.title="ALE \u2022 "+(this.$route.meta.title===this.$store.state.pageTitle?this.$store.state.pageTitle:this.$route.meta.title+": "+this.$store.state.pageTitle):e.meta.title&&(document.title="ALE \u2022 "+(e.meta.title||"My Audible Library"))})},"$store.state.showRoute"(e){e||this.refreshPage()},"$store.state.preventScrolling"(e){document.body.classList[e?"add":"remove"]("prevent-scrolling")}}},ll=["data-version","data-prevent-scrolling"],cl={key:1},ul={key:2,id:"nothing-here-404"},dl={key:0},hl={key:1};function pl(e,t,n,r,a,l){const u=ol,h=Qa,d=tt("router-view");return S(),C("div",{class:pe({"mobile-threshold":e.$store.state.windowWidth<630}),"data-version":e.$store.state.version,"data-prevent-scrolling":e.$store.state.preventScrolling,style:Ne({paddingTop:e.$store.state.desktopPlayerHeight})},[e.$store.state.showBackground&&!(e.$store.state.standalone&&!e.$store.state.siteOnline)?(S(),re(u,{key:0})):q("",!0),F(h),e.$route.name!=="404"&&e.$store.state.showRoute?(S(),C("div",cl,[(S(),re(d,{key:e.$route.name+"-"+e.$store.state.routeParams+"-"+e.$store.state.refreshViewTimeStamp}))])):e.$store.state.showRoute?(S(),C("div",ul,[e.$store.getters.searchIsActive&&!e.$store.state.searchCollection.length?(S(),C("h3",dl,"Search: no results")):(S(),C("h3",hl,"404: There's nothing here"))])):q("",!0)],14,ll)}var fl=fe(al,[["render",pl]]);/*!
  * vue-router v4.1.5
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Ve=typeof window!="undefined";function ml(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const K=Object.assign;function yt(e,t){const n={};for(const r in t){const a=t[r];n[r]=ke(a)?a.map(e):e(a)}return n}const Ye=()=>{},ke=Array.isArray,gl=/\/$/,vl=e=>e.replace(gl,"");function bt(e,t,n="/"){let r,a={},l="",u="";const h=t.indexOf("#");let d=t.indexOf("?");return h<d&&h>=0&&(d=-1),d>-1&&(r=t.slice(0,d),l=t.slice(d+1,h>-1?h:t.length),a=e(l)),h>-1&&(r=r||t.slice(0,h),u=t.slice(h,t.length)),r=kl(r!=null?r:t,n),{fullPath:r+(l&&"?")+l+u,path:r,query:a,hash:u}}function yl(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Nt(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function bl(e,t,n){const r=t.matched.length-1,a=n.matched.length-1;return r>-1&&r===a&&ze(t.matched[r],n.matched[a])&&_n(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function ze(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function _n(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!_l(e[n],t[n]))return!1;return!0}function _l(e,t){return ke(e)?It(e,t):ke(t)?It(t,e):e===t}function It(e,t){return ke(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function kl(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/");let a=n.length-1,l,u;for(l=0;l<r.length;l++)if(u=r[l],u!==".")if(u==="..")a>1&&a--;else break;return n.slice(0,a).join("/")+"/"+r.slice(l-(l===r.length?1:0)).join("/")}var et;(function(e){e.pop="pop",e.push="push"})(et||(et={}));var Qe;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Qe||(Qe={}));function wl(e){if(!e)if(Ve){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),vl(e)}const Sl=/^[^#]+#/;function $l(e,t){return e.replace(Sl,"#")+t}function Cl(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const ut=()=>({left:window.pageXOffset,top:window.pageYOffset});function Pl(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),a=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!a)return;t=Cl(a,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function jt(e,t){return(history.state?history.state.position-t:-1)+e}const St=new Map;function El(e,t){St.set(e,t)}function xl(e){const t=St.get(e);return St.delete(e),t}let Rl=()=>location.protocol+"//"+location.host;function kn(e,t){const{pathname:n,search:r,hash:a}=t,l=e.indexOf("#");if(l>-1){let h=a.includes(e.slice(l))?e.slice(l).length:1,d=a.slice(h);return d[0]!=="/"&&(d="/"+d),Nt(d,"")}return Nt(n,e)+r+a}function Ol(e,t,n,r){let a=[],l=[],u=null;const h=({state:g})=>{const y=kn(e,location),P=n.value,v=t.value;let b=0;if(g){if(n.value=y,t.value=g,u&&u===P){u=null;return}b=v?g.position-v.position:0}else r(y);a.forEach(E=>{E(n.value,P,{delta:b,type:et.pop,direction:b?b>0?Qe.forward:Qe.back:Qe.unknown})})};function d(){u=n.value}function p(g){a.push(g);const y=()=>{const P=a.indexOf(g);P>-1&&a.splice(P,1)};return l.push(y),y}function i(){const{history:g}=window;!g.state||g.replaceState(K({},g.state,{scroll:ut()}),"")}function m(){for(const g of l)g();l=[],window.removeEventListener("popstate",h),window.removeEventListener("beforeunload",i)}return window.addEventListener("popstate",h),window.addEventListener("beforeunload",i),{pauseListeners:d,listen:p,destroy:m}}function zt(e,t,n,r=!1,a=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:a?ut():null}}function Al(e){const{history:t,location:n}=window,r={value:kn(e,n)},a={value:t.state};a.value||l(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function l(d,p,i){const m=e.indexOf("#"),g=m>-1?(n.host&&document.querySelector("base")?e:e.slice(m))+d:Rl()+e+d;try{t[i?"replaceState":"pushState"](p,"",g),a.value=p}catch(y){console.error(y),n[i?"replace":"assign"](g)}}function u(d,p){const i=K({},t.state,zt(a.value.back,d,a.value.forward,!0),p,{position:a.value.position});l(d,i,!0),r.value=d}function h(d,p){const i=K({},a.value,t.state,{forward:d,scroll:ut()});l(i.current,i,!0);const m=K({},zt(r.value,d,null),{position:i.position+1},p);l(d,m,!1),r.value=d}return{location:r,state:a,push:h,replace:u}}function Ml(e){e=wl(e);const t=Al(e),n=Ol(e,t.state,t.location,t.replace);function r(l,u=!0){u||n.pauseListeners(),history.go(l)}const a=K({location:"",base:e,go:r,createHref:$l.bind(null,e)},t,n);return Object.defineProperty(a,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(a,"state",{enumerable:!0,get:()=>t.state.value}),a}function Ll(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),Ml(e)}function Tl(e){return typeof e=="string"||e&&typeof e=="object"}function wn(e){return typeof e=="string"||typeof e=="symbol"}const Pe={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Sn=Symbol("");var Ht;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Ht||(Ht={}));function He(e,t){return K(new Error,{type:e,[Sn]:!0},t)}function $e(e,t){return e instanceof Error&&Sn in e&&(t==null||!!(e.type&t))}const Ut="[^/]+?",Bl={sensitive:!1,strict:!1,start:!0,end:!0},Dl=/[.+*?^${}()[\]/\\]/g;function Vl(e,t){const n=K({},Bl,t),r=[];let a=n.start?"^":"";const l=[];for(const p of e){const i=p.length?[]:[90];n.strict&&!p.length&&(a+="/");for(let m=0;m<p.length;m++){const g=p[m];let y=40+(n.sensitive?.25:0);if(g.type===0)m||(a+="/"),a+=g.value.replace(Dl,"\\$&"),y+=40;else if(g.type===1){const{value:P,repeatable:v,optional:b,regexp:E}=g;l.push({name:P,repeatable:v,optional:b});const O=E||Ut;if(O!==Ut){y+=10;try{new RegExp(`(${O})`)}catch(I){throw new Error(`Invalid custom RegExp for param "${P}" (${O}): `+I.message)}}let M=v?`((?:${O})(?:/(?:${O}))*)`:`(${O})`;m||(M=b&&p.length<2?`(?:/${M})`:"/"+M),b&&(M+="?"),a+=M,y+=20,b&&(y+=-8),v&&(y+=-20),O===".*"&&(y+=-50)}i.push(y)}r.push(i)}if(n.strict&&n.end){const p=r.length-1;r[p][r[p].length-1]+=.7000000000000001}n.strict||(a+="/?"),n.end?a+="$":n.strict&&(a+="(?:/|$)");const u=new RegExp(a,n.sensitive?"":"i");function h(p){const i=p.match(u),m={};if(!i)return null;for(let g=1;g<i.length;g++){const y=i[g]||"",P=l[g-1];m[P.name]=y&&P.repeatable?y.split("/"):y}return m}function d(p){let i="",m=!1;for(const g of e){(!m||!i.endsWith("/"))&&(i+="/"),m=!1;for(const y of g)if(y.type===0)i+=y.value;else if(y.type===1){const{value:P,repeatable:v,optional:b}=y,E=P in p?p[P]:"";if(ke(E)&&!v)throw new Error(`Provided param "${P}" is an array but it is not repeatable (* or + modifiers)`);const O=ke(E)?E.join("/"):E;if(!O)if(b)g.length<2&&(i.endsWith("/")?i=i.slice(0,-1):m=!0);else throw new Error(`Missing required param "${P}"`);i+=O}}return i||"/"}return{re:u,score:r,keys:l,parse:h,stringify:d}}function Nl(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function Il(e,t){let n=0;const r=e.score,a=t.score;for(;n<r.length&&n<a.length;){const l=Nl(r[n],a[n]);if(l)return l;n++}if(Math.abs(a.length-r.length)===1){if(qt(r))return 1;if(qt(a))return-1}return a.length-r.length}function qt(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const jl={type:0,value:""},zl=/[a-zA-Z0-9_]/;function Hl(e){if(!e)return[[]];if(e==="/")return[[jl]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(y){throw new Error(`ERR (${n})/"${p}": ${y}`)}let n=0,r=n;const a=[];let l;function u(){l&&a.push(l),l=[]}let h=0,d,p="",i="";function m(){!p||(n===0?l.push({type:0,value:p}):n===1||n===2||n===3?(l.length>1&&(d==="*"||d==="+")&&t(`A repeatable param (${p}) must be alone in its segment. eg: '/:ids+.`),l.push({type:1,value:p,regexp:i,repeatable:d==="*"||d==="+",optional:d==="*"||d==="?"})):t("Invalid state to consume buffer"),p="")}function g(){p+=d}for(;h<e.length;){if(d=e[h++],d==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:d==="/"?(p&&m(),u()):d===":"?(m(),n=1):g();break;case 4:g(),n=r;break;case 1:d==="("?n=2:zl.test(d)?g():(m(),n=0,d!=="*"&&d!=="?"&&d!=="+"&&h--);break;case 2:d===")"?i[i.length-1]=="\\"?i=i.slice(0,-1)+d:n=3:i+=d;break;case 3:m(),n=0,d!=="*"&&d!=="?"&&d!=="+"&&h--,i="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${p}"`),m(),u(),a}function Ul(e,t,n){const r=Vl(Hl(e.path),n),a=K(r,{record:e,parent:t,children:[],alias:[]});return t&&!a.record.aliasOf==!t.record.aliasOf&&t.children.push(a),a}function ql(e,t){const n=[],r=new Map;t=Wt({strict:!1,end:!0,sensitive:!1},t);function a(i){return r.get(i)}function l(i,m,g){const y=!g,P=Fl(i);P.aliasOf=g&&g.record;const v=Wt(t,i),b=[P];if("alias"in i){const M=typeof i.alias=="string"?[i.alias]:i.alias;for(const I of M)b.push(K({},P,{components:g?g.record.components:P.components,path:I,aliasOf:g?g.record:P}))}let E,O;for(const M of b){const{path:I}=M;if(m&&I[0]!=="/"){const G=m.record.path,j=G[G.length-1]==="/"?"":"/";M.path=m.record.path+(I&&j+I)}if(E=Ul(M,m,v),g?g.alias.push(E):(O=O||E,O!==E&&O.alias.push(E),y&&i.name&&!Gt(E)&&u(i.name)),P.children){const G=P.children;for(let j=0;j<G.length;j++)l(G[j],E,g&&g.children[j])}g=g||E,d(E)}return O?()=>{u(O)}:Ye}function u(i){if(wn(i)){const m=r.get(i);m&&(r.delete(i),n.splice(n.indexOf(m),1),m.children.forEach(u),m.alias.forEach(u))}else{const m=n.indexOf(i);m>-1&&(n.splice(m,1),i.record.name&&r.delete(i.record.name),i.children.forEach(u),i.alias.forEach(u))}}function h(){return n}function d(i){let m=0;for(;m<n.length&&Il(i,n[m])>=0&&(i.record.path!==n[m].record.path||!$n(i,n[m]));)m++;n.splice(m,0,i),i.record.name&&!Gt(i)&&r.set(i.record.name,i)}function p(i,m){let g,y={},P,v;if("name"in i&&i.name){if(g=r.get(i.name),!g)throw He(1,{location:i});v=g.record.name,y=K(Ft(m.params,g.keys.filter(O=>!O.optional).map(O=>O.name)),i.params&&Ft(i.params,g.keys.map(O=>O.name))),P=g.stringify(y)}else if("path"in i)P=i.path,g=n.find(O=>O.re.test(P)),g&&(y=g.parse(P),v=g.record.name);else{if(g=m.name?r.get(m.name):n.find(O=>O.re.test(m.path)),!g)throw He(1,{location:i,currentLocation:m});v=g.record.name,y=K({},m.params,i.params),P=g.stringify(y)}const b=[];let E=g;for(;E;)b.unshift(E.record),E=E.parent;return{name:v,path:P,params:y,matched:b,meta:Wl(b)}}return e.forEach(i=>l(i)),{addRoute:l,resolve:p,removeRoute:u,getRoutes:h,getRecordMatcher:a}}function Ft(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function Fl(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:Gl(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function Gl(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="boolean"?n:n[r];return t}function Gt(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Wl(e){return e.reduce((t,n)=>K(t,n.meta),{})}function Wt(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function $n(e,t){return t.children.some(n=>n===e||$n(e,n))}const Cn=/#/g,Jl=/&/g,Kl=/\//g,Xl=/=/g,Yl=/\?/g,Pn=/\+/g,Ql=/%5B/g,Zl=/%5D/g,En=/%5E/g,ec=/%60/g,xn=/%7B/g,tc=/%7C/g,Rn=/%7D/g,nc=/%20/g;function Et(e){return encodeURI(""+e).replace(tc,"|").replace(Ql,"[").replace(Zl,"]")}function sc(e){return Et(e).replace(xn,"{").replace(Rn,"}").replace(En,"^")}function $t(e){return Et(e).replace(Pn,"%2B").replace(nc,"+").replace(Cn,"%23").replace(Jl,"%26").replace(ec,"`").replace(xn,"{").replace(Rn,"}").replace(En,"^")}function rc(e){return $t(e).replace(Xl,"%3D")}function oc(e){return Et(e).replace(Cn,"%23").replace(Yl,"%3F")}function ic(e){return e==null?"":oc(e).replace(Kl,"%2F")}function rt(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function ac(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let a=0;a<r.length;++a){const l=r[a].replace(Pn," "),u=l.indexOf("="),h=rt(u<0?l:l.slice(0,u)),d=u<0?null:rt(l.slice(u+1));if(h in t){let p=t[h];ke(p)||(p=t[h]=[p]),p.push(d)}else t[h]=d}return t}function Jt(e){let t="";for(let n in e){const r=e[n];if(n=rc(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(ke(r)?r.map(l=>l&&$t(l)):[r&&$t(r)]).forEach(l=>{l!==void 0&&(t+=(t.length?"&":"")+n,l!=null&&(t+="="+l))})}return t}function lc(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=ke(r)?r.map(a=>a==null?null:""+a):r==null?r:""+r)}return t}const cc=Symbol(""),Kt=Symbol(""),xt=Symbol(""),On=Symbol(""),Ct=Symbol("");function Je(){let e=[];function t(r){return e.push(r),()=>{const a=e.indexOf(r);a>-1&&e.splice(a,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function Re(e,t,n,r,a){const l=r&&(r.enterCallbacks[a]=r.enterCallbacks[a]||[]);return()=>new Promise((u,h)=>{const d=m=>{m===!1?h(He(4,{from:n,to:t})):m instanceof Error?h(m):Tl(m)?h(He(2,{from:t,to:m})):(l&&r.enterCallbacks[a]===l&&typeof m=="function"&&l.push(m),u())},p=e.call(r&&r.instances[a],t,n,d);let i=Promise.resolve(p);e.length<3&&(i=i.then(d)),i.catch(m=>h(m))})}function _t(e,t,n,r){const a=[];for(const l of e)for(const u in l.components){let h=l.components[u];if(!(t!=="beforeRouteEnter"&&!l.instances[u]))if(uc(h)){const p=(h.__vccOpts||h)[t];p&&a.push(Re(p,n,r,l,u))}else{let d=h();a.push(()=>d.then(p=>{if(!p)return Promise.reject(new Error(`Couldn't resolve component "${u}" at "${l.path}"`));const i=ml(p)?p.default:p;l.components[u]=i;const g=(i.__vccOpts||i)[t];return g&&Re(g,n,r,l,u)()}))}}return a}function uc(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Xt(e){const t=Ze(xt),n=Ze(On),r=_e(()=>t.resolve(Xe(e.to))),a=_e(()=>{const{matched:d}=r.value,{length:p}=d,i=d[p-1],m=n.matched;if(!i||!m.length)return-1;const g=m.findIndex(ze.bind(null,i));if(g>-1)return g;const y=Yt(d[p-2]);return p>1&&Yt(i)===y&&m[m.length-1].path!==y?m.findIndex(ze.bind(null,d[p-2])):g}),l=_e(()=>a.value>-1&&fc(n.params,r.value.params)),u=_e(()=>a.value>-1&&a.value===n.matched.length-1&&_n(n.params,r.value.params));function h(d={}){return pc(d)?t[Xe(e.replace)?"replace":"push"](Xe(e.to)).catch(Ye):Promise.resolve()}return{route:r,href:_e(()=>r.value.href),isActive:l,isExactActive:u,navigate:h}}const dc=cn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Xt,setup(e,{slots:t}){const n=ln(Xt(e)),{options:r}=Ze(xt),a=_e(()=>({[Qt(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Qt(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const l=t.default&&t.default(n);return e.custom?l:un("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:a.value},l)}}}),hc=dc;function pc(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function fc(e,t){for(const n in t){const r=t[n],a=e[n];if(typeof r=="string"){if(r!==a)return!1}else if(!ke(a)||a.length!==r.length||r.some((l,u)=>l!==a[u]))return!1}return!0}function Yt(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Qt=(e,t,n)=>e!=null?e:t!=null?t:n,mc=cn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=Ze(Ct),a=_e(()=>e.route||r.value),l=Ze(Kt,0),u=_e(()=>{let p=Xe(l);const{matched:i}=a.value;let m;for(;(m=i[p])&&!m.components;)p++;return p}),h=_e(()=>a.value.matched[u.value]);vt(Kt,_e(()=>u.value+1)),vt(cc,h),vt(Ct,a);const d=os();return is(()=>[d.value,h.value,e.name],([p,i,m],[g,y,P])=>{i&&(i.instances[m]=p,y&&y!==i&&p&&p===g&&(i.leaveGuards.size||(i.leaveGuards=y.leaveGuards),i.updateGuards.size||(i.updateGuards=y.updateGuards))),p&&i&&(!y||!ze(i,y)||!g)&&(i.enterCallbacks[m]||[]).forEach(v=>v(p))},{flush:"post"}),()=>{const p=a.value,i=e.name,m=h.value,g=m&&m.components[i];if(!g)return Zt(n.default,{Component:g,route:p});const y=m.props[i],P=y?y===!0?p.params:typeof y=="function"?y(p):y:null,b=un(g,K({},P,t,{onVnodeUnmounted:E=>{E.component.isUnmounted&&(m.instances[i]=null)},ref:d}));return Zt(n.default,{Component:b,route:p})||b}}});function Zt(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const gc=mc;function vc(e){const t=ql(e.routes,e),n=e.parseQuery||ac,r=e.stringifyQuery||Jt,a=e.history,l=Je(),u=Je(),h=Je(),d=ss(Pe);let p=Pe;Ve&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const i=yt.bind(null,w=>""+w),m=yt.bind(null,ic),g=yt.bind(null,rt);function y(w,A){let x,L;return wn(w)?(x=t.getRecordMatcher(w),L=A):L=w,t.addRoute(L,x)}function P(w){const A=t.getRecordMatcher(w);A&&t.removeRoute(A)}function v(){return t.getRoutes().map(w=>w.record)}function b(w){return!!t.getRecordMatcher(w)}function E(w,A){if(A=K({},A||d.value),typeof w=="string"){const D=bt(n,w,A.path),se=t.resolve({path:D.path},A),Ce=a.createHref(D.fullPath);return K(D,se,{params:g(se.params),hash:rt(D.hash),redirectedFrom:void 0,href:Ce})}let x;if("path"in w)x=K({},w,{path:bt(n,w.path,A.path).path});else{const D=K({},w.params);for(const se in D)D[se]==null&&delete D[se];x=K({},w,{params:m(w.params)}),A.params=m(A.params)}const L=t.resolve(x,A),J=w.hash||"";L.params=i(g(L.params));const ne=yl(r,K({},w,{hash:sc(J),path:L.path})),z=a.createHref(ne);return K({fullPath:ne,hash:J,query:r===Jt?lc(w.query):w.query||{}},L,{redirectedFrom:void 0,href:z})}function O(w){return typeof w=="string"?bt(n,w,d.value.path):K({},w)}function M(w,A){if(p!==w)return He(8,{from:A,to:w})}function I(w){return Y(w)}function G(w){return I(K(O(w),{replace:!0}))}function j(w){const A=w.matched[w.matched.length-1];if(A&&A.redirect){const{redirect:x}=A;let L=typeof x=="function"?x(w):x;return typeof L=="string"&&(L=L.includes("?")||L.includes("#")?L=O(L):{path:L},L.params={}),K({query:w.query,hash:w.hash,params:"path"in L?{}:w.params},L)}}function Y(w,A){const x=p=E(w),L=d.value,J=w.state,ne=w.force,z=w.replace===!0,D=j(x);if(D)return Y(K(O(D),{state:typeof D=="object"?K({},J,D.state):J,force:ne,replace:z}),A||x);const se=x;se.redirectedFrom=A;let Ce;return!ne&&bl(r,L,x)&&(Ce=He(16,{to:se,from:L}),ae(L,L,!0,!1)),(Ce?Promise.resolve(Ce):we(se,L)).catch(le=>$e(le)?$e(le,2)?le:X(le):Z(le,se,L)).then(le=>{if(le){if($e(le,2))return Y(K({replace:z},O(le.to),{state:typeof le.to=="object"?K({},J,le.to.state):J,force:ne}),A||se)}else le=Te(se,L,!0,z,J);return ye(se,L,le),le})}function Q(w,A){const x=M(w,A);return x?Promise.reject(x):Promise.resolve()}function we(w,A){let x;const[L,J,ne]=yc(w,A);x=_t(L.reverse(),"beforeRouteLeave",w,A);for(const D of L)D.leaveGuards.forEach(se=>{x.push(Re(se,w,A))});const z=Q.bind(null,w,A);return x.push(z),Be(x).then(()=>{x=[];for(const D of l.list())x.push(Re(D,w,A));return x.push(z),Be(x)}).then(()=>{x=_t(J,"beforeRouteUpdate",w,A);for(const D of J)D.updateGuards.forEach(se=>{x.push(Re(se,w,A))});return x.push(z),Be(x)}).then(()=>{x=[];for(const D of w.matched)if(D.beforeEnter&&!A.matched.includes(D))if(ke(D.beforeEnter))for(const se of D.beforeEnter)x.push(Re(se,w,A));else x.push(Re(D.beforeEnter,w,A));return x.push(z),Be(x)}).then(()=>(w.matched.forEach(D=>D.enterCallbacks={}),x=_t(ne,"beforeRouteEnter",w,A),x.push(z),Be(x))).then(()=>{x=[];for(const D of u.list())x.push(Re(D,w,A));return x.push(z),Be(x)}).catch(D=>$e(D,8)?D:Promise.reject(D))}function ye(w,A,x){for(const L of h.list())L(w,A,x)}function Te(w,A,x,L,J){const ne=M(w,A);if(ne)return ne;const z=A===Pe,D=Ve?history.state:{};x&&(L||z?a.replace(w.fullPath,K({scroll:z&&D&&D.scroll},J)):a.push(w.fullPath,J)),d.value=w,ae(w,A,x,z),X()}let T;function W(){T||(T=a.listen((w,A,x)=>{if(!nt.listening)return;const L=E(w),J=j(L);if(J){Y(K(J,{replace:!0}),L).catch(Ye);return}p=L;const ne=d.value;Ve&&El(jt(ne.fullPath,x.delta),ut()),we(L,ne).catch(z=>$e(z,12)?z:$e(z,2)?(Y(z.to,L).then(D=>{$e(D,20)&&!x.delta&&x.type===et.pop&&a.go(-1,!1)}).catch(Ye),Promise.reject()):(x.delta&&a.go(-x.delta,!1),Z(z,L,ne))).then(z=>{z=z||Te(L,ne,!1),z&&(x.delta&&!$e(z,8)?a.go(-x.delta,!1):x.type===et.pop&&$e(z,20)&&a.go(-1,!1)),ye(L,ne,z)}).catch(Ye)}))}let U=Je(),H=Je(),N;function Z(w,A,x){X(w);const L=H.list();return L.length?L.forEach(J=>J(w,A,x)):console.error(w),Promise.reject(w)}function te(){return N&&d.value!==Pe?Promise.resolve():new Promise((w,A)=>{U.add([w,A])})}function X(w){return N||(N=!w,W(),U.list().forEach(([A,x])=>w?x(w):A()),U.reset()),w}function ae(w,A,x,L){const{scrollBehavior:J}=e;if(!Ve||!J)return Promise.resolve();const ne=!x&&xl(jt(w.fullPath,0))||(L||!x)&&history.state&&history.state.scroll||null;return rs().then(()=>J(w,A,ne)).then(z=>z&&Pl(z)).catch(z=>Z(z,w,A))}const de=w=>a.go(w);let me;const qe=new Set,nt={currentRoute:d,listening:!0,addRoute:y,removeRoute:P,hasRoute:b,getRoutes:v,resolve:E,options:e,push:I,replace:G,go:de,back:()=>de(-1),forward:()=>de(1),beforeEach:l.add,beforeResolve:u.add,afterEach:h.add,onError:H.add,isReady:te,install(w){const A=this;w.component("RouterLink",hc),w.component("RouterView",gc),w.config.globalProperties.$router=A,Object.defineProperty(w.config.globalProperties,"$route",{enumerable:!0,get:()=>Xe(d)}),Ve&&!me&&d.value===Pe&&(me=!0,I(a.location).catch(J=>{}));const x={};for(const J in Pe)x[J]=_e(()=>d.value[J]);w.provide(xt,A),w.provide(On,ln(x)),w.provide(Ct,d);const L=w.unmount;qe.add(w),w.unmount=function(){qe.delete(w),qe.size<1&&(p=Pe,T&&T(),T=null,d.value=Pe,me=!1,N=!1),L()}}};return nt}function Be(e){return e.reduce((t,n)=>t.then(()=>n()),Promise.resolve())}function yc(e,t){const n=[],r=[],a=[],l=Math.max(t.matched.length,e.matched.length);for(let u=0;u<l;u++){const h=t.matched[u];h&&(e.matched.find(p=>ze(p,h))?r.push(h):n.push(h));const d=e.matched[u];d&&(t.matched.find(p=>ze(p,d))||a.push(d))}return[n,r,a]}var bc={sticky:{lightSwitch:1,lightSwitchSetByUser:!1,viewMode:"grid",chunkLocation:0,booksInSeriesToggle:!1,collectionsDrawerToggle:!0,exportSettingsGallery:null,exportSettingsCSVdataSources:null,exportSettingsCSVcompatibility:null,booksInSeriesAll:!0,booksInSeriesFinished:!0,booksInSeriesOpenInApp:!0,subPageSource:"library",bookDetailsCollapsedCover:!1,bookDetailsCollapsedDetails:!1,contextMenuReminder:!0,bookDetailSettings:{minHeight:null,titleShort:!0,sidebar:{show:!0,iconToolbar:!0,seriesList:!0,collectionsList:!0},carousel:!0,playButton:!0,cloudPlayer:!1,blurb:!0,statusIndicators:!0,whispersync:!0,plusCatalog:!0,favorite:!0,finished:!0,reverseDirection:!1,hideFirstSection:!1},collectionsHidePremade:!1,player:{books:[]},seriesFilters:{inLibrary:null,notInLibrary:null}},bookDetailSettingsOpen:!1,searchMounted:!1,searchCollection:[],mutatingCollection:[],collectionSource:null,pageCollection:null,route:null,routeParams:null,library:null,urlOrigin:null,searchQuery:"",standalone:null,displayMode:null,listRenderingOpts:null,windowWidth:window.innerWidth,showBackground:!1,chunkCollection:[],chunkDistance:40,refreshViewTimeStamp:new Date().getTime(),showRoute:!0,pageTitle:null,pageSubTitle:null,version:"0.2.9",extractSettings:null,siteOnline:!0,searchOptCloseGuard:!1,bundlingGallery:!1,bookDetails:{book:null,index:-1},searchOptOpenHeight:null,devMode:!1,lazyScroll:!0,navHistory:{btnNavigation:!1,forward:[],back:[]},modal:{saveLocally:!1},preventScrolling:!1,playingAudio:!1,topNavOffset:0,bookClicked:!1,audioPlayer:{audio:null,timeDisplay:"00:00",timeDisplayLeft:"00:00",progress:0,sample:!0,playing:!1},showMobilePlayer:!1,desktopPlayerHeight:null,mobileWidth:630},_c={fromLocalStorage:function(e){const t=JSON.parse(localStorage.getItem("aleSettings"));t&&_.merge(e.sticky,t)},prop(e,t){let n=function(r){if(r=r||{},r.key){let a=r.freeze?Object.freeze(r.value):r.value;_.set(e,r.key,a)}};_.isArray(t)?_.each(t,function(r){n(r)}):n(t)},buildStandaloneData:function(e,t){e.library=e.library||{},_.each(t,function(n){n.key&&_.set(e,"library."+n.key,Object.freeze(n.value))})},stickyProp:function(e,t){e.sticky[t.key]=t.value},addListRenderingOpts:function(e,t){if(t.sortValues!==void 0){let n=_.find(e.listRenderingOpts.sort,{key:"sortValues"});n&&(n.active=t.sortValues)}if(t.splice?e.listRenderingOpts[t.listName].splice(t.splice,0,t.option):t.unshift?e.listRenderingOpts[t.listName].unshift(t.option):e.listRenderingOpts[t.listName].push(t.option),t.activate)if(t.listName==="sort"){const n=_.find(e.listRenderingOpts[t.listName],"current");n&&(n.current=!1),t.option.current=!0}else{const n=_.find(e.listRenderingOpts[t.listName],"active");n.active=!1,t.option.active=!0}},updateListRenderingOpts:function(e,t){let n=e.listRenderingOpts[t.listName],r=n[t.index===0||t.index?t.index:_.findIndex(n,{key:t.key})];if(t.sortValues!==void 0){let a=_.find(e.listRenderingOpts.sort,{key:"sortValues"});a&&(a.active=t.sortValues)}if((t.active===!1||t.active===!0)&&(r.active=t.active),r.type==="filterExtras"&&(t.range&&(r.range=t.range),t.value&&(r.value=t.value)),t.listName==="sort"&&r.type==="sort"){const a=_.find(n,"current");a.current=!1,r.current=!0}},resetFilters:function(e,t){_.each(e.listRenderingOpts.filter,function(n){n.active=n.type==="filter"})},chunkCollectionReset:function(e){e.chunkDistance=e.sticky.viewMode==="grid"?52:80,e.sticky.chunkLocation=0,e.chunkCollection=[]},chunkCollectionAdd:function(e,t){t=t||{};const r=e.searchQuery.trim()!==""?e.searchCollection:e.mutatingCollection;if(r.length>0){const a=t.chunkDistance?t.chunkDistance:parseFloat(e.sticky.chunkLocation);let l=t.chunkDistance?r.slice(0,a):r.slice(a,a+e.chunkDistance);l.length>0&&(t.chunkDistance?e.chunkCollection=l:e.chunkCollection=e.chunkCollection.concat(l),e.sticky.chunkLocation=a+e.chunkDistance)}},navHistory:function(e,t){const n=t.pushOnly?t.key:t.key==="back"?"forward":"back";e.navHistory[n].push(t.value),t.pushOnly||(e.navHistory[t.key].pop,e.navHistory.btnNavigation=!0)},updatePlayerProgress:function(e,t){const n=_.findIndex(e.sticky.player.books,{asin:t.asin});n>-1?_.set(e.sticky.player,"books["+n+"].progress",t.progress):e.sticky.player.books.push(t)}},kc={sortValues:function(e){return _.find(e.listRenderingOpts.sort,{key:"sortValues"}).active},sortBy:function(e){return _.find(e.listRenderingOpts.sort,"current").key},regularFilters:function(e){return _.filter(e.listRenderingOpts.filter,{type:"filter"}).length>0},filterKeys:function(e){return _.map(_.filter(e.listRenderingOpts.filter,{type:"filter",active:!0}),function(t){return t.key}).join(",")},filterKeysLength:function(e){return _.filter(e.listRenderingOpts.filter,{type:"filter"}).length},filterExtrasKeys:function(e){return _.map(_.filter(e.listRenderingOpts.filter,{type:"filterExtras",active:!0}),function(t){return t.key}).join(",")},scopeKeys:function(e){return _.map(_.filter(e.listRenderingOpts.scope,"active"),function(t){return t.key}).join(",")},searchIsActive:function(e){return e.searchQuery.trim()!==""},collectionSource:function(e){return e.searchQuery.trim()!==""?e.searchCollection:_.get(e,e.collectionSource)},collectionTotal:function(e){return _.get(e,e.collectionSource,[]).length},collection:function(e){return e.searchQuery.trim()!==""?e.searchCollection:e.mutatingCollection},saveStandaloneAfter:function(e){let t=_.get(e,"extractSettings.extraSettings");if(t&&_.find(t,{name:"saveStandaloneAfter",value:!0,deactivated:!1}))return!0},audioPlayerBook(e,t){return _.get(e.audioPlayer.audio,"book",{})},audioPlayerTitle(e,t){const n=_.get(t,"audioPlayerBook",{});return n.title||n.titleShort},mobileThreshold(e){return e.windowWidth<e.mobileWidth}},ue=fs({state:bc,mutations:_c,getters:kc});const wc="modulepreload",en={},Sc="",Le=function(t,n){return!n||n.length===0?t():Promise.all(n.map(r=>{if(r=`${Sc}${r}`,r in en)return;en[r]=!0;const a=r.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":wc,a||(u.as="script",u.crossOrigin=""),u.href=r,document.head.appendChild(u),a)return new Promise((h,d)=>{u.addEventListener("load",h),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t())},$c={name:"aleLibraryView",mounted(){}},Cc={key:0},Pc={key:1,id:"nothing-here-404"},Ec={key:0},xc={key:1};function Rc(e,t,n,r,a,l){const u=tt("router-view");return e.$store.state.showRoute?(S(),C("div",Cc,[e.$route.name!=="404"?(S(),re(u,{key:e.$route.name+"-"+e.$store.state.routeParams+"-"+e.$store.state.refreshViewTimeStamp})):(S(),C("div",Pc,[e.$store.getters.searchIsActive&&!e.$store.state.searchCollection.length?(S(),C("h3",Ec,"Search: no results")):(S(),C("h3",xc,"404: There's nothing here"))]))])):q("",!0)}var Ee=fe($c,[["render",Rc]]);const xe=()=>Le(()=>import("./gallery-root.2f31f137.js"),["assets/gallery-root.2f31f137.js","assets/gallery-root.8e58be18.css","assets/gallery-lazy.719d725f.js","assets/lodash.1321b47a.js","assets/jquery.050764e9.js","assets/gallery-makeCoverUrl.8378190f.js","assets/gallery-timeStringToSeconds.9aa0cb6a.js","assets/gallery-secondsToTimeString.0a6fc9ec.js","assets/gallery-search.f2b91454.js","assets/gallery-search.6916cbb5.css","assets/gallery-findSubPageSource.60f57eb0.js","assets/gallery-findSubPageSource.9caea48c.css","assets/gallery-page-title.3efff104.js","assets/gallery-page-title.d16b2dce.css","assets/content-script-helpers.e49fc91b.js","assets/index.ee874ed1.js","assets/howler.22814ddb.js","assets/tippy.82bfa66a.js","assets/tippy.c4165dec.css"]),Oc=()=>Le(()=>import("./gallery-collections.b1ba762b.js"),["assets/gallery-collections.b1ba762b.js","assets/gallery-collections.ec2b6005.css","assets/gallery-lazy.719d725f.js","assets/lodash.1321b47a.js","assets/jquery.050764e9.js","assets/gallery-page-title.3efff104.js","assets/gallery-page-title.d16b2dce.css","assets/content-script-helpers.e49fc91b.js","assets/gallery-makeCoverUrl.8378190f.js","assets/index.ee874ed1.js","assets/howler.22814ddb.js","assets/tippy.82bfa66a.js","assets/tippy.c4165dec.css"]),Ac=()=>Le(()=>import("./gallery-categories.73ff6e7f.js"),["assets/gallery-categories.73ff6e7f.js","assets/gallery-categories.75a71719.css","assets/gallery-findSubPageSource.60f57eb0.js","assets/gallery-findSubPageSource.9caea48c.css","assets/lodash.1321b47a.js","assets/jquery.050764e9.js","assets/gallery-page-title.3efff104.js","assets/gallery-page-title.d16b2dce.css","assets/content-script-helpers.e49fc91b.js","assets/gallery-makeCoverUrl.8378190f.js","assets/index.ee874ed1.js","assets/howler.22814ddb.js","assets/tippy.82bfa66a.js","assets/tippy.c4165dec.css"]),Mc=()=>Le(()=>import("./gallery-series.7b17d0b6.js"),["assets/gallery-series.7b17d0b6.js","assets/gallery-series.eae4fe5b.css","assets/gallery-lazy.719d725f.js","assets/lodash.1321b47a.js","assets/jquery.050764e9.js","assets/gallery-search.f2b91454.js","assets/gallery-search.6916cbb5.css","assets/gallery-findSubPageSource.60f57eb0.js","assets/gallery-findSubPageSource.9caea48c.css","assets/gallery-page-title.3efff104.js","assets/gallery-page-title.d16b2dce.css","assets/content-script-helpers.e49fc91b.js","assets/gallery-timeStringToSeconds.9aa0cb6a.js","assets/gallery-makeCoverUrl.8378190f.js","assets/index.ee874ed1.js","assets/howler.22814ddb.js","assets/tippy.82bfa66a.js","assets/tippy.c4165dec.css"]),Lc=()=>Le(()=>import("./gallery-authors.50efe2bf.js"),["assets/gallery-authors.50efe2bf.js","assets/gallery-authors.a5ca8b56.css","assets/gallery-lazy.719d725f.js","assets/lodash.1321b47a.js","assets/jquery.050764e9.js","assets/gallery-search.f2b91454.js","assets/gallery-search.6916cbb5.css","assets/gallery-findSubPageSource.60f57eb0.js","assets/gallery-findSubPageSource.9caea48c.css","assets/gallery-page-title.3efff104.js","assets/gallery-page-title.d16b2dce.css","assets/content-script-helpers.e49fc91b.js","assets/gallery-timeStringToSeconds.9aa0cb6a.js","assets/gallery-makeCoverUrl.8378190f.js","assets/index.ee874ed1.js","assets/howler.22814ddb.js","assets/tippy.82bfa66a.js","assets/tippy.c4165dec.css"]),Tc=()=>Le(()=>import("./gallery-narrators.b9a9f7f6.js"),["assets/gallery-narrators.b9a9f7f6.js","assets/gallery-narrators.c3d48860.css","assets/gallery-lazy.719d725f.js","assets/lodash.1321b47a.js","assets/jquery.050764e9.js","assets/gallery-search.f2b91454.js","assets/gallery-search.6916cbb5.css","assets/gallery-findSubPageSource.60f57eb0.js","assets/gallery-findSubPageSource.9caea48c.css","assets/gallery-page-title.3efff104.js","assets/gallery-page-title.d16b2dce.css","assets/content-script-helpers.e49fc91b.js","assets/gallery-timeStringToSeconds.9aa0cb6a.js","assets/gallery-makeCoverUrl.8378190f.js","assets/index.ee874ed1.js","assets/howler.22814ddb.js","assets/tippy.82bfa66a.js","assets/tippy.c4165dec.css"]),Bc=()=>Le(()=>import("./gallery-publishers.95cf1def.js"),["assets/gallery-publishers.95cf1def.js","assets/gallery-publishers.961201d0.css","assets/gallery-lazy.719d725f.js","assets/lodash.1321b47a.js","assets/jquery.050764e9.js","assets/gallery-search.f2b91454.js","assets/gallery-search.6916cbb5.css","assets/gallery-findSubPageSource.60f57eb0.js","assets/gallery-findSubPageSource.9caea48c.css","assets/gallery-page-title.3efff104.js","assets/gallery-page-title.d16b2dce.css","assets/content-script-helpers.e49fc91b.js","assets/gallery-timeStringToSeconds.9aa0cb6a.js","assets/gallery-makeCoverUrl.8378190f.js","assets/index.ee874ed1.js","assets/howler.22814ddb.js","assets/tippy.82bfa66a.js","assets/tippy.c4165dec.css"]);var De={library:{name:"library",path:"/library",component:xe,meta:{gallery:!0,title:"Library",icon:"fa-solid fa-book"}},collections:{path:"/collections",component:Ee,meta:{icon:"fa-regular fa-folder-open"},children:[{name:"collections",path:"",component:Oc,meta:{title:"Collections"}},{name:"collection",path:":collection",component:xe,meta:{gallery:!0,title:"Collections"}}]},wishlist:{path:"/wishlist",component:Ee,meta:{icon:"fa-solid fa-bookmark"},children:[{name:"wishlist",path:"",component:xe,meta:{gallery:!0,title:"Wishlist"}}]},subPages:{categories:{path:"/categories",meta:{icon:"fa-solid fa-indent",nestedGroup:"subPages"},component:Ee,children:[{name:"categories",path:"",component:Ac,meta:{subPage:!0,title:"Categories"}},{name:"category",path:":parent/:child?",component:xe,meta:{gallery:!0,subPage:!0,title:"Categories"}}]},series:{path:"/series",component:Ee,meta:{icon:"fa-solid fa-list-ol",nestedGroup:"subPages"},children:[{name:"all-series",path:"",component:Mc,meta:{subPage:!0,title:"Series"}},{name:"series",path:":series",component:xe,meta:{gallery:!0,subPage:!0,title:"Series"}}]},authors:{path:"/authors",component:Ee,meta:{icon:"fa-solid fa-user-group",nestedGroup:"subPages"},children:[{name:"authors",path:"",component:Lc,meta:{subPage:!0,title:"Authors"}},{name:"author",path:":author",component:xe,meta:{gallery:!0,subPage:!0,title:"Authors"}}]},narrators:{path:"/narrators",component:Ee,meta:{icon:"fa-solid fa-users",nestedGroup:"subPages"},children:[{name:"narrators",path:"",component:Tc,meta:{subPage:!0,title:"Narrators"}},{name:"narrator",path:":narrator",component:xe,meta:{gallery:!0,subPage:!0,title:"Narrators"}}]},publishers:{path:"/publishers",component:Ee,meta:{icon:"fa-solid fa-book",nestedGroup:"subPages"},children:[{name:"publishers",path:"",component:Bc,meta:{subPage:!0,title:"Publishers"}},{name:"publisher",path:":publisher",component:xe,meta:{gallery:!0,subPage:!0,title:"Publishers"}}]}},fallback:{path:"/:pathMatch(.*)*",name:"404",component:Ee,meta:{}}};function Dc(e){if(e){let n=[];e.books?n.push({path:"/",redirect:"/library"}):e.wishlist&&n.push({path:"/",redirect:"/wishlist"}),e.books&&n.push(De.library),!e.books&&e.wishlist&&n.push(De.wishlist);var t=De.subPages;let r=_.get(e,"extras.subPageStates");r?_.each(r,function(u){u.enabled&&n.push(t[u.key])}):(e.books||e.wishlist)&&_.each(t,function(u){n.push(u)}),e.collections&&n.push(De.collections),e.books&&e.wishlist&&n.push(De.wishlist),n.push(De.fallback);const a=vc({history:Ll(""),routes:n,scrollBehavior(u,h,d){return d||(h&&u.name===h.name&&_.isEqual(u.params,h.params)?void 0:{x:0,y:0})}});if(document.querySelector("html.standalone-gallery")){let u=function(d){return new Promise(function(p,i){let m=document.createElement("script");m.src=(d.prefix||"data/")+d.name+"."+e.extras.cacheID+".js",m.type="text/javascript",m.onload=function(){p(d),m=null},m.onerror=function(){i(d),m=null},document.body.appendChild(m)})},h=function(d,p,i,m,g){m=_.filter(m,function(P){return window[P.name+"JSON"]!==!0});let y=[];m.forEach(function(P){y.push(u(P))}),Promise.all(y).catch(function(){g||setTimeout(function(){h(d,p,i,m,"afterError")},1e3)}).finally(function(){let P=_.map(m,function(v){return{key:v.keyOverride||v.name,value:window[v.name+"JSON"]}});ue.commit("buildStandaloneData",P),_.each(m,function(v){window[v.name+"JSON"]=!0}),kt(d,p,i)})};a.beforeEach((d,p,i)=>{if(d.name&&(p.name!==d.name||_.get(p,"query.book")!==_.get(d,"query.book")||p.query.subPageSource!==d.query.subPageSource)){const m=[],g=d.name==="wishlist"||d.query.subPageSource==="wishlist"||d.meta.subPage&&!d.query.subPageSource&&ue.state.sticky.subPageSource==="wishlist";e.wishlist&&g?m.push({name:"wishlist"}):e.books&&m.push({name:"library",keyOverride:"books"}),e.series&&m.push({name:"series"}),e.collections&&m.push({name:"collections"}),h(d,p,i,m)}else kt(d,p,i)})}else a.beforeEach((u,h,d)=>{kt(u,h,d)});return a.afterEach((u,h,d)=>{if(h.name!==u.name){const p=ue.state.navHistory.forward,i=ue.state.navHistory.back;h.name&&h.name!==p[p.length-1]&&h.name!==i[i.length-1]&&ue.commit("navHistory",{key:"back",value:h.name,pushOnly:!0}),ue.state.navHistory.btnNavigation||ue.commit("prop",{key:"navHistory.forward",value:[]}),ue.commit("prop",{key:"navHistory.btnNavigation",value:!1})}}),a}}function kt(e,t,n){e.query.refresh?(delete e.query.refresh,ue.commit("prop",[{key:"showRoute",value:!1},{key:"refreshViewTimeStamp",value:new Date().getTime()}]),n(e)):n()}const An={};An.install=function(e,t){e.config.globalProperties.$updateQuery=function(n){n=n||{};let r=n.query,a=n.value,l=n.history,u=n.queries||this.$route.query,h=JSON.parse(JSON.stringify(u));a===void 0?h[r]?delete h[r]:h[r]=!0:a?h[r]=a:delete h[r],console.log(r,h),l?this.$router.push({query:h}).catch(()=>{}):this.$router.replace({query:h}).catch(()=>{})},e.config.globalProperties.$updateQueries=function(n,r){r=r||{};let a=r.history,l=JSON.parse(JSON.stringify(r.queries||this.$route.query));_.merge(l,n),_.each(l,function(u,h){_.isNil(u)&&delete l[h]}),a?this.$router.push({query:l}).catch(()=>{}):this.$router.replace({query:l}).catch(()=>{})}};let Mn=null,Ke=null,tn=function(){const e=Mn;e&&e.state.isVisible&&(e.hide(),e.reference.blur())};var Vc={directive:"tippy",component:"tippy",componentSingleton:"tippy-singleton",defaultProps:{placement:"top",flipBehavior:["top","bottom","left","right"],allowHTML:!0,arrow:!0,theme:"dark",maxWidth:650,delay:[500,0],a11y:!1,onShow:e=>{Mn=e,Ke=document.querySelector(".list-view-inner-wrap")||window,Ke.addEventListener("scroll",tn,{passive:!0});let t=e.props.content;return(!t||t==="false")&&(t=!1),t},onHide:e=>{Ke||(Ke=document.querySelector(".list-view-inner-wrap")||window),Ke.addEventListener("scroll",tn,{passive:!0})},boundary:"viewport",flipDuration:0}};const Nc=700;var Ic={created:function(e,{value:t},n){if(typeof t!="function"){console.warn(`Expect a function, got ${t}`);return}let r=null;const a=u=>{u.type==="touchstart"&&u.preventDefault(),!(u.type==="click"&&u.button!==0)&&r===null&&(r=setTimeout(()=>t(u),Nc))},l=()=>{r!==null&&(clearTimeout(r),r=null)};["mousedown","touchstart"].forEach(u=>e.addEventListener(u,a,{passive:!0})),["click","mouseout","touchend","touchcancel"].forEach(u=>e.addEventListener(u,l,{passive:!0}))},unmounted:function(e,t){["mousedown","touchstart"].forEach(n=>e.removeEventListener(n,start,{passive:!0})),["click","mouseout","touchend","touchcancel"].forEach(n=>e.removeEventListener(n,cancel,{passive:!0}))}};function nn(e){return e.type.indexOf("mouse")!==-1?e.clientX:e.touches[0].clientX}function sn(e){return e.type.indexOf("mouse")!==-1?e.clientY:e.touches[0].clientY}var jc=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch{}return e}(),zc={install:function(e,t){var n=Object.assign({},{disableClick:!1,tapTolerance:10,swipeTolerance:30,touchHoldTolerance:400,longTapTimeInterval:400,touchClass:"",dragFrequency:100,rollOverFrequency:100},t);function r(v){var b=this.$$touchObj,E=v.type.indexOf("touch")>=0,O=v.type.indexOf("mouse")>=0,M=this;E&&(b.lastTouchStartTime=v.timeStamp),!(O&&b.lastTouchStartTime&&v.timeStamp-b.lastTouchStartTime<350)&&(b.touchStarted||(m(this),b.touchStarted=!0,b.touchMoved=!1,b.swipeOutBounded=!1,b.startX=nn(v),b.startY=sn(v),b.currentX=0,b.currentY=0,b.touchStartTime=v.timeStamp,b.hasSwipe=p(this,"swipe")||p(this,"swipe.left")||p(this,"swipe.right")||p(this,"swipe.top")||p(this,"swipe.bottom"),p(this,"hold")&&(b.touchHoldTimer=setTimeout(function(){b.touchHoldTimer=null,i(v,M,"hold")},b.options.touchHoldTolerance)),i(v,this,"press")))}function a(v){var b=this.$$touchObj,E=nn(v),O=sn(v),M=b.currentX!=E||b.currentY!=O;if(b.currentX=E,b.currentY=O,b.touchMoved){if(b.hasSwipe&&!b.swipeOutBounded){var G=b.options.swipeTolerance;b.swipeOutBounded=Math.abs(b.startX-b.currentX)>G&&Math.abs(b.startY-b.currentY)>G}}else{var I=b.options.tapTolerance;b.touchMoved=Math.abs(b.startX-b.currentX)>I||Math.abs(b.startY-b.currentY)>I,b.touchMoved&&(y(b),i(v,this,"drag.once"))}if(p(this,"rollover")&&M){var j=v.timeStamp,Y=b.options.rollOverFrequency;(b.touchRollTime==null||j>b.touchRollTime+Y)&&(b.touchRollTime=j,i(v,this,"rollover"))}if(p(this,"drag")&&b.touchStarted&&b.touchMoved&&M){var j=v.timeStamp,Y=b.options.dragFrequency;(b.touchDragTime==null||j>b.touchDragTime+Y)&&(b.touchDragTime=j,i(v,this,"drag"))}}function l(){var v=this.$$touchObj;y(v),g(this),v.touchStarted=v.touchMoved=!1,v.startX=v.startY=0}function u(v){var b=this.$$touchObj,E=v.type.indexOf("touch")>=0,O=v.type.indexOf("mouse")>=0;E&&(b.lastTouchEndTime=v.timeStamp);var M=E&&!b.touchHoldTimer;if(y(b),b.touchStarted=!1,g(this),!(O&&b.lastTouchEndTime&&v.timeStamp-b.lastTouchEndTime<350))if(i(v,this,"release"),b.touchMoved){if(b.hasSwipe&&!b.swipeOutBounded){var I=b.options.swipeTolerance,G,j=Math.abs(b.startY-b.currentY),Y=Math.abs(b.startX-b.currentX);(j>I||Y>I)&&(j>I?G=b.startY>b.currentY?"top":"bottom":G=b.startX>b.currentX?"left":"right",p(this,"swipe."+G)?i(v,this,"swipe."+G,G):i(v,this,"swipe",G))}}else if(p(this,"longtap")&&v.timeStamp-b.touchStartTime>b.options.longTapTimeInterval)v.cancelable&&v.preventDefault(),i(v,this,"longtap");else if(p(this,"hold")&&M){v.cancelable&&v.preventDefault();return}else i(v,this,"tap")}function h(){m(this)}function d(){g(this)}function p(v,b){var E=v.$$touchObj.callbacks[b];return E!=null&&E.length>0}function i(v,b,E,O){var M=b.$$touchObj,I=M.callbacks[E];if(I==null||I.length===0)return null;for(var G=0;G<I.length;G++){var j=I[G];j.modifiers.stop&&v.stopPropagation(),j.modifiers.prevent&&v.preventDefault(),!(j.modifiers.self&&v.target!==v.currentTarget)&&typeof j.value=="function"&&(O?j.value(O,v):j.value(v))}}function m(v){var b=v.$$touchObj.options.touchClass;b&&v.classList.add(b)}function g(v){var b=v.$$touchObj.options.touchClass;b&&v.classList.remove(b)}function y(v){v.touchHoldTimer&&(clearTimeout(v.touchHoldTimer),v.touchHoldTimer=null)}function P(v,b){var E=v.$$touchObj||{callbacks:{},hasBindTouchEvents:!1,options:n};return b&&(E.options=Object.assign({},E.options,b)),v.$$touchObj=E,v.$$touchObj}e.directive("touch",{beforeMount:function(v,b){var E=P(v),O=jc?{passive:!0}:!1,M=b.arg||"tap";switch(M){case"swipe":var I=b.modifiers;if(I.left||I.right||I.top||I.bottom){for(var G in b.modifiers)if(["left","right","top","bottom"].indexOf(G)>=0){var j="swipe."+G;E.callbacks[j]=E.callbacks[j]||[],E.callbacks[j].push(b)}}else E.callbacks.swipe=E.callbacks.swipe||[],E.callbacks.swipe.push(b);break;case"press":case"drag":b.modifiers.disablePassive&&(O=!1);default:E.callbacks[M]=E.callbacks[M]||[],E.callbacks[M].push(b)}E.hasBindTouchEvents||(v.addEventListener("touchstart",r,O),v.addEventListener("touchmove",a,O),v.addEventListener("touchcancel",l),v.addEventListener("touchend",u),E.options.disableClick||(v.addEventListener("mousedown",r),v.addEventListener("mousemove",a),v.addEventListener("mouseup",u),v.addEventListener("mouseenter",h),v.addEventListener("mouseleave",d)),E.hasBindTouchEvents=!0)},unmounted:function(v){v.removeEventListener("touchstart",r),v.removeEventListener("touchmove",a),v.removeEventListener("touchcancel",l),v.removeEventListener("touchend",u),v.$$touchObj&&!v.$$touchObj.options.disableClick&&(v.removeEventListener("mousedown",r),v.removeEventListener("mousemove",a),v.removeEventListener("mouseup",u),v.removeEventListener("mouseenter",h),v.removeEventListener("mouseleave",d)),delete v.$$touchObj}}),e.directive("touch-class",{beforeMount:function(v,b){P(v,{touchClass:b.value})}}),e.directive("touch-options",{beforeMount:function(v,b){P(v,b.value)}})}};const Ln={};Ln.install=function(e,t){e.config.globalProperties.$setListRenderingOpts=function(n){if(this.$route.query.sortValues){const r=_.findIndex(n.sort,{key:"sortValues"});n.sort[r].active=this.$route.query.sortValues}if(this.$route.query.sort){let r=_.find(n.sort,{current:!0});r.current=!1;const a=_.findIndex(n.sort,{key:this.$route.query.sort});a>-1&&(n.sort[a].current=!0,n.sort[a].active=this.$route.query.sortDir==="desc")}if(this.$route.query.filter){let r=decodeURIComponent(this.$route.query.filter).split(",");_.each(_.filter(n.filter,{type:"filter"}),function(a){a.active=!1,_.each(r,function(l){a.key===l&&(a.active=!0)})})}if(this.$route.query.filterExtras){let r=this.$route.query.filterExtras.split(",");r=_.map(r,function(a){return decodeURIComponent(a)}),_.each(r,function(a){let l=a.split(":"),u=l[0],h=_.find(n.filter,{type:"filterExtras",key:u});if(h&&(h.active=!0,l.length>1)){if(h.dropdownOpts)h.value=l[1].split("|");else if(h.range){let d=l[1].split("-"),p=parseFloat(d[0]),i=parseFloat(d[1]);h.range=[p,i]}}})}if(this.$route.query.scope){let r=decodeURIComponent(this.$route.query.scope).split(",");_.each(n.scope,function(a){a.active=!1,_.each(r,function(l){a.key===l&&(a.active=!0)})})}this.$store.commit("prop",{key:"listRenderingOpts",value:n})}};function Hc(e){ue.commit("fromLocalStorage"),ue.subscribe(function(n,r){n.type==="stickyProp"||n.type==="updatePlayerProgress"?localStorage.setItem("aleSettings",JSON.stringify(r.sticky)):n.type==="prop"&&_.each(_.isArray(n.payload)?n.payload:[n.payload],function(a){const l=_.get(a,"key","");(_.get(l,"0")==="sticky"||!!l.match(/^sticky\./i))&&localStorage.setItem("aleSettings",JSON.stringify(r.sticky))})});const t=document.querySelector("html.standalone-gallery");ue.commit("prop",[{key:"library",value:e,freeze:!t},{key:"standalone",value:!!t},{key:"displayMode",value:window.matchMedia("(display-mode: standalone)").matches},{key:"urlOrigin",value:"https://audible"+e.extras["domain-extension"]},{key:"extractSettings",value:e.config}]),e.extras.pages.wishlist?e.extras.pages.books||ue.commit("stickyProp",{key:"subPageSource",value:"wishlist"}):ue.commit("stickyProp",{key:"subPageSource",value:"library"}),!e.books&&e.wishlist&&ue.commit("stickyProp",{key:"subPageSource",value:"wishlist"})}const Tn=document.querySelector("html.standalone-gallery"),ve=as(fl);ve.config.devtools=!1;ve.config.productionTip=!1;ve.use(ds);ve.use(An);ve.config.globalProperties.$compEmitter=new ms;ve.use(ue);ve.use(gs,Vc);ve.directive("longpress",Ic);ve.use(zc);ve.use(Ln);if(Tn){let e=function(t){let n=document.createElement("script"),r=document.querySelector("#audible-library-extractor").getAttribute("data-cache-id");n.src="data/temp-data."+r+".js",n.type="text/javascript",n.onload=function(){let a=window.tempDataJSON;window.bookSummaryJSON=!0,n=null,rn(a)},n.onerror=function(){n=null,setTimeout(function(){t||e("afterError")},1e3)},document.head.appendChild(n)};e()}else try{chrome.storage.local.get(null).then(e=>{!_.isEmpty(e)&&e.chunks?(hs.methods.glueFriesBackTogether(e),rn(e)):alert("No existing data found: extract your library again.")})}catch{}function rn(e){let t;if(e.extras.pages=e.extras.pages||{},Tn){t=JSON.parse(JSON.stringify(e));var n=["books","series","collections","wishlist"];_.each(n,function(a){_.get(e,a)===!0&&(delete e[a],_.set(e,"extras.pages.books",!0),e.extras.pages.books=!0)})}Hc(e);let r=Dc(t||e);ve.use(r),ve.mount("#audible-library-extractor")}export{fn as V,rr as _,ba as a,Ur as b,ya as c,vn as d,vi as e,Le as f,yo as g,ga as m,va as p,ma as s};
