import{f as B,_ as q}from"./gallery-findSubPageSource.ad373b19.js";import{_ as w}from"./gallery-page-title.5db93fd4.js";import{d as L}from"./gallery.5cc383db.js";import{m as R}from"./gallery-makeCoverUrl.8378190f.js";import{_ as $,c as a,e as p,d as u,b as S,F as b,A as h,q as H,z as M,o as t,a as k,s as y,E as T,x as f,u as C}from"./lodash.9f572fca.js";import"./content-script-helpers.e49fc91b.js";import"./jquery.050764e9.js";import"./howler.22814ddb.js";import"./index.abab9d81.js";import"./tippy.9fe8ff20.js";const N={name:"aleCategories",mixins:[L,R,B],data:function(){return{categories:null,listReady:!1,pageTitle:"Categories",pageSubTitle:null}},methods:{getRandomBooks:function(s,n){let r=_.filter(s,function(c){return c.categories&&c.categories.length>1&&c.cover});return _.sampleSize(r,n)},makeCollection:function(){const s=this;let n={};n.parent=[],_.each(s.subPageSource.collection,function(r,c){if(r.categories){const m=_.get(r,"categories[0].name");let i=_.find(n.parent,["name",m]);i||(i=n.parent.push({name:m,slug:s.slugify(m),books:[]})),i=_.find(n.parent,["name",m]),i.books.push(r);const l=_.get(r,"categories[1].name");if(l){i.sub||(i.sub=[]);let g=_.find(i.sub,["name",l]);g||(g=i.sub.push({name:l,slug:s.slugify(l),books:[]})),g=_.find(i.sub,["name",l]),g.books.push(r)}}}),n.parent=_.orderBy(n.parent,"name","asc"),_.each(n.parent,function(r,c){r.sub=_.orderBy(r.sub,"name","asc")}),this.categories=n.parent,this.$store.commit("prop",{key:"pageCollection",value:[]}),this.$store.commit("prop",{key:"mutatingCollection",value:[]}),this.listReady=!0}}},V={key:0,id:"ale-categories",class:"box-layout-wrapper"},D=["data-category"],j={key:1},x=["innerHTML"],z=["innerHTML"],E={key:2,class:"child-categories"},F={key:1},O={key:2,class:"number-of-books"},U={class:"sample-covers"},A=["src"];function I(s,n,r,c,m,i){const l=w,g=q,d=H("router-link"),v=M("tippy");return s.listReady?(t(),a("div",V,[s.pageTitle||s.pageSubTitle?(t(),p(l,{key:0,pageTitle:s.pageTitle,pageSubTitle:s.pageSubTitle},null,8,["pageTitle","pageSubTitle"])):u("",!0),S(g),(t(!0),a(b,null,h(s.categories,(e,W)=>(t(),a("div",{class:"single-box","data-category":e.name,key:e.name},[k("h2",null,[e.slug?(t(),p(d,{key:0,to:{name:"category",params:{parent:e.slug,child:void 0},query:{subPageSource:s.subPageSource.name}}},{default:y(()=>[T(f(e.name),1)]),_:2},1032,["to"])):(t(),a("span",j,f(e.name),1))]),e.slug?(t(),p(d,{key:0,class:"books-total",to:{name:"category",params:{parent:e.slug,child:void 0},query:{subPageSource:s.subPageSource.name}}},{default:y(()=>[e.books?C((t(),a("div",{key:0,innerHTML:e.books.length,content:"Total number of books in this category."},null,8,x)),[[v,{placement:"right"}]]):u("",!0)]),_:2},1032,["to"])):e.books?C((t(),a("div",{key:1,innerHTML:e.books.length,content:"Total number of books in this category."},null,8,z)),[[v,{placement:"right"}]]):u("",!0),e.sub?(t(),a("div",E,[(t(!0),a(b,null,h(e.sub,(o,P)=>(t(),a("div",{key:o.name},[e&&e.slug&&o&&o.slug?(t(),p(d,{key:0,to:{name:"category",params:{parent:e.slug,child:o.slug},query:{subPageSource:s.subPageSource.name}}},{default:y(()=>[T(f(o.name),1)]),_:2},1032,["to"])):(t(),a("span",F)),o.books?(t(),a("span",O,"("+f(o.books.length)+")",1)):u("",!0)]))),128))])):u("",!0),k("div",U,[e&&e.books?(t(!0),a(b,{key:0},h(i.getRandomBooks(e.books,5),(o,P)=>(t(),a("div",{class:"sample-cover",key:o.asin},[S(d,{to:{name:"category",params:{parent:o.categories[0]?s.slugify(o.categories[0].name):null,child:o.categories[1]?s.slugify(o.categories[1].name):null},query:{book:o.asin,subPageSource:s.subPageSource.name}}},{default:y(()=>[k("img",{crossorigin:"anonymous",src:s.makeCoverUrl(o.cover),alt:""},null,8,A)]),_:2},1032,["to"])]))),128)):u("",!0)])],8,D))),128))])):u("",!0)}var oe=$(N,[["render",I],["__scopeId","data-v-0252bdde"]]);export{oe as default};
