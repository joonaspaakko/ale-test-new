import{m as Ce}from"./gallery-makeCoverUrl.8378190f.js";import{o as y,c as b,a as m,_ as j,r as ne,w as G,v as Ct,b as x,n as te,t as Y,d as O,p as Pe,e as Ee,f as q,g as st,h as N,i as We,F as ce,j as ue,k as Fe,l as ts,m as Pt,q as ss,s as ns,u as os,x as Re,y as nt,z as se,A as is,B as _e,C as F,D as Et,E as rs,G as Rt,H as ke,I as Ot,J as Ne,K as as,L as ls,M as cs}from"./lodash.4652d4aa.js";import{U as je,h as us}from"./content-script-helpers.e49fc91b.js";import{h as hs}from"./howler.22814ddb.js";import{s as ds}from"./index.abab9d81.js";import{c as ps,m as fs,V as ms}from"./tippy.b06e4748.js";import"./jquery.050764e9.js";const gs={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},vs=m("path",{fill:"currentColor",d:"M18 13c0 3.31-2.69 6-6 6s-6-2.69-6-6s2.69-6 6-6v4l5-5l-5-5v4c-4.42 0-8 3.58-8 8s3.58 8 8 8s8-3.58 8-8h-2z"},null,-1),_s=m("path",{fill:"currentColor",d:"M10.06 15.38c-.29 0-.62-.17-.62-.54h-.85c0 .97.9 1.23 1.45 1.23c.87 0 1.51-.46 1.51-1.25c0-.66-.45-.9-.71-1c.11-.05.65-.32.65-.92c0-.21-.05-1.22-1.44-1.22c-.62 0-1.4.35-1.4 1.16h.85c0-.34.31-.48.57-.48c.59 0 .58.5.58.54c0 .52-.41.59-.63.59h-.46v.66h.45c.65 0 .7.42.7.64c0 .32-.21.59-.65.59zm3.79-3.7c-.14 0-1.44-.08-1.44 1.82v.74c0 1.9 1.31 1.82 1.44 1.82c.14 0 1.44.09 1.44-1.82v-.74c.01-1.91-1.3-1.82-1.44-1.82zm.6 2.67c0 .77-.21 1.03-.59 1.03s-.6-.26-.6-1.03v-.97c0-.75.22-1.01.59-1.01c.38 0 .6.26.6 1.01v.97z"},null,-1),ys=[vs,_s];function bs(e,t){return y(),b("svg",gs,ys)}var xt={name:"ic-baseline-forward30",render:bs};const ks={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ws=m("path",{fill:"currentColor",d:"M8 19c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2v10c0 1.1.9 2 2 2zm6-12v10c0 1.1.9 2 2 2s2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2z"},null,-1),$s=[ws];function Ss(e,t){return y(),b("svg",ks,$s)}var Cs={name:"ic-round-pause",render:Ss};const Ps={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Es=m("path",{fill:"currentColor",d:"M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18a1 1 0 0 0 0-1.69L9.54 5.98A.998.998 0 0 0 8 6.82z"},null,-1),Rs=[Es];function Os(e,t){return y(),b("svg",Ps,Rs)}var xs={name:"ic-round-play-arrow",render:Os};const Ms={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ts=m("path",{fill:"currentColor",d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6s-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8s-3.58-8-8-8z"},null,-1),Ls=m("path",{fill:"currentColor",d:"M9.56 13.49h.45c.21 0 .37-.05.48-.16s.16-.25.16-.43a.538.538 0 0 0-.15-.39c-.05-.05-.11-.09-.18-.11s-.16-.04-.25-.04c-.08 0-.15.01-.22.03s-.13.05-.18.1s-.09.09-.12.15s-.05.13-.05.2h-.85a1.06 1.06 0 0 1 .41-.85c.13-.1.27-.18.44-.23s.35-.08.54-.08c.21 0 .41.03.59.08s.33.13.46.23s.23.23.3.38s.11.33.11.53a.842.842 0 0 1-.17.52a1.1 1.1 0 0 1-.48.39c.24.09.42.21.54.39s.18.38.18.61c0 .2-.04.38-.12.53s-.18.29-.32.39s-.29.19-.48.24s-.38.08-.6.08c-.18 0-.36-.02-.53-.07s-.33-.12-.46-.23s-.25-.23-.33-.38s-.12-.34-.12-.55h.85c0 .08.02.15.05.22s.07.12.13.17s.12.09.2.11s.16.04.25.04c.1 0 .19-.01.27-.04s.15-.07.2-.12s.1-.11.13-.18s.04-.15.04-.24c0-.11-.02-.21-.05-.29s-.08-.15-.14-.2s-.13-.09-.22-.11s-.18-.04-.29-.04h-.47v-.65zm5.74.75c0 .32-.03.6-.1.82s-.17.42-.29.57s-.28.26-.45.33s-.37.1-.59.1s-.41-.03-.59-.1s-.33-.18-.46-.33s-.23-.34-.3-.57s-.11-.5-.11-.82v-.74c0-.32.03-.6.1-.82s.17-.42.29-.57s.28-.26.45-.33s.37-.1.59-.1s.41.03.59.1s.33.18.46.33s.23.34.3.57s.11.5.11.82v.74zm-.85-.86c0-.19-.01-.35-.04-.48s-.07-.23-.12-.31s-.11-.14-.19-.17s-.16-.05-.25-.05s-.18.02-.25.05s-.14.09-.19.17s-.09.18-.12.31s-.04.29-.04.48v.97c0 .19.01.35.04.48s.07.24.12.32s.11.14.19.17s.16.05.25.05s.18-.02.25-.05s.14-.09.19-.17s.09-.19.11-.32c.03-.13.04-.29.04-.48v-.97z"},null,-1),As=[Ts,Ls];function Bs(e,t){return y(),b("svg",Ms,As)}var Mt={name:"ic-baseline-replay30",render:Bs};const Is={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},Ns=m("path",{fill:"currentColor",d:"M14 6a4 4 0 0 1-2.25 3.598V8.437a3 3 0 1 0-3.5 0v1.16A4 4 0 1 1 14 6ZM9.47 17.78a.75.75 0 0 0 1.06 0l2.5-2.5a.75.75 0 1 0-1.06-1.06l-1.22 1.22V5.75a.75.75 0 0 0-1.5 0v9.69l-1.22-1.22a.75.75 0 0 0-1.06 1.06l2.5 2.5Z"},null,-1),zs=[Ns];function Hs(e,t){return y(),b("svg",Is,zs)}var Vs={name:"fluent-swipe-down20-filled",render:Hs};const qs={name:"audioPlayerUiDesktop",mixins:[Ce],data:function(){return{store:this.$store.state}},computed:{cover(){return this.makeCoverUrl(this.$store.getters.audioPlayerBook.cover,500)}},methods:{swipeHandler(){this.$store.commit("prop",{key:"showMobilePlayer",value:!1})}}},js=e=>(Pe("data-v-451a7083"),e=e(),Ee(),e),Us={id:"audio-player"},Gs={class:"inner-wrap"},Ds={class:"close-instructions"},Ws=js(()=>m("div",{class:"text"}," Swipe to close ",-1)),Fs={class:"icon"},Js={class:"cover-wrap"},Ks=["src"],Ys={class:"bottom"},Xs={class:"player-timeline"},Qs={key:0,class:"time-display"},Zs={class:"scrubber-wrapper"},en=["value"],tn={class:"progress-filler"},sn={class:"player-buttons"},nn={class:"play-pause"};function on(e,t,s,n,o,i){const r=Vs,c=Mt,l=xs,u=Cs,a=xt,d=ne("touch");return G((y(),b("div",Us,[m("div",Gs,[m("div",Ds,[Ws,m("div",Fs,[x(r)])]),m("div",Js,[m("img",{class:"book-cover",src:i.cover,alt:"",draggable:"false"},null,8,Ks),m("div",{class:"book-cover-bg",style:te({backgroundImage:`url('${i.cover}')`})},null,4)]),m("div",Ys,[m("div",Xs,[e.store.audioPlayer.timeDisplay?(y(),b("div",Qs,Y(e.store.audioPlayer.timeDisplay),1)):O("",!0),m("div",Zs,[m("input",{class:"scrubber",type:"range",step:"0.1",min:"0",value:e.store.audioPlayer.progress,max:"100",onChange:t[0]||(t[0]=p=>e.$compEmitter.emit("audio-player-scrubbed",p))},null,40,en),m("div",tn,[m("div",{style:te({width:e.store.audioPlayer.progress?e.store.audioPlayer.progress+"%":null})},null,4)])])]),e.$store.getters.audioPlayerTitle?(y(),b("div",{key:0,class:"book",onClick:t[1]||(t[1]=(...p)=>e.openBook&&e.openBook(...p))},[m("span",null,Y(e.$store.getters.audioPlayerTitle),1)])):O("",!0),m("div",sn,[m("div",{class:"back",onClick:t[2]||(t[2]=p=>e.$compEmitter.emit("audio-player-seek-back"))},[x(c)]),m("div",nn,[e.$store.state.audioPlayer.playing?(y(),b("div",{key:1,class:"pause",onClick:t[4]||(t[4]=p=>e.$compEmitter.emit("audio-player-pause"))},[x(u)])):(y(),b("div",{key:0,class:"play",onClick:t[3]||(t[3]=p=>e.$compEmitter.emit("audio-player-play"))},[x(l)]))]),m("div",{class:"forward",onClick:t[5]||(t[5]=p=>e.$compEmitter.emit("audio-player-seek-forward"))},[x(a)])])])])])),[[Ct,e.store.audioPlayer.audio],[d,i.swipeHandler,"swipe",{bottom:!0}],[d,i.swipeHandler,"swipe",{top:!0}]])}var rn=j(qs,[["render",on],["__scopeId","data-v-451a7083"]]);const an={viewBox:"0 0 320 512",width:"1.2em",height:"1.2em"},ln=m("path",{fill:"currentColor",d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256L34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},null,-1),cn=[ln];function un(e,t){return y(),b("svg",an,cn)}var hn={name:"fa-solid-chevron-right",render:un};const dn={viewBox:"0 0 320 512",width:"1.2em",height:"1.2em"},pn=m("path",{fill:"currentColor",d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},null,-1),fn=[pn];function mn(e,t){return y(),b("svg",dn,fn)}var gn={name:"fa-solid-chevron-left",render:mn};const vn={name:"backForwardBtns",props:["viewportFloat"],methods:{navigate:function(e){this.$store.state.navHistory[e].length>0&&(this.$store.commit("navHistory",{key:e,value:this.$route.name}),this.$router[e]())}}};function _n(e,t,s,n,o,i){const r=gn,c=hn;return y(),b("div",{class:q(["mobile-back-btns-wrapper",{"viewport-float":s.viewportFloat}])},[m("div",{class:q(["mobile-back-btns",{disabled:e.$store.state.navHistory.back.length<1}]),onClick:t[0]||(t[0]=st(l=>i.navigate("back"),["prevent"]))},[x(r)],2),m("div",{class:q(["mobile-back-btns",{disabled:e.$store.state.navHistory.forward.length<1}]),onClick:t[1]||(t[1]=st(l=>i.navigate("forward"),["prevent"]))},[x(c)],2)],2)}var Tt=j(vn,[["render",_n],["__scopeId","data-v-7ea92576"]]);const yn={viewBox:"0 0 448 512",width:"1.2em",height:"1.2em"},bn=m("path",{fill:"currentColor",d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},null,-1),kn=[bn];function wn(e,t){return y(),b("svg",yn,kn)}var $n={name:"fa-solid-bars",render:wn};const Sn={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},Cn=m("path",{fill:"currentColor",d:"M256 80C141.1 80 48 173.1 48 288v104c0 13.3-10.7 24-24 24S0 405.3 0 392V288C0 146.6 114.6 32 256 32s256 114.6 256 256v104c0 13.3-10.7 24-24 24s-24-10.7-24-24V288c0-114.9-93.1-208-208-208zM80 352c0-35.3 28.7-64 64-64h16c17.7 0 32 14.3 32 32v128c0 17.7-14.3 32-32 32h-16c-35.3 0-64-28.7-64-64v-64zm288-64c35.3 0 64 28.7 64 64v64c0 35.3-28.7 64-64 64h-16c-17.7 0-32-14.3-32-32V320c0-17.7 14.3-32 32-32h16z"},null,-1),Pn=[Cn];function En(e,t){return y(),b("svg",Sn,Pn)}var Rn={name:"fa6-solid-headphones-simple",render:En};const On={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},xn=m("path",{fill:"currentColor",d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128c0-70.7 57.2-128 128-128c70.7 0 128 57.2 128 128c0 70.7-57.2 128-128 128z"},null,-1),Mn=[xn];function Tn(e,t){return y(),b("svg",On,Mn)}var Lt={name:"fa-solid-search",render:Tn};const Ln={name:"mobileMenuFloaters",props:["mobileMenuOpen","mobileThreshold"],data:function(){return{store:this.$store.state}},computed:{showMobilePlayerButton(){return!this.mobileMenuOpen&&this.mobileThreshold&&!this.store.showMobilePlayer&&this.store.audioPlayer.audio}}},An={class:"second-row"};function Bn(e,t,s,n,o,i){const r=Lt,c=Rn,l=Tt,u=$n;return y(),b("div",{id:"mobile-menu-floaters",class:q({mobile:s.mobileMenuOpen})},[m("div",An,[e.$store.state.searchMounted&&!s.mobileMenuOpen?(y(),b("div",{key:0,class:"search-btn",onClick:t[0]||(t[0]=a=>e.$emit("startSearching")),style:te({top:i.showMobilePlayerButton?"-93px":"-46px"})},[x(r)],4)):O("",!0),i.showMobilePlayerButton?(y(),b("div",{key:1,class:"mobile-player-button",onClick:t[1]||(t[1]=a=>{e.$store.commit("prop",{key:"showMobilePlayer",value:!0})})},[x(c)])):O("",!0),e.$store.state.displayMode&&!s.mobileMenuOpen?(y(),N(l,{key:2})):O("",!0),m("div",{class:"burger-menu",onClick:t[2]||(t[2]=a=>e.$emit("update:mobileMenuOpen",!s.mobileMenuOpen))},[x(u,{class:"brgr-btn"})])])],2)}var In=j(Ln,[["render",Bn]]);const Nn={viewBox:"0 0 352 512",width:"1.2em",height:"1.2em"},zn=m("path",{fill:"currentColor",d:"m242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28L75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256L9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},null,-1),Hn=[zn];function Vn(e,t){return y(),b("svg",Nn,Hn)}var At={name:"fa-solid-times",render:Vn};const qn={viewBox:"0 0 320 512",width:"1.2em",height:"1.2em"},jn=m("path",{fill:"currentColor",d:"M48 64C21.5 64 0 85.5 0 112v288c0 26.5 21.5 48 48 48h32c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H48zm192 0c-26.5 0-48 21.5-48 48v288c0 26.5 21.5 48 48 48h32c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48h-32z"},null,-1),Un=[jn];function Gn(e,t){return y(),b("svg",qn,Un)}var Dn={name:"fa6-solid-pause",render:Gn};const Wn={viewBox:"0 0 384 512",width:"1.2em",height:"1.2em"},Fn=m("path",{fill:"currentColor",d:"M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80v352c0 17.4 9.4 33.4 24.5 41.9S58.2 482 73 473l288-176c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"},null,-1),Jn=[Fn];function Kn(e,t){return y(),b("svg",Wn,Jn)}var Yn={name:"fa6-solid-play",render:Kn};const Xn={name:"audioPlayerUiDesktop",mixins:[Ce],data:function(){return{store:this.$store.state}},watch:{"store.audioPlayer.audio"(e){this.$nextTick(()=>{this.$store.commit("prop",{key:"desktopPlayerHeight",value:e?this.$refs.player.offsetHeight/2+"px":null})})}}},Qn={id:"audio-player",ref:"player"},Zn={class:"inner-wrap"},eo={class:"player-innards"},to=["src","content"],so={key:0,class:"time-display"},no={class:"scrubber-wrapper"},oo=["value"],io={class:"progress-filler"},ro={class:"player-buttons"};function ao(e,t,s,n,o,i){const r=Yn,c=Dn,l=At,u=Mt,a=xt,d=ne("tippy");return G((y(),b("div",Qn,[m("div",Zn,[m("div",eo,[G(m("img",{class:"book-cover",src:e.makeCoverUrl(e.$store.getters.audioPlayerBook.cover,280),alt:"",content:(e.$store.state.audioPlayer.sample?"<strong>sample</strong> | ":"")+e.$store.getters.audioPlayerTitle},null,8,to),[[d,{placement:"right",flipBehavior:["right","bottom"]}]]),e.store.audioPlayer.timeDisplay?(y(),b("div",so,Y(e.store.audioPlayer.timeDisplay),1)):O("",!0),m("div",no,[m("input",{class:"scrubber",type:"range",step:"0.1",min:"0",value:e.store.audioPlayer.progress,max:"100",onChange:t[0]||(t[0]=p=>e.$compEmitter.emit("audio-player-scrubbed",p))},null,40,oo),m("div",io,[m("div",{style:te({width:e.store.audioPlayer.progress?e.store.audioPlayer.progress+"%":null})},null,4)])]),m("div",ro,[e.$store.state.audioPlayer.playing?(y(),b("div",{key:1,class:"pause",onClick:t[2]||(t[2]=p=>e.$compEmitter.emit("audio-player-pause"))},[x(c)])):(y(),b("div",{key:0,class:"play",onClick:t[1]||(t[1]=p=>e.$compEmitter.emit("audio-player-play"))},[x(r)])),m("div",{class:"stop",onClick:t[3]||(t[3]=p=>e.$compEmitter.emit("audio-player-stop"))},[x(l)]),m("div",{class:"back",onClick:t[4]||(t[4]=p=>e.$compEmitter.emit("audio-player-seek-back"))},[x(u)]),m("div",{class:"forward",onClick:t[5]||(t[5]=p=>e.$compEmitter.emit("audio-player-seek-forward"))},[x(a)])])])])],512)),[[Ct,e.store.audioPlayer.audio]])}var lo=j(Xn,[["render",ao],["__scopeId","data-v-a2b7a7b2"]]);const co={viewBox:"0 0 640 512",width:"1.2em",height:"1.2em"},uo=m("path",{fill:"currentColor",d:"M579.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0l112.3-112.3zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5l112.2-112.3c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z"},null,-1),ho=[uo];function po(e,t){return y(),b("svg",co,ho)}var fo={name:"fa6-solid-link",render:po};const mo={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},go=m("path",{fill:"currentColor",d:"M640 384v256H384V384h256zm64 0h192v256H704V384zm-64 512H384V704h256v192zm64 0V704h192v192H704zm-64-768v192H384V128h256zm64 0h192v192H704V128zM320 384v256H128V384h192zm0 512H128V704h192v192zm0-768v192H128V128h192z"},null,-1),vo=[go];function _o(e,t){return y(),b("svg",mo,vo)}var Bt={name:"ep-grid",render:_o};const yo={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},bo=m("path",{fill:"currentColor",d:"M4 3h16a2 2 0 0 1 2 2v15a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2m0 4v3h4V7H4m6 0v3h4V7h-4m10 3V7h-4v3h4M4 12v3h4v-3H4m0 8h4v-3H4v3m6-8v3h4v-3h-4m0 8h4v-3h-4v3m10 0v-3h-4v3h4m0-8h-4v3h4v-3Z"},null,-1),ko=[bo];function wo(e,t){return y(),b("svg",yo,ko)}var $o={name:"mdi-table-large",render:wo};const So={name:"ViewModeSwitcher",props:["justIcon"],data:function(){return{sticky:this.$store.state.sticky,viewModes:["grid","spreadsheet"]}},methods:{changeViewMode:function(){const e=this;let t=_.findIndex(this.viewModes,function(n){return n===e.sticky.viewMode});t+1>this.viewModes.length-1?t=0:t=t+1;const s=this.viewModes[t];this.$store.commit("stickyProp",{key:"viewMode",value:s}),this.$updateQueries({y:null,view:s})}}},Co=["content"];function Po(e,t,s,n,o,i){const r=$o,c=Bt,l=ne("tippy");return G((y(),b("div",{class:q(["view-mode-switcher icon",{"no-style":s.justIcon}]),onClick:t[0]||(t[0]=(...u)=>i.changeViewMode&&i.changeViewMode(...u)),content:"Change to <strong>"+(e.sticky.viewMode==="grid"?"spreadsheet":"grid")+"</strong> view"},[e.sticky.viewMode==="grid"?(y(),N(r,{key:0,class:"icon"})):e.sticky.viewMode==="spreadsheet"?(y(),N(c,{key:1,class:"icon"})):O("",!0)],10,Co)),[[l,{allowHTML:!0}]])}var Eo=j(So,[["render",Po]]);const Ro={props:["float"],methods:{startSearching(){this.$compEmitter.emit("ios-auto-zoom-disable"),this.$compEmitter.emit("search-focus")}}};function Oo(e,t,s,n,o,i){const r=Lt,c=ne("tippy");return e.$store.state.searchMounted,G((y(),b("div",{key:0,class:q(["search-btn icon",{float:s.float}]),onClick:t[0]||(t[0]=(...l)=>i.startSearching&&i.startSearching(...l)),content:`
    Click to scroll up and search. <br>
    Read about advanced search operators 
    <a target="_blank" rel="noopener noreferrer" href="https://joonaspaakko.gitbook.io/audible-library-extractor/gallery/advanced-search">
      here
    </a>.`},[x(r)],2)),[[c,{interactive:!0,allowHTML:!0}]])}var xo=j(Ro,[["render",Oo],["__scopeId","data-v-3a7ede6c"]]);const Mo={viewBox:"0 0 384 512",width:"1.2em",height:"1.2em"},To=m("path",{fill:"currentColor",d:"M223.5 32C100 32 0 132.3 0 256s100 224 223.5 224c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"},null,-1),Lo=[To];function Ao(e,t){return y(),b("svg",Mo,Lo)}var Bo={name:"fa6-solid-moon",render:Ao};const Io={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},No=m("path",{fill:"currentColor",d:"M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391l-19.9 107.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391L13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256L2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121l19.9-107.9c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1l90.3-62.3c4.5-3.1 10.2-3.7 15.2-1.6zM352 256c0 53-43 96-96 96s-96-43-96-96s43-96 96-96s96 43 96 96zm32 0c0-70.7-57.3-128-128-128s-128 57.3-128 128s57.3 128 128 128s128-57.3 128-128z"},null,-1),zo=[No];function Ho(e,t){return y(),b("svg",Io,zo)}var Vo={name:"fa6-solid-sun",render:Ho};const qo={name:"lightSwitch",data:function(){return{tippyContent:""}},created:function(){this.lightSwitchToggle(!0)},methods:{lightSwitchToggle:function(e){e?this.autoLightsOff():(this.$store.commit("stickyProp",{key:"lightSwitch",value:this.$store.state.sticky.lightSwitch?0:1}),this.$store.state.sticky.lightSwitchSetByUser||this.$store.commit("stickyProp",{key:"lightSwitchSetByUser",value:!0}));const t=document.querySelector("html");t.classList.remove("theme-light"),t.classList.remove("theme-dark"),t.classList.add(this.$store.state.sticky.lightSwitch?"theme-light":"theme-dark")},autoLightsOff:function(){window.matchMedia("(prefers-color-scheme)").media!=="not all"&&this.$store.state.sticky.lightSwitch&&!this.$store.state.sticky.lightSwitchSetByUser&&this.$store.commit("stickyProp",{key:"lightSwitch",value:0})}}},jo={class:"light-switch text-button"};function Uo(e,t,s,n,o,i){const r=Vo,c=Bo;return y(),b("div",jo,[m("div",{class:"icon",onClick:t[0]||(t[0]=l=>i.lightSwitchToggle(!1))},[e.$store.state.sticky.lightSwitch?(y(),N(r,{key:0})):(y(),N(c,{key:1}))])])}var Go=j(qo,[["render",Uo],["__scopeId","data-v-f55d5b5a"]]);const Do={name:"menuLooper",props:["routes","childRoutes","mobileMenuOpen","inRoot","desktopMenu"],data:function(){return{menuOpen:!0,copiedToClipboard:!1}},methods:{getHrefAttr(e){return e.tag==="a"?"href":"to"},itemActive(e){const t=this.$route.name;return t===e.name||_.find(e.children,{name:t})?"router-link-active":null},subItemActive(e){const t=this.$route.name;return _.find(e.childItems,function(n){return t===n.name||_.find(n.children,{name:t})})?"router-link-active":null},getRoutePath(e){return _.get(e,"path")?{name:_.get(e,"name")||_.get(e,"children[0].name"),query:{refresh:!0}}:_.get(e,"href")},getRouteName(e){if(e.altName)return e.altName(e);{const t=_.get(e,"children[0].meta.title")||_.get(e,"children[0].name")||e.name;return _.get(e,"meta.nestedGroup")==="extension-tools"?t:_.startCase(t)}},closeMenu(){this.menuOpen=!1,this.$nextTick(function(){this.menuOpen=!0})},additionalClick(e){this.mobileMenuOpen?this.$emit("update:mobileMenuOpen",!this.mobileMenuOpen):this.$emit("closeMenu")},copyToClipboard(){navigator.clipboard.writeText(window.location.href);const e=_.get(this.$refs,"copyToClipboard.$el")||_.get(this.$refs,"copyToClipboard.$el");e._tippy.show(),setTimeout(()=>{e._tippy.hide()},2e3)}}},Wo={key:0},Fo={key:1,class:"mobile-menu-top-spacer"},Jo=["onClick"],Ko={key:0,class:"menu-item-icon"},Yo=["innerHTML"],Xo={key:0,class:"sub-menu"},Qo={key:2,class:"menu-icon-toolbar"},Zo={key:0},ei={key:1},ti={key:2};function si(e,t,s,n,o,i){const r=We("menuLooper"),c=Go,l=xo,u=Eo,a=fo,d=lo,p=ne("tippy");return y(),b("div",{class:q(["menu-items",{"has-sub-menu":s.childRoutes,mobileMenu:s.mobileMenuOpen}])},[e.menuOpen?(y(),b("div",Wo,[s.mobileMenuOpen?(y(),b("div",{key:0,class:"mobile-menu-top-filler",onClick:t[0]||(t[0]=g=>e.$emit("update:mobileMenuOpen",!s.mobileMenuOpen))})):O("",!0),s.mobileMenuOpen?(y(),b("div",Fo)):O("",!0),(y(!0),b(ce,null,ue(s.routes,g=>G((y(),N(Pt(g.tag||"router-link"),ts({tabindex:"0",key:g.path,[i.getHrefAttr(g)||""]:i.getRoutePath(g),target:g.href?"_blank":null,class:["menu-item",[g.meta.groupName,i.itemActive(g),i.subItemActive(g),g.disabled||(g.condition?!g.condition():null)?"disabled":"",g.highlight?"highlight":"null"]],content:typeof g.tippy=="function"?g.tippy():g.tippy,onClick:$=>g.click?g.click(g):null}),{default:Fe(()=>[m("div",{class:"menu-item-inner",onClick:$=>i.additionalClick(g)},[g.meta.icon?(y(),b("span",Ko,[m("i",{class:q(g.meta.icon)},null,2)])):O("",!0),m("span",{class:"menu-item-text",innerHTML:i.getRouteName(g)},null,8,Yo)],8,Jo),g.childItems?(y(),b("div",Xo,[x(r,{routes:g.childItems,childRoutes:g.childItems,onCloseMenu:i.closeMenu},null,8,["routes","childRoutes","onCloseMenu"])])):O("",!0)]),_:2},1040,["target","class","content","onClick"])),[[p,{placement:"left",flipBehavior:["left","top","bottom"],maxWidth:400}]])),128)),s.inRoot?(y(),b("div",Qo,[m("div",null,[x(c)]),s.mobileMenuOpen?O("",!0):(y(),b("div",Zo,[x(l)])),s.mobileMenuOpen?(y(),b("div",ei,[e.$store.state.searchMounted?(y(),N(u,{key:0,justIcon:!0})):O("",!0)])):O("",!0),s.mobileMenuOpen?(y(),b("div",ti,[G(x(a,{class:"icon",onClick:t[1]||(t[1]=g=>i.copyToClipboard()),content:"Page URL copied to clipboard!",ref:"copyToClipboard"},null,512),[[p,{trigger:"manual"}]])])):O("",!0)])):O("",!0)])):O("",!0),s.inRoot&&s.desktopMenu?(y(),N(d,{key:1})):O("",!0)],2)}var ni=j(Do,[["render",si],["__scopeId","data-v-6c173dab"]]);const oi={name:"modal",props:["toggled"],data:function(){return{modalOpen:!0}},created:function(){},methods:{close:function(){this.$emit("closeModal")},closeOverlay:function(e){let t=this;(e.target===this.$refs.modalGrandpa||e.target===this.$refs.modalPapa)&&t.close()}}},ii={class:"outer-wrap",ref:"modalPapa"},ri={class:"inner-wrap"};function ai(e,t,s,n,o,i){const r=At,c=ne("shortkey");return y(),b("div",{id:"modal-wrapper",ref:"modalGrandpa",onClick:t[2]||(t[2]=(...l)=>i.closeOverlay&&i.closeOverlay(...l))},[m("div",ii,[m("div",ri,[ss(e.$slots,"default"),G((y(),b("div",{class:"close-btn",onClick:t[0]||(t[0]=(...l)=>i.close&&i.close(...l)),onShortkey:t[1]||(t[1]=(...l)=>i.close&&i.close(...l))},[x(r)],32)),[[c,["esc"],void 0,{once:!0}]])])],512)],512)}var Oe=j(oi,[["render",ai]]);const li={viewBox:"0 0 16 16",width:"1.2em",height:"1.2em"},ci=m("path",{fill:"currentColor","fill-rule":"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59c.4.07.55-.17.55-.38c0-.19-.01-.82-.01-1.49c-2.01.37-2.53-.49-2.69-.94c-.09-.23-.48-.94-.82-1.13c-.28-.15-.68-.52-.01-.53c.63-.01 1.08.58 1.23.82c.72 1.21 1.87.87 2.33.66c.07-.52.28-.87.51-1.07c-1.78-.2-3.64-.89-3.64-3.95c0-.87.31-1.59.82-2.15c-.08-.2-.36-1.02.08-2.12c0 0 .67-.21 2.2.82c.64-.18 1.32-.27 2-.27c.68 0 1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82c.44 1.1.16 1.92.08 2.12c.51.56.82 1.27.82 2.15c0 3.07-1.87 3.75-3.65 3.95c.29.25.54.73.54 1.48c0 1.07-.01 1.93-.01 2.2c0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"},null,-1),ui=[ci];function hi(e,t){return y(),b("svg",li,ui)}var di={name:"octicon-mark-github16",render:hi};const pi={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},fi=m("path",{fill:"currentColor",d:"M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32v242.7l-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7V32zM64 352c-35.3 0-64 28.7-64 64v32c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64v-32c0-35.3-28.7-64-64-64H346.5l-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352H64zm368 104c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"},null,-1),mi=[fi];function gi(e,t){return y(),b("svg",pi,mi)}var It={name:"fa6-solid-download",render:gi};const vi={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},_i=ns('<g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"><path stroke-dasharray="2 4" stroke-dashoffset="6" d="M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21"><animate attributeName="stroke-dashoffset" dur="0.6s" repeatCount="indefinite" values="6;0"></animate></path><path stroke-dasharray="30" stroke-dashoffset="30" d="M12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.1s" dur="0.3s" values="30;0"></animate></path><path stroke-dasharray="10" stroke-dashoffset="10" d="M12 8v7.5"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.5s" dur="0.2s" values="10;0"></animate></path><path stroke-dasharray="6" stroke-dashoffset="6" d="M12 15.5l3.5 -3.5M12 15.5l-3.5 -3.5"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.7s" dur="0.2s" values="6;0"></animate></path></g>',1),yi=[_i];function bi(e,t){return y(),b("svg",vi,yi)}var ki={name:"line-md-downloading-loop",render:bi};const wi={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},$i=m("path",{fill:"currentColor",d:"m173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69L432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},null,-1),Si=[$i];function Ci(e,t){return y(),b("svg",wi,Si)}var Pi={name:"fa-solid-check",render:Ci};const Ei={name:"saveGallery",components:{modal:Oe},data:function(){return{files:[],dataSources:[{checked:!0,disabled:!1,key:"Library"},{checked:!0,disabled:!1,key:"Categories",parent:["Library","Wishlist"],subPage:!0},{checked:!0,disabled:!1,key:"Authors",parent:["Library","Wishlist"],subPage:!0},{checked:!0,disabled:!1,key:"Publishers",parent:["Library","Wishlist"],subPage:!0},{checked:!0,disabled:!1,key:"Collections",parent:"Library"},{checked:!0,disabled:!1,key:"Series",parent:["Library","Wishlist"],subPage:!0},{checked:!0,disabled:!1,key:"Narrators",parent:["Library","Wishlist"],subPage:!0},{checked:!0,disabled:!1,key:"Wishlist"},{checked:!0,disabled:!0,key:"Export archived books",extra:!0,tippy:'If unchecked, the "archive" collection and all archived books are excluded from the export and "My books in the series" will list archived books as not owned. This option is disabled if the archive is empty.'}],zip:null,cacheBuster:null,bundling:!1,saveBtnEnabled:!0,progressWidth:null,iconSize:20}},created:function(){this.files=window.chunksFilePaths;let e=this;this.$store.state.sticky.exportSettingsGallery&&_.each(this.$store.state.sticky.exportSettingsGallery,function(i){var r=_.find(e.dataSources,{key:i.key});r.checked=i.checked,r.disabled=i.disabled});let t=_.find(this.dataSources,{key:"Library"});t.disabled=!this.$store.state.library.books;let s=_.find(this.dataSources,{key:"Wishlist"});s.disabled=!this.$store.state.library.wishlist;let n=this.$store.state.library.collections,o=n?_.find(n,{id:"__ARCHIVE"}):null;if(o&&o.books.length>0){let i=_.find(this.dataSources,{key:"Export archived books"});i&&(i.disabled=!1)}},mounted:function(){let e=this;this.iconSize=this.$refs.textWrapper.offsetHeight,e.$store.getters.saveStandaloneAfter&&this.$nextTick(function(){try{let t=JSON.parse(JSON.stringify(e.$store.state.extractSettings)),s=_.find(t.extraSettings,{name:"saveStandaloneAfter"});s.deactivated=!0,this.$store.commit("prop",{key:"extractSettings",value:t}),chrome.storage.local.set({config:t}).then(function(){e.saveButtonClicked()})}catch{}})},beforeUnmount:function(){this.zip=null,this.cacheBuster=null},computed:{chunkSource:function(){return _.chunk(this.dataSources,4)}},methods:{cancelZipping:function(){window.location.reload()},divideLargerDatapoints:function(e,t){let s=this;_.each(t,function(n){let o="";n.peopleAlsoBought&&n.asin&&(o+="window.peopleAlsoBoughtJSON = "+JSON.stringify(n.peopleAlsoBought)+`; 
`,delete n.peopleAlsoBought),n.summary&&n.asin&&(o+="window.bookSummaryJSON = "+JSON.stringify(n.summary)+`; 
`,delete n.summary),o!==""&&e.file("data/split-book-data/"+n.asin+"."+s.cacheBuster+".js",o)})},saveButtonClicked:async function(){const e=this;if(!(this.bundling||this.$store.state.devMode))try{e.bundling=!0,e.$store.commit("prop",{key:"bundlingGallery",value:!0}),e.cacheBuster=this.runCachebuster(),e.zip=new JSZip;const t=e.zip;t.file(".nojekyll","");let s=this.excludeData(JSON.parse(JSON.stringify(this.$store.state.library)));s.extras.cacheID=e.cacheBuster;let n={books:!!s.books,series:!!s.series,collections:!!s.collections,wishlist:!!s.wishlist,extras:s.extras},o=`
          if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.${e.cacheBuster}.js')
            .then(function(registration) {
              console.log('Registration successful, scope is:', registration.scope);
            })
            .catch(function(error) {
              console.log('Service worker registration failed, error:', error);
            });
          }
        `;o=!1?"<script>"+o+"<\/script>":"";const r=function(u,a){let d="^assets\\/"+u+"\\..+\\."+(a||"js")+"$";return d=new RegExp(d),_.find(e.files,p=>p.match(d))},c='<!DOCTYPE html><html lang="en" class="theme-dark standalone-gallery" style="background: #171717; min-height: 100%;"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta http-equiv="Cache-control" content="no-cache, no-store, must-revalidate"><meta http-equiv="Pragma" content="no-cache"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="mobile-web-app-capable" content="yes"><link rel="apple-touch-icon" sizes="180x180" href="favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicons/favicon-16x16.png"><link rel="manifest" href="app.webmanifest"><link rel="mask-icon" href="favicons/safari-pinned-tab.svg" color="#f29a33"><link rel="shortcut icon" href="favicons/favicon.ico"><meta name="msapplication-TileColor" content="#222222"><meta name="msapplication-config" content="favicons/browserconfig.xml"><meta name="theme-color" content="#f29a33"><title>My Audible Library</title>'+o+'<link id="ale-css" rel="stylesheet" href="'+r("gallery","css")+'"></head><body><div id="audible-library-extractor" data-version="'+this.$store.state.version+'" data-cache-id="'+e.cacheBuster+'"></div><script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"><\/script><script id="ale-js" src="'+r("gallery","js")+'" type="module"><\/script><noscript>This library requires javascript to work!</noscript></body></html>';t.file("index.html",c),t.file("ALE-Documentation.url",`[InternetShortcut]
URL=https://joonaspaakko.gitbook.io/audible-library-extractor/`),s.wishlist&&s.books?this.divideLargerDatapoints(t,_.unionBy(s.books,s.wishlist,"asin")):(s.wishlist&&this.divideLargerDatapoints(t,s.wishlist),s.books&&this.divideLargerDatapoints(t,s.books)),t.file("data/temp-data."+e.cacheBuster+".js","window.tempDataJSON = "+JSON.stringify(n)+";"),s.books&&t.file("data/library."+e.cacheBuster+".js","window.libraryJSON = "+JSON.stringify(s.books)+";"),s.collections&&t.file("data/collections."+e.cacheBuster+".js","window.collectionsJSON = "+JSON.stringify(s.collections)+";"),s.series&&t.file("data/series."+e.cacheBuster+".js","window.seriesJSON = "+JSON.stringify(s.series)+";"),s.wishlist&&t.file("data/wishlist."+e.cacheBuster+".js","window.wishlistJSON = "+JSON.stringify(s.wishlist)+";"),console.log(_.cloneDeep(e.files)),_.remove(e.files,function(u){const a=u.replace(/^assets\//,"");if(a==="gallery.html")return!0;const d=[!!a.match(/^gallery/),!!a.match(/^content-script-helpers/),!!a.match(/^howler/),!!a.match(/^lodash/),!!a.match(/^tippy/),!!a.match(/^jquery/),!!a.match(/^fuse.esm/),!!a.match(/^index\..*\.js$/),!!a.match(/^Roboto/i),!!a.match(/^Inconsolata/i),!!a.match(/^vue\.runtime\.esm-bundler/i),!!a.match(/^fa-.+(woff2?|ttf)/)];return!_.includes(d,!0)}),e.files=e.files.concat(["favicons/android-chrome-192x192.png","favicons/android-chrome-512x512.png","favicons/apple-touch-icon.png","favicons/browserconfig.xml","favicons/favicon-16x16.png","favicons/favicon-32x32.png","favicons/favicon.ico","favicons/mstile-150x150.png","favicons/safari-pinned-tab.svg","app.webmanifest"]),console.log(e.files);for(let u of e.files){const a=await JSZipUtils.getBinaryContent(u);t.file(u,a,{binary:!0})}const l=await t.generateAsync({type:"blob",streamFiles:!0},function(a){e.progressWidth=a.percent+"%"});saveAs(l,"ALE-gallery.zip")}finally{setTimeout(function(){e.bundling=!1,e.$store.commit("prop",{key:"bundlingGallery",value:!1}),e.progressWidth=0},1e3)}},sourceChecked:function(e,t){let s=this,n=_.filter(this.dataSources,function(i){return _.isArray(i.parent)?_.includes(i.parent,t.key):i.parent===t.key});_.each(n,function(i){if(_.isArray(i.parent)){let r=_.map(i.parent,function(l){return _.find(s.dataSources,{key:l})}),c=_.filter(r,function(l){return l.checked&&!l.disabled}).length>0;i.disabled=!e.target.checked&&!c}else i.disabled=!e.target.checked});let o=_.filter(this.dataSources,{checked:!0,disabled:!1});this.saveBtnEnabled=!!o.length,this.$store.commit("stickyProp",{key:"exportSettingsGallery",value:this.dataSources})},excludeData:function(e){return _.each(this.dataSources,function(t){var s=t.key.toLowerCase(),n=!t.checked||t.disabled;switch(t.key){case"Library":n&&(delete e.books,delete e.series,delete e.collections);break;case"Series":n&&delete e.series;break;case"Collections":n&&delete e.collections;break;case"Wishlist":n&&delete e.wishlist;break;case"Export archived books":if(n){let o=e.collections,i=o?_.find(o,{id:"__ARCHIVE"}):null;i&&i.books.length>0&&e.books&&(_.remove(e.books,"archived"),e.series&&(_.each(e.series,function(r){r.books.length>0&&_.remove(r.books,function(c){return _.includes(i.books,c)}),r.allBooks.length>0&&_.each(r.allBooks,function(c){_.includes(i.books,c.asin)&&(c.notInLibrary=!0)})}),_.remove(e.series,function(r){return r.books.length===0})),_.each(o,function(r){_.remove(r.books,function(c){return _.includes(i.books,c)})})),i&&_.remove(o,function(r){return r.id==="__ARCHIVE"||!r.books||r.books.length===0})}break}t.subPage&&(e.extras.subPageStates=e.extras.subPageStates||[],e.extras.subPageStates.push({key:s,enabled:!n}))}),e},serviceWorker:function(){return`
      importScripts('https://storage.googleapis.com/workbox-cdn/releases/6.1.5/workbox-sw.js');

      workbox.setConfig({
        debug: false,
      });

      const {registerRoute} = workbox.routing;
      const {
        NetworkFirst,
        StaleWhileRevalidate,
        CacheFirst
      } = workbox.strategies;
      const CacheableResponsePlugin = workbox.cacheableResponse.CacheableResponsePlugin;
      const ExpirationPlugin = workbox.expiration.ExpirationPlugin;

      // Cache page navigations (html) with a Network First strategy
      registerRoute(
        // Check to see if the request is a navigation to a new page
        ({ request }) => request.mode === 'navigate',
        // Use a Network First caching strategy
        new NetworkFirst({
          // Put all cached files in a cache named 'pages'
          cacheName: 'pages',
          plugins: [
            // Ensure that only requests that result in a 200 status are cached
            new CacheableResponsePlugin({
              statuses: [200],
            }),
          ],
        }),
      );

      // Cache CSS, JS, and Web Worker requests with a Stale While Revalidate strategy
      registerRoute(
        // Check to see if the request's destination is style for stylesheets, script for JavaScript, or worker for web worker
        ({ request }) =>
          request.destination === 'style' ||
          request.destination === 'script' ||
          request.destination === 'worker',
        // Use a Stale While Revalidate caching strategy
        new StaleWhileRevalidate({
          // Put all cached files in a cache named 'assets'
          cacheName: 'assets',
          plugins: [
            // Ensure that only requests that result in a 200 status are cached
            new CacheableResponsePlugin({
              statuses: [200],
            }),
          ],
        }),
      );

      // Cache images with a Cache First strategy
      registerRoute(
        // Check to see if the request's destination is style for an image
        ({ url, request }) =>
          (request.destination === 'image' && url.origin !== 'https://m.media-amazon.com') ||
          (request.destination === 'image' && url.origin === 'https://m.media-amazon.com' && !url.href.match(/_SL200_/) && !url.href.match(/_SL150_/)),
        // Use a Cache First caching strategy
        new CacheFirst({
          // Put all cached files in a cache named 'images'
          cacheName: 'images',
          plugins: [
            // Ensure that only requests that result in a 200 status are cached
            new CacheableResponsePlugin({
              statuses: [200],
            }),
            // Don't cache more than 50 items, and expire them after 30 days
            new ExpirationPlugin({
              maxEntries: 50,
              maxAgeSeconds: 60 * 60 * 24 * 30, // 30 Days
            }),
          ],
        }),
      );

      // Cache the Google Fonts stylesheets with a stale-while-revalidate strategy.
      registerRoute(
        ({url}) => url.origin === 'https://fonts.googleapis.com',
        new StaleWhileRevalidate({
          cacheName: 'google-fonts-stylesheets',
        })
      );

      // Cache the underlying font files with a cache-first strategy for 1 year.
      registerRoute(
        ({url}) => url.origin === 'https://fonts.gstatic.com',
        new CacheFirst({
          cacheName: 'google-fonts-webfonts',
          plugins: [
            new CacheableResponsePlugin({
              statuses: [0, 200],
            }),
            new ExpirationPlugin({
              maxAgeSeconds: 60 * 60 * 24 * 365,
              maxEntries: 30,
            }),
          ],
        })
      );
      `},runCachebuster:function(){return new Date().getTime()}}},oe=e=>(Pe("data-v-143fa700"),e=e(),Ee(),e),Ri={class:"export-group"},Oi={class:"top-wrapper"},xi={class:"text-wrapper",ref:"textWrapper"},Mi=oe(()=>m("h2",null,"Stand-alone gallery",-1)),Ti=oe(()=>m("div",{class:"description"}," This saves the gallery as a web page that can be uploaded online and shared with others. ",-1)),Li=[Mi,Ti],Ai=oe(()=>m("h3",null,"Include:",-1)),Bi={class:"options opt-groups"},Ii=["data-extra","content"],Ni=["disabled","onUpdate:modelValue","onChange"],zi={class:"visual-checkbox"},Hi={class:"icon"},Vi={class:"buttons-footer"},qi={class:"btn-wrapper"},ji={key:0,style:{color:"#999","font-weight":"bold","margin-bottom":"5px"}},Ui=Re(" Saving the standalone gallery is only possible "),Gi=oe(()=>m("br",null,null,-1)),Di=Re(' in "production" builds ('),Wi=oe(()=>m("code",null,"yarn vite build",-1)),Fi=Re(") "),Ji=[Ui,Gi,Di,Wi,Fi],Ki=["disabled"],Yi={key:0},Xi=Re(" ALE-gallery.zip"),Qi={class:"github-btn",target:"_blank",rel:"noopener noreferrer",href:"https://joonaspaakko.gitbook.io/audible-library-extractor/sharing/uploading-to-github"},Zi=oe(()=>m("span",null,"Upload instructions",-1)),er={class:"github-btn",target:"_blank",rel:"noopener noreferrer",href:"https://joonaspaakko.gitbook.io/audible-library-extractor/sharing/uploading-to-github/updating-gallery-in-github"},tr=oe(()=>m("span",null,"Update instructions",-1));function sr(e,t,s,n,o,i){const r=Bt,c=Pi,l=ki,u=It,a=di,d=Oe,p=ne("tippy");return y(),N(d,{onCloseModal:t[2]||(t[2]=g=>e.$emit("closeComp"))},{default:Fe(()=>[m("div",Ri,[m("div",Oi,[m("div",{class:"icon-wrapper",style:te({fontSize:e.iconSize/1.2+"px",lineHeight:e.iconSize/1.2+"px",paddingRight:e.iconSize/2.5+"px"})},[x(r)],4),m("div",xi,Li,512)]),Ai,m("div",Bi,[(y(!0),b(ce,null,ue(i.chunkSource,(g,$)=>(y(),b("div",{class:q(["opt-group",["group-"+$]]),key:$},[(y(!0),b(ce,null,ue(g,(h,f)=>G((y(),b("label",{class:q(["item-"+f,h.disabled?"disabled":null]),"data-extra":h.extra,key:h.key,content:h.tippy},[G(m("input",{type:"checkbox",disabled:h.disabled,"onUpdate:modelValue":w=>h.checked=w,onChange:w=>i.sourceChecked(w,h)},null,40,Ni),[[os,h.checked]]),m("div",zi,[m("span",Hi,[x(c)])]),m("span",null,Y(h.key),1)],10,Ii)),[[p]])),128))],2))),128))]),m("div",Vi,[m("div",qi,[e.$store.state.devMode?(y(),b("div",ji,Ji)):O("",!0),m("button",{class:q(["save-btn save-gallery",{saving:e.bundling}]),onClick:t[1]||(t[1]=(...g)=>i.saveButtonClicked&&i.saveButtonClicked(...g)),disabled:!e.$store.state.devMode&&(e.bundling||!e.saveBtnEnabled)},[m("span",null,[e.bundling?(y(),b("strong",Yi,"Packaging:")):O("",!0),Xi]),e.bundling?(y(),N(l,{key:0})):(y(),N(u,{key:1})),e.bundling&&e.progressWidth?(y(),b("div",{key:2,class:"progress",style:te({width:e.progressWidth})},null,4)):O("",!0),e.bundling?(y(),b("button",{key:3,class:"cancel-packaging",onClick:t[0]||(t[0]=(...g)=>i.cancelZipping&&i.cancelZipping(...g))},"cancel")):O("",!0)],10,Ki),m("div",null,[m("a",Qi,[Zi,x(a)]),m("a",er,[tr,x(a)])])])])])]),_:1})}var nr=j(Ei,[["render",sr],["__scopeId","data-v-143fa700"]]);const or={viewBox:"0 0 576 512",width:"1.2em",height:"1.2em"},ir=m("path",{fill:"currentColor",d:"M384 24c0-9.6 5.7-18.2 14.5-22s19-2 26 4.6l144 136c4.8 4.5 7.5 10.8 7.5 17.4s-2.7 12.9-7.5 17.4l-144 136c-7 6.6-17.2 8.4-26 4.6S384 305.5 384 296v-72h-46.5c-45 0-81.5 36.5-81.5 81.5c0 22.3 10.3 34.3 19.2 40.5c6.8 4.7 12.8 12 12.8 20.3c0 9.8-8 17.8-17.8 17.8h-2.5c-2.4 0-4.8-.4-7.1-1.4C242.8 374.8 160 333.4 160 240c0-79.5 64.5-144 144-144h80V24zM0 144c0-44.2 35.8-80 80-80h16c17.7 0 32 14.3 32 32s-14.3 32-32 32H80c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16v-16c0-17.7 14.3-32 32-32s32 14.3 32 32v16c0 44.2-35.8 80-80 80H80c-44.2 0-80-35.8-80-80V144z"},null,-1),rr=[ir];function ar(e,t){return y(),b("svg",or,rr)}var lr={name:"fa6-solid-share-from-square",render:ar};const cr={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},ur=m("path",{fill:"currentColor",d:"M222.7 32.1c5 16.9-4.6 34.8-21.5 39.8C121.8 95.6 64 169.1 64 256c0 106 86 192 192 192s192-86 192-192c0-86.9-57.8-160.4-137.1-184.1c-16.9-5-26.6-22.9-21.5-39.8s22.9-26.6 39.8-21.5C434.9 42.1 512 140 512 256c0 141.4-114.6 256-256 256S0 397.4 0 256C0 140 77.1 42.1 182.9 10.6c16.9-5 34.8 4.6 39.8 21.5z"},null,-1),hr=[ur];function dr(e,t){return y(),b("svg",cr,hr)}var pr={name:"fa6-solid-circle-notch",render:dr};const fr={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},mr=m("path",{fill:"currentColor",d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10s10-4.47 10-10S17.53 2 12 2z"},null,-1),gr=[mr];function vr(e,t){return y(),b("svg",fr,gr)}var _r={name:"ic-baseline-circle",render:vr};const yr={viewBox:"0 0 384 512",width:"1.2em",height:"1.2em"},br=m("path",{fill:"currentColor",d:"M64 0C28.7 0 0 28.7 0 64v384c0 35.3 28.7 64 64 64h256c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zm192 0v128h128L256 0zM80 224h16c22.1 0 40 17.9 40 40v8c0 8.8-7.2 16-16 16s-16-7.2-16-16v-8c0-4.4-3.6-8-8-8H80c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8h16c4.4 0 8-3.6 8-8v-8c0-8.8 7.2-16 16-16s16 7.2 16 16v8c0 22.1-17.9 40-40 40H80c-22.1 0-40-17.9-40-40v-80c0-22.1 17.9-40 40-40zm72 46.4c0-25.6 20.8-46.4 46.4-46.4H216c8.8 0 16 7.2 16 16s-7.2 16-16 16h-17.6c-7.9 0-14.4 6.4-14.4 14.4c0 5.2 2.8 9.9 7.2 12.5l25.4 14.5C231 305.7 240 321 240 337.7c0 25.6-20.8 46.4-46.4 46.4H168c-8.8 0-16-7.2-16-16s7.2-16 16-16h25.6c7.9 0 14.4-6.4 14.4-14.4c0-5.2-2.8-9.9-7.2-12.5l-25.4-14.5c-14.5-8.3-23.4-23.7-23.4-40.3zM280 240v31.6c0 23 5.5 45.6 16 66c10.5-20.3 16-42.9 16-66V240c0-8.8 7.2-16 16-16s16 7.2 16 16v31.6c0 34.7-10.3 68.7-29.6 97.6l-5.1 7.7c-3 4.5-8 7.1-13.3 7.1s-10.3-2.7-13.3-7.1l-5.1-7.7c-19.3-28.9-29.6-62.9-29.6-97.6V240c0-8.8 7.2-16 16-16s16 7.2 16 16z"},null,-1),kr=[br];function wr(e,t){return y(),b("svg",yr,kr)}var $r={name:"fa6-solid-file-csv",render:wr},Sr={methods:{stringifyArray:function(e,t,s){return Array.isArray(e)?t?e.map(function(n){return n[t]}).join(s||", "):e.join(", "):e||""}}},Cr={methods:{makeFullUrl:function(e){const t=new je(this.$store.state.urlOrigin+e);return t.query.ipRedirectOverride=!0,t.query.overrideBaseCountry=!0,t.toString()},makeUrl:function(e,t){const s=this.$store.state.urlOrigin;let n="";switch(e){case"store":case"book":n=s+"/pd/"+encodeURIComponent(t);break;case"author":t.url?n=s+"/author/"+t.url:n=s+"/search?searchAuthor="+encodeURIComponent(t.name);break;case"narrator":t.name&&(n=s+"/search?searchNarrator="+encodeURIComponent(t.name));break;case"series":t.asin&&(n=s+"/series/"+t.asin);break;case"publisher":t.name&&(n=s+"/search?searchProvider="+encodeURIComponent(t.name));break;case"categories":case"tags":t.url&&(n=s+"/cat/"+t.url);break}if(n){let o=new je(n);return o.query.ipRedirectOverride=!0,o.query.overrideBaseCountry=!0,o.toString()}else return""}}},Pr={methods:{prepareKeys:function(e){e=e||{};let t=e.collection||_.get(this.$store.state,this.$store.state.collectionSource),s=_.union(_.flatten(_.map(t,r=>_.keys(r))));s=s.concat(["isbn10","isbn13"]);let n=["added","title","series","bookNumbers","authors","narrators","tags","categories","length","progress","releaseDate","publishers","myRating","rating","ratings","favorite","format","language","whispersync","fromPlusCatalog","unavailable","archived","downloaded","storePageChanged","storePageMissing"];e.priorityKeys&&(n=e.priorityKeys);let o=_.remove(s,function(r){return!_.includes(n,r)});s=n.concat(o),n=null,o=null;let i=["titleShort","sample","blurb","url","summary","moreLikeThis","peopleAlsoBought","asin","cover","sample","cover","isbns"];return s=_.remove(s,function(r){return!_.includes(e.removeKeys||i,r)}),s}}},Er={methods:{slugify:function(e){const t="\xE0\xE1\xE2\xE4\xE6\xE3\xE5\u0101\u0103\u0105\xE7\u0107\u010D\u0111\u010F\xE8\xE9\xEA\xEB\u0113\u0117\u0119\u011B\u011F\u01F5\u1E27\xEE\xEF\xED\u012B\u012F\xEC\u0142\u1E3F\xF1\u0144\u01F9\u0148\xF4\xF6\xF2\xF3\u0153\xF8\u014D\xF5\u0151\u1E55\u0155\u0159\xDF\u015B\u0161\u015F\u0219\u0165\u021B\xFB\xFC\xF9\xFA\u016B\u01D8\u016F\u0171\u0173\u1E83\u1E8D\xFF\xFD\u017E\u017A\u017C\xB7/_,:;",s="aaaaaaaaaacccddeeeeeeeegghiiiiiilmnnnnoooooooooprrsssssttuuuuuuuuuwxyyzzz------",n=new RegExp(t.split("").join("|"),"g");return encodeURIComponent(e.toString().toLowerCase().replace(/\s+/g,"-").replace(n,o=>s.charAt(t.indexOf(o))).replace(/&/g,"-and-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,""))}}},Rr={methods:{makeGoodReadsUrl:function(e){e=e||this.book;const t=e.authors?e.authors[0].name+" - ":e.obj&&e.obj.authors?e.obj.authors[0].name+" - ":"";let s=(t&&e.titleShort?e.titleShort:e.title)||"";const n=t+s;return e.titleShort||e.title?"https://www.goodreads.com/search?q="+encodeURIComponent(n):null}}};const Or={name:"saveCsv",mixins:[Sr,Ce,Cr,Pr,Er,Rr],components:{modal:Oe},data:function(){return{settings:{dataSourcesChecked:"Library",dataSources:[{key:"Library",description:"Export library data as spreadsheet. Default sorting (added): new books at the top."},{key:"Wishlist",description:"Export wishlist data as spreadsheet.  Default sorting (added): new books at the top."},{key:"Current page",description:"Export contents from any page with books. Search, filtering, and sorting affect this source."}],compatibilityChecked:"Google Sheets",compatibility:[{key:"Raw data",label:"Raw data",description:"Raw data with no special formulas, so it will work in any spreadsheet application."},{key:"Google Sheets",description:`Adds Google Sheets compatible formulas that add icons and links. If you don't like the formulas, you can use "raw data" instead.`},{key:"Goodreads",description:"This spreadsheet includes Goodreads relevant columns and removes any books that don't have ISBNs since Goodreads won't import books without them. Book status determines the bookshelve: not started (to-read), started(currently-reading), finished (read). Book categories are divided into shelves as well."}]},bundling:!1,iconSize:20}},mounted:function(){this.$store.state.sticky.exportSettingsCSVdataSources&&(this.settings.dataSourcesChecked=this.$store.state.sticky.exportSettingsCSVdataSources),this.$store.state.sticky.exportSettingsCSVcompatibility&&(this.settings.compatibilityChecked=this.$store.state.sticky.exportSettingsCSVcompatibility),this.iconSize=this.$refs.textWrapper.offsetHeight},computed:{dataSourceActive(){return _.find(this.settings.dataSources,{key:this.settings.dataSourcesChecked})},compatibilityActive(){return _.find(this.settings.compatibility,{key:this.settings.compatibilityChecked})},googleSheets:function(){return this.settings.compatibilityChecked==="Google Sheets"},filename:function(){let e="";if(this.settings.dataSourcesChecked==="Library")e="library";else if(this.settings.dataSourcesChecked==="Wishlist")e="wishlist";else if(this.settings.dataSourcesChecked==="Current page"){let t=this.$store.state.pageTitle?this.slugify(this.$store.state.pageTitle):null,s=this.$route.name;e=t||s}return e!==""&&(e="-"+e),"ALE-spreadsheet"+e+".csv"},dataSource:function(){switch(this.settings.dataSourcesChecked){case"Library":return this.$store.state.library.books;case"Wishlist":return this.$store.state.library.wishlist;case"Current page":return this.$store.getters.collection}},saveBtnEnabled:function(){if(this.settings.dataSourcesChecked==="Current page"){if(this.$route.meta.gallery)return!0}else return this.settings.dataSourcesChecked==="Wishlist"&&this.settings.compatibilityChecked==="Goodreads"?!1:this.dataSource&&this.dataSource.length>0}},methods:{saveButtonClicked:function(){if(!this.bundling){const e=this;e.bundling=!0;let t=JSON.parse(JSON.stringify(this.dataSource)),s=this.prepKeys(t),n=Papa.unparse({fields:_.map(s,function(o){return o==="isbn10"&&o==="isbn13"?o.toUpperCase():_.startCase(o)}),data:this.processData(s,t),quotes:!1,quoteChar:'"',escapeChar:'"',delimiter:",",header:!0,newline:`\r
`,skipEmptyLines:!1,columns:null});saveAs(new File([n],this.filename,{type:"text/csv;charset=utf-8"})),setTimeout(function(){e.bundling=!1},1e3)}},inputChanged:function(e){this.$store.state.sticky.exportSettingsCSVdataSources!==this.settings.dataSourcesChecked&&this.$store.commit("stickyProp",{key:"exportSettingsCSVdataSources",value:this.settings.dataSourcesChecked}),this.$store.state.sticky.exportSettingsCSVcompatibility!==this.settings.compatibilityChecked&&this.$store.commit("stickyProp",{key:"exportSettingsCSVcompatibility",value:this.settings.compatibilityChecked})},processData:function(e,t){let s=this;return this.$store.state.sticky.exportSettingsCSVcompatibility==="Goodreads"?this.processDataGoodreads(e,t):_.map(t,function(n){return _.map(e,function(o){switch(o){case"authors":case"narrators":case"categories":case"publishers":case"tags":return s.stringifyArray(n[o],"name",o==="categories"?" > ":null)||"";case"series":let i=n.series;return i&&(i=_.map(i,function(h){let f=h.bookNumbers?" (book "+h.bookNumbers.join(", ")+")":"";return h.name+f}).join(", ")),i;case"bookNumbers":let r=_.filter(n.series,"bookNumbers");return r=_.map(r,"bookNumbers"),r=_.flatten(r),_.isEmpty(r)?r=null:_.isArray(r)&&(r=r.join(", ")),r=r||"\u221E",s.googleSheets&&(r="'"+r),n.series?r:"";case"isbn10":const c=_.find(n.isbns,{type:"ISBN_10"});return c?s.googleSheets?"'"+c.identifier:c.identifier:"";case"isbn13":const l=_.find(n.isbns,{type:"ISBN_13"});return l?s.googleSheets?"'"+l.identifier:l.identifier:"";case"peopleAlsoBought":return n.peopleAlsoBought?s.stringifyArray(n.peopleAlsoBought,"title"):"";case"summary":return n.summary?n.summary.replace(/(\n|\r)/g):"";case"cover":let u=n.cover?s.makeCoverUrl(n.cover):"";return n.cover&&u&&n.asin&&s.googleSheets&&(u=s.googleSheetsLinkifyImage(s.makeUrl("book",n.asin),s.makeCoverUrl(n.cover,75),0)),u;case"title":let a=n[o]||n.titleShort||"";return a&&n.asin&&s.googleSheets&&(a=s.googleSheetsLinkify(a,s.makeUrl("book",n.asin))),a;case"titleShort":let d=n[o]||n.title||"";return d&&n.asin&&s.googleSheets&&(d=s.googleSheetsLinkify(d,s.makeUrl("book",n.asin))),d;case"sample":let p=n[o]||"";return p&&s.googleSheets&&(p=s.googleSheetsLinkifyImage(p,"https://i.imgur.com/R2N6OTy.png",20)),p;case"searchInGoodreads":let g=s.makeGoodReadsUrl(n);return g&&s.googleSheets&&(g=s.googleSheetsLinkifyImage(g,"https://i.imgur.com/RPJRqNX.png",20)),g||"";case"webPlayer":let $=n.asin?"https://www.audible.com/webplayer?asin="+n.asin:"";return $&&s.googleSheets&&($=s.googleSheetsLinkifyImage($,"https://i.imgur.com/PdFLCdl.png",20)),$||"";case"parentCategory":return n.categories&&n.categories[0]?n.categories[0].name:"";case"childCategory":return n.categories&&n.categories[1]?n.categories[1].name:"";case"storePage":return n.asin?s.makeUrl("book",n.asin):"";case"asin":case"length":case"progress":case"myRating":case"rating":case"ratings":case"isbn":case"isbn10":case"isbn13":return s.googleSheets?"'"+(n[o]||""):n[o]||"";case"storePageUrl":return n.asin?s.makeUrl("book",n.asin):"";default:return n[o]||""}})})},googleSheetsLinkify:function(e,t){return'=HYPERLINK("'+t+'";"'+e.replace(/\"/g,'""')+'")'},googleSheetsLinkifyImage:function(e,t,s){s=s||0;let n=s?"; 4; "+s+"; "+s:"";return'=HYPERLINK("'+e+'"; IMAGE("'+t+'"'+n+"))"},googleSheetsImagefy:function(e,t){t=t||0;let s=t?"; 4; "+t+"; "+t:"";return'=IMAGE("'+e+'"'+s+")"},processDataGoodreads:function(e,t){let s=this;return t=_.filter(t,function(n){const o=_.find(n.isbns,{type:"ISBN_10"}),i=_.find(n.isbns,{type:"ISBN_13"});return o||i}),_.map(t,function(n){return _.map(e,function(o){switch(o){case"title":return n.title||n.titleShort||"";case"author":case"publisher":return n[o+"s"]&&s.stringifyArray([n[o+"s"][0]],"name")||"";case"myRating":return n.myRating||"";case"binding":return"Audible Audio";case"yearPublished":return n.releaseDate||"";case"dateAdded":let i=new Date,r=i.getTimezoneOffset();return i=new Date(i.getTime()-r*60*1e3),i.toISOString().split("T")[0];case"bookshelves":let c=[],l=!n.progress,u=!!(n.progress&&!n.progress.toLowerCase().match("finished")),a=!!(n.progress&&n.progress.toLowerCase().match("finished")),d=l?"to-read":u?"currently-reading":a?"read":"to-read";c.push(d),c.push("audible"),c.push("audiobook"),n.fromPlusCatalog&&c.push("audible-plus");let p=n.categories&&n.categories[0]?n.categories[0].name:null;p&&c.push(s.slugify(p));let g=n.categories&&n.categories[1]?n.categories[1].name:null;return g&&c.push(s.slugify(g)),c.join(" ");case"isbn":const $=_.find(n.isbns,{type:"ISBN_10"});return $?$.identifier:"";case"isbn13":const h=_.find(n.isbns,{type:"ISBN_13"});return h?h.identifier:"";default:return""}})})},prepKeys:function(e){let t=[];switch(this.settings.compatibilityChecked){case"Google Sheets":case"Raw data":let n=["added","cover","sample","webPlayer","searchInGoodreads","title","titleShort","series","bookNumbers","blurb","authors","narrators","tags","categories","parentCategory","childCategory","length","progress","releaseDate","publishers","myRating","rating","ratings","favorite","format","language","whispersync","fromPlusCatalog","unavailable","archived","downloaded","storePageChanged","storePageMissing","asin","isbn10","isbn13","summary","peopleAlsoBought"];const o=this.settings.compatibilityChecked==="Raw data";if(o&&n.push("storePageUrl"),o){var s=["sample","webPlayer","cover","searchInGoodreads"];n=_.remove(n,function(i){return!_.includes(s,i)}),n=n.concat(s)}t=this.prepareKeys({collection:e||[],removeKeys:["isbns"],priorityKeys:n});break;case"Goodreads":t=["dateRead","myReview","title","bookshelves","author","publisher","myRating","binding","yearPublished","dateAdded","isbn","isbn13"];break}return t}}},pe=e=>(Pe("data-v-bb384960"),e=e(),Ee(),e),xr={class:"export-group"},Mr={class:"top-wrapper"},Tr={class:"text-wrapper",ref:"textWrapper"},Lr=pe(()=>m("h2",null," CSV (Spreadsheet)",-1)),Ar=pe(()=>m("div",{class:"description"}," CSV is a generic file format for tabular data that is supported by any proper spreadsheet application. ",-1)),Br=[Lr,Ar],Ir=pe(()=>m("h3",null,"Data source:",-1)),Nr={class:"options"},zr=["value"],Hr={class:"visual-radiobutton"},Vr={class:"icon"},qr={class:"description",style:{"margin-top":"10px"}},jr=pe(()=>m("h3",null,"Format:",-1)),Ur={class:"options"},Gr=["value"],Dr={class:"visual-radiobutton"},Wr={class:"icon"},Fr={class:"description",style:{"margin-top":"10px"}},Jr={class:"buttons-footer"},Kr={class:"btn-wrapper"},Yr=["disabled"],Xr={class:"github-btn",target:"_blank",rel:"noopener noreferrer",href:"https://joonaspaakko.gitbook.io/audible-library-extractor/gallery/csv-export/google-sheets-import"},Qr=pe(()=>m("span",null,"Google Sheets import",-1)),Zr={class:"github-btn",target:"_blank",rel:"noopener noreferrer",href:"https://joonaspaakko.gitbook.io/audible-library-extractor/gallery/csv-export/goodreads-import"},ea=pe(()=>m("span",null,"Goodreads import",-1));function ta(e,t,s,n,o,i){const r=$r,c=_r,l=pr,u=It,a=lr,d=Oe;return y(),N(d,{onCloseModal:t[5]||(t[5]=p=>e.$emit("closeComp"))},{default:Fe(()=>[m("div",xr,[m("div",Mr,[m("div",{class:"icon-wrapper",style:te({fontSize:e.iconSize/1.2+"px",lineHeight:e.iconSize/1.2+"px",paddingRight:e.iconSize/2.5+"px"})},[x(r)],4),m("div",Tr,Br,512)]),Ir,m("div",Nr,[(y(!0),b(ce,null,ue(e.settings.dataSources,p=>(y(),b("label",{key:p.key},[G(m("input",{type:"radio",name:"dataSources","onUpdate:modelValue":t[0]||(t[0]=g=>e.settings.dataSourcesChecked=g),value:p.key,onChange:t[1]||(t[1]=(...g)=>i.inputChanged&&i.inputChanged(...g))},null,40,zr),[[nt,e.settings.dataSourcesChecked]]),m("div",Hr,[m("div",Vr,[x(c)])]),m("span",null,Y(p.key),1)]))),128))]),m("div",qr,Y(i.dataSourceActive.description),1),jr,m("div",Ur,[(y(!0),b(ce,null,ue(e.settings.compatibility,p=>(y(),b("label",{key:p.key},[G(m("input",{type:"radio",name:"compatibility","onUpdate:modelValue":t[2]||(t[2]=g=>e.settings.compatibilityChecked=g),value:p.key,onChange:t[3]||(t[3]=(...g)=>i.inputChanged&&i.inputChanged(...g))},null,40,Gr),[[nt,e.settings.compatibilityChecked]]),m("div",Dr,[m("div",Wr,[x(c)])]),m("span",null,Y(p.label||p.key),1)]))),128))]),m("div",Fr,Y(i.compatibilityActive.description),1),m("div",Jr,[m("div",Kr,[m("button",{class:q(["save-btn save-csv",{saving:e.bundling}]),onClick:t[4]||(t[4]=(...p)=>i.saveButtonClicked&&i.saveButtonClicked(...p)),disabled:e.bundling||!i.saveBtnEnabled},[m("span",null,Y(i.filename),1),e.bundling?(y(),N(l,{key:0,spin:""})):(y(),N(u,{key:1}))],10,Yr),m("div",null,[m("a",Xr,[Qr,x(a)]),m("a",Zr,[ea,x(a)])])])])])]),_:1})}var sa=j(Or,[["render",ta],["__scopeId","data-v-bb384960"]]);const na={name:"aleMenuActions",data:function(){return{store:this.$store.state,mobileMenuOpen:!1,sampleData:null,mobileWidth:630,subMenuActive:null,routeAvailable:{},loading:!0,routes:null,clickedRoute:null}},computed:{clickedRouteComp(){const e=_.get(this.clickedRoute,"meta.component");if(e)return{...e}},mobileThreshold(){return this.$store.state.windowWidth<this.mobileWidth}},watch:{"$store.state.playingAudio":function(){this.globalTopNavHeight(this.mobileSize)},mobileThreshold(e){this.mobileMenuOpen=!1,this.routes=this.getRoutes(),this.globalTopNavHeight(e)},mobileMenuOpen(e){this.$store.commit("prop",{key:"blockScrolling",value:e}),this.routes=this.getRoutes()},clickedRouteComp(e){this.$store.commit("prop",{key:"blockScrolling",value:e})}},created(){this.routes=this.getRoutes()},mounted:function(){this.loading=!1,this.globalTopNavHeight(this.mobileSize)},beforeUnmount:function(){},methods:{startSearching(){this.$compEmitter.emit("ios-auto-zoom-disable"),this.$compEmitter.emit("search-focus")},getRoutes(){let e=_.filter(this.$router.options.routes,"meta.icon");return e=JSON.parse(JSON.stringify(e)),this.mobileThreshold||(this.getExtraItems(e),this.getNestedGroups(e)),e},getNestedGroups(e){const t=this,s=this.getNestedIndexes(e);let n=_.remove(e,function(o){return _.get(o,"meta.nestedGroup")});n=_.groupBy(n,"meta.nestedGroup"),_.each(n,function(o,i){const r=_.find(s,{key:i});r&&e.splice(r.index,0,t.getSubPageSettings(o,i))})},getSubPageSettings(e,t){const s=this,n={name:t,meta:{groupName:e[0].meta.nestedGroup,icon:"fa-solid fa-chevron-down"},tag:"div",childItems:e};switch(e[0].meta.nestedGroup){case"subPages":n.altName=function(i){const r=_.get(s.$route,"meta.title"),c="children.0.meta.title",l=_.find(e,[c,r]);if(l){const u=s.$route.query.subPageSource||s.$store.state.sticky.subPageSource;return _.startCase(u)+": "+_.get(l,c)}else return _.startCase(t)};break}return n},getNestedIndexes(e){e=_.clone(e);const t=[];return _.remove(e,function(s){const n=_.get(s,"meta.nestedGroup"),o=!_.includes(t,n);if(n)if(o)t.push(n);else return!0}),_.each(t,function(s,n){const o=_.findIndex(e,{meta:{nestedGroup:s}});t[n]={key:s,index:o}}),t},getExtraItems(e){const t=this;let s=[];if(!this.$store.state.standalone){const n=[{tag:"a",href:this.$store.state.urlOrigin+"/library",name:"Open Audible library",disabled:!1,meta:{icon:"fa-brands fa-audible",nestedGroup:"extension-tools"}},{tag:"a",href:"https://joonaspaakko.gitbook.io/audible-library-extractor/",name:"Extension documentation",disabled:!1,meta:{icon:"fa-solid fa-graduation-cap",nestedGroup:"extension-tools"}},{highlight:!0,tag:"div",name:"Save gallery website",disabled:!1,click:this.routeClick,meta:{icon:"fa-solid fa-download",nestedGroup:"extension-tools",component:nr}},{highlight:!0,tag:"div",name:"CSV export&nbsp;<small>(spreadsheet)</small>",disabled:!1,click:this.routeClick,meta:{icon:"fa-solid fa-file-csv",nestedGroup:"extension-tools",component:sa}},{highlight:!0,tag:"div",name:"Wallpaper creator",disabled:!1,click:function(o){if(!!o.condition())try{let i=_.filter(t.$store.getters.collection,"asin");i=JSON.parse(JSON.stringify(i)),i=_.chunk(i,50);let r={imageEditorChunks:i,imageEditorChunksLength:i.length,imageEditorTimeCode:new Date().getTime()};t.$store.state.pageTitle&&(r.imageEditorPageTitle=t.$store.state.pageTitle),t.$store.state.pageSubTitle&&(r.imageEditorPageSubTitle=t.$store.state.pageSubTitle),chrome.storage.local.set(r).then(()=>{chrome.runtime.sendMessage({action:"openImageEditor"})})}catch{}},condition:function(){return t.$route.meta.gallery&&t.$store.getters.collection&&t.$store.getters.collection.length},tippy:function(){let o="When you open wallpaper creator, books are imported from the current page with the active sorting. Search and filters also affect what gets imported.";const i=!(t.$route.meta.gallery&&t.$store.getters.collection&&t.$store.getters.collection.length),r=_.filter(t.$store.getters.collection,"cover");return i?o+="<br><br> <strong style='color: #db7e00; font-size: 19px;'>Can't be opened on pages that don't have any books.</strong>":o+="<br><br> <strong style='color: #db7e00;'>Current selection of books "+t.$store.getters.collection.length+" / "+t.$store.getters.collectionTotal+". <br> Importable book covers: <span style='color: #50a900;'>"+r.length+"</span></strong>",o},meta:{icon:"fa-regular fa-image",nestedGroup:"extension-tools"}},{tag:"div",name:"Set as gallery landing page",tippy:"Click here and any links leading to the extension gallery (in browser context menu or extraction settings) will open this exact page. The url will be saved as is, so all url parameters will be saved as well. This includes: searches, filters, sorting, and some other things. <br><br>For example, open the library page, filter out finished books, click this menu item, and now you don't have to do that every time you open the gallery, if that is what you prefer...",disabled:!1,click:function(o){try{const i=window.location.pathname,r="."+i+window.location.href.split(i)[1];chrome.runtime.sendMessage({action:"changeGalleryUrl",url:r}).then(()=>{chrome.storage.local.get(["extras"]).then(c=>{c.extras.galleryUrl=r,chrome.storage.local.set({extras:c.extras}).then(()=>{})})})}catch{}},meta:{icon:"fa-solid fa-house-user",nestedGroup:"extension-tools"}},{tag:"div",name:"Reset gallery landing page",disabled:!1,click:function(o){try{chrome.runtime.sendMessage({action:"changeGalleryUrl",url:null}).then(()=>{chrome.storage.local.get(["extras"]).then(r=>{r.extras.galleryUrl=null,chrome.storage.local.set({extras:r.extras}).then(()=>{})})})}catch{}},meta:{icon:"fa-solid fa-house",nestedGroup:"extension-tools"}}];s=s.concat(n)}s.length&&_.each(s,function(n){e.push(n)})},routeClick(e){this.clickedRoute=e},globalTopNavHeight(e){this.$nextTick(function(){let t=0;if(!e){const s=this.$refs.navigation;s&&(t=Math.floor(s.getBoundingClientRect().height))}this.$store.commit("prop",{key:"topNavOffset",value:t})})}}},oa={id:"ale-navigation",ref:"navigation"},ia={key:0,class:"floater-components"};function ra(e,t,s,n,o,i){const r=ni,c=In,l=Tt,u=rn;return e.loading?O("",!0):(y(),b("div",{key:0,id:"nav-outer-wrapper",class:q({regular:!i.mobileThreshold,"mobile-nav":i.mobileThreshold,"mobile-nav-open":e.mobileMenuOpen})},[m("div",oa,[x(r,{routes:e.routes,mobileMenuOpen:e.mobileMenuOpen,"onUpdate:mobileMenuOpen":t[0]||(t[0]=a=>e.mobileMenuOpen=a),inRoot:!0,desktopMenu:!e.mobileMenuOpen},null,8,["routes","mobileMenuOpen","desktopMenu"]),i.mobileThreshold?O("",!0):(y(),b("div",ia,[i.clickedRouteComp?(y(),N(Pt(i.clickedRouteComp),{key:0,onCloseComp:t[1]||(t[1]=a=>e.clickedRoute=null)},null,32)):O("",!0)]))],512),i.mobileThreshold?(y(),N(c,{key:0,mobileMenuOpen:e.mobileMenuOpen,"onUpdate:mobileMenuOpen":t[2]||(t[2]=a=>e.mobileMenuOpen=a),mobileThreshold:i.mobileThreshold,onStartSearching:i.startSearching},null,8,["mobileMenuOpen","mobileThreshold","onStartSearching"])):O("",!0),e.$store.state.displayMode&&!i.mobileThreshold?(y(),N(l,{key:1,viewportFloat:!0})):O("",!0),i.mobileThreshold&&e.store.showMobilePlayer?(y(),N(u,{key:2})):O("",!0)],2))}var aa=j(na,[["render",ra]]);const la={name:"aleBackground",mixins:[Ce],data:function(){return{coverSource:null,books:null,booksLength:null,windowWidth:null,timer1:null,timer2:null}},mounted:function(){this.windowWidth=window.innerWidth,this.books=this.getBooks(),this.flipAnimationRandomizer(),this.$compEmitter.on("afterWindowResize",this.onWindowResize)},beforeUnmounted:function(){this.$compEmitter.off("afterWindowResize",this.onWindowResize),clearInterval(this.timer1),clearInterval(this.timer2)},methods:{bgGridSize:function(){let e=t(15);this.windowWidth<530?e=t(5):this.windowWidth<760?e=t(6):this.windowWidth<1e3?e=t(8):this.windowWidth<1300&&(e=t(12));function t(s){return 6*s}return e},getBooks:function(){const e=this.bgGridSize();this.coverSource=this.$store.state.library.books?this.$store.state.library.books:this.$store.state.library.wishlist;let t=function(s){const n=s.length;if(n<=e){const o=Math.floor(e/n),i=e-n*o,r=o;let c=[];for(let l=0;l<r;l++)c=c.concat(s);return i>0&&(c=c.concat(s.splice(-1,i))),c}else return _.sampleSize(s,e)}(_.filter(this.coverSource,"cover"));return t=_.map(t,function(s){let n=_.pick(s,["cover"]);return n.flipOut=!1,n}),this.booksLength=t.length,t},flipAnimationRandomizer:function(){const e=this;clearInterval(e.timer1),clearInterval(e.timer2),e.timer1=setInterval(function(){e.coverSwitcheroo()},e.randomNumber(1500,3e3)),e.timer2=setInterval(function(){e.coverSwitcheroo()},e.randomNumber(3500,5e3))},coverSwitcheroo:function(){const e=this,t=this.randomNumber(0,this.booksLength-1),s=this.books[t];s.flipOut=!0,setTimeout(function(){const n=_.filter(e.coverSource,"cover"),o=e.randomNumber(0,n.length-1),i=n[o];s.cover=i.cover,s.flipOut=!1},850)},randomNumber:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},onWindowResize:function(e){e.widthChanged&&(this.windowWidth=e.width,this.books=this.getBooks())}}},ca=e=>(Pe("data-v-b8b56ef4"),e=e(),Ee(),e),ua={key:0,id:"ale-background"},ha=["src"],da=ca(()=>m("div",{class:"dimmer-overlay"},null,-1));function pa(e,t,s,n,o,i){return e.books?(y(),b("div",ua,[(y(!0),b(ce,null,ue(e.books,(r,c)=>(y(),b("div",{key:r.cover+c,class:q(["image-wrapper",{"flip-out":r.flipOut}])},[m("img",{crossorigin:"anonymous",src:e.makeCoverUrl(r.cover,200),alt:""},null,8,ha)],2))),128)),da])):O("",!0)}var fa=j(la,[["render",pa],["__scopeId","data-v-b8b56ef4"]]),ma={name:"audioPlayerGlobal",data:function(){return{store:this.$store.state,howler:null}},watch:{"store.audioPlayer.audio"(e){e?this.initPlayer():this.destroyHowler()}},computed:{audio:{get(){return this.store.audioPlayer.audio},set(e){this.$store.commit("prop",{key:"audioPlayer.audio",value:e})}},timeDisplay:{get(){return this.store.audioPlayer.timeDisplay},set(e){this.$store.commit("prop",{key:"audioPlayer.timeDisplay",value:e})}},progress:{get(){return this.store.audioPlayer.progress},set(e){this.$store.commit("prop",{key:"audioPlayer.progress",value:e})}},sample:{get(){return this.store.audioPlayer.sample},set(e){this.$store.commit("prop",{key:"audioPlayer.sample",value:e})}},audioSource(){const e=se.get(this.$store.getters.audioPlayerBook,"sample");var t=new je(e);return window.location.protocol==="http:"&&(t.protocol="http"),t.toString()},route(){return se.get(this.audio,"route",{})},progressFillerStyle(){const e={};return this.progress&&(e.width=this.progress+"%"),e}},mounted(){this.$compEmitter.on("audio-player-scubber-pause",this.scrubberPause),this.$compEmitter.on("audio-player-clear-pause",this.clearPause),this.$compEmitter.on("audio-player-scrubbed",this.userScrubbed),this.$compEmitter.on("audio-player-play",this.play),this.$compEmitter.on("audio-player-pause",this.pause),this.$compEmitter.on("audio-player-stop",this.stop),this.$compEmitter.on("audio-player-seek-back",this.seekBack),this.$compEmitter.on("audio-player-seek-forward",this.seekForward)},beforeUnmount(){this.$compEmitter.off("audio-player-scubber-pause",this.scrubberPause),this.$compEmitter.off("audio-player-clear-pause",this.clearPause),this.$compEmitter.off("audio-player-scrubbed",this.userScrubbed),this.$compEmitter.off("audio-player-play",this.play),this.$compEmitter.off("audio-player-pause",this.pause),this.$compEmitter.off("audio-stop-pause",this.stop),this.$compEmitter.off("audio-stop-seek-back",this.seekBack),this.$compEmitter.off("audio-stop-seek-forward",this.seekForward),this.destroyHowler()},methods:{openBook(){const e=this.book.asin,t=this.$route.query.book;this.route&&this.route.fullPath!==this.$route.fullPath&&this.$router.push(this.route.fullPath),(!t||e&&t!==e)&&this.$nextTick(function(){this.$compEmitter.emit("book-clicked",this.book.asin)})},initPlayer:function(){let e=this;this.destroyHowler("keepAudioData"),this.$store.commit("prop",{key:"showMobilePlayer",value:!0}),this.$store.commit("prop",{key:"playingAudio",value:!0}),this.howler=new hs.Howl({src:this.audioSource,autoplay:!0,loop:!1,volume:1,onplayerror:function(){e.howler.once("unlock",function(){e.howler.play()}),e.$store.commit("prop",{key:"audioPlayer.playing",value:e.howler.playing()})},onplay(t,s){e.$store.commit("prop",{key:"audioPlayer.playing",value:e.howler.playing()})},onend(t){e.$store.commit("prop",{key:"audioPlayer.playing",value:e.howler.playing()})},onpause(t){e.$store.commit("prop",{key:"audioPlayer.playing",value:e.howler.playing()})},onstop(t){e.$store.commit("prop",{key:"audioPlayer.playing",value:e.howler?e.howler.playing():!1})}}),this.seekToCachedPosition(),this.howler.customSeek=function(t){t=t||{},t.value=t.value||30;const s=e.howler.duration(),n={going:{forward:t.direction==="forward",backward:t.direction==="backward"},at:{end:!1,start:!1},value:null},o=n.going.forward?"add":"subtract";n.value=se[o](e.howler.current.time,t.value),n.at.end=n.value>=s,n.at.start=n.value<=s,n.value=n.going.forward?n.at.end?s:n.value:n.at.start?0:n.value,e.howler.seek(n.value),n.at.start||n.at.end?e.updateCurrent():e.howler.playing()||e.howler.play()},this.howler.current={timer:null,time:null,timeDisplay:null,percentage:null},this.howler.current.timer=setInterval(function(){e.howler.playing()&&(e.updateCurrent(),document.activeElement&&document.activeElement.blur()),e.updateBookProgress()},500)},formatTime(e){const t=[],s=function(r){t.push((r<10?"0":"")+r)};let n=Math.floor(e/3600);s(n);let o=Math.floor(e/60)||0;s(o);let i=e-o*60||0;return s(i),t.shift(),t.join(":")},updateCurrent(){var e=this.howler.seek()||0;this.howler.current.time=e,this.howler.current.timeDisplay=this.formatTime(Math.round(e)),this.howler.current.percentage=e/this.howler.duration()*100||0,this.timeDisplay=this.howler.current.timeDisplay,this.progress=this.howler.current.percentage.toFixed(1)},play:function(e){this.howler&&!this.howler.playing()&&this.howler.play()},pause:function(e){this.howler&&this.howler.playing()&&this.howler.pause()},scrubberPause:function(e){let t=this;this.howler&&this.howler.playing()&&(this.howler.pause(),this.clearPause(),this.howler.pauseTimer=setTimeout(function(){t.howler.play()},500))},clearPause:function(){this.howler&&clearTimeout(this.howler.pauseTimer)},stop:function(){this.destroyHowler()},seekBack:function(){this.howler&&this.howler.customSeek({direction:"backward"})},seekForward:function(){this.howler&&this.howler.customSeek({direction:"forward"})},userScrubbed:function(e){if(this.howler){var t=e.target.value/100*this.howler.duration();this.progress=e.target.value,this.howler.seek(t),this.howler.playing()||this.howler.play()}},destroyHowler(e){this.$store.commit("prop",{key:"showMobilePlayer",value:!1}),this.howler&&(this.clearPause(),se.get(this.howler,"current.timer")&&clearInterval(this.howler.current.timer),se.get(this.howler,"unload")&&this.howler.unload(),this.howler=null),e||(this.audio=null),this.$store.commit("prop",{key:"playingAudio",value:!1})},updateBookProgress:se.throttle(function(){this.sample||this.$store.commit("updatePlayerProgress",{asin:this.$store.getters.audioPlayerBook.asin,progress:this.howler.current.time})},3e3,{leading:!1,trailing:!0}),seekToCachedPosition(){const e=se.find(this.$store.state.sticky.player.books,{asin:this.$store.getters.audioPlayerBook.asin});e&&this.howler.seek(e.progress)}}};const ga={mixins:[ma],data:function(){return{general:{route:null,standalone:null,categories:null,tippyTheme:"dark"},window:{width:window.innerWidth,height:window.innerHeight}}},created:function(){if(!this.$store.state.sticky.lightSwitchSetByUser){const t=document.querySelector("html");t.classList.remove("theme-dark"),t.classList.add("theme-light")}let e=this;this.checkIf_iOS()&&document.querySelector("body").classList.add("is-ios"),this.checkIf_Mobile()&&document.querySelector("body").classList.add("is-mobile"),this.$compEmitter.on("refresh-page",this.refreshPage),this.$store.commit("prop",{key:"siteOnline",value:navigator.onLine}),window.addEventListener("offline",function(){e.$store.commit("prop",{key:"siteOnline",value:!1})},{passive:!0}),window.addEventListener("online",function(){e.$store.commit("prop",{key:"siteOnline",value:!0})},{passive:!0})},mounted:function(){const e=this;window.addEventListener("resize",e.onWindowResize,{passive:!0}),this.showTheBackgroundGrid()},beforeUnmount:function(){this.$compEmitter.off("refresh-page",this.refreshPage)},methods:{refreshPage:function(e){this.$store.state.showRoute&&this.$store.commit("prop",{key:"showRoute",value:!1}),this.$nextTick(function(){setTimeout(()=>{this.$store.commit("prop",{key:"showRoute",value:!0}),this.$nextTick(function(){typeof e=="function"&&e(this)})},10)})},checkIf_iOS:function(){return["iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},checkIf_Mobile(){return[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(t=>navigator.userAgent.match(t))},showTheBackgroundGrid:function(){if(!this.$store.state.showBackground){const e=this;this.$nextTick(function(){setTimeout(function(){e.$store.commit("prop",{key:"showBackground",value:!0})},1200)})}},onWindowResize:_.debounce(function(){const e=window.innerWidth,t=window.innerHeight,s=this.window.width!==e,n=this.window.height!==t;(s||n)&&(this.window.width=e,this.window.height=t,s&&this.$store.commit("prop",{key:"windowWidth",value:e}),this.$compEmitter.emit("afterWindowResize",{from:"app",width:e,widthChanged:s,height:t,heightChanged:n}))},320,{leading:!0,trailing:!0})},watch:{$route:function(e,t){let s=e.params?_.map(e.params,function(n,o){return o+":"+n}).join(","):null;this.$store.commit("prop",[{key:"route",value:e},{key:"routeParams",value:s}]),this.$nextTick(function(){this.$store.state.pageTitle&&(this.$route.meta.title||this.$route.meta.title==="")?document.title="ALE \u2022 "+(this.$route.meta.title===this.$store.state.pageTitle?this.$store.state.pageTitle:this.$route.meta.title+": "+this.$store.state.pageTitle):e.meta.title&&(document.title="ALE \u2022 "+(e.meta.title||"My Audible Library"))})},"$store.state.showRoute"(e){e||this.refreshPage()}}},va=["data-version","data-block-scrolling"],_a={key:1},ya={key:2,id:"nothing-here-404"},ba={key:0},ka={key:1};function wa(e,t,s,n,o,i){const r=fa,c=aa,l=We("router-view");return y(),b("div",{class:q({"mobile-threshold":e.$store.state.windowWidth<630}),"data-version":e.$store.state.version,"data-block-scrolling":e.$store.state.blockScrolling,style:te({paddingTop:e.$store.state.desktopPlayerHeight})},[e.$store.state.showBackground&&!(e.$store.state.standalone&&!e.$store.state.siteOnline)?(y(),N(r,{key:0})):O("",!0),x(c),e.$route.name!=="404"&&e.$store.state.showRoute?(y(),b("div",_a,[(y(),N(l,{key:e.$route.name+"-"+e.$store.state.routeParams+"-"+e.$store.state.refreshViewTimeStamp}))])):e.$store.state.showRoute?(y(),b("div",ya,[e.$store.getters.searchIsActive&&!e.$store.state.searchCollection.length?(y(),b("h3",ba,"Search: no results")):(y(),b("h3",ka,"404: There's nothing here"))])):O("",!0)],14,va)}var $a=j(ga,[["render",wa]]);/*!
  * vue-router v4.1.5
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const le=typeof window!="undefined";function Sa(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const T=Object.assign;function ze(e,t){const s={};for(const n in t){const o=t[n];s[n]=J(o)?o.map(e):e(o)}return s}const ye=()=>{},J=Array.isArray,Ca=/\/$/,Pa=e=>e.replace(Ca,"");function He(e,t,s="/"){let n,o={},i="",r="";const c=t.indexOf("#");let l=t.indexOf("?");return c<l&&c>=0&&(l=-1),l>-1&&(n=t.slice(0,l),i=t.slice(l+1,c>-1?c:t.length),o=e(i)),c>-1&&(n=n||t.slice(0,c),r=t.slice(c,t.length)),n=xa(n!=null?n:t,s),{fullPath:n+(i&&"?")+i+r,path:n,query:o,hash:r}}function Ea(e,t){const s=t.query?e(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}function ot(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Ra(e,t,s){const n=t.matched.length-1,o=s.matched.length-1;return n>-1&&n===o&&he(t.matched[n],s.matched[o])&&Nt(t.params,s.params)&&e(t.query)===e(s.query)&&t.hash===s.hash}function he(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Nt(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(!Oa(e[s],t[s]))return!1;return!0}function Oa(e,t){return J(e)?it(e,t):J(t)?it(t,e):e===t}function it(e,t){return J(t)?e.length===t.length&&e.every((s,n)=>s===t[n]):e.length===1&&e[0]===t}function xa(e,t){if(e.startsWith("/"))return e;if(!e)return t;const s=t.split("/"),n=e.split("/");let o=s.length-1,i,r;for(i=0;i<n.length;i++)if(r=n[i],r!==".")if(r==="..")o>1&&o--;else break;return s.slice(0,o).join("/")+"/"+n.slice(i-(i===n.length?1:0)).join("/")}var we;(function(e){e.pop="pop",e.push="push"})(we||(we={}));var be;(function(e){e.back="back",e.forward="forward",e.unknown=""})(be||(be={}));function Ma(e){if(!e)if(le){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Pa(e)}const Ta=/^[^#]+#/;function La(e,t){return e.replace(Ta,"#")+t}function Aa(e,t){const s=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-s.left-(t.left||0),top:n.top-s.top-(t.top||0)}}const xe=()=>({left:window.pageXOffset,top:window.pageYOffset});function Ba(e){let t;if("el"in e){const s=e.el,n=typeof s=="string"&&s.startsWith("#"),o=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!o)return;t=Aa(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function rt(e,t){return(history.state?history.state.position-t:-1)+e}const Ue=new Map;function Ia(e,t){Ue.set(e,t)}function Na(e){const t=Ue.get(e);return Ue.delete(e),t}let za=()=>location.protocol+"//"+location.host;function zt(e,t){const{pathname:s,search:n,hash:o}=t,i=e.indexOf("#");if(i>-1){let c=o.includes(e.slice(i))?e.slice(i).length:1,l=o.slice(c);return l[0]!=="/"&&(l="/"+l),ot(l,"")}return ot(s,e)+n+o}function Ha(e,t,s,n){let o=[],i=[],r=null;const c=({state:p})=>{const g=zt(e,location),$=s.value,h=t.value;let f=0;if(p){if(s.value=g,t.value=p,r&&r===$){r=null;return}f=h?p.position-h.position:0}else n(g);o.forEach(w=>{w(s.value,$,{delta:f,type:we.pop,direction:f?f>0?be.forward:be.back:be.unknown})})};function l(){r=s.value}function u(p){o.push(p);const g=()=>{const $=o.indexOf(p);$>-1&&o.splice($,1)};return i.push(g),g}function a(){const{history:p}=window;!p.state||p.replaceState(T({},p.state,{scroll:xe()}),"")}function d(){for(const p of i)p();i=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",a)}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",a),{pauseListeners:l,listen:u,destroy:d}}function at(e,t,s,n=!1,o=!1){return{back:e,current:t,forward:s,replaced:n,position:window.history.length,scroll:o?xe():null}}function Va(e){const{history:t,location:s}=window,n={value:zt(e,s)},o={value:t.state};o.value||i(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(l,u,a){const d=e.indexOf("#"),p=d>-1?(s.host&&document.querySelector("base")?e:e.slice(d))+l:za()+e+l;try{t[a?"replaceState":"pushState"](u,"",p),o.value=u}catch(g){console.error(g),s[a?"replace":"assign"](p)}}function r(l,u){const a=T({},t.state,at(o.value.back,l,o.value.forward,!0),u,{position:o.value.position});i(l,a,!0),n.value=l}function c(l,u){const a=T({},o.value,t.state,{forward:l,scroll:xe()});i(a.current,a,!0);const d=T({},at(n.value,l,null),{position:a.position+1},u);i(l,d,!1),n.value=l}return{location:n,state:o,push:c,replace:r}}function qa(e){e=Ma(e);const t=Va(e),s=Ha(e,t.state,t.location,t.replace);function n(i,r=!0){r||s.pauseListeners(),history.go(i)}const o=T({location:"",base:e,go:n,createHref:La.bind(null,e)},t,s);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function ja(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),qa(e)}function Ua(e){return typeof e=="string"||e&&typeof e=="object"}function Ht(e){return typeof e=="string"||typeof e=="symbol"}const X={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Vt=Symbol("");var lt;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(lt||(lt={}));function de(e,t){return T(new Error,{type:e,[Vt]:!0},t)}function K(e,t){return e instanceof Error&&Vt in e&&(t==null||!!(e.type&t))}const ct="[^/]+?",Ga={sensitive:!1,strict:!1,start:!0,end:!0},Da=/[.+*?^${}()[\]/\\]/g;function Wa(e,t){const s=T({},Ga,t),n=[];let o=s.start?"^":"";const i=[];for(const u of e){const a=u.length?[]:[90];s.strict&&!u.length&&(o+="/");for(let d=0;d<u.length;d++){const p=u[d];let g=40+(s.sensitive?.25:0);if(p.type===0)d||(o+="/"),o+=p.value.replace(Da,"\\$&"),g+=40;else if(p.type===1){const{value:$,repeatable:h,optional:f,regexp:w}=p;i.push({name:$,repeatable:h,optional:f});const P=w||ct;if(P!==ct){g+=10;try{new RegExp(`(${P})`)}catch(A){throw new Error(`Invalid custom RegExp for param "${$}" (${P}): `+A.message)}}let L=h?`((?:${P})(?:/(?:${P}))*)`:`(${P})`;d||(L=f&&u.length<2?`(?:/${L})`:"/"+L),f&&(L+="?"),o+=L,g+=20,f&&(g+=-8),h&&(g+=-20),P===".*"&&(g+=-50)}a.push(g)}n.push(a)}if(s.strict&&s.end){const u=n.length-1;n[u][n[u].length-1]+=.7000000000000001}s.strict||(o+="/?"),s.end?o+="$":s.strict&&(o+="(?:/|$)");const r=new RegExp(o,s.sensitive?"":"i");function c(u){const a=u.match(r),d={};if(!a)return null;for(let p=1;p<a.length;p++){const g=a[p]||"",$=i[p-1];d[$.name]=g&&$.repeatable?g.split("/"):g}return d}function l(u){let a="",d=!1;for(const p of e){(!d||!a.endsWith("/"))&&(a+="/"),d=!1;for(const g of p)if(g.type===0)a+=g.value;else if(g.type===1){const{value:$,repeatable:h,optional:f}=g,w=$ in u?u[$]:"";if(J(w)&&!h)throw new Error(`Provided param "${$}" is an array but it is not repeatable (* or + modifiers)`);const P=J(w)?w.join("/"):w;if(!P)if(f)p.length<2&&(a.endsWith("/")?a=a.slice(0,-1):d=!0);else throw new Error(`Missing required param "${$}"`);a+=P}}return a||"/"}return{re:r,score:n,keys:i,parse:c,stringify:l}}function Fa(e,t){let s=0;for(;s<e.length&&s<t.length;){const n=t[s]-e[s];if(n)return n;s++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function Ja(e,t){let s=0;const n=e.score,o=t.score;for(;s<n.length&&s<o.length;){const i=Fa(n[s],o[s]);if(i)return i;s++}if(Math.abs(o.length-n.length)===1){if(ut(n))return 1;if(ut(o))return-1}return o.length-n.length}function ut(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Ka={type:0,value:""},Ya=/[a-zA-Z0-9_]/;function Xa(e){if(!e)return[[]];if(e==="/")return[[Ka]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(g){throw new Error(`ERR (${s})/"${u}": ${g}`)}let s=0,n=s;const o=[];let i;function r(){i&&o.push(i),i=[]}let c=0,l,u="",a="";function d(){!u||(s===0?i.push({type:0,value:u}):s===1||s===2||s===3?(i.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:a,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function p(){u+=l}for(;c<e.length;){if(l=e[c++],l==="\\"&&s!==2){n=s,s=4;continue}switch(s){case 0:l==="/"?(u&&d(),r()):l===":"?(d(),s=1):p();break;case 4:p(),s=n;break;case 1:l==="("?s=2:Ya.test(l)?p():(d(),s=0,l!=="*"&&l!=="?"&&l!=="+"&&c--);break;case 2:l===")"?a[a.length-1]=="\\"?a=a.slice(0,-1)+l:s=3:a+=l;break;case 3:d(),s=0,l!=="*"&&l!=="?"&&l!=="+"&&c--,a="";break;default:t("Unknown state");break}}return s===2&&t(`Unfinished custom RegExp for param "${u}"`),d(),r(),o}function Qa(e,t,s){const n=Wa(Xa(e.path),s),o=T(n,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function Za(e,t){const s=[],n=new Map;t=pt({strict:!1,end:!0,sensitive:!1},t);function o(a){return n.get(a)}function i(a,d,p){const g=!p,$=el(a);$.aliasOf=p&&p.record;const h=pt(t,a),f=[$];if("alias"in a){const L=typeof a.alias=="string"?[a.alias]:a.alias;for(const A of L)f.push(T({},$,{components:p?p.record.components:$.components,path:A,aliasOf:p?p.record:$}))}let w,P;for(const L of f){const{path:A}=L;if(d&&A[0]!=="/"){const I=d.record.path,M=I[I.length-1]==="/"?"":"/";L.path=d.record.path+(A&&M+A)}if(w=Qa(L,d,h),p?p.alias.push(w):(P=P||w,P!==w&&P.alias.push(w),g&&a.name&&!dt(w)&&r(a.name)),$.children){const I=$.children;for(let M=0;M<I.length;M++)i(I[M],w,p&&p.children[M])}p=p||w,l(w)}return P?()=>{r(P)}:ye}function r(a){if(Ht(a)){const d=n.get(a);d&&(n.delete(a),s.splice(s.indexOf(d),1),d.children.forEach(r),d.alias.forEach(r))}else{const d=s.indexOf(a);d>-1&&(s.splice(d,1),a.record.name&&n.delete(a.record.name),a.children.forEach(r),a.alias.forEach(r))}}function c(){return s}function l(a){let d=0;for(;d<s.length&&Ja(a,s[d])>=0&&(a.record.path!==s[d].record.path||!qt(a,s[d]));)d++;s.splice(d,0,a),a.record.name&&!dt(a)&&n.set(a.record.name,a)}function u(a,d){let p,g={},$,h;if("name"in a&&a.name){if(p=n.get(a.name),!p)throw de(1,{location:a});h=p.record.name,g=T(ht(d.params,p.keys.filter(P=>!P.optional).map(P=>P.name)),a.params&&ht(a.params,p.keys.map(P=>P.name))),$=p.stringify(g)}else if("path"in a)$=a.path,p=s.find(P=>P.re.test($)),p&&(g=p.parse($),h=p.record.name);else{if(p=d.name?n.get(d.name):s.find(P=>P.re.test(d.path)),!p)throw de(1,{location:a,currentLocation:d});h=p.record.name,g=T({},d.params,a.params),$=p.stringify(g)}const f=[];let w=p;for(;w;)f.unshift(w.record),w=w.parent;return{name:h,path:$,params:g,matched:f,meta:sl(f)}}return e.forEach(a=>i(a)),{addRoute:i,resolve:u,removeRoute:r,getRoutes:c,getRecordMatcher:o}}function ht(e,t){const s={};for(const n of t)n in e&&(s[n]=e[n]);return s}function el(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:tl(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function tl(e){const t={},s=e.props||!1;if("component"in e)t.default=s;else for(const n in e.components)t[n]=typeof s=="boolean"?s:s[n];return t}function dt(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function sl(e){return e.reduce((t,s)=>T(t,s.meta),{})}function pt(e,t){const s={};for(const n in e)s[n]=n in t?t[n]:e[n];return s}function qt(e,t){return t.children.some(s=>s===e||qt(e,s))}const jt=/#/g,nl=/&/g,ol=/\//g,il=/=/g,rl=/\?/g,Ut=/\+/g,al=/%5B/g,ll=/%5D/g,Gt=/%5E/g,cl=/%60/g,Dt=/%7B/g,ul=/%7C/g,Wt=/%7D/g,hl=/%20/g;function Je(e){return encodeURI(""+e).replace(ul,"|").replace(al,"[").replace(ll,"]")}function dl(e){return Je(e).replace(Dt,"{").replace(Wt,"}").replace(Gt,"^")}function Ge(e){return Je(e).replace(Ut,"%2B").replace(hl,"+").replace(jt,"%23").replace(nl,"%26").replace(cl,"`").replace(Dt,"{").replace(Wt,"}").replace(Gt,"^")}function pl(e){return Ge(e).replace(il,"%3D")}function fl(e){return Je(e).replace(jt,"%23").replace(rl,"%3F")}function ml(e){return e==null?"":fl(e).replace(ol,"%2F")}function Se(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function gl(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let o=0;o<n.length;++o){const i=n[o].replace(Ut," "),r=i.indexOf("="),c=Se(r<0?i:i.slice(0,r)),l=r<0?null:Se(i.slice(r+1));if(c in t){let u=t[c];J(u)||(u=t[c]=[u]),u.push(l)}else t[c]=l}return t}function ft(e){let t="";for(let s in e){const n=e[s];if(s=pl(s),n==null){n!==void 0&&(t+=(t.length?"&":"")+s);continue}(J(n)?n.map(i=>i&&Ge(i)):[n&&Ge(n)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+s,i!=null&&(t+="="+i))})}return t}function vl(e){const t={};for(const s in e){const n=e[s];n!==void 0&&(t[s]=J(n)?n.map(o=>o==null?null:""+o):n==null?n:""+n)}return t}const _l=Symbol(""),mt=Symbol(""),Ke=Symbol(""),Ft=Symbol(""),De=Symbol("");function ge(){let e=[];function t(n){return e.push(n),()=>{const o=e.indexOf(n);o>-1&&e.splice(o,1)}}function s(){e=[]}return{add:t,list:()=>e,reset:s}}function ee(e,t,s,n,o){const i=n&&(n.enterCallbacks[o]=n.enterCallbacks[o]||[]);return()=>new Promise((r,c)=>{const l=d=>{d===!1?c(de(4,{from:s,to:t})):d instanceof Error?c(d):Ua(d)?c(de(2,{from:t,to:d})):(i&&n.enterCallbacks[o]===i&&typeof d=="function"&&i.push(d),r())},u=e.call(n&&n.instances[o],t,s,l);let a=Promise.resolve(u);e.length<3&&(a=a.then(l)),a.catch(d=>c(d))})}function Ve(e,t,s,n){const o=[];for(const i of e)for(const r in i.components){let c=i.components[r];if(!(t!=="beforeRouteEnter"&&!i.instances[r]))if(yl(c)){const u=(c.__vccOpts||c)[t];u&&o.push(ee(u,s,n,i,r))}else{let l=c();o.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${r}" at "${i.path}"`));const a=Sa(u)?u.default:u;i.components[r]=a;const p=(a.__vccOpts||a)[t];return p&&ee(p,s,n,i,r)()}))}}return o}function yl(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function gt(e){const t=ke(Ke),s=ke(Ft),n=F(()=>t.resolve(_e(e.to))),o=F(()=>{const{matched:l}=n.value,{length:u}=l,a=l[u-1],d=s.matched;if(!a||!d.length)return-1;const p=d.findIndex(he.bind(null,a));if(p>-1)return p;const g=vt(l[u-2]);return u>1&&vt(a)===g&&d[d.length-1].path!==g?d.findIndex(he.bind(null,l[u-2])):p}),i=F(()=>o.value>-1&&$l(s.params,n.value.params)),r=F(()=>o.value>-1&&o.value===s.matched.length-1&&Nt(s.params,n.value.params));function c(l={}){return wl(l)?t[_e(e.replace)?"replace":"push"](_e(e.to)).catch(ye):Promise.resolve()}return{route:n,href:F(()=>n.value.href),isActive:i,isExactActive:r,navigate:c}}const bl=Rt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:gt,setup(e,{slots:t}){const s=Et(gt(e)),{options:n}=ke(Ke),o=F(()=>({[_t(e.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[_t(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const i=t.default&&t.default(s);return e.custom?i:Ot("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:o.value},i)}}}),kl=bl;function wl(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function $l(e,t){for(const s in t){const n=t[s],o=e[s];if(typeof n=="string"){if(n!==o)return!1}else if(!J(o)||o.length!==n.length||n.some((i,r)=>i!==o[r]))return!1}return!0}function vt(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const _t=(e,t,s)=>e!=null?e:t!=null?t:s,Sl=Rt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:s}){const n=ke(De),o=F(()=>e.route||n.value),i=ke(mt,0),r=F(()=>{let u=_e(i);const{matched:a}=o.value;let d;for(;(d=a[u])&&!d.components;)u++;return u}),c=F(()=>o.value.matched[r.value]);Ne(mt,F(()=>r.value+1)),Ne(_l,c),Ne(De,o);const l=as();return ls(()=>[l.value,c.value,e.name],([u,a,d],[p,g,$])=>{a&&(a.instances[d]=u,g&&g!==a&&u&&u===p&&(a.leaveGuards.size||(a.leaveGuards=g.leaveGuards),a.updateGuards.size||(a.updateGuards=g.updateGuards))),u&&a&&(!g||!he(a,g)||!p)&&(a.enterCallbacks[d]||[]).forEach(h=>h(u))},{flush:"post"}),()=>{const u=o.value,a=e.name,d=c.value,p=d&&d.components[a];if(!p)return yt(s.default,{Component:p,route:u});const g=d.props[a],$=g?g===!0?u.params:typeof g=="function"?g(u):g:null,f=Ot(p,T({},$,t,{onVnodeUnmounted:w=>{w.component.isUnmounted&&(d.instances[a]=null)},ref:l}));return yt(s.default,{Component:f,route:u})||f}}});function yt(e,t){if(!e)return null;const s=e(t);return s.length===1?s[0]:s}const Cl=Sl;function Pl(e){const t=Za(e.routes,e),s=e.parseQuery||gl,n=e.stringifyQuery||ft,o=e.history,i=ge(),r=ge(),c=ge(),l=is(X);let u=X;le&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const a=ze.bind(null,v=>""+v),d=ze.bind(null,ml),p=ze.bind(null,Se);function g(v,S){let k,C;return Ht(v)?(k=t.getRecordMatcher(v),C=S):C=v,t.addRoute(C,k)}function $(v){const S=t.getRecordMatcher(v);S&&t.removeRoute(S)}function h(){return t.getRoutes().map(v=>v.record)}function f(v){return!!t.getRecordMatcher(v)}function w(v,S){if(S=T({},S||l.value),typeof v=="string"){const E=He(s,v,S.path),H=t.resolve({path:E.path},S),me=o.createHref(E.fullPath);return T(E,H,{params:p(H.params),hash:Se(E.hash),redirectedFrom:void 0,href:me})}let k;if("path"in v)k=T({},v,{path:He(s,v.path,S.path).path});else{const E=T({},v.params);for(const H in E)E[H]==null&&delete E[H];k=T({},v,{params:d(v.params)}),S.params=d(S.params)}const C=t.resolve(k,S),B=v.hash||"";C.params=a(p(C.params));const z=Ea(n,T({},v,{hash:dl(B),path:C.path})),R=o.createHref(z);return T({fullPath:z,hash:B,query:n===ft?vl(v.query):v.query||{}},C,{redirectedFrom:void 0,href:R})}function P(v){return typeof v=="string"?He(s,v,l.value.path):T({},v)}function L(v,S){if(u!==v)return de(8,{from:S,to:v})}function A(v){return W(v)}function I(v){return A(T(P(v),{replace:!0}))}function M(v){const S=v.matched[v.matched.length-1];if(S&&S.redirect){const{redirect:k}=S;let C=typeof k=="function"?k(v):k;return typeof C=="string"&&(C=C.includes("?")||C.includes("#")?C=P(C):{path:C},C.params={}),T({query:v.query,hash:v.hash,params:"path"in C?{}:v.params},C)}}function W(v,S){const k=u=w(v),C=l.value,B=v.state,z=v.force,R=v.replace===!0,E=M(k);if(E)return W(T(P(E),{state:typeof E=="object"?T({},B,E.state):B,force:z,replace:R}),S||k);const H=k;H.redirectedFrom=S;let me;return!z&&Ra(n,C,k)&&(me=de(16,{to:H,from:C}),et(C,C,!0,!1)),(me?Promise.resolve(me):Ye(H,C)).catch(U=>K(U)?K(U,2)?U:Le(U):Te(U,H,C)).then(U=>{if(U){if(K(U,2))return W(T({replace:R},P(U.to),{state:typeof U.to=="object"?T({},B,U.to.state):B,force:z}),S||H)}else U=Qe(H,C,!0,R,B);return Xe(H,C,U),U})}function Qt(v,S){const k=L(v,S);return k?Promise.reject(k):Promise.resolve()}function Ye(v,S){let k;const[C,B,z]=El(v,S);k=Ve(C.reverse(),"beforeRouteLeave",v,S);for(const E of C)E.leaveGuards.forEach(H=>{k.push(ee(H,v,S))});const R=Qt.bind(null,v,S);return k.push(R),re(k).then(()=>{k=[];for(const E of i.list())k.push(ee(E,v,S));return k.push(R),re(k)}).then(()=>{k=Ve(B,"beforeRouteUpdate",v,S);for(const E of B)E.updateGuards.forEach(H=>{k.push(ee(H,v,S))});return k.push(R),re(k)}).then(()=>{k=[];for(const E of v.matched)if(E.beforeEnter&&!S.matched.includes(E))if(J(E.beforeEnter))for(const H of E.beforeEnter)k.push(ee(H,v,S));else k.push(ee(E.beforeEnter,v,S));return k.push(R),re(k)}).then(()=>(v.matched.forEach(E=>E.enterCallbacks={}),k=Ve(z,"beforeRouteEnter",v,S),k.push(R),re(k))).then(()=>{k=[];for(const E of r.list())k.push(ee(E,v,S));return k.push(R),re(k)}).catch(E=>K(E,8)?E:Promise.reject(E))}function Xe(v,S,k){for(const C of c.list())C(v,S,k)}function Qe(v,S,k,C,B){const z=L(v,S);if(z)return z;const R=S===X,E=le?history.state:{};k&&(C||R?o.replace(v.fullPath,T({scroll:R&&E&&E.scroll},B)):o.push(v.fullPath,B)),l.value=v,et(v,S,k,R),Le()}let fe;function Zt(){fe||(fe=o.listen((v,S,k)=>{if(!tt.listening)return;const C=w(v),B=M(C);if(B){W(T(B,{replace:!0}),C).catch(ye);return}u=C;const z=l.value;le&&Ia(rt(z.fullPath,k.delta),xe()),Ye(C,z).catch(R=>K(R,12)?R:K(R,2)?(W(R.to,C).then(E=>{K(E,20)&&!k.delta&&k.type===we.pop&&o.go(-1,!1)}).catch(ye),Promise.reject()):(k.delta&&o.go(-k.delta,!1),Te(R,C,z))).then(R=>{R=R||Qe(C,z,!1),R&&(k.delta&&!K(R,8)?o.go(-k.delta,!1):k.type===we.pop&&K(R,20)&&o.go(-1,!1)),Xe(C,z,R)}).catch(ye)}))}let Me=ge(),Ze=ge(),$e;function Te(v,S,k){Le(v);const C=Ze.list();return C.length?C.forEach(B=>B(v,S,k)):console.error(v),Promise.reject(v)}function es(){return $e&&l.value!==X?Promise.resolve():new Promise((v,S)=>{Me.add([v,S])})}function Le(v){return $e||($e=!v,Zt(),Me.list().forEach(([S,k])=>v?k(v):S()),Me.reset()),v}function et(v,S,k,C){const{scrollBehavior:B}=e;if(!le||!B)return Promise.resolve();const z=!k&&Na(rt(v.fullPath,0))||(C||!k)&&history.state&&history.state.scroll||null;return rs().then(()=>B(v,S,z)).then(R=>R&&Ba(R)).catch(R=>Te(R,v,S))}const Ae=v=>o.go(v);let Be;const Ie=new Set,tt={currentRoute:l,listening:!0,addRoute:g,removeRoute:$,hasRoute:f,getRoutes:h,resolve:w,options:e,push:A,replace:I,go:Ae,back:()=>Ae(-1),forward:()=>Ae(1),beforeEach:i.add,beforeResolve:r.add,afterEach:c.add,onError:Ze.add,isReady:es,install(v){const S=this;v.component("RouterLink",kl),v.component("RouterView",Cl),v.config.globalProperties.$router=S,Object.defineProperty(v.config.globalProperties,"$route",{enumerable:!0,get:()=>_e(l)}),le&&!Be&&l.value===X&&(Be=!0,A(o.location).catch(B=>{}));const k={};for(const B in X)k[B]=F(()=>l.value[B]);v.provide(Ke,S),v.provide(Ft,Et(k)),v.provide(De,l);const C=v.unmount;Ie.add(v),v.unmount=function(){Ie.delete(v),Ie.size<1&&(u=X,fe&&fe(),fe=null,l.value=X,Be=!1,$e=!1),C()}}};return tt}function re(e){return e.reduce((t,s)=>t.then(()=>s()),Promise.resolve())}function El(e,t){const s=[],n=[],o=[],i=Math.max(t.matched.length,e.matched.length);for(let r=0;r<i;r++){const c=t.matched[r];c&&(e.matched.find(u=>he(u,c))?n.push(c):s.push(c));const l=e.matched[r];l&&(t.matched.find(u=>he(u,l))||o.push(l))}return[s,n,o]}var Rl={sticky:{lightSwitch:1,lightSwitchSetByUser:!1,viewMode:"grid",chunkLocation:0,booksInSeriesToggle:!1,collectionsDrawerToggle:!0,exportSettingsGallery:null,exportSettingsCSVdataSources:null,exportSettingsCSVcompatibility:null,booksInSeriesAll:!0,booksInSeriesFinished:!0,booksInSeriesOpenInApp:!0,subPageSource:"library",bookDetailsCollapsedCover:!1,bookDetailsCollapsedDetails:!1,contextMenuReminder:!0,bookDetailSettings:{minHeight:null,titleShort:!0,sidebar:{show:!0,iconToolbar:!0,seriesList:!0,collectionsList:!0},carousel:!0,playButton:!0,cloudPlayer:!1,blurb:!0,statusIndicators:!0,whispersync:!0,plusCatalog:!0,favorite:!0,finished:!0,reverseDirection:!1,hideFirstSection:!1},collectionsHidePremade:!1,player:{books:[]},seriesFilters:{inLibrary:null,notInLibrary:null}},bookDetailSettingsOpen:!1,searchMounted:!1,searchCollection:[],mutatingCollection:[],collectionSource:null,pageCollection:null,route:null,routeParams:null,library:null,urlOrigin:null,searchQuery:"",standalone:null,displayMode:null,listRenderingOpts:null,windowWidth:window.innerWidth,showBackground:!1,chunkCollection:[],chunkDistance:40,refreshViewTimeStamp:new Date().getTime(),showRoute:!0,pageTitle:null,pageSubTitle:null,version:"0.2.9",extractSettings:null,siteOnline:!0,searchOptCloseGuard:!1,bundlingGallery:!1,bookDetails:{book:null,index:-1},searchOptOpenHeight:null,devMode:!1,lazyScroll:!0,navHistory:{btnNavigation:!1,forward:[],back:[]},modal:{saveLocally:!1},blockScrolling:!1,playingAudio:!1,topNavOffset:0,bookClicked:!1,audioPlayer:{audio:null,timeDisplay:"00:00",progress:0,sample:!0,playing:!1},showMobilePlayer:!1,desktopPlayerHeight:null},Ol={fromLocalStorage:function(e){const t=JSON.parse(localStorage.getItem("aleSettings"));t&&_.merge(e.sticky,t)},prop(e,t){let s=function(n){if(n=n||{},n.key){let o=n.freeze?Object.freeze(n.value):n.value;_.set(e,n.key,o)}};_.isArray(t)?_.each(t,function(n){s(n)}):s(t)},buildStandaloneData:function(e,t){e.library=e.library||{},_.each(t,function(s){s.key&&_.set(e,"library."+s.key,Object.freeze(s.value))})},stickyProp:function(e,t){e.sticky[t.key]=t.value},addListRenderingOpts:function(e,t){if(t.sortValues!==void 0){let s=_.find(e.listRenderingOpts.sort,{key:"sortValues"});s&&(s.active=t.sortValues)}if(t.splice?e.listRenderingOpts[t.listName].splice(t.splice,0,t.option):t.unshift?e.listRenderingOpts[t.listName].unshift(t.option):e.listRenderingOpts[t.listName].push(t.option),t.activate)if(t.listName==="sort"){const s=_.find(e.listRenderingOpts[t.listName],"current");s&&(s.current=!1),t.option.current=!0}else{const s=_.find(e.listRenderingOpts[t.listName],"active");s.active=!1,t.option.active=!0}},updateListRenderingOpts:function(e,t){let s=e.listRenderingOpts[t.listName],n=s[t.index===0||t.index?t.index:_.findIndex(s,{key:t.key})];if(t.sortValues!==void 0){let o=_.find(e.listRenderingOpts.sort,{key:"sortValues"});o&&(o.active=t.sortValues)}if((t.active===!1||t.active===!0)&&(n.active=t.active),n.type==="filterExtras"&&(t.range&&(n.range=t.range),t.value&&(n.value=t.value)),t.listName==="sort"&&n.type==="sort"){const o=_.find(s,"current");o.current=!1,n.current=!0}},resetFilters:function(e,t){_.each(e.listRenderingOpts.filter,function(s){s.active=s.type==="filter"})},chunkCollectionReset:function(e){e.chunkDistance=e.sticky.viewMode==="grid"?52:80,e.sticky.chunkLocation=0,e.chunkCollection=[]},chunkCollectionAdd:function(e,t){t=t||{};const n=e.searchQuery.trim()!==""?e.searchCollection:e.mutatingCollection;if(n.length>0){const o=t.chunkDistance?t.chunkDistance:parseFloat(e.sticky.chunkLocation);let i=t.chunkDistance?n.slice(0,o):n.slice(o,o+e.chunkDistance);i.length>0&&(t.chunkDistance?e.chunkCollection=i:e.chunkCollection=e.chunkCollection.concat(i),e.sticky.chunkLocation=o+e.chunkDistance)}},navHistory:function(e,t){const s=t.pushOnly?t.key:t.key==="back"?"forward":"back";e.navHistory[s].push(t.value),t.pushOnly||(e.navHistory[t.key].pop,e.navHistory.btnNavigation=!0)},updatePlayerProgress:function(e,t){const s=_.findIndex(e.sticky.player.books,{asin:t.asin});s>-1?_.set(e.sticky.player,"books["+s+"].progress",t.progress):e.sticky.player.books.push(t)}},xl={sortValues:function(e){return _.find(e.listRenderingOpts.sort,{key:"sortValues"}).active},sortBy:function(e){return _.find(e.listRenderingOpts.sort,"current").key},regularFilters:function(e){return _.filter(e.listRenderingOpts.filter,{type:"filter"}).length>0},filterKeys:function(e){return _.map(_.filter(e.listRenderingOpts.filter,{type:"filter",active:!0}),function(t){return t.key}).join(",")},filterKeysLength:function(e){return _.filter(e.listRenderingOpts.filter,{type:"filter"}).length},filterExtrasKeys:function(e){return _.map(_.filter(e.listRenderingOpts.filter,{type:"filterExtras",active:!0}),function(t){return t.key}).join(",")},scopeKeys:function(e){return _.map(_.filter(e.listRenderingOpts.scope,"active"),function(t){return t.key}).join(",")},searchIsActive:function(e){return e.searchQuery.trim()!==""},collectionSource:function(e){return e.searchQuery.trim()!==""?e.searchCollection:_.get(e,e.collectionSource)},collectionTotal:function(e){return _.get(e,e.collectionSource,[]).length},collection:function(e){return e.searchQuery.trim()!==""?e.searchCollection:e.mutatingCollection},saveStandaloneAfter:function(e){let t=_.get(e,"extractSettings.extraSettings");if(t&&_.find(t,{name:"saveStandaloneAfter",value:!0,deactivated:!1}))return!0},audioPlayerBook(e,t){return _.get(e.audioPlayer.audio,"book",{})},audioPlayerTitle(e,t){const s=_.get(t,"audioPlayerBook",{});return s.title||s.titleShort}},V=ps({state:Rl,mutations:Ol,getters:xl});const Ml="modulepreload",bt={},Tl="",ie=function(t,s){return!s||s.length===0?t():Promise.all(s.map(n=>{if(n=`${Tl}${n}`,n in bt)return;bt[n]=!0;const o=n.endsWith(".css"),i=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${i}`))return;const r=document.createElement("link");if(r.rel=o?"stylesheet":Ml,o||(r.as="script",r.crossOrigin=""),r.href=n,document.head.appendChild(r),o)return new Promise((c,l)=>{r.addEventListener("load",c),r.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>t())},Ll={name:"aleLibraryView",mounted(){}},Al={key:0},Bl={key:1,id:"nothing-here-404"},Il={key:0},Nl={key:1};function zl(e,t,s,n,o,i){const r=We("router-view");return e.$store.state.showRoute?(y(),b("div",Al,[e.$route.name!=="404"?(y(),N(r,{key:e.$route.name+"-"+e.$store.state.routeParams+"-"+e.$store.state.refreshViewTimeStamp})):(y(),b("div",Bl,[e.$store.getters.searchIsActive&&!e.$store.state.searchCollection.length?(y(),b("h3",Il,"Search: no results")):(y(),b("h3",Nl,"404: There's nothing here"))]))])):O("",!0)}var Q=j(Ll,[["render",zl]]);const Z=()=>ie(()=>import("./gallery-root.303131bb.js"),["assets/gallery-root.303131bb.js","assets/gallery-root.fdc024b2.css","assets/gallery-lazy.624a8b8f.js","assets/lodash.4652d4aa.js","assets/jquery.050764e9.js","assets/gallery-makeCoverUrl.8378190f.js","assets/gallery-timeStringToSeconds.9aa0cb6a.js","assets/gallery-secondsToTimeString.0a6fc9ec.js","assets/gallery-search.6b0f2ea7.js","assets/gallery-search.30409f18.css","assets/vue.runtime.esm-bundler.5c1c6a5a.js","assets/gallery-findSubPageSource.1b7fcaa0.js","assets/gallery-findSubPageSource.9caea48c.css","assets/gallery-page-title.e0ebf3aa.js","assets/gallery-page-title.d16b2dce.css","assets/content-script-helpers.e49fc91b.js","assets/howler.22814ddb.js","assets/index.abab9d81.js","assets/tippy.b06e4748.js","assets/tippy.c4165dec.css"]),Hl=()=>ie(()=>import("./gallery-collections.a2822e32.js"),["assets/gallery-collections.a2822e32.js","assets/gallery-collections.ec2b6005.css","assets/gallery-lazy.624a8b8f.js","assets/lodash.4652d4aa.js","assets/jquery.050764e9.js","assets/gallery-page-title.e0ebf3aa.js","assets/gallery-page-title.d16b2dce.css","assets/content-script-helpers.e49fc91b.js","assets/gallery-makeCoverUrl.8378190f.js","assets/howler.22814ddb.js","assets/index.abab9d81.js","assets/tippy.b06e4748.js","assets/tippy.c4165dec.css"]),Vl=()=>ie(()=>import("./gallery-categories.8ccee387.js"),["assets/gallery-categories.8ccee387.js","assets/gallery-categories.75a71719.css","assets/gallery-findSubPageSource.1b7fcaa0.js","assets/gallery-findSubPageSource.9caea48c.css","assets/lodash.4652d4aa.js","assets/jquery.050764e9.js","assets/gallery-page-title.e0ebf3aa.js","assets/gallery-page-title.d16b2dce.css","assets/content-script-helpers.e49fc91b.js","assets/gallery-makeCoverUrl.8378190f.js","assets/howler.22814ddb.js","assets/index.abab9d81.js","assets/tippy.b06e4748.js","assets/tippy.c4165dec.css"]),ql=()=>ie(()=>import("./gallery-series.a92cc6fd.js"),["assets/gallery-series.a92cc6fd.js","assets/gallery-series.eae4fe5b.css","assets/gallery-lazy.624a8b8f.js","assets/lodash.4652d4aa.js","assets/jquery.050764e9.js","assets/gallery-search.6b0f2ea7.js","assets/gallery-search.30409f18.css","assets/vue.runtime.esm-bundler.5c1c6a5a.js","assets/gallery-findSubPageSource.1b7fcaa0.js","assets/gallery-findSubPageSource.9caea48c.css","assets/gallery-page-title.e0ebf3aa.js","assets/gallery-page-title.d16b2dce.css","assets/content-script-helpers.e49fc91b.js","assets/gallery-timeStringToSeconds.9aa0cb6a.js","assets/gallery-makeCoverUrl.8378190f.js","assets/howler.22814ddb.js","assets/index.abab9d81.js","assets/tippy.b06e4748.js","assets/tippy.c4165dec.css"]),jl=()=>ie(()=>import("./gallery-authors.c5bc0b3c.js"),["assets/gallery-authors.c5bc0b3c.js","assets/gallery-authors.a5ca8b56.css","assets/gallery-lazy.624a8b8f.js","assets/lodash.4652d4aa.js","assets/jquery.050764e9.js","assets/gallery-search.6b0f2ea7.js","assets/gallery-search.30409f18.css","assets/vue.runtime.esm-bundler.5c1c6a5a.js","assets/gallery-findSubPageSource.1b7fcaa0.js","assets/gallery-findSubPageSource.9caea48c.css","assets/gallery-page-title.e0ebf3aa.js","assets/gallery-page-title.d16b2dce.css","assets/content-script-helpers.e49fc91b.js","assets/gallery-timeStringToSeconds.9aa0cb6a.js","assets/gallery-makeCoverUrl.8378190f.js","assets/howler.22814ddb.js","assets/index.abab9d81.js","assets/tippy.b06e4748.js","assets/tippy.c4165dec.css"]),Ul=()=>ie(()=>import("./gallery-narrators.758dd979.js"),["assets/gallery-narrators.758dd979.js","assets/gallery-narrators.c3d48860.css","assets/gallery-lazy.624a8b8f.js","assets/lodash.4652d4aa.js","assets/jquery.050764e9.js","assets/gallery-search.6b0f2ea7.js","assets/gallery-search.30409f18.css","assets/vue.runtime.esm-bundler.5c1c6a5a.js","assets/gallery-findSubPageSource.1b7fcaa0.js","assets/gallery-findSubPageSource.9caea48c.css","assets/gallery-page-title.e0ebf3aa.js","assets/gallery-page-title.d16b2dce.css","assets/content-script-helpers.e49fc91b.js","assets/gallery-timeStringToSeconds.9aa0cb6a.js","assets/gallery-makeCoverUrl.8378190f.js","assets/howler.22814ddb.js","assets/index.abab9d81.js","assets/tippy.b06e4748.js","assets/tippy.c4165dec.css"]),Gl=()=>ie(()=>import("./gallery-publishers.68739142.js"),["assets/gallery-publishers.68739142.js","assets/gallery-publishers.961201d0.css","assets/gallery-lazy.624a8b8f.js","assets/lodash.4652d4aa.js","assets/jquery.050764e9.js","assets/gallery-search.6b0f2ea7.js","assets/gallery-search.30409f18.css","assets/vue.runtime.esm-bundler.5c1c6a5a.js","assets/gallery-findSubPageSource.1b7fcaa0.js","assets/gallery-findSubPageSource.9caea48c.css","assets/gallery-page-title.e0ebf3aa.js","assets/gallery-page-title.d16b2dce.css","assets/content-script-helpers.e49fc91b.js","assets/gallery-timeStringToSeconds.9aa0cb6a.js","assets/gallery-makeCoverUrl.8378190f.js","assets/howler.22814ddb.js","assets/index.abab9d81.js","assets/tippy.b06e4748.js","assets/tippy.c4165dec.css"]);var ae={library:{name:"library",path:"/library",component:Z,meta:{gallery:!0,title:"Library",icon:"fa-solid fa-book"}},collections:{path:"/collections",component:Q,meta:{icon:"fa-regular fa-folder-open"},children:[{name:"collections",path:"",component:Hl,meta:{title:"Collections"}},{name:"collection",path:":collection",component:Z,meta:{gallery:!0,title:"Collections"}}]},wishlist:{path:"/wishlist",component:Q,meta:{icon:"fa-solid fa-bookmark"},children:[{name:"wishlist",path:"",component:Z,meta:{gallery:!0,title:"Wishlist"}}]},subPages:{categories:{path:"/categories",meta:{icon:"fa-solid fa-indent",nestedGroup:"subPages"},component:Q,children:[{name:"categories",path:"",component:Vl,meta:{subPage:!0,title:"Categories"}},{name:"category",path:":parent/:child?",component:Z,meta:{gallery:!0,subPage:!0,title:"Categories"}}]},series:{path:"/series",component:Q,meta:{icon:"fa-solid fa-list-ol",nestedGroup:"subPages"},children:[{name:"all-series",path:"",component:ql,meta:{subPage:!0,title:"Series"}},{name:"series",path:":series",component:Z,meta:{gallery:!0,subPage:!0,title:"Series"}}]},authors:{path:"/authors",component:Q,meta:{icon:"fa-solid fa-user-group",nestedGroup:"subPages"},children:[{name:"authors",path:"",component:jl,meta:{subPage:!0,title:"Authors"}},{name:"author",path:":author",component:Z,meta:{gallery:!0,subPage:!0,title:"Authors"}}]},narrators:{path:"/narrators",component:Q,meta:{icon:"fa-solid fa-users",nestedGroup:"subPages"},children:[{name:"narrators",path:"",component:Ul,meta:{subPage:!0,title:"Narrators"}},{name:"narrator",path:":narrator",component:Z,meta:{gallery:!0,subPage:!0,title:"Narrators"}}]},publishers:{path:"/publishers",component:Q,meta:{icon:"fa-solid fa-book",nestedGroup:"subPages"},children:[{name:"publishers",path:"",component:Gl,meta:{subPage:!0,title:"Publishers"}},{name:"publisher",path:":publisher",component:Z,meta:{gallery:!0,subPage:!0,title:"Publishers"}}]}},fallback:{path:"/:pathMatch(.*)*",name:"404",component:Q,meta:{}}};function Dl(e){if(e){let s=[];e.books?s.push({path:"/",redirect:"/library"}):e.wishlist&&s.push({path:"/",redirect:"/wishlist"}),e.books&&s.push(ae.library),!e.books&&e.wishlist&&s.push(ae.wishlist);var t=ae.subPages;let n=_.get(e,"extras.subPageStates");n?_.each(n,function(r){r.enabled&&s.push(t[r.key])}):(e.books||e.wishlist)&&_.each(t,function(r){s.push(r)}),e.collections&&s.push(ae.collections),e.books&&e.wishlist&&s.push(ae.wishlist),s.push(ae.fallback);const o=Pl({history:ja(""),routes:s,scrollBehavior(r,c,l){return l||(c&&r.name===c.name&&_.isEqual(r.params,c.params)?void 0:{x:0,y:0})}});if(document.querySelector("html.standalone-gallery")){let r=function(l){return new Promise(function(u,a){let d=document.createElement("script");d.src=(l.prefix||"data/")+l.name+"."+e.extras.cacheID+".js",d.type="text/javascript",d.onload=function(){u(l),d=null},d.onerror=function(){a(l),d=null},document.body.appendChild(d)})},c=function(l,u,a,d,p){d=_.filter(d,function($){return window[$.name+"JSON"]!==!0});let g=[];d.forEach(function($){g.push(r($))}),Promise.all(g).catch(function(){p||setTimeout(function(){c(l,u,a,d,"afterError")},1e3)}).finally(function(){let $=_.map(d,function(h){return{key:h.keyOverride||h.name,value:window[h.name+"JSON"]}});V.commit("buildStandaloneData",$),_.each(d,function(h){window[h.name+"JSON"]=!0}),qe(l,u,a)})};o.beforeEach((l,u,a)=>{if(l.name&&(u.name!==l.name||_.get(u,"query.book")!==_.get(l,"query.book")||u.query.subPageSource!==l.query.subPageSource)){const d=[],p=l.name==="wishlist"||l.query.subPageSource==="wishlist"||l.meta.subPage&&!l.query.subPageSource&&V.state.sticky.subPageSource==="wishlist";e.wishlist&&p?d.push({name:"wishlist"}):e.books&&d.push({name:"library",keyOverride:"books"}),e.series&&d.push({name:"series"}),e.collections&&d.push({name:"collections"}),c(l,u,a,d)}else qe(l,u,a)})}else o.beforeEach((r,c,l)=>{qe(r,c,l)});return o.afterEach((r,c,l)=>{if(c.name!==r.name){const u=V.state.navHistory.forward,a=V.state.navHistory.back;c.name&&c.name!==u[u.length-1]&&c.name!==a[a.length-1]&&V.commit("navHistory",{key:"back",value:c.name,pushOnly:!0}),V.state.navHistory.btnNavigation||V.commit("prop",{key:"navHistory.forward",value:[]}),V.commit("prop",{key:"navHistory.btnNavigation",value:!1})}}),o}}function qe(e,t,s){e.query.refresh?(delete e.query.refresh,V.commit("prop",[{key:"showRoute",value:!1},{key:"refreshViewTimeStamp",value:new Date().getTime()}]),s(e)):s()}const Jt={};Jt.install=function(e,t){e.config.globalProperties.$updateQuery=function(s){s=s||{};let n=s.query,o=s.value,i=s.history,r=s.queries||this.$route.query,c=JSON.parse(JSON.stringify(r));o===void 0?c[n]?delete c[n]:c[n]=!0:o?c[n]=o:delete c[n],console.log(n,c),i?this.$router.push({query:c}).catch(()=>{}):this.$router.replace({query:c}).catch(()=>{})},e.config.globalProperties.$updateQueries=function(s,n){n=n||{};let o=n.history,i=JSON.parse(JSON.stringify(n.queries||this.$route.query));_.merge(i,s),_.each(i,function(r,c){_.isNil(r)&&delete i[c]}),o?this.$router.push({query:i}).catch(()=>{}):this.$router.replace({query:i}).catch(()=>{})}};let Kt=null,ve=null,kt=function(){const e=Kt;e&&e.state.isVisible&&(e.hide(),e.reference.blur())};var Wl={directive:"tippy",component:"tippy",componentSingleton:"tippy-singleton",defaultProps:{placement:"top",flipBehavior:["top","bottom","left","right"],allowHTML:!0,arrow:!0,theme:"dark",maxWidth:650,delay:[500,0],a11y:!1,onShow:e=>{Kt=e,ve=document.querySelector(".list-view-inner-wrap")||window,ve.addEventListener("scroll",kt,{passive:!0});let t=e.props.content;return(!t||t==="false")&&(t=!1),t},onHide:e=>{ve||(ve=document.querySelector(".list-view-inner-wrap")||window),ve.addEventListener("scroll",kt,{passive:!0})},boundary:"viewport",flipDuration:0}};const Fl=700;var Jl={created:function(e,{value:t},s){if(typeof t!="function"){console.warn(`Expect a function, got ${t}`);return}let n=null;const o=r=>{r.type==="touchstart"&&r.preventDefault(),!(r.type==="click"&&r.button!==0)&&n===null&&(n=setTimeout(()=>t(r),Fl))},i=()=>{n!==null&&(clearTimeout(n),n=null)};["mousedown","touchstart"].forEach(r=>e.addEventListener(r,o,{passive:!0})),["click","mouseout","touchend","touchcancel"].forEach(r=>e.addEventListener(r,i,{passive:!0}))},unmounted:function(e,t){["mousedown","touchstart"].forEach(s=>e.removeEventListener(s,start,{passive:!0})),["click","mouseout","touchend","touchcancel"].forEach(s=>e.removeEventListener(s,cancel,{passive:!0}))}};function wt(e){return e.type.indexOf("mouse")!==-1?e.clientX:e.touches[0].clientX}function $t(e){return e.type.indexOf("mouse")!==-1?e.clientY:e.touches[0].clientY}var Kl=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch{}return e}(),Yl={install:function(e,t){var s=Object.assign({},{disableClick:!1,tapTolerance:10,swipeTolerance:30,touchHoldTolerance:400,longTapTimeInterval:400,touchClass:"",dragFrequency:100,rollOverFrequency:100},t);function n(h){var f=this.$$touchObj,w=h.type.indexOf("touch")>=0,P=h.type.indexOf("mouse")>=0,L=this;w&&(f.lastTouchStartTime=h.timeStamp),!(P&&f.lastTouchStartTime&&h.timeStamp-f.lastTouchStartTime<350)&&(f.touchStarted||(d(this),f.touchStarted=!0,f.touchMoved=!1,f.swipeOutBounded=!1,f.startX=wt(h),f.startY=$t(h),f.currentX=0,f.currentY=0,f.touchStartTime=h.timeStamp,f.hasSwipe=u(this,"swipe")||u(this,"swipe.left")||u(this,"swipe.right")||u(this,"swipe.top")||u(this,"swipe.bottom"),u(this,"hold")&&(f.touchHoldTimer=setTimeout(function(){f.touchHoldTimer=null,a(h,L,"hold")},f.options.touchHoldTolerance)),a(h,this,"press")))}function o(h){var f=this.$$touchObj,w=wt(h),P=$t(h),L=f.currentX!=w||f.currentY!=P;if(f.currentX=w,f.currentY=P,f.touchMoved){if(f.hasSwipe&&!f.swipeOutBounded){var I=f.options.swipeTolerance;f.swipeOutBounded=Math.abs(f.startX-f.currentX)>I&&Math.abs(f.startY-f.currentY)>I}}else{var A=f.options.tapTolerance;f.touchMoved=Math.abs(f.startX-f.currentX)>A||Math.abs(f.startY-f.currentY)>A,f.touchMoved&&(g(f),a(h,this,"drag.once"))}if(u(this,"rollover")&&L){var M=h.timeStamp,W=f.options.rollOverFrequency;(f.touchRollTime==null||M>f.touchRollTime+W)&&(f.touchRollTime=M,a(h,this,"rollover"))}if(u(this,"drag")&&f.touchStarted&&f.touchMoved&&L){var M=h.timeStamp,W=f.options.dragFrequency;(f.touchDragTime==null||M>f.touchDragTime+W)&&(f.touchDragTime=M,a(h,this,"drag"))}}function i(){var h=this.$$touchObj;g(h),p(this),h.touchStarted=h.touchMoved=!1,h.startX=h.startY=0}function r(h){var f=this.$$touchObj,w=h.type.indexOf("touch")>=0,P=h.type.indexOf("mouse")>=0;w&&(f.lastTouchEndTime=h.timeStamp);var L=w&&!f.touchHoldTimer;if(g(f),f.touchStarted=!1,p(this),!(P&&f.lastTouchEndTime&&h.timeStamp-f.lastTouchEndTime<350))if(a(h,this,"release"),f.touchMoved){if(f.hasSwipe&&!f.swipeOutBounded){var A=f.options.swipeTolerance,I,M=Math.abs(f.startY-f.currentY),W=Math.abs(f.startX-f.currentX);(M>A||W>A)&&(M>A?I=f.startY>f.currentY?"top":"bottom":I=f.startX>f.currentX?"left":"right",u(this,"swipe."+I)?a(h,this,"swipe."+I,I):a(h,this,"swipe",I))}}else if(u(this,"longtap")&&h.timeStamp-f.touchStartTime>f.options.longTapTimeInterval)h.cancelable&&h.preventDefault(),a(h,this,"longtap");else if(u(this,"hold")&&L){h.cancelable&&h.preventDefault();return}else a(h,this,"tap")}function c(){d(this)}function l(){p(this)}function u(h,f){var w=h.$$touchObj.callbacks[f];return w!=null&&w.length>0}function a(h,f,w,P){var L=f.$$touchObj,A=L.callbacks[w];if(A==null||A.length===0)return null;for(var I=0;I<A.length;I++){var M=A[I];M.modifiers.stop&&h.stopPropagation(),M.modifiers.prevent&&h.preventDefault(),!(M.modifiers.self&&h.target!==h.currentTarget)&&typeof M.value=="function"&&(P?M.value(P,h):M.value(h))}}function d(h){var f=h.$$touchObj.options.touchClass;f&&h.classList.add(f)}function p(h){var f=h.$$touchObj.options.touchClass;f&&h.classList.remove(f)}function g(h){h.touchHoldTimer&&(clearTimeout(h.touchHoldTimer),h.touchHoldTimer=null)}function $(h,f){var w=h.$$touchObj||{callbacks:{},hasBindTouchEvents:!1,options:s};return f&&(w.options=Object.assign({},w.options,f)),h.$$touchObj=w,h.$$touchObj}e.directive("touch",{beforeMount:function(h,f){var w=$(h),P=Kl?{passive:!0}:!1,L=f.arg||"tap";switch(L){case"swipe":var A=f.modifiers;if(A.left||A.right||A.top||A.bottom){for(var I in f.modifiers)if(["left","right","top","bottom"].indexOf(I)>=0){var M="swipe."+I;w.callbacks[M]=w.callbacks[M]||[],w.callbacks[M].push(f)}}else w.callbacks.swipe=w.callbacks.swipe||[],w.callbacks.swipe.push(f);break;case"press":case"drag":f.modifiers.disablePassive&&(P=!1);default:w.callbacks[L]=w.callbacks[L]||[],w.callbacks[L].push(f)}w.hasBindTouchEvents||(h.addEventListener("touchstart",n,P),h.addEventListener("touchmove",o,P),h.addEventListener("touchcancel",i),h.addEventListener("touchend",r),w.options.disableClick||(h.addEventListener("mousedown",n),h.addEventListener("mousemove",o),h.addEventListener("mouseup",r),h.addEventListener("mouseenter",c),h.addEventListener("mouseleave",l)),w.hasBindTouchEvents=!0)},unmounted:function(h){h.removeEventListener("touchstart",n),h.removeEventListener("touchmove",o),h.removeEventListener("touchcancel",i),h.removeEventListener("touchend",r),h.$$touchObj&&!h.$$touchObj.options.disableClick&&(h.removeEventListener("mousedown",n),h.removeEventListener("mousemove",o),h.removeEventListener("mouseup",r),h.removeEventListener("mouseenter",c),h.removeEventListener("mouseleave",l)),delete h.$$touchObj}}),e.directive("touch-class",{beforeMount:function(h,f){$(h,{touchClass:f.value})}}),e.directive("touch-options",{beforeMount:function(h,f){$(h,f.value)}})}};const Yt={};Yt.install=function(e,t){e.config.globalProperties.$setListRenderingOpts=function(s){if(this.$route.query.sortValues){const n=_.findIndex(s.sort,{key:"sortValues"});s.sort[n].active=this.$route.query.sortValues}if(this.$route.query.sort){let n=_.find(s.sort,{current:!0});n.current=!1;const o=_.findIndex(s.sort,{key:this.$route.query.sort});o>-1&&(s.sort[o].current=!0,s.sort[o].active=this.$route.query.sortDir==="desc")}if(this.$route.query.filter){let n=decodeURIComponent(this.$route.query.filter).split(",");_.each(_.filter(s.filter,{type:"filter"}),function(o){o.active=!1,_.each(n,function(i){o.key===i&&(o.active=!0)})})}if(this.$route.query.filterExtras){let n=this.$route.query.filterExtras.split(",");n=_.map(n,function(o){return decodeURIComponent(o)}),_.each(n,function(o){let i=o.split(":"),r=i[0],c=_.find(s.filter,{type:"filterExtras",key:r});if(c&&(c.active=!0,i.length>1)){if(c.dropdownOpts)c.value=i[1].split("|");else if(c.range){let l=i[1].split("-"),u=parseFloat(l[0]),a=parseFloat(l[1]);c.range=[u,a]}}})}if(this.$route.query.scope){let n=decodeURIComponent(this.$route.query.scope).split(",");_.each(s.scope,function(o){o.active=!1,_.each(n,function(i){o.key===i&&(o.active=!0)})})}this.$store.commit("prop",{key:"listRenderingOpts",value:s})}};function Xl(e){V.commit("fromLocalStorage"),V.subscribe(function(s,n){s.type==="stickyProp"||s.type==="updatePlayerProgress"?localStorage.setItem("aleSettings",JSON.stringify(n.sticky)):s.type==="prop"&&_.each(_.isArray(s.payload)?s.payload:[s.payload],function(o){const i=_.get(o,"key","");(_.get(i,"0")==="sticky"||!!i.match(/^sticky\./i))&&localStorage.setItem("aleSettings",JSON.stringify(n.sticky))})});const t=document.querySelector("html.standalone-gallery");V.commit("prop",[{key:"library",value:e,freeze:!t},{key:"standalone",value:!!t},{key:"displayMode",value:window.matchMedia("(display-mode: standalone)").matches},{key:"urlOrigin",value:"https://audible"+e.extras["domain-extension"]},{key:"extractSettings",value:e.config}]),e.extras.pages.wishlist?e.extras.pages.books||V.commit("stickyProp",{key:"subPageSource",value:"wishlist"}):V.commit("stickyProp",{key:"subPageSource",value:"library"}),!e.books&&e.wishlist&&V.commit("stickyProp",{key:"subPageSource",value:"wishlist"})}const Xt=document.querySelector("html.standalone-gallery"),D=cs($a);D.config.devtools=!1;D.config.productionTip=!1;D.use(ds);D.use(Jt);D.config.globalProperties.$compEmitter=new fs;D.use(V);D.use(ms,Wl);D.directive("longpress",Jl);D.use(Yl);D.use(Yt);if(Xt){let e=function(t){let s=document.createElement("script"),n=document.querySelector("#audible-library-extractor").getAttribute("data-cache-id");s.src="data/temp-data."+n+".js",s.type="text/javascript",s.onload=function(){let o=window.tempDataJSON;window.bookSummaryJSON=!0,s=null,St(o)},s.onerror=function(){s=null,setTimeout(function(){t||e("afterError")},1e3)},document.head.appendChild(s)};e()}else try{chrome.storage.local.get(null).then(e=>{!_.isEmpty(e)&&e.chunks?(us.methods.glueFriesBackTogether(e),St(e)):alert("No existing data found: extract your library again.")})}catch{}function St(e){let t;if(e.extras.pages=e.extras.pages||{},Xt){t=JSON.parse(JSON.stringify(e));var s=["books","series","collections","wishlist"];_.each(s,function(o){_.get(e,o)===!0&&(delete e[o],_.set(e,"extras.pages.books",!0),e.extras.pages.books=!0)})}Xl(e);let n=Dl(t||e);D.use(n),D.mount("#audible-library-extractor")}export{hn as _,Rn as a,Rr as b,Yn as c,Er as d,At as e,Pi as f,ie as g,Eo as h,Cr as m,Pr as p,Sr as s};
