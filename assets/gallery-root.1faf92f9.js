import{_ as ee}from"./gallery-lazy.9dfaee33.js";import{m as q}from"./gallery-makeCoverUrl.8378190f.js";import{_ as M,q as H,z as N,o as n,c as a,b as f,s as $,a as c,x as p,d,E as I,u as S,e as m,t as se,G as z,H as A,m as we,F as C,A as j,n as k,y as x,C as Ie,v as ne,w as Le,X as $e}from"./lodash.9f572fca.js";import{S as Te,a as xe,m as E,_ as De,b as Ne,s as re,p as Ce,c as je,d as F,e as ze}from"./gallery.54397752.js";import{t as Z}from"./gallery-timeStringToSeconds.9aa0cb6a.js";import{s as ae}from"./gallery-secondsToTimeString.0a6fc9ec.js";import{_ as Ae,a as Ee}from"./gallery-search.2b08f226.js";import{f as Be}from"./gallery-findSubPageSource.ad373b19.js";import"./jquery.050764e9.js";import"./content-script-helpers.e49fc91b.js";import"./howler.22814ddb.js";import"./index.abab9d81.js";import"./tippy.9fe8ff20.js";import"./vue.runtime.esm-bundler.ee4f3819.js";import"./gallery-page-title.5db93fd4.js";const Oe={name:"carousel-slide",props:["detailsBook","book","index","mobileWidth","inLibrary","inSeries","inSameSeries","inWishlist","storePageURL"],mixins:[q],data:function(){return{}},computed:{tag(){return this.mobileWidth?"div":"a"}}},te=e=>(z("data-v-67ee8779"),e=e(),A(),e),Pe=["data-splide-lazy"],Re={style:{"font-weight":"normal","text-align":"left",padding:"10px","font-size":"13px","line-height":"17px"}},We={key:0},He={style:{"font-size":"1.2em","font-weight":"bold",margin:"0 0 3px 0"}},Ue=["href"],Ye={key:1},Fe={style:{"font-size":"1.1em","font-weight":"normal",margin:"0 0 3px 0"}},Ve={key:2},Qe=te(()=>c("strong",null,"Authors: ",-1)),qe={key:3},Ze=te(()=>c("strong",null,"Narrators: ",-1)),Ge={key:4},Xe=te(()=>c("strong",null,"Length: ",-1)),Je=["content"],Ke=I(" from this series "),et=[Ke],tt=I(" book in library "),it=I(" series in library "),ot={key:0},st={key:0},nt=I(") "),rt=I(" book in wishlist ");function at(e,i,t,o,s,r){const l=H("router-link"),u=H("tippy"),h=N("tippy");return n(),a("div",null,[f(u,{tag:"div",ref:"tippy","data-book-index":t.index,"data-book-asin":t.book.asin,class:"carousel-cover-tippy"},{content:$(()=>[c("div",Re,[t.book.title?(n(),a("div",We,[c("h3",He,[c("a",{href:t.storePageURL,target:"_blank",rel:"noopener noreferrer"},p(t.book.title),9,Ue)])])):d("",!0),t.book.subHeading?(n(),a("div",Ye,[c("h2",Fe,p(t.book.subHeading),1)])):d("",!0),t.book.authors?(n(),a("div",Ve,[Qe,I(p(t.book.authors),1)])):d("",!0),t.book.narrators?(n(),a("div",qe,[Ze,I(p(t.book.narrators),1)])):d("",!0),t.book.length?(n(),a("div",Ge,[Xe,I(p(t.book.length),1)])):d("",!0),c("div",null,[t.inSameSeries?S((n(),a("div",{key:0,class:"carousel-gallery-link not-link in-same-series",content:"This carousel book is in the same series as the one you have book details open on right now: <strong>"+t.detailsBook.title||t.detailsBook.titleShort+"</strong>"},et,8,Je)),[[h,{maxWidth:300}]]):d("",!0),t.inLibrary&&t.book.asin?(n(),m(l,{key:1,style:{background:"#1065d9"},class:"carousel-gallery-link",to:{name:"library",query:{book:t.book.asin,refresh:!0}}},{default:$(()=>[tt]),_:1},8,["to"])):d("",!0),t.inSeries&&t.inSeries.asin?(n(),m(l,{key:2,style:{background:"#ae2753"},class:"carousel-gallery-link",to:{name:"series",params:{series:t.inSeries.asin},query:{subPageSource:"library",refresh:!0,scrolltop:!0}}},{default:$(()=>[it,t.inSeries.ownedBooksLength?(n(),a("span",ot,[I(" ("+p(t.inSeries.ownedBooksLength),1),t.inSeries.obj.allBooks?(n(),a("span",st,"/"+p(t.inSeries.obj.allBooks.length),1)):d("",!0),nt])):d("",!0)]),_:1},8,["to"])):d("",!0),t.inWishlist&&t.book.asin?(n(),m(l,{key:3,style:{background:"#dd7100"},class:"carousel-gallery-link",to:{name:"wishlist",query:{book:t.book.asin,refresh:!0}}},{default:$(()=>[rt]),_:1},8,["to"])):d("",!0)])])]),default:$(()=>[(n(),m(se(r.tag),{class:"cover-wrapper",href:r.tag==="a"?t.storePageURL:null,target:"_blank",rel:"noopener noreferrer",ref:"coverLink"},{default:$(()=>[c("img",{crossorigin:"anonymous",class:"cover","data-splide-lazy":e.makeCoverUrl(t.book.cover,150),alt:""},null,8,Pe)]),_:1},8,["href"]))]),_:1},8,["data-book-index","data-book-asin"])])}var lt=M(Oe,[["render",at],["__scopeId","data-v-67ee8779"]]);const ct={name:"carousel",props:["detailsBook","books","width","mobileWidth"],components:{Splide:Te,SplideSlide:xe},mixins:[E],data:function(){return{options:{type:"loop",rewind:!0,width:null,trimSpace:!1,gap:"4px",lazyLoad:"nearby",preloadPages:1,perPage:5},coverSize:127,scrolling:!1,scrollContainer:null,inLibrary:null,inSeries:{asin:null,obj:null,ownedBooksLength:null},inSameSeries:null,inWishlist:null,storePageURL:null,scrollContainer:null,tippy:null,prevIndex:null,book:null}},mounted:function(){const e=window.innerWidth,i=e<="716";this.options.width=i?e:this.$el.offsetWidth;const t=i?e-42*2:this.$el.offsetWidth-42*2;e<="500"&&(this.coverSize=102),e<="415"&&(this.coverSize=72),this.options.perPage=Math.floor(t/this.coverSize),this.scrollContainer=document.querySelector(".list-view-inner-wrap")||window,this.scrollContainer.addEventListener("scroll",this.windowScrollStarted,{passive:!0})},beforeUnmount:function(){this.scrollContainer.removeEventListener("scroll",this.windowScrollStarted,{passive:!0})},methods:{appendTo(){return document.body},windowScrollStarted(){this.$route.query.carousel&&this.$updateQueries({carousel:null})},tippyMount(e){console.log("after update",e)},onShow(e,i){const t=i.target.getAttribute("data-book-index");this.prevIndex!==t&&(this.prevIndex=t,this.repositionTooltip(e),this.additionalData=null,this.inLibrary=null,this.inSeries.asin=null,this.inSeries.obj=null,this.inSeries.ownedBooksLength=null,this.inSameSeries=null,this.inWishlist=null,this.book=this.books[t],this.findBookFromLibrary(),this.findBookFromSeries(),this.findSameSeries(),this.findInWishlist(),this.storePageURL=this.makeUrl("book",this.book.asin),this.$updateQueries({carousel:!0}),this.repositionTooltip(e))},onHide(e,i){e.clearDelayTimeouts()},scrollHide(){const e=this.tippy;e&&e.state.isVisible&&(e.hide(),e.reference.blur())},repositionTooltip(e){this.$nextTick(()=>{try{e.popperInstance.update()}catch{}})},findBookFromLibrary(){const e=this.$store.state.library.books;_.find(e,{asin:this.book.asin})&&(this.inLibrary=!0)},findBookFromSeries(){const e=this.book.asin,i=this.$store.state.library.series,t=_.find(i,function(o){const s=_.get(o,"allBooks");if(s)return _.find(s,{asin:e})});if(t){this.inSeries.asin=t.asin,this.inSeries.obj=t;const o=_.get(t,"allBooks");o&&(this.inSeries.ownedBooksLength=_.filter(o,function(s){return!s.notInLibrary}).length)}},findSameSeries(){if(this.inSeries.obj){const e=_.get(this.inSeries,"obj.allBooks"),i=_.find(e,{asin:this.detailsBook.asin});this.inSameSeries=!!i}},findInWishlist(){const e=this.book.asin,i=this.$store.state.library.wishlist;this.inWishlist=_.find(i,{asin:e})}}},ut=["data-scrolling"],dt={class:"ale-heading"};function ht(e,i,t,o,s,r){const l=lt,u=H("splide-slide"),h=H("splide"),y=H("tippy-singleton"),b=ee;return n(),a("div",{class:"ale-carousel","data-scrolling":e.scrolling},[c("h3",dt,[we(e.$slots,"default")]),f(b,{offset:-60,delay:10,class:"lazyboy"},{default:$(()=>[f(y,{"move-transition":"transform 0.2s ease-out",placement:"top",appendTo:r.appendTo,interactive:!0,interactiveDebounce:75,interactiveBorder:30,allowHTML:!0,delay:520,onTrigger:r.onShow,onUntrigger:r.onHide},{default:$(()=>[f(h,{options:e.options,ref:"splide"},{default:$(()=>[(n(!0),a(C,null,j(t.books,(v,T)=>(n(),m(u,{class:"ale-carousel-item",key:T},{default:$(()=>[f(l,{detailsBook:t.detailsBook,book:v,index:T,mobileWidth:t.mobileWidth,inLibrary:e.inLibrary,inSeries:e.inSeries,inSameSeries:e.inSameSeries,inWishlist:e.inWishlist,storePageURL:e.storePageURL},null,8,["detailsBook","book","index","mobileWidth","inLibrary","inSeries","inSameSeries","inWishlist","storePageURL"])]),_:2},1024))),128))]),_:1},8,["options"])]),_:1},8,["appendTo","onTrigger","onUntrigger"])]),_:1})],8,ut)}var gt=M(ct,[["render",ht]]);const ft={viewBox:"0 0 448 512",width:"1.2em",height:"1.2em"},mt=c("path",{fill:"currentColor",d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},null,-1),pt=[mt];function yt(e,i){return n(),a("svg",ft,pt)}var le={name:"fa-solid-chevron-down",render:yt};const _t={viewBox:"0 0 448 512",width:"1.2em",height:"1.2em"},bt=c("path",{fill:"currentColor",d:"m240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495L69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"},null,-1),kt=[bt];function vt(e,i){return n(),a("svg",_t,kt)}var Mt={name:"fa-solid-chevron-up",render:vt};const St={props:["up"]},wt={class:"chevron-icon"};function It(e,i,t,o,s,r){const l=Mt,u=le;return n(),a("div",wt,[t.up?(n(),m(l,{key:0})):(n(),m(u,{key:1}))])}var G=M(St,[["render",It],["__scopeId","data-v-6d32f727"]]);const Lt={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},$t=c("path",{fill:"currentColor",d:"M256 80C141.1 80 48 173.1 48 288v104c0 13.3-10.7 24-24 24S0 405.3 0 392V288C0 146.6 114.6 32 256 32s256 114.6 256 256v104c0 13.3-10.7 24-24 24s-24-10.7-24-24V288c0-114.9-93.1-208-208-208zM80 352c0-35.3 28.7-64 64-64h16c17.7 0 32 14.3 32 32v128c0 17.7-14.3 32-32 32h-16c-35.3 0-64-28.7-64-64v-64zm288-64c35.3 0 64 28.7 64 64v64c0 35.3-28.7 64-64 64h-16c-17.7 0-32-14.3-32-32V320c0-17.7 14.3-32 32-32h16z"},null,-1),Tt=[$t];function xt(e,i){return n(),a("svg",Lt,Tt)}var ce={name:"fa6-solid-headphones-simple",render:xt};const Dt={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},Nt=c("path",{fill:"currentColor",d:"M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256s114.6 256 256 256zm-24-168v-64h-64c-13.3 0-24-10.7-24-24s10.7-24 24-24h64v-64c0-13.3 10.7-24 24-24s24 10.7 24 24v64h64c13.3 0 24 10.7 24 24s-10.7 24-24 24h-64v64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"},null,-1),Ct=[Nt];function jt(e,i){return n(),a("svg",Dt,Ct)}var ue={name:"fa6-solid-circle-plus",render:jt};const zt={viewBox:"0 0 576 512",width:"1.2em",height:"1.2em"},At=c("path",{fill:"currentColor",d:"M253.3 35.1c6.1-11.8 1.5-26.3-10.2-32.4s-26.3-1.5-32.4 10.2L117.6 192H32c-17.7 0-32 14.3-32 32s14.3 32 32 32l51.9 207.5C91 492 116.6 512 146 512h284c29.4 0 55-20 62.1-48.5L544 256c17.7 0 32-14.3 32-32s-14.3-32-32-32h-85.6L365.3 12.9c-6.1-11.7-20.6-16.3-32.4-10.2s-16.3 20.6-10.2 32.4L404.3 192H171.7l81.6-156.9zM192 304v96c0 8.8-7.2 16-16 16s-16-7.2-16-16v-96c0-8.8 7.2-16 16-16s16 7.2 16 16zm96-16c8.8 0 16 7.2 16 16v96c0 8.8-7.2 16-16 16s-16-7.2-16-16v-96c0-8.8 7.2-16 16-16zm128 16v96c0 8.8-7.2 16-16 16s-16-7.2-16-16v-96c0-8.8 7.2-16 16-16s16 7.2 16 16z"},null,-1),Et=[At];function Bt(e,i){return n(),a("svg",zt,Et)}var Ot={name:"fa6-solid-basket-shopping",render:Bt};const Pt={name:"bookTags",props:["book"],mixins:[E],data:function(){return{}}},Rt={class:"book-tags"},Wt=["href"];function Ht(e,i,t,o,s,r){return n(),a("div",Rt,[(n(!0),a(C,null,j(t.book.tags,l=>(n(),a("a",{href:e.makeUrl("tags",l),target:"_blank",rel:"noopener noreferrer",class:"book-tag",key:l.name},p(l.name),9,Wt))),128))])}var Ut=M(Pt,[["render",Ht],["__scopeId","data-v-6bf8396a"]]);const Yt={name:"arrayToHTML",data:function(){return{inputDataExists:null}},props:["label","array","delim","noLabel","chevron"],mixins:[E],created:function(){this.inputDataExists=this.checkIfArrayHasData()},computed:{identifierClass:function(){return"details-"+_.kebabCase(this.label)}},methods:{checkIfArrayHasData:function(){return this.array&&!_.isEmpty(this.array)}}},Ft={key:0,class:"strong-label"},Vt={key:0},Qt={key:0,class:"chevron"},qt={key:1},Zt=["href"],Gt={key:1,class:"book-number"},Xt=I(" (book "),Jt={key:0},Kt=I(" ) ");function ei(e,i,t,o,s,r){const l=De;return e.inputDataExists?(n(),a("div",{key:0,class:k(["array-list-wrapper",r.identifierClass])},[t.noLabel?d("",!0):(n(),a("strong",Ft,p(t.label)+":",1)),(n(!0),a(C,null,j(t.array,(u,h)=>(n(),a("span",{clas:"array-item",key:u.name+"("+h+")"},[c("span",null,[h!==0?(n(),a("span",Vt,[t.chevron?(n(),a("span",Qt,[f(l)])):(n(),a("span",qt,p(t.delim||", "),1))])):d("",!0),c("a",{href:e.makeUrl(t.label.toLowerCase(),u),target:"_blank",rel:"noopener noreferrer"},p(u.name),9,Zt),u.bookNumbers?(n(),a("span",Gt,[Xt,(n(!0),a(C,null,j(u.bookNumbers,(y,b)=>(n(),a("span",null,[b!==0?(n(),a("span",Jt,p(","))):d("",!0),c("span",null,p(y),1)]))),256)),Kt])):d("",!0)])]))),128))],2)):d("",!0)}var de=M(Yt,[["render",ei],["__scopeId","data-v-1d3b61dc"]]);const ti={name:"bookDetailsTitle",props:["book","tempAsin"],mixins:[E],computed:{showSubtitle(){const e=this.$store.state.sticky.bookDetailSettings.titleShort,i=!!this.book.subtitle,t=!!this.book.title&&!!this.book.titleShort&&this.book.title!==this.book.titleShort;return e&&(i||t)},audibleURL(){if(this.tempAsin){const e=_.get(this.book,"series.0");return this.makeUrl("series",e)}else return this.makeUrl("book",this.book.asin)}}},ii={class:"book-title"},oi=["href"],si=["innerHTML"],ni=["innerHTML"],ri=["innerHTML"];function ai(e,i,t,o,s,r){return n(),a("div",null,[c("h2",ii,[c("a",{href:r.audibleURL,target:"_blank",rel:"noopener noreferrer"},[e.$store.state.sticky.bookDetailSettings.titleShort?(n(),a("span",{key:1,innerHTML:t.book.titleShort||t.book.title},null,8,ni)):(n(),a("span",{key:0,innerHTML:t.book.title||t.book.titleShort},null,8,si))],8,oi)]),r.showSubtitle?(n(),a("div",{key:0,class:"subblementary-book-title",innerHTML:t.book.subtitle||t.book.title},null,8,ri)):d("",!0)])}var he=M(ti,[["render",ai]]);const li={name:"bookSummary",props:["book","bookSummary","mobileWidth"],mixins:[E],data:function(){return{summary:{readmore:{toggle:!1,exists:!1},maxHeight:null,maxHeightTemp:null,fullHeight:null}}},watch:{summaryHTML(e){e&&this.getSummaryMaxHeight()}},computed:{summaryHTML:function(){return this.book.summary||this.bookSummary||this.book.blurb},showReadMore:function(){const e=this.summary;if(!!e.maxHeightTemp)return e.fullHeight>e.maxHeightTemp}},mounted:function(){this.getSummaryMaxHeight()},created:function(){this.$compEmitter.on("afterWindowResize",this.windowResized),this.$compEmitter.on("resizeSummary",this.getSummaryMaxHeight)},beforeUnmount:function(){this.$compEmitter.off("afterWindowResize",this.windowResized),this.$compEmitter.off("resizeSummary",this.getSummaryMaxHeight)},methods:{getSummaryMaxHeight(){!this.summaryHTML||this.$nextTick(function(){const i=_.get(this.$refs,"summaryMetaTop.offsetHeight",0)+300,t=_.get(this.$refs,"summary.offsetHeight",0);this.summary.fullHeight=t;const o=document.querySelector("#ale-bookdetails .information"),s=_.get(o,"offsetHeight",0);let r=s;(this.mobileWidth||t>i&&i>s)&&(r=i),this.summary.maxHeight=r,this.summary.maxHeightTemp=r})},windowResized(){this.getSummaryMaxHeight()},summaryReadMoreclick:function(){if(this.summary.readmore.toggle=!this.summary.readmore.toggle,this.summary.maxHeight=this.summary.readmore.toggle?"none":this.summary.maxHeightTemp,!this.summary.readmore.toggle){const e=this.$refs.readMoreBtn.getBoundingClientRect().top;this.$nextTick(function(){scroll({top:this.$refs.readMoreBtn.getBoundingClientRect().top+window.pageYOffset-e})})}}}},ci={class:"book-summary",ref:"summary"},ui={class:"summary-meta-top",ref:"summaryMetaTop"},di={key:0,class:"categories"},hi={class:"inline-children smoll-text"},gi={class:"info-tags"},fi={key:0,class:"info-tag store-page-changed",content:"There is a store page for the book, but it's for a different version of the book. <br><br>This is the reason why some data is unavailable."},mi=I(" changed "),pi={key:1,class:"info-tag store-page-missing",content:"Store page was possibly removed or it became unavailable in your region since it was added. In some cases there may still be a store page for a different version of the book. <br><br>This is the reason why some data is unavailable."},yi=I(" missing "),_i=["content"],bi=I(" Plus catalog "),ki=["content"],vi=I(" whispersync "),Mi={key:1,class:"release-date",content:"YYYY-MM-DD"},Si=c("span",{class:"strong-label"},"Released: ",-1),wi=c("div",{class:"meta-padding"},null,-1),Ii=["innerHTML"];function Li(e,i,t,o,s,r){const l=he,u=de,h=Ut,y=Ot,b=ue,v=ce,T=G,D=N("tippy");return n(),a("div",{class:k(["book-summary-wrapper",{expanded:e.summary.readmore.toggle}]),ref:"summaryWrapper",style:x({maxHeight:e.summary.maxHeight?e.summary.maxHeight+"px":null,paddingBottom:e.summary.readmore.toggle?"50px":"0px"})},[c("div",ci,[c("div",ui,[f(l,{book:t.book},null,8,["book"]),t.book.categories?(n(),a("div",di,[t.book.categories?(n(),m(u,{key:0,label:"categories",noLabel:!0,array:t.book.categories,chevron:!0},null,8,["array"])):d("",!0)])):d("",!0),c("div",hi,[t.book.tags?(n(),m(h,{key:0,book:t.book},null,8,["book"])):d("",!0),c("div",gi,[t.book.storePageChanged?S((n(),a("div",fi,[f(y),mi])),[[D,{maxWidth:300}]]):t.book.storePageMissing?S((n(),a("div",pi,[f(y),yi])),[[D,{maxWidth:300}]]):d("",!0),t.book.fromPlusCatalog?S((n(),a("div",{key:2,class:k(["info-tag plus-catalog",{"plus-catalog-unavailable":t.book.unavailable}]),content:t.book.unavailable?"Used to be in the plus catalog but you no longer have access to it":"In the plus catalog"},[f(b),bi],10,_i)),[[D,{maxWidth:300}]]):d("",!0),t.book.whispersync?S((n(),a("div",{key:3,class:k(["info-tag whispersync",{owned:t.book.whispersync==="owned"}]),content:t.book.whispersync==="owned"?"I own the Kindle version":"Kindle book available for purchase..."},[f(v),vi],10,ki)),[[D,{maxWidth:300}]]):d("",!0)]),t.book.releaseDate?S((n(),a("div",Mi,[Si,c("span",null,p(t.book.releaseDate),1)])),[[D]]):d("",!0)]),wi],512),r.summaryHTML?(n(),a("div",{key:0,class:"summary-inner-wrap",ref:"summaryInnerWrap",innerHTML:r.summaryHTML},null,8,Ii)):d("",!0)],512),r.showReadMore?(n(),a("div",{key:0,class:"summary-read-more",ref:"readMoreBtn",onClick:i[0]||(i[0]=(...B)=>r.summaryReadMoreclick&&r.summaryReadMoreclick(...B))},[c("span",null,p(e.summary.readmore.toggle?"Read less":"Read more"),1),f(T,{class:"read-more-icon",up:e.summary.readmore.toggle},null,8,["up"])],512)):d("",!0)],6)}var $i=M(li,[["render",Li]]);const Ti={name:"booksInSeriesLink",props:["series","book","index","seriesName"],mixins:[E],data:function(){return{seriesPage:!1,routerLink:null,title:null,linkDisabled:!1,sameSeries:null}},created:function(){this.seriesPage=this.$route.name==="series",this.routerLink={name:"series",params:{series:this.series.asin},query:{subPageSource:"library",refresh:!0}},this.seriesName?this.routerLink.query.closeBookDetails=!0:this.routerLink.query.book=this.book.asin;const e=this.seriesPage&&this.$route.params.series===this.series.asin;this.linkDisabled=this.book.notInLibrary||e,this.sameSeries=e},methods:{openBook:function(e){e.preventDefault(),this.book&&!this.book.notInLibrary&&this.book.asin!==this.$route.query.book&&this.$compEmitter.emit("book-clicked",this.book.obj.asin)}}},xi={class:"linky"},Di={key:0,class:"series-not-link"},Ni=["href","content"],Ci={class:"numbers"},ji={class:"title"},zi={key:0,style:{"white-space":"normal","padding-bottom":"3px",display:"inline-block"}},Ai={key:1,class:"numbers"},Ei={key:2,class:"title"};function Bi(e,i,t,o,s,r){const l=H("router-link"),u=N("tippy");return n(),a("div",xi,[t.seriesName&&e.linkDisabled?(n(),a("span",Di,p(t.seriesName),1)):!t.seriesName&&t.book.notInLibrary&&t.book.asin?S((n(),a("a",{key:1,class:"clickety-click cursor-alias",target:"_blank",rel:"noopener noreferrer",href:e.makeUrl("book",t.book.asin),content:t.book.title!==t.book.titleShort?t.book.title:!1},[c("span",Ci,p(t.book.bookNumbers),1),c("span",ji,p(t.book.titleShort||t.book.title),1)],8,Ni)),[[u,{maxWidth:350,placement:"right",flipBehavior:["right","top","bottom"]}]]):S((n(),m(l,{key:2,class:k(["clickety-click",{"link-disabled":e.linkDisabled,"same-series":e.sameSeries}]),event:e.linkDisabled?"":"click",onClick:i[0]||(i[0]=h=>e.linkDisabled&&r.openBook(h)),to:e.linkDisabled?"":e.routerLink,content:t.seriesName?null:(t.book.notInLibrary?"<strong>Not available:</strong> ":"")+(t.book.title!==t.book.titleShort?t.book.title:"")},{default:$(()=>[t.seriesName?(n(),a("span",zi,p(t.seriesName),1)):d("",!0),t.seriesName?d("",!0):(n(),a("span",Ai,p(t.book.bookNumbers),1)),t.seriesName?d("",!0):(n(),a("span",Ei,p(t.book.titleShort||t.book.title),1))]),_:1},8,["class","event","to","content"])),[[u,{maxWidth:350,placement:"right",flipBehavior:["right","top","bottom"]}]])])}var ge=M(Ti,[["render",Bi],["__scopeId","data-v-46f60766"]]);const Oi={name:"goodReadsLink",props:["book","icon","size","muted"],mixins:[Ne],data:function(){return{goodreadsUrl:null}},created:function(){this.book&&(this.goodreadsUrl=this.makeGoodReadsUrl())}},Pi=["href"],Ri={key:0,src:"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iNTEyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik01LjExMSAxOC45MDdoLjEyOWMuNTg1IDAgMS4xNzYgMCAxLjc2Mi4wMDUuMDc0IDAgLjE0My0uMDE5LjE2Ni4wOTguMzI4IDEuNjM2IDEuMzgzIDIuNTU5IDIuOSAyLjk5NSAxLjI0MS4zNTYgMi40OTUuMzY2IDMuNzQ5LjA4NCAxLjU1OC0uMzQ3IDIuNTgyLTEuMzI3IDMuMTM2LTIuODMxLjM2OS0xLjAwOC40OTQtMi4wNTMuNTA4LTMuMTE3LjAwNS0uMjcyLjAxNC0yLjIwMy0uMDA5LTIuNDc1bC0uMDQxLS4wMTRjLS4wMzcuMDctLjA3OS4xMzYtLjExNS4yMDYtMS4wMTkgMi4wMi0yLjgyNiAzLjE1OS00Ljg2MSAzLjIzOS00Ljc1LjE4OC03LjgxMi0yLjY3Mi03LjkzMi04LjI1OS0uMDIzLTEuMTExLjA4My0yLjE5OC4zODMtMy4yNjcuOTUtMy4zMzMgMy40NC01LjU0MSA3LjA5Ny01LjU2OSAyLjgyNi0uMDE5IDQuNjgxIDEuODE0IDUuMzU5IDMuMjk1LjAyMy4wNTIuMDYuMTA4LjExLjA4OVYuNDk4aDIuMDQzYzAgMTMuMTM5LjAwNSAxNS41NzIuMDA1IDE1LjU3Mi0uMDA1IDMuNjgtMS4yMzIgNi43MzYtNC43NSA3LjYwMy0zLjIwNS43OTItNy4zMzIuMjI1LTkuMDM5LTIuNjgxLS4zNjktLjYzMy0uNTQ0LTEuMzI3LS41OTktMi4wODZ6bTYuNzQ3LTE3LjE5NEM5LjQzNyAxLjY5IDYuODU0IDMuNjIxIDYuNTU0IDcuOTg1Yy0uMTg5IDIuNzY2LjY4MyA1LjcyOCAzLjI5OCA2Ljk2NiAxLjI3My42MDUgMy40MjcuNzAzIDQuOTk1LS40MDggMi4xOTUtMS41NTYgMi44OTEtNC41NDcgMi41MjctNy4yMTktLjQ0OC0zLjMzMy0yLjIwNS01LjYyNS01LjUxNi01LjYxMXoiIGZpbGw9IiM0ZTM0MmUiLz48L3N2Zz4=",alt:""},Wi={key:1,alt:"",src:"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iNTEyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik01LjExMSAxOC45MDdoLjEyOWMuNTg1IDAgMS4xNzYgMCAxLjc2Mi4wMDUuMDc0IDAgLjE0My0uMDE5LjE2Ni4wOTguMzI4IDEuNjM2IDEuMzgzIDIuNTU5IDIuOSAyLjk5NSAxLjI0MS4zNTYgMi40OTUuMzY2IDMuNzQ5LjA4NCAxLjU1OC0uMzQ3IDIuNTgyLTEuMzI3IDMuMTM2LTIuODMxLjM2OS0xLjAwOC40OTQtMi4wNTMuNTA4LTMuMTE3LjAwNS0uMjcyLjAxNC0yLjIwMy0uMDA5LTIuNDc1bC0uMDQxLS4wMTRjLS4wMzcuMDctLjA3OS4xMzYtLjExNS4yMDYtMS4wMTkgMi4wMi0yLjgyNiAzLjE1OS00Ljg2MSAzLjIzOS00Ljc1LjE4OC03LjgxMi0yLjY3Mi03LjkzMi04LjI1OS0uMDIzLTEuMTExLjA4My0yLjE5OC4zODMtMy4yNjcuOTUtMy4zMzMgMy40NC01LjU0MSA3LjA5Ny01LjU2OSAyLjgyNi0uMDE5IDQuNjgxIDEuODE0IDUuMzU5IDMuMjk1LjAyMy4wNTIuMDYuMTA4LjExLjA4OVYuNDk4aDIuMDQzYzAgMTMuMTM5LjAwNSAxNS41NzIuMDA1IDE1LjU3Mi0uMDA1IDMuNjgtMS4yMzIgNi43MzYtNC43NSA3LjYwMy0zLjIwNS43OTItNy4zMzIuMjI1LTkuMDM5LTIuNjgxLS4zNjktLjYzMy0uNTQ0LTEuMzI3LS41OTktMi4wODZ6bTYuNzQ3LTE3LjE5NEM5LjQzNyAxLjY5IDYuODU0IDMuNjIxIDYuNTU0IDcuOTg1Yy0uMTg5IDIuNzY2LjY4MyA1LjcyOCAzLjI5OCA2Ljk2NiAxLjI3My42MDUgMy40MjcuNzAzIDQuOTk1LS40MDggMi4xOTUtMS41NTYgMi44OTEtNC41NDcgMi41MjctNy4yMTktLjQ0OC0zLjMzMy0yLjIwNS01LjYyNS01LjUxNi01LjYxMXoiIGZpbGw9IiNmZmYiLz48L3N2Zz4="},Hi={key:1};function Ui(e,i,t,o,s,r){const l=N("tippy");return e.goodreadsUrl||t.muted?(n(),a("a",{key:0,href:e.goodreadsUrl,target:"_blank",rel:"noopener noreferrer",class:k(["good-reads-icon",{muted:t.muted,placeholder:!e.goodreadsUrl}])},[t.icon?S((n(),a("div",{key:0,class:"gr-icon",style:x({width:(t.size||30)+"px",height:(t.size||30)+"px"}),content:"Search for the book in Goodreads"},[t.muted?(n(),a("img",Wi)):(n(),a("img",Ri))],4)),[[l]]):(n(),a("span",Hi,"Search in Goodreads"))],10,Pi)):d("",!0)}var fe=M(Oi,[["render",Ui],["__scopeId","data-v-dcae3364"]]);const Yi={name:"openInApp",props:["book","size","muted"],data:function(){return{url:null}},created:function(){_.get(this.book,"asin")&&(this.url="https://smart.link/o3waqx4wg1gdn?asin="+this.book.asin)}},Fi=e=>(z("data-v-e36df8a0"),e=e(),A(),e),Vi=["href","tabindex"],Qi=Fi(()=>c("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNTEuNSA5My43IiB3aWR0aD0iMTUxLjUiIGhlaWdodD0iOTMuNyI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiNmZmY7fTwvc3R5bGU+PC9kZWZzPjxnPjxnPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggODAuN2w3NS43LTQ3LjJ2MTIuOEw3NS44IDkzLjcgMCA0Ni4zVjMzLjVsNzUuOCA0Ny4yeiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggMjEuNWE0OC4xNyA0OC4xNyAwIDAgMC00MC43IDIxLjkgMTIuOTQgMTIuOTQgMCAwIDEgMS44LTEuNmMyMS4zLTE3LjcgNTItMTMuNyA2OC43IDguNmwxMS4xLTcuMWE0OS44MiA0OS44MiAwIDAgMC00MC45LTIxLjgiLz48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik03NS44IDQzLjRhMjcuNzIgMjcuNzIgMCAwIDAtMjIuNCAxMS41IDIyLjcgMjIuNyAwIDAgMSAxMy41LTQuNGM4LjIgMCAxNS41IDQuMiAyMC40IDExLjNsMTAuNi02LjZhMjUuNzkgMjUuNzkgMCAwIDAtMjIuMS0xMS44TTI0LjYgMjQuMkM1NS44LS40IDk5LjkgNi4zIDEyMy40IDM5bC4yLjIgMTEuNS03LjFhNzAuODIgNzAuODIgMCAwIDAtMTE4LjYgMCA2MC42MyA2MC42MyAwIDAgMSA4LjEtNy45Ii8+PC9nPjwvZz48L3N2Zz4=",alt:""},null,-1)),qi=[Qi];function Zi(e,i,t,o,s,r){const l=N("tippy");return e.url||t.muted?(n(),a("a",{key:0,href:e.url,target:"_blank",rel:"noopener noreferrer",class:k(["audible-app-link",{muted:t.muted,placeholder:!t.book.asin}]),tabindex:t.muted?0:-1},[S((n(),a("div",{class:"gr-icon",style:x({width:(t.size||30)+"px",height:(t.size||30)+"px"}),content:"Open in app"},qi,4)),[[l,{placement:t.muted?"left":"top",flipBehavior:t.muted?["left","top","bottom","right"]:["top","bottom","right","left"]}]])],10,Vi)):d("",!0)}var me=M(Yi,[["render",Zi],["__scopeId","data-v-e36df8a0"]]);const Gi={name:"booksInSeriesBooks",props:["series","book"],data:function(){return{}},computed:{filteredBooks(){return _.filter(this.series.books,i=>{if(_.get(i,"notInLibrary"))return this.$store.state.sticky.booksInSeriesAll;if(this.$store.state.sticky.booksInSeriesFinished)return!0;{let t=_.get(i,"obj.progress");return t?!t.match(/finished/i):!0}})}},methods:{numbersClass:function(e){var i=_.get(e,"obj.progress");return{finished:!!(i&&i.toLowerCase().match("finished")),reading:!!(i&&!i.toLowerCase().match("finished")),unfinished:!i,current:this.book.asin===_.get(e,"obj.asin"),"not-in-library":e.notInLibrary}},iconTippyContent:function(e){if(e.free&&e.notInLibrary)return"This book is free...";if(e.plus&&e.notInLibrary)return"In the plus catalog...";if(e.notInLibrary)return"Not in library...";{const t=this.numbersClass(e);var i="";return t.finished?i="Finished!":t.unfinished?i="Not started...":t.reading&&(i="Started..."),i}},booksInSeriesIcon:function(e){if(e.free&&e.notInLibrary)return"fa-solid fa-circle-minus";if(e.plus&&e.notInLibrary)return"fa-solid fa-circle-plus";if(e.notInLibrary)return"fa-solid fa-ban";{const t=this.numbersClass(e);var i="";return t.finished?i="fa-solid fa-archive":t.unfinished?i="fa-solid fa-book":t.reading&&(i="fa-solid fa-book-reader"),i}}}},Xi=["data-series-name"],Ji=["content"];function Ki(e,i,t,o,s,r){const l=me,u=fe,h=ge,y=N("tippy");return n(),a("div",null,[(n(!0),a(C,null,j(r.filteredBooks,(b,v)=>(n(),a("div",{"data-series-name":t.series.name,class:k(["numbers-list-item",r.numbersClass(b)]),key:b.asin},[e.$store.state.sticky.booksInSeriesOpenInApp?(n(),m(l,{key:0,size:14,book:b,muted:!0},null,8,["book"])):(n(),m(u,{key:1,size:14,book:b,icon:!0,muted:!0},null,8,["book"])),S((n(),a("span",{class:"icon",content:r.iconTippyContent(b)},[c("i",{class:k(r.booksInSeriesIcon(b))},null,2)],8,Ji)),[[y,{placement:"left",flipBehavior:["left","top","bottom"]}]]),f(h,{series:t.series,book:b,index:v},null,8,["series","book","index"])],10,Xi))),128))])}var eo=M(Gi,[["render",Ki]]);const to={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},io=c("path",{fill:"currentColor",d:"M32 32h448c17.7 0 32 14.3 32 32v32c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32V64c0-17.7 14.3-32 32-32zm0 128h448v256c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V160zm128 80c0 8.8 7.2 16 16 16h160c8.8 0 16-7.2 16-16s-7.2-16-16-16H176c-8.8 0-16 7.2-16 16z"},null,-1),oo=[io];function so(e,i){return n(),a("svg",to,oo)}var no={name:"fa6-solid-box-archive",render:so};const ro={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},ao=c("path",{fill:"currentColor",d:"M367.2 412.5L99.5 144.8C77.1 176.1 64 214.5 64 256c0 106 86 192 192 192c41.5 0 79.9-13.1 111.2-35.5zm45.3-45.3C434.9 335.9 448 297.5 448 256c0-106-86-192-192-192c-41.5 0-79.9 13.1-111.2 35.5l267.7 267.7zM512 256c0 141.4-114.6 256-256 256S0 397.4 0 256S114.6 0 256 0s256 114.6 256 256z"},null,-1),lo=[ao];function co(e,i){return n(),a("svg",ro,lo)}var ie={name:"fa6-solid-ban",render:co};const uo={name:"booksInSeriesFilters",props:["series"],data:function(){return{store:this.$store.state,showAllToggle:!1,showFinishedToggle:!1,count:{notInLibrary:0,finished:0}}},created:function(){this.series.collection&&(this.count.finished=this.countFinished(),this.showFinishedToggle=this.count.finished>0,this.count.notInLibrary=this.countNotInLibrary(),this.showAllToggle=this.count.notInLibrary>0)},methods:{countFinished:function(){let e=0;return _.each(this.series.collection,function(i){i.books&&(e+=_.filter(i.books,function(o){let s=_.get(o,"obj.progress");return s?s.match(/finished/i):!1}).length)}),e},countNotInLibrary:function(){let e=0;return _.each(this.series.collection,function(i){i.books&&(e+=_.filter(i.books,"notInLibrary").length)}),e},clickedShowAll(){this.$store.commit("stickyProp",{key:"booksInSeriesAll",value:!this.$store.state.sticky.booksInSeriesAll}),this.$nextTick(function(){this.$compEmitter.emit("resizeSummary")})},clickedShowFinished(){this.$store.commit("stickyProp",{key:"booksInSeriesFinished",value:!this.$store.state.sticky.booksInSeriesFinished}),this.$nextTick(function(){this.$compEmitter.emit("resizeSummary")})}}},pe=e=>(z("data-v-0805d014"),e=e(),A(),e),ho={class:"row"},go={key:0},fo={key:0},mo={key:0},po=pe(()=>c("img",{class:"img-icon",src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNTEuNSA5My43IiB3aWR0aD0iMTUxLjUiIGhlaWdodD0iOTMuNyI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiNmZmY7fTwvc3R5bGU+PC9kZWZzPjxnPjxnPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggODAuN2w3NS43LTQ3LjJ2MTIuOEw3NS44IDkzLjcgMCA0Ni4zVjMzLjVsNzUuOCA0Ny4yeiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggMjEuNWE0OC4xNyA0OC4xNyAwIDAgMC00MC43IDIxLjkgMTIuOTQgMTIuOTQgMCAwIDEgMS44LTEuNmMyMS4zLTE3LjcgNTItMTMuNyA2OC43IDguNmwxMS4xLTcuMWE0OS44MiA0OS44MiAwIDAgMC00MC45LTIxLjgiLz48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik03NS44IDQzLjRhMjcuNzIgMjcuNzIgMCAwIDAtMjIuNCAxMS41IDIyLjcgMjIuNyAwIDAgMSAxMy41LTQuNGM4LjIgMCAxNS41IDQuMiAyMC40IDExLjNsMTAuNi02LjZhMjUuNzkgMjUuNzkgMCAwIDAtMjIuMS0xMS44TTI0LjYgMjQuMkM1NS44LS40IDk5LjkgNi4zIDEyMy40IDM5bC4yLjIgMTEuNS03LjFhNzAuODIgNzAuODIgMCAwIDAtMTE4LjYgMCA2MC42MyA2MC42MyAwIDAgMSA4LjEtNy45Ii8+PC9nPjwvZz48L3N2Zz4=",alt:""},null,-1)),yo=[po],_o={key:1},bo=pe(()=>c("img",{class:"img-icon",src:"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iNTEyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik01LjExMSAxOC45MDdoLjEyOWMuNTg1IDAgMS4xNzYgMCAxLjc2Mi4wMDUuMDc0IDAgLjE0My0uMDE5LjE2Ni4wOTguMzI4IDEuNjM2IDEuMzgzIDIuNTU5IDIuOSAyLjk5NSAxLjI0MS4zNTYgMi40OTUuMzY2IDMuNzQ5LjA4NCAxLjU1OC0uMzQ3IDIuNTgyLTEuMzI3IDMuMTM2LTIuODMxLjM2OS0xLjAwOC40OTQtMi4wNTMuNTA4LTMuMTE3LjAwNS0uMjcyLjAxNC0yLjIwMy0uMDA5LTIuNDc1bC0uMDQxLS4wMTRjLS4wMzcuMDctLjA3OS4xMzYtLjExNS4yMDYtMS4wMTkgMi4wMi0yLjgyNiAzLjE1OS00Ljg2MSAzLjIzOS00Ljc1LjE4OC03LjgxMi0yLjY3Mi03LjkzMi04LjI1OS0uMDIzLTEuMTExLjA4My0yLjE5OC4zODMtMy4yNjcuOTUtMy4zMzMgMy40NC01LjU0MSA3LjA5Ny01LjU2OSAyLjgyNi0uMDE5IDQuNjgxIDEuODE0IDUuMzU5IDMuMjk1LjAyMy4wNTIuMDYuMTA4LjExLjA4OVYuNDk4aDIuMDQzYzAgMTMuMTM5LjAwNSAxNS41NzIuMDA1IDE1LjU3Mi0uMDA1IDMuNjgtMS4yMzIgNi43MzYtNC43NSA3LjYwMy0zLjIwNS43OTItNy4zMzIuMjI1LTkuMDM5LTIuNjgxLS4zNjktLjYzMy0uNTQ0LTEuMzI3LS41OTktMi4wODZ6bTYuNzQ3LTE3LjE5NEM5LjQzNyAxLjY5IDYuODU0IDMuNjIxIDYuNTU0IDcuOTg1Yy0uMTg5IDIuNzY2LjY4MyA1LjcyOCAzLjI5OCA2Ljk2NiAxLjI3My42MDUgMy40MjcuNzAzIDQuOTk1LS40MDggMi4xOTUtMS41NTYgMi44OTEtNC41NDcgMi41MjctNy4yMTktLjQ0OC0zLjMzMy0yLjIwNS01LjYyNS01LjUxNi01LjYxMXoiIGZpbGw9IiNmZmYiLz48L3N2Zz4="},null,-1)),ko=[bo];function vo(e,i,t,o,s,r){const l=ie,u=no;return n(),a("div",{class:"list-filter-wrapper",style:x({top:e.$store.state.sticky.viewMode==="grid"?e.$store.state.topNavOffset+"px":"31px"})},[c("div",ho,[e.showAllToggle?(n(),a("div",{key:0,class:"show-all-toggle",onClick:i[0]||(i[0]=(...h)=>r.clickedShowAll&&r.clickedShowAll(...h))},[c("div",null,[f(l,{style:{"padding-right":"4px"},class:k({active:e.$store.state.sticky.booksInSeriesAll})},null,8,["class"]),e.showFinishedToggle?d("",!0):(n(),a("span",go,"Not in library:")),c("span",null,p(e.count.notInLibrary),1)])])):d("",!0),e.showFinishedToggle?(n(),a("div",{key:1,class:"show-finished",onClick:i[1]||(i[1]=(...h)=>r.clickedShowFinished&&r.clickedShowFinished(...h))},[c("div",null,[f(u,{style:{"padding-right":"4px"},class:k({active:e.$store.state.sticky.booksInSeriesFinished})},null,8,["class"]),e.showAllToggle?d("",!0):(n(),a("span",fo,"Finished books:")),c("span",null,p(e.count.finished),1)])])):d("",!0),c("div",{style:{flex:"unset","padding-left":"6px","padding-right":"6px","min-width":"30px"},onClick:i[2]||(i[2]=h=>e.$store.commit("stickyProp",{key:"booksInSeriesOpenInApp",value:!e.$store.state.sticky.booksInSeriesOpenInApp}))},[e.$store.state.sticky.booksInSeriesOpenInApp?(n(),a("span",mo,yo)):(n(),a("span",_o,ko))])])],4)}var Mo=M(uo,[["render",vo],["__scopeId","data-v-0805d014"]]);const So={name:"booksInSeries",props:["book"],mixins:[E],data:function(){return{inSeries:!1,series:{collection:null,toggle:!1}}},created:function(){this.seriesPage=this.$route.name==="series",this.series.collection=this.getBooksInSeries(),this.series.count=this.getSeriesCount();const e=this;_.each(this.series.collection,function(i){if(i.books.length)return e.inSeries=!0,!1})},mounted:function(){this.$store.state.sticky.booksInSeriesToggle&&this.$nextTick(()=>{this.$compEmitter.emit("resizeSummary")})},methods:{inLibraryLength:function(e){return _.filter(e.books,function(i){return!i.notInLibrary}).length},checkFilter:function(e){if(_.get(e,"notInLibrary"))return this.$store.state.sticky.booksInSeriesAll;if(this.$store.state.sticky.booksInSeriesFinished)return!0;{let i=_.get(e,"obj.progress");return i?!i.match(/finished/i):!0}},getBooksInSeries:function(){const e=this;let i=[];return e.book.series&&_.each(e.book.series,function(t,o){const s=_.find(e.$store.state.library.series,{asin:t.asin});if(s){let r=s.books;s.allBooks&&(r=s.allBooks),i.push({asin:t.asin,name:t.name,length:s.length,books:_.map(r,function(l){let u=l.asin||l;if(_.includes(s.books,u)){let b=_.find(e.$store.state.library.books,{asin:u});var y=_.find(b.series,{asin:t.asin});let v=s.allBooks?l.bookNumbers:_.isArray(y.bookNumbers)?y.bookNumbers.join(","):y.bookNumbers;return{asin:l.asin||b.asin,bookNumbers:v,title:l.title||b.title,titleShort:l.titleShort||b.titleShort,obj:b}}else return l.notInLibrary=!0,l.obj={authors:e.book.authors,notInLibrary:!0},l})})}}),i.length>0?i:null},getSeriesCount:function(){let e=[];return _.each(this.series.collection,function(i,t){i.books.length&&_.each(i.books,function(o){o.notInLibrary||(e[t]||e.push(0),++e[t])})}),e.join(", ")},booksInSeriesLabelClick:function(){this.$store.commit("stickyProp",{key:"booksInSeriesToggle",value:!this.$store.state.sticky.booksInSeriesToggle}),this.$nextTick(()=>{this.$compEmitter.emit("resizeSummary")})}}},wo={key:0,"data-scroll-to-url-param":"&scrollToSeries=true"},Io=c("span",{class:"heading"},"My books in the series",-1),Lo={class:"count"},$o={key:0,class:"hidden-section my-books-in-series"},To={class:"series-heading",content:"<div style='text-align: left;'>The first number is how many books you have in the series. The total is based on every single listing in the series page, including different versions or bundles with books you may already have.</div>"},xo={class:"series-name"},Do={class:"series-length"};function No(e,i,t,o,s,r){const l=G,u=Mo,h=ge,y=eo,b=N("tippy");return e.inSeries?(n(),a("div",wo,[c("div",{class:"label hidden-section-label my-books-in-series-label",onClick:i[0]||(i[0]=(...v)=>r.booksInSeriesLabelClick&&r.booksInSeriesLabelClick(...v))},[Io,c("span",Lo,p(e.series.count),1),f(l,{up:e.$store.state.sticky.booksInSeriesToggle},null,8,["up"])]),e.$store.state.sticky.booksInSeriesToggle?(n(),a("div",$o,[f(u,{series:e.series},null,8,["series"]),(n(!0),a(C,null,j(e.series.collection,(v,T)=>(n(),a("div",{class:"series-section",key:v.asin},[S((n(),a("div",To,[c("div",xo,[f(h,{series:v,book:{},index:-1,seriesName:v.name},null,8,["series","seriesName"])]),c("div",Do,p(r.inLibraryLength(v))+" / "+p(v.length),1)])),[[b,{placement:"right",flipBehavior:["right","top","bottom"],maxWidth:300,allowHTML:!0}]]),f(y,{series:v,book:t.book},null,8,["series","book"])]))),128))])):d("",!0)])):d("",!0)}var Co=M(So,[["render",No]]);const jo={name:"collectionsDrawer",props:["book"],data:function(){return{collections:null,store:this.$store.state}},created:function(){this.compileCollections()},mounted:function(){this.$store.state.sticky.collectionsDrawerToggle&&this.$nextTick(()=>{this.$compEmitter.emit("resizeSummary")})},methods:{compileCollections:function(){const e=this.book.collectionIds,i=this.store.library.collections;!e||!i||(this.collections=_.filter(i,function(t){return _.includes(e,t.id)}))},labelClick:function(){this.$store.commit("stickyProp",{key:"collectionsDrawerToggle",value:!this.$store.state.sticky.collectionsDrawerToggle}),this.$nextTick(()=>{this.$compEmitter.emit("resizeSummary")})}}},zo=e=>(z("data-v-6076e220"),e=e(),A(),e),Ao={key:0},Eo=zo(()=>c("span",{class:"heading"},"This book in collections",-1)),Bo={class:"count"},Oo={key:0,class:"hidden-section"},Po={class:"text"},Ro={class:"total-books"};function Wo(e,i,t,o,s,r){const l=G,u=H("router-link");return e.collections?(n(),a("div",Ao,[c("div",{class:"label hidden-section-label",onClick:i[0]||(i[0]=(...h)=>r.labelClick&&r.labelClick(...h))},[Eo,c("span",Bo,p(e.collections.length),1),f(l,{up:e.$store.state.sticky.collectionsDrawerToggle},null,8,["up"])]),e.$store.state.sticky.collectionsDrawerToggle?(n(),a("div",Oo,[(n(!0),a(C,null,j(e.collections,h=>(n(),m(u,{class:"collection-link",key:h.id,to:{name:"collection",params:{collection:h.id},query:{book:t.book.asin}}},{default:$(()=>[c("span",Po,p(h.title),1),c("span",Ro,p(h.books.length),1)]),_:2},1032,["to"]))),128))])):d("",!0)])):d("",!0)}var Ho=M(jo,[["render",Wo],["__scopeId","data-v-6076e220"]]);const Uo={name:"starRating",props:["size","rating","stars","ratings","ratingsText","prioritizeRatingsText","number","numberOf","block","image","placeholderImage","placeholderOpacity","noPlaceholder"],data:function(){return{opt:null,config:{rating:null,length:null}}},created:function(){this.opt={rating:5,stars:5,size:15,number:!1,numberOf:!1,block:!1,image:!1,placeholderImage:!1,placeholderOpacity:!1,noPlaceholder:!1};const e=this.splitDecimals(this.rating);this.config.rating=this.toPercentage(e);const i=this.noPlaceholder||this.opt.noPlacehoder;this.config.length=i?this.config.rating.whole+(this.config.rating.fraction?1:0):parseInt(this.stars||this.opt.stars,10)},methods:{splitDecimals:function(e){const i=""+e;let t;return i.indexOf(".")>-1?t=i.split("."):i.indexOf(",")>-1&&(t=i.split(",")),t?{whole:t[0],fraction:"."+t[1]}:{whole:e,fraction:null}},toPercentage:function(e){let i={whole:parseInt(e.whole,10)};return e.fraction&&(i.originalFraction=e.fraction),e.fraction&&(i.fraction=Math.floor(parseFloat(e.fraction,10)*100)),i}}},Yo=["data-rating"],Fo={key:0,class:"rating-count"},Vo=["innerHTML"],Qo={key:0},qo=["data-star","data-whole","data-fraction"],Zo=["innerHTML"],Go={key:2,class:"rating-count"},Xo=I("("),Jo=["innerHTML"],Ko={key:0},es=I(")");function ts(e,i,t,o,s,r){return e.config.rating?(n(),a("div",{key:0,class:k(["sRatings-wrapper",{"sRatings-block":t.block||e.opt.block,"prioritize-ratings-text":t.prioritizeRatingsText}]),"data-rating":t.rating||0},[t.ratings&&t.prioritizeRatingsText?(n(),a("div",Fo,[c("span",{innerHTML:t.ratings},null,8,Vo),t.ratingsText!==!1?(n(),a("span",Qo," ratings")):d("",!0)])):d("",!0),(n(!0),a(C,null,j(e.config.length,(l,u)=>(n(),a("div",{key:u,"data-star":l,"data-whole":e.config.rating.whole===l,"data-fraction":e.config.rating.fraction&&e.config.rating.whole===l-1,style:x({width:e.config.rating.whole===l-1&&(t.noPlaceholder||e.opt.noPlaceholder)&&e.config.rating.fraction?(t.size||e.opt.size)*e.config.rating.originalFraction+"px":(t.size||e.opt.size)+"px",height:(t.size||e.opt.size)+"px"})},[e.config.rating.whole<=l&&!(t.noPlaceholder||e.opt.noPlaceholder)?(n(),a("div",{key:0,class:k(["sRatings-placeholder",{"sRatings-show":e.config.rating.whole<l}]),style:x({left:e.config.rating.fraction&&e.config.rating.whole===l-1?e.config.rating.fraction+"%":"0%","background-size":(t.size||e.opt.size)+"px","background-image":t.image||t.placeholderImage||e.opt.placeholderImage?"url("+(t.image&&!t.placeholderImage?t.image:t.placeholderImage||e.opt.placeholderImage)+")":!1,opacity:t.placeholderOpacity||e.opt.placeholderOpacity})},null,6)):d("",!0),e.config.rating.whole>=l||e.config.rating.fraction&&e.config.rating.whole===l-1?(n(),a("div",{key:1,class:"sRatings-star",style:x({width:e.config.rating.whole>=l||e.config.rating.whole===l-1&&(t.noPlaceholder||e.opt.noPlaceholder)?"100%":e.config.rating.fraction+"%","background-size":(t.size||e.opt.size)+"px","background-image":t.image||e.opt.image?"url("+(t.image||e.opt.image)+")":!1})},null,4)):d("",!0)],12,qo))),128)),t.number||e.opt.number?(n(),a("div",{key:1,class:"text-label",style:x({width:t.numberOf||e.opt.numberOf?"auto":!1,padding:t.numberOf||e.opt.numberOf?"0 6px":!1}),innerHTML:t.numberOf||e.opt.numberOf?t.rating+"/"+(t.stars||e.opt.stars):t.rating},null,12,Zo)):d("",!0),t.ratings&&!t.prioritizeRatingsText?(n(),a("div",Go,[Xo,c("span",{innerHTML:t.ratings},null,8,Jo),t.ratingsText!==!1?(n(),a("span",Ko," ratings")):d("",!0),es])):d("",!0)],10,Yo)):d("",!0)}var ye=M(Uo,[["render",ts],["__scopeId","data-v-0e4f9484"]]);const is={name:"aleBookBasicInfo",props:["book","goodreads"],data:function(){return{ratingTippyOpts:{placement:"top",flipBehavior:["top","right","left","bottom"],allowHTML:!0},ratingLegend:`
        <style>
        .ratings-tippy {
          margin: 0; 
          padding: 0px 0px 0px 15px;
        }
        .ratings-tippy li {
          padding-bottom: 5px;
        }
        </style>
        <ol class="ratings-tippy">
          <li>Not for me</li>
          <li>It\u2019s okay</li>
          <li>Pretty good</li>
          <li>It\u2019s great</li>
          <li>I love it</li>
        </ol>
      `}},methods:{myRatingLabel:function(e){switch(parseFloat(e)){case 1:return"Not for me";case 2:return"It\u2019s okay";case 3:return"Pretty good";case 4:return"It\u2019s great";case 5:return"I love it"}}}},X=e=>(z("data-v-b2021f1a"),e=e(),A(),e),os={class:"basic-info"},ss={key:4},ns=X(()=>c("strong",{class:"strong-label"},"Length:",-1)),rs={key:5,class:"language"},as=X(()=>c("strong",{class:"strong-label"},"Language:",-1)),ls={key:6,class:"format"},cs=X(()=>c("strong",{class:"strong-label"},"Format:",-1)),us={key:7,class:"format",content:"YYYY-MM-DD"},ds=X(()=>c("strong",{class:"strong-label"},"Release date:",-1)),hs={key:8,class:"rating"},gs=["content"],fs=I("Rating:"),ms=[fs],ps={key:9,class:"own-rating"},ys=["content"],_s=I("My rating: "),bs=[_s];function ks(e,i,t,o,s,r){const l=de,u=ye,h=N("tippy");return n(),a("div",os,[t.book.authors?(n(),m(l,{key:0,label:"Author",array:t.book.authors},null,8,["array"])):d("",!0),t.book.narrators?(n(),m(l,{key:1,label:"Narrator",array:t.book.narrators},null,8,["array"])):d("",!0),t.book.series?(n(),m(l,{key:2,label:"Series",array:t.book.series},null,8,["array"])):d("",!0),t.book.publishers?(n(),m(l,{key:3,label:"Publisher",array:t.book.publishers},null,8,["array"])):d("",!0),t.book.length?(n(),a("div",ss,[ns,I(p(t.book.length),1)])):d("",!0),t.book.language?(n(),a("div",rs,[as,c("span",null,p(t.book.language),1)])):d("",!0),t.book.format?(n(),a("div",ls,[cs,c("span",null,p(t.book.format),1)])):d("",!0),t.book.releaseDate?S((n(),a("div",us,[ds,c("span",null,p(t.book.releaseDate),1)])),[[h]]):d("",!0),t.book.rating?(n(),a("div",hs,[S((n(),a("strong",{class:"strong-label",content:e.ratingLegend},ms,8,gs)),[[h,e.ratingTippyOpts]]),f(u,{size:12,rating:t.book.rating,number:"true",ratings:t.book.ratings},null,8,["rating","ratings"])])):d("",!0),t.book.myRating?(n(),a("div",ps,[S((n(),a("strong",{class:"strong-label",content:e.ratingLegend},bs,8,ys)),[[h,e.ratingTippyOpts]]),S(f(u,{size:12,content:r.myRatingLabel(t.book.myRating),rating:t.book.myRating,number:"true"},null,8,["content","rating"]),[[h,{placement:"right",flipBehavior:["right","top","bottom"]}]])])):d("",!0)])}var vs=M(is,[["render",ks],["__scopeId","data-v-b2021f1a"]]);const Ms={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},Ss=c("path",{fill:"currentColor",d:"M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256s114.6 256 256 256zm-86.2-346.7c7.9-22.3 29.1-37.3 52.8-37.3h58.3c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24v-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1h-58.3c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM288 352c0 17.7-14.3 32-32 32s-32-14.3-32-32s14.3-32 32-32s32 14.3 32 32z"},null,-1),ws=[Ss];function Is(e,i){return n(),a("svg",Ms,ws)}var Ls={name:"fa6-solid-circle-question",render:Is},$s="assets/gallery-sidebar.326a6628.jpg",Ts="assets/gallery-cover-plus-calatog-indicator.930228c5.jpg",xs="assets/gallery-sidebar-series-list.5caf72bb.jpg",Ds="assets/gallery-sidebar-toolbar.e9af4245.jpg",Ns="assets/gallery-carousel.5d8cda9f.jpg",Cs="assets/gallery-prefer-short-title.7398728a.jpg",js="assets/gallery-sample-play-button.76880d32.jpg",zs="assets/gallery-cover-favorite-finished-indicators.deaa62ec.jpg",As="assets/gallery-book-cover-cloud-player-button.c51131a2.jpg",Es="assets/gallery-blurb-hover-corner.72b0391b.jpg",Bs="assets/gallery-sidebar-collections-list.e36f2c6e.jpg",Os="assets/gallery-cover-whispersync-indicator.5e5fc680.jpg",Ps="assets/gallery-sidebar-main-info.fc6f5930.jpg",Rs="assets/gallery-sidebar-cover.71816002.jpg";const Ws={name:"bookDetailsSettings",data:function(){const e=this;this.$store.state;const i=this.$store.state.sticky;return{showSettings:!0,settings:[{type:"heading",label:"Grid book cover"},{enabled:!0,type:"checkbox",label:"Show sample play button",info:`<img src="${js}" class="tippy-info-image" />`,parent:"sampleButton",value:i.bookDetailSettings.playButton,event:function(t){const o=[{key:"sticky.bookDetailSettings.playButton",value:t.target.checked}];i.bookDetailSettings.cloudPlayer&&(o.push({key:"sticky.bookDetailSettings.cloudPlayer",value:!t.target.checked}),e.mutateChildren("cloudButton","value",!t.target.checked)),e.mutateChildren("sampleButton","value",t.target.checked),e.$store.commit("prop",o)}},{enabled:!0,type:"checkbox",label:"Show cloud player button",parent:"cloudButton",info:`You have to be logged in. Try opening <a targer="_blank" href="'+ store.urlOrigin +'/library">your library</a> first before opening the cloud player.<br>If you can open your library, you can also open the cloud player through the ALE gallery.<br><br><img src="${As}" class="tippy-info-image" />`,interactiveTippy:!0,value:i.bookDetailSettings.cloudPlayer,event:function(t){const o=[{key:"sticky.bookDetailSettings.cloudPlayer",value:t.target.checked}];i.bookDetailSettings.playButton&&(o.push({key:"sticky.bookDetailSettings.playButton",value:!t.target.checked}),e.mutateChildren("sampleButton","value",!t.target.checked)),e.mutateChildren("cloudButton","value",t.target.checked),e.$store.commit("prop",o)}},{enabled:!0,type:"checkbox",label:"Show blurb on hover",info:`This is never visible on mobile <br/><img src="${Es}" class="tippy-info-image" />`,value:i.bookDetailSettings.blurb,event:function(t){e.$store.commit("prop",{key:"sticky.bookDetailSettings.blurb",value:t.target.checked})}},{enabled:!0,type:"checkbox",label:"Show whispersync (owned) indicator",info:`<img src="${Os}" class="tippy-info-image" />`,value:i.bookDetailSettings.whispersync,event:function(t){e.$store.commit("prop",{key:"sticky.bookDetailSettings.whispersync",value:t.target.checked})}},{enabled:!0,type:"checkbox",label:"Show plus catalog indicator",info:`<img src="${Ts}" class="tippy-info-image" />`,value:i.bookDetailSettings.plusCatalog,event:function(t){e.$store.commit("prop",{key:"sticky.bookDetailSettings.plusCatalog",value:t.target.checked})}},{enabled:!0,type:"checkbox",label:"Show favorite indicator",info:`<strong>The RED dot</strong><br><img src="${zs}" class="tippy-info-image" />`,value:i.bookDetailSettings.favorite,event:function(t){e.$store.commit("prop",{key:"sticky.bookDetailSettings.favorite",value:t.target.checked})}},{enabled:!0,type:"checkbox",label:"Show finished indicator",info:'<strong>The GREEN dot</strong><br><img src="images/info/cover-favorite-finished-indicators.jpg" class="tippy-info-image" />',value:i.bookDetailSettings.finished,event:function(t){e.$store.commit("prop",{key:"sticky.bookDetailSettings.finished",value:t.target.checked})}},{type:"divider"},{type:"heading",label:"Above summary"},{enabled:!0,type:"checkbox",label:"Prefer short title",info:`This makes the title a little more readable without actually removing anything from the title, just diplaying it differently. Short title is used if available (for newly extracted data since v.0.2.9). Subtitle is shown below with a smaller font similar to Audible store pages. <br/><br/><strong>In case subtitle is not available, the full title is shown below instead, so you always get to see the full title either way.</strong><br/><br/><img src='${Cs}' class='tippy-info-image' />`,value:i.bookDetailSettings.titleShort,event:function(t){e.$store.commit("prop",{key:"sticky.bookDetailSettings.titleShort",value:t.target.checked}),e.$nextTick(()=>{e.$compEmitter.emit("resizeSummary")})}},{type:"divider"},{type:"heading",label:"Sidebar"},{enabled:!0,type:"checkbox",label:"Show sidebar",info:`<strong>The entire sidebar!</strong> <br><img src="${$s}" class="tippy-info-image" />`,value:i.bookDetailSettings.sidebar.show,event:function(t){const o=t.target.checked;e.$store.commit("prop",{key:"sticky.bookDetailSettings.sidebar.show",value:o}),e.$nextTick(()=>{e.$compEmitter.emit("resizeSummary")}),e.mutateChildren("sidebar","enabled",o)},init:function(t){e.mutateChildren("sidebar","enabled",i.bookDetailSettings.sidebar.show)}},{enabled:!0,type:"checkbox",label:"Show book cover",parent:"sidebar",info:`There is also an easy access toggle swith on the left side of the sidebar (arrow up) <br><img src="${Rs}" class="tippy-info-image" />`,value:!i.bookDetailsCollapsedCover,event:function(t){e.$store.commit("prop",{key:"sticky.bookDetailsCollapsedCover",value:!t.target.checked}),e.$nextTick(()=>{e.$compEmitter.emit("resizeSummary")})}},{enabled:!0,type:"checkbox",label:"Show icon toolbar",parent:"sidebar",info:`<img src="${Ds}" class="tippy-info-image" />`,value:i.bookDetailSettings.sidebar.iconToolbar,event:function(t){e.$store.commit("prop",{key:"sticky.bookDetailSettings.sidebar.iconToolbar",value:t.target.checked}),e.$nextTick(()=>{e.$compEmitter.emit("resizeSummary")})}},{enabled:!0,type:"checkbox",label:"Show main details",parent:"sidebar",info:`There is also an easy access toggle swith on the left side of the sidebar (arrow up) <br><img src="${Ps}" class="tippy-info-image" />`,value:!i.bookDetailsCollapsedDetails,event:function(t){e.$store.commit("prop",{key:"sticky.bookDetailsCollapsedDetails",value:!t.target.checked}),e.$nextTick(()=>{e.$compEmitter.emit("resizeSummary")})}},{enabled:!0,type:"checkbox",label:"Show collections list",parent:"sidebar",info:`If a book is in a collection... <br><img src="${Bs}" class="tippy-info-image" />`,value:i.bookDetailSettings.sidebar.collectionsList,event:function(t){e.$store.commit("prop",{key:"sticky.bookDetailSettings.sidebar.collectionsList",value:t.target.checked}),e.$nextTick(()=>{e.$compEmitter.emit("resizeSummary")})}},{enabled:!0,type:"checkbox",label:"Show series list",parent:"sidebar",info:`If a book is in a series... <br><img src="${xs}" class="tippy-info-image" />`,value:i.bookDetailSettings.sidebar.seriesList,event:function(t){e.$store.commit("prop",{key:"sticky.bookDetailSettings.sidebar.seriesList",value:t.target.checked}),e.$nextTick(()=>{e.$compEmitter.emit("resizeSummary")})}},{type:"divider"},{type:"heading",label:"Bottom of the details view"},{enabled:!0,type:"checkbox",label:"Show carousel",info:`<img src="${Ns}" class="tippy-info-image" />`,value:i.bookDetailSettings.carousel,event:function(t){e.$store.commit("prop",{key:"sticky.bookDetailSettings.carousel",value:t.target.checked})}}]}},created:function(){const e=_.filter(this.settings,"init");_.each(e,function(i){i.init(i)}),this.dividerIds()},mounted:function(){this.$nextTick(function(){this.setMinHeight()})},methods:{mutateChildren:function(e,i,t){const o=_.filter(this.settings,{parent:e});_.each(o,function(s){s[i]=t})},dividerIds:function(){const e="divider",i=_.filter(this.settings,{type:e});_.each(i,function(t,o){t.label=e+"-"+o})},setMinHeight:function(){const e=this.$el.offsetHeight;this.$store.state.sticky.bookDetailSettings.minHeight,this.$store.commit("prop",{key:"sticky.bookDetailSettings.minHeight",value:e+"px"})}}},_e=e=>(z("data-v-96f21b58"),e=e(),A(),e),Hs={class:"settings-outer-wrapper"},Us={class:"tabs"},Ys={key:0,class:"settings-wrapper"},Fs=_e(()=>c("div",{class:"settings-info"}," Your browser will remember these settings! ",-1)),Vs={key:0,class:"heading"},Qs={key:1,class:"divider"},qs={key:2,class:"inner-wrapper"},Zs=["checked","onChange","disabled"],Gs=_e(()=>c("div",{class:"visual-checkbox"},[c("div",{class:"switch"})],-1)),Xs={class:"label-text"},Js={key:1,class:"shortcuts-wrapper"},Ks=Ie("<table data-v-96f21b58><tr data-v-96f21b58><th data-v-96f21b58>description</th><th data-v-96f21b58>shortcut</th></tr><tr data-v-96f21b58><td data-v-96f21b58>Close</td><td data-v-96f21b58>Esc</td></tr><tr data-v-96f21b58><td data-v-96f21b58>Open adjacent book</td><td data-v-96f21b58>Arrow Keys</td></tr><tr data-v-96f21b58><td data-v-96f21b58>Open adjacent book</td><td data-v-96f21b58>TAB &amp; Shift+TAB</td></tr></table>",1),en=[Ks];function tn(e,i,t,o,s,r){const l=Ls,u=N("tippy");return n(),a("div",Hs,[c("div",Us,[c("h3",{onClick:i[0]||(i[0]=h=>e.showSettings=!0),class:k({active:e.showSettings})},"Settings",2),c("h3",{onClick:i[1]||(i[1]=h=>e.showSettings=!1),class:k({active:!e.showSettings})},"Shortcuts",2)]),c("div",null,[e.showSettings?(n(),a("div",Ys,[Fs,(n(!0),a(C,null,j(e.settings,h=>(n(),a("div",{class:k(["setting",{disabled:!h.enabled}]),key:h.label},[h.type==="heading"?(n(),a("div",Vs,[c("h3",null,p(h.label),1)])):h.type==="divider"?(n(),a("div",Qs)):(n(),a("div",qs,[c("label",null,[c("input",{type:"checkbox",checked:h.value,onChange:h.event,disabled:!h.enabled},null,40,Zs),Gs,c("div",Xs,[c("span",null,p(h.label),1)])]),h.info?S((n(),m(l,{key:0,class:"more-info-icon",content:h.info},null,8,["content"])),[[u,{trigger:"mouseenter focus click",interactive:h.interactiveTippy,hideOnClick:!1,delay:0,placement:"right",flipBehavior:["right","top","left","bottom"],allowHTML:!0}]]):d("",!0)]))],2))),128))])):(n(),a("div",Js,en))])])}var on=M(Ws,[["render",tn],["__scopeId","data-v-96f21b58"]]);const sn={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},nn=c("path",{fill:"currentColor",d:"m21.32 9.55l-1.89-.63l.89-1.78A1 1 0 0 0 20.13 6L18 3.87a1 1 0 0 0-1.15-.19l-1.78.89l-.63-1.89A1 1 0 0 0 13.5 2h-3a1 1 0 0 0-.95.68l-.63 1.89l-1.78-.89A1 1 0 0 0 6 3.87L3.87 6a1 1 0 0 0-.19 1.15l.89 1.78l-1.89.63a1 1 0 0 0-.68.94v3a1 1 0 0 0 .68.95l1.89.63l-.89 1.78A1 1 0 0 0 3.87 18L6 20.13a1 1 0 0 0 1.15.19l1.78-.89l.63 1.89a1 1 0 0 0 .95.68h3a1 1 0 0 0 .95-.68l.63-1.89l1.78.89a1 1 0 0 0 1.13-.19L20.13 18a1 1 0 0 0 .19-1.15l-.89-1.78l1.89-.63a1 1 0 0 0 .68-.94v-3a1 1 0 0 0-.68-.95ZM20 12.78l-1.2.4A2 2 0 0 0 17.64 16l.57 1.14l-1.1 1.1l-1.11-.6a2 2 0 0 0-2.79 1.16l-.4 1.2h-1.59l-.4-1.2A2 2 0 0 0 8 17.64l-1.14.57l-1.1-1.1l.6-1.11a2 2 0 0 0-1.16-2.82l-1.2-.4v-1.56l1.2-.4A2 2 0 0 0 6.36 8l-.57-1.11l1.1-1.1L8 6.36a2 2 0 0 0 2.82-1.16l.4-1.2h1.56l.4 1.2A2 2 0 0 0 16 6.36l1.14-.57l1.1 1.1l-.6 1.11a2 2 0 0 0 1.16 2.79l1.2.4ZM12 8a4 4 0 1 0 4 4a4 4 0 0 0-4-4Zm0 6a2 2 0 1 1 2-2a2 2 0 0 1-2 2Z"},null,-1),rn=[nn];function an(e,i){return n(),a("svg",sn,rn)}var ln={name:"uil-cog",render:an};const cn={viewBox:"0 0 12 12",width:"1.2em",height:"1.2em"},un=c("path",{fill:"currentColor",d:"M6 1a5 5 0 1 0 0 10A5 5 0 0 0 6 1Z"},null,-1),dn=[un];function hn(e,i){return n(),a("svg",cn,dn)}var gn={name:"fluent-circle12-filled",render:hn};const fn={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},mn=c("path",{fill:"currentColor",d:"M13 10a3 3 0 1 1-6 0a3 3 0 0 1 6 0Z"},null,-1),pn=[mn];function yn(e,i){return n(),a("svg",fn,pn)}var _n={name:"fluent-circle-small20-filled",render:yn};const bn={name:"sidebarFlipper",data:function(){return{detailSettings:this.$store.state.sticky.bookDetailSettings}},methods:{flip(){this.$store.commit("prop",{key:"sticky.bookDetailSettings.reverseDirection",value:!this.detailSettings.reverseDirection})}}};function kn(e,i,t,o,s,r){const l=_n,u=gn;return n(),a("div",{class:k(["action-reverse-direction",{flip:e.detailSettings.reverseDirection}]),onClick:i[0]||(i[0]=(...h)=>r.flip&&r.flip(...h))},[f(l),f(u)],2)}var vn=M(bn,[["render",kn],["__scopeId","data-v-106d48b1"]]);const Mn={viewBox:"0 0 256 256",width:"1.2em",height:"1.2em"},Sn=c("path",{fill:"currentColor",d:"M128 24a104 104 0 1 0 104 104A104.2 104.2 0 0 0 128 24Zm24 144a8 8 0 0 1 0 16h-48a7.3 7.3 0 0 1-2.5-.4A8 8 0 0 1 96 176a7.5 7.5 0 0 1 1.7-4.9l43.7-58.3A16 16 0 0 0 128 88a15.9 15.9 0 0 0-14.7 9.8a8 8 0 0 1-14.8-6.3a32 32 0 1 1 56 30.4l-.2.3L120 168Z"},null,-1),wn=[Sn];function In(e,i){return n(),a("svg",Mn,wn)}var Ln={name:"ph-number-circle-two-fill",render:In};const $n={viewBox:"0 0 256 256",width:"1.2em",height:"1.2em"},Tn=c("path",{fill:"currentColor",d:"M128 24a104 104 0 1 0 104 104A104.2 104.2 0 0 0 128 24Zm12 152a8 8 0 0 1-16 0V98.9l-11.6 7.8a8 8 0 0 1-8.8-13.4l24-16a8.3 8.3 0 0 1 8.2-.4A8 8 0 0 1 140 84Z"},null,-1),xn=[Tn];function Dn(e,i){return n(),a("svg",$n,xn)}var Nn={name:"ph-number-circle-one-fill",render:Dn};const Cn={name:"sidebarFlipper",data:function(){return{detailSettings:this.$store.state.sticky.bookDetailSettings}},methods:{flip(){this.$store.commit("prop",{key:"sticky.bookDetailSettings.hideFirstSection",value:!this.detailSettings.hideFirstSection})}}};function jn(e,i,t,o,s,r){const l=Nn,u=Ln;return n(),a("div",{class:k(["details-first-hider",{flip:e.detailSettings.hideFirstSection}]),onClick:i[0]||(i[0]=(...h)=>r.flip&&r.flip(...h))},[e.detailSettings.hideFirstSection?(n(),m(l,{key:0})):(n(),m(u,{key:1}))],2)}var zn=M(Cn,[["render",jn],["__scopeId","data-v-7b3478ca"]]);const An={name:"openWebPlayer",props:["book","icon","topRight","size","tooltip","noBG"],data:function(){return{url:null}},created:function(){this.book&&(this.url="https://www.audible.com/webplayer?asin="+this.book.asin)}},En=e=>(z("data-v-696c5989"),e=e(),A(),e),Bn=["href"],On=["content"],Pn=En(()=>c("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNTEuNSA5My43IiB3aWR0aD0iMTUxLjUiIGhlaWdodD0iOTMuNyI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiNmZmY7fTwvc3R5bGU+PC9kZWZzPjxnPjxnPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggODAuN2w3NS43LTQ3LjJ2MTIuOEw3NS44IDkzLjcgMCA0Ni4zVjMzLjVsNzUuOCA0Ny4yeiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggMjEuNWE0OC4xNyA0OC4xNyAwIDAgMC00MC43IDIxLjkgMTIuOTQgMTIuOTQgMCAwIDEgMS44LTEuNmMyMS4zLTE3LjcgNTItMTMuNyA2OC43IDguNmwxMS4xLTcuMWE0OS44MiA0OS44MiAwIDAgMC00MC45LTIxLjgiLz48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik03NS44IDQzLjRhMjcuNzIgMjcuNzIgMCAwIDAtMjIuNCAxMS41IDIyLjcgMjIuNyAwIDAgMSAxMy41LTQuNGM4LjIgMCAxNS41IDQuMiAyMC40IDExLjNsMTAuNi02LjZhMjUuNzkgMjUuNzkgMCAwIDAtMjIuMS0xMS44TTI0LjYgMjQuMkM1NS44LS40IDk5LjkgNi4zIDEyMy40IDM5bC4yLjIgMTEuNS03LjFhNzAuODIgNzAuODIgMCAwIDAtMTE4LjYgMCA2MC42MyA2MC42MyAwIDAgMSA4LjEtNy45Ii8+PC9nPjwvZz48L3N2Zz4=",alt:""},null,-1)),Rn=[Pn],Wn={key:1};function Hn(e,i,t,o,s,r){const l=N("tippy");return e.url?(n(),a("a",{key:0,href:e.url,target:"_blank",rel:"noopener noreferrer",class:k({"top-right":t.topRight,"no-bg":t.noBG})},[t.icon?S((n(),a("div",{key:0,class:"gr-icon audible-cloudplayer-link",style:x({width:(t.size||30)+"px",height:(t.size||30)+"px"}),content:t.tooltip?"Open web player":""},Rn,12,On)),[[l]]):(n(),a("span",Wn,"Search in Goodreads"))],10,Bn)):d("",!0)}var oe=M(An,[["render",Hn],["__scopeId","data-v-696c5989"]]);const Un={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},Yn=c("path",{fill:"currentColor",d:"M512 256c0 141.4-114.6 256-256 256S0 397.4 0 256S114.6 0 256 0s256 114.6 256 256zM188.3 147.1c-7.6 4.2-12.3 12.3-12.3 20.9v176c0 8.7 4.7 16.7 12.3 20.9s16.8 4.1 24.3-.5l144-88c7.1-4.4 11.5-12.1 11.5-20.5s-4.4-16.1-11.5-20.5l-144-88c-7.4-4.5-16.7-4.7-24.3-.5z"},null,-1),Fn=[Yn];function Vn(e,i){return n(),a("svg",Un,Fn)}var Qn={name:"fa6-solid-circle-play",render:Vn};const qn={name:"sampleButton",props:["book","index","topRight","size"],methods:{playSample:function(e,i){this.$compEmitter.emit("play-audio",{from:"sampleButton",route:this.$route,book:e,index:i})}}};function Zn(e,i,t,o,s,r){const l=Qn,u=N("tippy");return S((n(),m(l,{class:k(["pointer",{"top-right":t.topRight}]),onClick:i[0]||(i[0]=h=>r.playSample(t.book,e.rowIndex)),style:x({width:(t.size||30)+"px",height:"auto"}),content:"Play sample audio"},null,8,["class","style"])),[[u]])}var be=M(qn,[["render",Zn],["__scopeId","data-v-10b712b2"]]);const Gn={name:"book-info-toolbar",props:["book","tempAsin"],data:function(){return{size:20}}},Xn={class:"book-info-toolbar"};function Jn(e,i,t,o,s,r){const l=be,u=fe,h=me,y=oe;return n(),a("div",Xn,[t.book.sample?(n(),m(l,{key:0,size:e.size,book:t.book},null,8,["size","book"])):d("",!0),f(u,{size:e.size,book:t.book,icon:!0},null,8,["size","book"]),t.tempAsin?d("",!0):(n(),m(h,{key:1,size:e.size,book:t.book},null,8,["size","book"])),!t.tempAsin&&!t.book.notInLibrary?(n(),m(y,{key:2,size:e.size,book:t.book,icon:!0},null,8,["size","book"])):d("",!0)])}var Kn=M(Gn,[["render",Jn]]),ke={mixins:[Z],methods:{progressbarWidth:function(e){if(e.progress){if(e.progress.toLowerCase().trim()==="finished")return{width:"100%"};if(e.length){var i=this.timeStringToSeconds(e.progress);const t=this.timeStringToSeconds(e.length);return i=t-i,{width:i/t*100+"%"}}else return{width:0}}else return{width:0}}}};const er={name:"bookDetails",props:["asin"],mixins:[Z,ae,ke,q,E],data:function(){return{store:this.$store.state,sticky:this.$store.state.sticky,book:null,index:null,maxWidth:"unset",loading:!0,clickedBook:null,peopleAlsoBoughtJSON:null,bookSummaryJSON:null,scrpt:null,imageLoaded:!1}},created:function(){this.index=_.findIndex(this.$store.state.chunkCollection,{asin:this.asin}),this.book=this.$store.state.chunkCollection[this.index],this.loadJSON()},mounted:function(){this.$nextTick(function(){this.clickedBook=document.querySelector('.ale-book[data-asin="'+this.book.asin+'"]')||document.querySelector('.ale-row[data-asin="'+this.book.asin+'"]'),this.resetScroll(),this.maxWidth=this.repositionBookDetails()+"px",this.$updateQueries({book:this.book.asin}),this.$store.commit("prop",{key:"timeStamp",value:new Date().getTime()}),this.$compEmitter.on("afterWindowResize",this.onWindowResize),this.loading=!1,this.scrollToCarousel(),this.scrollToMyBooksInTheSeries()})},beforeUnmount:function(){this.scrpt&&(this.scrpt.remove(),this.scrpt=null),this.$compEmitter.off("afterWindowResize",this.onWindowResize),this.peopleAlsoBoughtJSON=null,this.bookSummaryJSON=null,this.$store.commit("prop",{key:"bookDetailSettingsOpen",value:!1}),document.querySelector("#ale-bookdetails").remove()},computed:{peopleAlsoBought:function(){return this.book.peopleAlsoBought||this.peopleAlsoBoughtJSON},getMaxWidth:function(){return this.sticky.viewMode==="spreadsheet"?this.maxWidth:window.innerWidth>800?this.maxWidth:"800px"},mobileWidth(){return this.store.windowWidth<=688},tempAsin(){return!!this.book.asin.match(/temp-asin/i)}},methods:{collapseBtnClicked:function(e){this.$store.commit("stickyProp",{key:e,value:!this.sticky[e]}),this.$nextTick(()=>{this.$compEmitter.emit("resizeSummary")})},loadJSON:function(e){if(this.store.standalone){let i=this,t=document.createElement("script");this.scrpt=t,t.src="data/split-book-data/"+i.book.asin+"."+this.store.library.extras.cacheID+".js",t.type="text/javascript",t.onload=function(){i.bookSummaryJSON=window.bookSummaryJSON,window.bookSummaryJSON=!0,i.peopleAlsoBoughtJSON=window.peopleAlsoBoughtJSON,window.peopleAlsoBoughtJSON=!0,t=null},t.onerror=function(){t=null,setTimeout(function(){e||i.loadJSON("afterError")},1e3)},document.head.appendChild(t)}},onWindowResize:function(e){e.widthChanged&&(this.maxWidth=this.repositionBookDetails()+"px",this.resetScroll())},changeUrl:function(){_.get(this.$route,"query.book")!==this.book.asin&&this.$router.replace({query:{book:this.book.asin}})},resetScroll:function(){this.$nextTick(function(){this.$nextTick(function(){this.sticky.viewMode==="grid"?scroll({top:this.clickedBook.offsetTop-this.store.topNavOffset-25,behavior:"auto"}):document.querySelector(".list-view-inner-wrap").scroll({top:this.clickedBook.offsetTop-45})})})},scrollToCarousel:function(){!this.$route.query.carousel||(this.$updateQueries({carousel:null}),this.$nextTick(function(){const e=parseFloat(this.$route.query.y);this.sticky.viewMode==="grid"?scroll({top:e}):document.querySelector(".list-view-inner-wrap").scroll({top:e})}))},scrollToMyBooksInTheSeries:function(){!this.$route.query.scrollToSeries||(this.$updateQueries({scrollToSeries:null}),this.$store.commit("stickyProp",{key:"booksInSeriesToggle",value:!0}),this.$nextTick(function(){const e=this.$el.querySelector(".my-books-in-series-label");if(e){let i=e.getBoundingClientRect().top+window.scrollY;i=i-$store.state.topNavOffset-25,this.sticky.viewMode==="grid"?scroll({top:i,behavior:"smooth"}):document.querySelector(".list-view-inner-wrap").scroll({top:i,behavior:"smooth"})}}))},repositionBookDetails:function(){const e=document.querySelector(".ale-books"),i=e.querySelector(".ale-book")?e.querySelectorAll(".ale-book"):e.querySelector("table tbody").querySelectorAll(".ale-row"),t={};t.el=i[this.index],t.index=this.index,t.width=t.el.getBoundingClientRect().width,t.siblings=i;const o={};o.el=e,o.width=o.el.getBoundingClientRect().width;const s={};s.cols=Math.floor(o.width/t.width)||1,s.cols<2?s.rowEndEl=t.el:(s.currentRow=Math.floor(t.index/s.cols)+1,s.rowEnd=s.currentRow*s.cols,s.getRowEndEl=function(l){let u=t.siblings[l];return u||(u=s.getRowEndEl(--l)),u},s.rowEndEl=s.getRowEndEl(s.rowEnd-1));let r=document.querySelector(".target-row-end");return r&&r.classList.remove("target-row-end"),s.rowEndEl.classList.add("target-row-end"),s.rowEndEl.parentNode.insertBefore(this.$refs.bookDetails,s.rowEndEl.nextSibling),this.sticky.viewMode!=="spreadsheet"&&this.repositionBookDetailsArrow(t.el),this.sticky.viewMode==="spreadsheet"?o.width-60:t.width*s.cols},repositionBookDetailsArrow:function(e){const t=e.getBoundingClientRect().left+window.scrollX+e.offsetWidth/2;this.$refs.arrow.style.left=t+"px"},openAdjacentBookDetails:_.throttle(function(e){const i=this;if(this.sticky.viewMode==="grid")switch(e.srcKey){case"left":case"tabShift":i.keyboardMove("prev");break;case"right":case"tab":i.keyboardMove("next");break;case"up":case"down":i.keyboardMove_inGrid_vertically(e);break}else switch(e.srcKey){case"left":case"up":case"tabShift":i.keyboardMove("prev");break;case"right":case"down":case"tab":i.keyboardMove("next");break}},70,{leading:!1,trailing:!0}),keyboardMove(e){const i=e==="prev",t=i?this.index-1:this.index+1,o=this.store.chunkCollection[t];(i?t>-1:t<this.store.chunkCollection.length)&&(!i&&t>this.store.chunkCollection.length-2?(this.$store.commit("chunkCollectionAdd"),this.$nextTick(function(){this.$compEmitter.emit("book-clicked",o.asin)})):this.$compEmitter.emit("book-clicked",o.asin))},keyboardMove_inGrid_vertically(e){const i=this,t={};t.el=document.querySelector(".ale-books"),t.width=t.el.offsetWidth;const o={};o.el=this.clickedBook,o.index=this.index,o.width=o.el.offsetWidth;const s=Math.floor(t.width/o.width),l=function(){const b=e.srcKey;let v=-1;if(b==="up")v=i.index-s,v<0&&(v=0);else{v=i.index+s;const T=i.store.chunkCollection.length-1;v>T&&(v=T)}return v}(),u=i.store.chunkCollection[l],h=this.store.chunkCollection.length-1;(e.srcKey==="up"?!(i.index===0&&l==0):!(i.index===h&&l===h))&&(e.srcKey==="down"&&l>i.store.chunkCollection.length-2?(this.$store.commit("chunkCollectionAdd"),this.$nextTick(function(){this.$compEmitter.emit("book-clicked",u.asin)})):this.$compEmitter.emit("book-clicked",u.asin))},closeBookDetails:function(){_.get(this.$route,"query.book")&&this.$compEmitter.emit("book-clicked",null)},progressTooltip:function(e){if(e.progress.toLowerCase().trim()==="finished"){const i=this.timeStringToSeconds(e.length);return"Finished: ( "+this.secondsToTimeString(i)+" )"}else{const i=this.timeStringToSeconds(e.progress),t=this.timeStringToSeconds(e.length),o=t-i;return"Progress: "+this.secondsToTimeString(o)+" / "+this.secondsToTimeString(t)}},progressInfo:function(e){if(e.progress&&e.length)if(e.progress.toLowerCase().trim()==="finished"){const i=this.timeStringToSeconds(e.length);return'<div class="stretch-center" style="flex: 1;"><strong>Finished!</strong> ( '+this.secondsToTimeString(i,!0)+" )</div>"}else{const i=this.timeStringToSeconds(e.progress),t=this.timeStringToSeconds(e.length),o=t-i;return"<strong>Progress: </strong><div>"+this.secondsToTimeString(o,!0)+" / "+this.secondsToTimeString(t,!0)+"</div>"}else return'<div class="stretch-center" style="flex: 1;"><strong>Length:</strong> '+(e.length||"unkown")+"</div>"},swipeHandler(e){!this.mobileWidth||this.$store.commit("prop",{key:"sticky.bookDetailSettings.reverseDirection",value:!this.$store.state.sticky.bookDetailSettings.reverseDirection})}}},tr={key:0,class:"arrow",ref:"arrow"},ir={key:0,class:"information",ref:"information"},or=["content"],sr=["href"],nr={class:"progressbar"},rr=["src"],ar=["innerHTML"],lr={class:"basic-details"},cr=["content"],ur={key:2,class:"carousel-wrap"},dr=I(" Listeners also enjoyed ");function hr(e,i,t,o,s,r){const l=ie,u=he,h=Kn,y=zn,b=vn,v=ln,T=on,D=G,B=vs,U=Ho,V=Co,Y=$i,Q=gt,P=N("tippy"),g=N("touch"),w=N("shortkey");return e.book?S((n(),a("div",{key:0,id:"ale-bookdetails",ref:"bookDetails",onShortkey:i[5]||(i[5]=(...L)=>r.closeBookDetails&&r.closeBookDetails(...L)),class:k({"spreadsheet-details":e.sticky.viewMode==="spreadsheet","mobile-width":r.mobileWidth})},[e.sticky.viewMode!=="spreadsheet"?(n(),a("div",tr,null,512)):d("",!0),S((n(),a("div",{id:"book-info-container",onShortkey:i[4]||(i[4]=(...L)=>r.openAdjacentBookDetails&&r.openAdjacentBookDetails(...L)),class:k({"book-detail-settings-open":e.store.bookDetailSettingsOpen})},[e.book.notInLibrary?(n(),a("div",{key:0,class:"inner-wrap",style:x({maxWidth:r.getMaxWidth,minHeight:e.store.bookDetailSettingsOpen?e.sticky.bookDetailSettings.minHeight:null})},[f(l,{style:{"font-size":"30px",color:"#ff404e","margin-bottom":"20px"}}),f(u,{book:e.book,tempAsin:r.tempAsin},null,8,["book","tempAsin"]),e.sticky.bookDetailSettings.sidebar.iconToolbar?(n(),m(h,{key:0,style:{"margin-top":"15px"},book:e.book,tempAsin:r.tempAsin},null,8,["book","tempAsin"])):d("",!0)],4)):(n(),a("div",{key:1,class:"inner-wrap",style:x({maxWidth:r.getMaxWidth,minHeight:e.store.bookDetailSettingsOpen?e.sticky.bookDetailSettings.minHeight:null})},[r.mobileWidth?(n(),m(y,{key:0})):d("",!0),f(b),f(v,{class:k(["book-details-info",{active:e.store.bookDetailSettingsOpen}]),onClick:i[0]||(i[0]=L=>e.$store.commit("prop",{key:"bookDetailSettingsOpen",value:!e.store.bookDetailSettingsOpen}))},null,8,["class"]),e.store.bookDetailSettingsOpen?(n(),m(T,{key:1})):d("",!0),S((n(),a("div",{class:k(["top details-wrap",{"reverse-direction":e.sticky.bookDetailSettings.reverseDirection}])},[e.sticky.bookDetailSettings.sidebar.show&&!(!e.sticky.bookDetailSettings.reverseDirection&&e.sticky.bookDetailSettings.hideFirstSection&&r.mobileWidth)?(n(),a("div",ir,[r.mobileWidth?d("",!0):S((n(),a("div",{key:0,class:"collapse-btn",content:(e.sticky.bookDetailsCollapsedCover?"Expand":"Collapse")+" cover image.",style:{top:"5px"},onClick:i[1]||(i[1]=L=>r.collapseBtnClicked("bookDetailsCollapsedCover"))},[f(D,{up:!e.sticky.bookDetailsCollapsedCover},null,8,["up"])],8,or)),[[P]]),c("div",{class:k(["cover-wrap",{"cover-height":!e.sticky.bookDetailsCollapsedCover&&e.book.cover&&!r.mobileWidth}])},[c("a",{href:e.makeUrl("book",e.book.asin),target:"_blank",rel:"noopener noreferrer"},[c("div",nr,[c("div",{class:"progress",style:x(e.progressbarWidth(e.book))},null,4)]),!e.sticky.bookDetailsCollapsedCover&&e.book.cover&&!r.mobileWidth?S((n(),a("img",{key:0,onLoad:i[2]||(i[2]=L=>e.imageLoaded=!0),crossorigin:"anonymous",class:k(["cover",{loaded:e.imageLoaded}]),src:e.makeCoverUrl(e.book.cover)},null,42,rr)),[[ne,e.imageLoaded]]):d("",!0)],8,sr)],2),c("div",{class:"progress-info",innerHTML:r.progressInfo(e.book)},null,8,ar),c("div",lr,[S((n(),a("div",{class:"collapse-btn",content:(e.sticky.bookDetailsCollapsedDetails?"Expand":"Collapse")+" book details.",style:x({top:e.sticky.bookDetailsCollapsedDetails?"-10px":"25px"}),onClick:i[3]||(i[3]=L=>r.collapseBtnClicked("bookDetailsCollapsedDetails"))},[f(D,{up:!e.sticky.bookDetailsCollapsedDetails},null,8,["up"])],12,cr)),[[P]]),e.sticky.bookDetailSettings.sidebar.iconToolbar?(n(),m(h,{key:0,book:e.book},null,8,["book"])):d("",!0),e.sticky.bookDetailsCollapsedDetails?d("",!0):(n(),m(B,{key:1,book:e.book},null,8,["book"]))]),e.sticky.bookDetailSettings.sidebar.seriesList?(n(),m(U,{key:1,book:e.book},null,8,["book"])):d("",!0),e.sticky.bookDetailSettings.sidebar.collectionsList?(n(),m(V,{key:2,book:e.book},null,8,["book"])):d("",!0)],512)):d("",!0),!e.loading&&!(e.sticky.bookDetailSettings.reverseDirection&&e.sticky.bookDetailSettings.hideFirstSection&&r.mobileWidth)?(n(),m(Y,{key:1,book:e.book,bookSummary:e.bookSummaryJSON,mobileWidth:r.mobileWidth},null,8,["book","bookSummary","mobileWidth"])):d("",!0)],2)),[[g,r.swipeHandler,"swipe",{left:!0}],[g,r.swipeHandler,"swipe",{right:!0}]]),e.sticky.bookDetailSettings.carousel&&!e.loading?(n(),a("div",ur,[r.peopleAlsoBought&&r.peopleAlsoBought!==!0&&!(e.store.standalone&&!e.store.siteOnline)?(n(),m(Q,{detailsBook:e.book,books:r.peopleAlsoBought,key:e.maxWidth,mobileWidth:r.mobileWidth},{default:$(()=>[dr]),_:1},8,["detailsBook","books","mobileWidth"])):d("",!0)])):d("",!0)],4))],34)),[[w,{left:["arrowleft"],up:["arrowup"],right:["arrowright"],down:["arrowdown"],tab:["tab"],tabShift:["tab","shift"]}]])],34)),[[w,["esc"],void 0,{once:!0}]]):d("",!0)}var gr=M(er,[["render",hr],["__scopeId","data-v-0dde6a89"]]);const fr={name:"aleListItem",props:["book","rowIndex","keys"],mixins:[re,q,E],data:function(){return{sticky:this.$store.state.sticky,coverUrl:"",coverUrl27:"",bookTitle:"",goodreadsUrl:"",columns:null,imageLoading:!0}},created:function(){this.coverUrl=this.makeCoverUrl(this.book.cover),this.coverUrl&&(this.coverUrl27=this.coverUrl.replace("_SL500_","_SL54_")),this.bookTitle=this.book.title||this.book.titleShort,this.columns=this.prepareColumns()},mounted:function(){this.$nextTick(function(){this.imageLoading=!1})},methods:{prepareColumns:function(){const e=this;return _.map(this.keys,function(i){let t={};switch(t.key=i,t.class="col-"+_.kebabCase(i),i){case"authors":case"narrators":case"categories":case"publishers":case"tags":t.text=e.stringifyArray(e.book[i],"name",i==="categories"?" > ":null);break;case"series":var o=e.book.series;o&&(o=_.map(o,function(l){let u=l.bookNumbers?" (book "+l.bookNumbers.join(", ")+")":"";return l.name+u}).join(", ")),t.text=o||"";break;case"title":t.text=e.book[i]||e.book.titleShort,t.class+=" sticky-col";break;case"bookNumbers":if(!e.book.series)t.text="";else{let l=e.book.series.filter(function(u){return u.bookNumbers});l=l.map(function(u){return u.bookNumbers}),l=l.join(", "),t.text=l||"\u221E"}break;case"isbn10":const s=_.find(e.book.isbns,{type:"ISBN_10"});s&&(t.text=s.identifier);break;case"isbn13":const r=_.find(e.book.isbns,{type:"ISBN_13"});r&&(t.text=r.identifier);break;default:t.text=e.book[i],t.name="";break}return t.text||(t.text=null),t})}}},mr=["name"],pr={class:"ale-col-inner"},yr={key:0,class:"icons-n-stuff"},_r={class:"info-icon"},br={key:1,class:"cloud-player-icon"},kr={class:"thumbnail-wrapper"},vr=["src"],Mr={class:"text-container"};function Sr(e,i,t,o,s,r){const l=le,u=be,h=oe;return n(),a("tr",{class:"ale-row-inner",onClick:i[0]||(i[0]=y=>e.$compEmitter.emit("book-clicked",t.book.asin))},[(n(!0),a(C,null,j(e.columns,y=>(n(),a("td",{key:y.key,class:k(["ale-col",y.class]),name:y.name},[c("div",pr,[y.key==="title"?(n(),a("span",yr,[c("span",_r,[f(l,{class:"pointer"})]),e.sticky.bookDetailSettings.playButton?(n(),m(u,{key:0,book:t.book,index:t.rowIndex,size:16},null,8,["book","index"])):t.book.asin&&e.sticky.bookDetailSettings.cloudPlayer?(n(),a("div",br,[f(h,{size:20,book:t.book,icon:!0,tooltip:!1,noBG:!0},null,8,["book"])])):d("",!0),c("div",kr,[e.imageLoading?d("",!0):(n(),a("img",{key:0,crossorigin:"anonymous",src:e.coverUrl27,alt:""},null,8,vr))])])):d("",!0),c("span",Mr,p(y.text||"\xA0"),1)])],10,mr))),128))])}var wr=M(fr,[["render",Sr]]);const Ir={name:"colResizer",props:["identifier"],data:function(){return{colClass:"",startPosition:null,endPosition:null,dragging:!1,minWidth:30,width:null,mouseX:0,threshold:10}},created:function(){this.colClass=this.identifier.split(" ")[0]},methods:{resizeMouseDown:function(e){this.endPosition=null,this.startPosition=e.clientX},resizeMouseMove:_.throttle(function(e){this.startPosition&&Math.abs(this.startPosition-e.clientX)>=this.threshold&&(this.dragging=!0,this.mouseX=e.clientX)},65),resizeMouseUp:function(e){if(this.dragging){this.endPosition=e.clientX;const i=this.width?this.width:e.currentTarget.parentElement.offsetWidth,t=Math.abs(this.startPosition-this.endPosition),o=this.endPosition>this.startPosition,s=i+(o?+t:-t);this.width=s<this.minWidth?this.minWidth:s}this.dragging=null,this.endPosition=null,this.startPosition=null,this.mouseX=0}}};function Lr(e,i,t,o,s,r){return n(),a("div",{class:k(["col-resizer",{dragging:e.startPosition}]),onMousedown:i[0]||(i[0]=(...l)=>r.resizeMouseDown&&r.resizeMouseDown(...l)),onMouseup:i[1]||(i[1]=(...l)=>r.resizeMouseUp&&r.resizeMouseUp(...l)),onMousemove:i[2]||(i[2]=(...l)=>r.resizeMouseMove&&r.resizeMouseMove(...l))},[e.mouseX?(n(),a("div",{key:0,class:"floater-boy",style:x({left:e.mouseX+"px"})},null,4)):d("",!0),e.width?(n(),m(se("style"),{key:1,type:"text/css"},{default:$(()=>[I(" ."+p(e.colClass)+" { width: "+p(e.width)+"px !important; } ",1)]),_:1})):d("",!0)],34)}var $r=M(Ir,[["render",Lr],["__scopeId","data-v-94bbf484"]]);const Tr={name:"aleHeader",props:["keys"],data:function(){return{listName:"sort",optionsList:null,headers:null}},created:function(){this.optionsList=this.$store.state.listRenderingOpts[this.listName],this.headers=this.prepareHeaders(this.keys)},methods:{prepareHeaders:function(e){return _.map(e,function(i){const t={key:i,label:_.startCase(i),align:"left",class:"col-"+_.kebabCase(i)};switch(i){case"titleShort":case"title":t.class=t.class+" sticky-col";break;case"authors":case"narrators":case"publishers":case"tags":t.key+=".name";break}return t})},sorterIndex:function(e){return _.findIndex(this.optionsList,{key:e.key})},sorterItem:function(e){const i=new RegExp("^"+e);return _.find(this.optionsList,function(t){return t.key.match(i)})}}},xr={class:"list-view-header ale-row"},Dr={class:"ale-row-inner"},Nr={class:"ale-col-inner"},Cr={key:1,class:"text-container"};function jr(e,i,t,o,s,r){const l=$r,u=Ae;return n(),a("div",xr,[c("tr",Dr,[(n(!0),a(C,null,j(e.headers,(h,y)=>(n(),a("th",{key:h.label,class:k(["header-item ale-col",h.class])},[f(l,{identifier:h.class},null,8,["identifier"]),c("div",Nr,[r.sorterIndex(h)>-1?(n(),m(u,{key:0,label:!1,item:r.sorterItem(h.key),index:r.sorterIndex(h),currentList:e.optionsList,listName:e.listName,tippyTop:!0},{default:$(()=>[I(p(h.label),1)]),_:2},1032,["item","index","currentList","listName"])):(n(),a("span",Cr,p(h.label),1))])],2))),128))])])}var zr=M(Tr,[["render",jr]]);const Ar={name:"aleBooks",mixins:[re,Ce],data:function(){return{spreadsheetTop:170,keys:"",prevScrollTop:0}},created:function(){this.keys=this.prepareKeys()},mounted:function(){this.setSpreadsheetOffset(),this.$compEmitter.on("afterWindowResize",this.setSpreadsheetOffset)},beforeUnmount:function(){this.$compEmitter.off("afterWindowResize",this.setSpreadsheetOffset)},methods:{setSpreadsheetOffset:function(){this.$nextTick(function(){const e=document.querySelector("#ale-search-wrap"),i=window.pageYOffset+e.getBoundingClientRect().top,t=e.offsetHeight;this.spreadsheetTop=i+t})}}},Er={class:"list-view-inner-wrap"};function Br(e,i,t,o,s,r){const l=zr,u=wr,h=ee;return n(),a("div",{class:"ale-books list-view",ref:"listView",style:x({top:e.spreadsheetTop+"px"})},[c("div",Er,[c("table",null,[c("thead",null,[f(l,{keys:e.keys},null,8,["keys"])]),c("tbody",null,[(n(!0),a(C,null,j(e.$store.state.chunkCollection,(y,b)=>(n(),m(h,{class:"ale-row","data-asin":y.asin,key:"book:"+y.asin,ref_for:!0,ref:"domBooks"},{default:$(()=>[f(u,{book:y,rowIndex:b,keys:e.keys},null,8,["book","rowIndex","keys"])]),_:2},1032,["data-asin"]))),128))])])])],4)}var Or=M(Ar,[["render",Br]]);const Pr={viewBox:"0 0 448 512",width:"1.2em",height:"1.2em"},Rr=c("path",{fill:"currentColor",d:"M96 0C43 0 0 43 0 96v320c0 53 43 96 96 96h320c17.7 0 32-14.3 32-32s-14.3-32-32-32v-64c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H96zm0 384h256v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16zm16 48h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16s7.2-16 16-16z"},null,-1),Wr=[Rr];function Hr(e,i){return n(),a("svg",Pr,Wr)}var Ur={name:"fa6-solid-book",render:Hr};const Yr={viewBox:"0 0 448 512",width:"1.2em",height:"1.2em"},Fr=c("path",{fill:"currentColor",d:"M224 64c-44.2 0-80 35.8-80 80v48h240c35.3 0 64 28.7 64 64v192c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V256c0-35.3 28.7-64 64-64h16v-48C80 64.5 144.5 0 224 0c57.5 0 107 33.7 130.1 82.3c7.6 16 .8 35.1-15.2 42.6s-35.1.8-42.6-15.2C283.4 82.6 255.9 64 224 64zm32 320c17.7 0 32-14.3 32-32s-14.3-32-32-32h-64c-17.7 0-32 14.3-32 32s14.3 32 32 32h64z"},null,-1),Vr=[Fr];function Qr(e,i){return n(),a("svg",Yr,Vr)}var qr={name:"fa6-solid-unlock-keyhole",render:Qr};const Zr={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Gr=c("path",{fill:"currentColor",d:"m9 20.42l-6.21-6.21l2.83-2.83L9 14.77l9.88-9.89l2.83 2.83L9 20.42Z"},null,-1),Xr=[Gr];function Jr(e,i){return n(),a("svg",Zr,Xr)}var Kr={name:"mdi-check-bold",render:Jr};const ea={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},ta=c("path",{fill:"currentColor",d:"m47.6 300.4l180.7 168.7c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9l180.7-168.7c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141c-45.6-7.6-92 7.3-124.6 39.9l-12 12l-12-12c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"},null,-1),ia=[ta];function oa(e,i){return n(),a("svg",ea,ia)}var ve={name:"fa6-solid-heart",render:oa};const sa={name:"sortValues",props:["book"],mixins:[Z,ae,ke],data:function(){return{notAvailable:"&nbsp;"}},methods:{sortContents:function(){let e=this.$store.getters.sortBy;switch(e){case"bookNumbers":if(this.$route.params.series&&this.book.series){let s=_.find(this.book.series,{asin:this.$route.params.series});return s&&_.isArray(s.bookNumbers)?s.bookNumbers.join(", "):""}else if(this.book.series){let s=_.filter(this.book.series,"bookNumbers");return s=_.map(s,"bookNumbers"),s=_.flatten(s),_.isEmpty(s)?s=null:_.isArray(s)&&(s=s.join(", ")),s||"\u221E"}else return"";case"seriesOrder":const o=", ";if(this.book.series){const s=this.$route.params.series,r=_.find(this.book.series,{asin:s});if(r){const l=r.bookNumbers;return l?_.isArray(l)?l.join(o):l:"\u221E"}else return this.notAvailable}else return this.notAvailable;case"authors.name":case"narrators.name":case"publishers.name":case"tags.name":var i=_.get(this.book,e.replace(".name","[0].name"));return i||this.notAvailable;case"rating":return this.book.ratings?this.book[e]:this.notAvailable;case"ratings":return this.book.rating?this.book.rating:this.notAvailable;case"progress":var t=this.progressbarWidth(this.book);return this.progress(this.book)+'<div class="progress-bar"><div style="width: '+t.width+';"></div></div>';case"title":return this.book.titleShort||this.book.title||this.notAvailable;case"series":return this.book.series?_.map(this.book.series,"name").join(", "):this.notAvailable;case"categories":return this.book.categories?this.book.categories[0].name:this.notAvailable;case"isbn10":case"isbn13":if(this.book.isbns)if(e==="isbn10"){const s=_.find(this.book.isbns,["type","ISBN_10"]);if(s)return s.identifier}else if(e==="isbn13"){const s=_.find(this.book.isbns,["type","ISBN_13"]);if(s)return s.identifier}else return this.notAvailable;else return this.notAvailable;break;case"narratorsNumber":if(this.book.narrators){let s=_.find(this.book.narrators,function(r){return r.name.match("full cast")});return s&&this.book.narrators.length===1?"\u200B\u221E full cast":this.book.narrators.length-(s?1:0)+(s?" full cast":"")}else return this.notAvailable;default:return this.book[e]?this.book[e]:this.notAvailable}},progress:function(e){if(e.progress&&e.length)if(e.progress.toLowerCase().trim()==="finished"){const i=this.timeStringToSeconds(e.length);return"<div>Finished ( "+this.secondsToTimeString(i,!0)+" )</div>"}else{const i=this.timeStringToSeconds(e.progress),t=this.timeStringToSeconds(e.length),o=t-i;return this.secondsToTimeString(o,!0)+" <strong class='audible-orange-text'>/</strong> "+this.secondsToTimeString(t,!0)}else return e.progress?"<div>"+e.progress+" ("+this.notAvailable+")</div>":e.length?"<div>Length: "+e.length+"</div>":"<div>"+e.progress+"</div>"}}},na={class:"sort-values-container"},ra=["content"],aa=["innerHTML","content"],la={key:1};function ca(e,i,t,o,s,r){const l=ye,u=ve,h=N("tippy");return n(),a("div",na,[(e.$store.getters.sortBy==="myRating"||e.$store.getters.sortBy==="rating"||e.$store.getters.sortBy==="ratings")&&r.sortContents()!=="\xA0"?S((n(),a("div",{key:0,class:"ratings",content:(e.$store.getters.sortBy!=="myRating"&&t.book.myRating?"My rating: "+t.book.myRating+"<br>":"")+(e.$store.getters.sortBy==="myRating"&&t.book.rating?"Average rating: "+t.book.rating+"<br>":"")+(e.$store.getters.sortBy==="myRating"&&t.book.ratings?"Number of ratings: "+t.book.ratings+"<br>":"")},[f(l,{prioritizeRatingsText:e.$store.getters.sortBy==="ratings",size:10,rating:r.sortContents(),number:!0,ratingsText:!1,ratings:(e.$store.getters.sortBy==="rating"||e.$store.getters.sortBy==="ratings")&&t.book.ratings?t.book.ratings:null},null,8,["prioritizeRatingsText","rating","ratings"])],8,ra)),[[h,{trigger:"click mouseenter",allowHTML:!0}]]):e.$store.getters.sortBy!=="favorite"?S((n(),a("div",{key:1,class:k("sort-"+e.$store.getters.sortBy),innerHTML:r.sortContents(),content:(e.$store.getters.sortBy==="progress"?t.book.progress:"")+""},null,10,aa)),[[h,{trigger:"click mouseenter",allowHTML:!0}]]):(n(),a("div",{key:2,class:k("sort-"+e.$store.getters.sortBy)},[t.book.favorite?(n(),m(u,{key:0})):(n(),a("span",la,"\xA0"))],2))])}var ua=M(sa,[["render",ca]]);const da={name:"book",props:["book","index","sortValuesEnabled","imageLoaded"],mixins:[q],data:function(){return{store:this.$store.state,sticky:this.$store.state.sticky,smartLink:"https://smart.link/o3waqx4wg1gdn?asin="}},methods:{playSample:function(e,i){this.$store.commit("prop",{key:"audioPlayer.audio",value:{from:"book",route:this.$route,book:e,index:i}})}}},J=e=>(z("data-v-7a742589"),e=e(),A(),e),ha={class:"ale-cover"},ga={key:1,class:"ale-play-sample cloud-player-icon"},fa=["content"],ma={class:"info-icons-wrapper"},pa={key:0,class:"favorite-marker"},ya=J(()=>c("span",null,"favorite",-1)),_a={key:1,class:"finished-marker"},ba=J(()=>c("span",null,"finished",-1)),ka={key:2,class:"plus-catalog-marker"},va={key:0},Ma={key:1},Sa=J(()=>c("span",null,"catalog",-1)),wa={key:3,class:"kindle-marker"},Ia=J(()=>c("span",null,"In my kindle",-1)),La={class:"ale-info-indicator"},$a={key:1,class:"ale-info-indicator not-in-library"},Ta={key:2,class:"placeholder-cover"},xa={class:"cover-content"},Da={key:0,class:"title"},Na={key:1,class:"author"},Ca={key:3,class:"cover-img-wrapper"},ja=["src"];function za(e,i,t,o,s,r){const l=ua,u=je,h=oe,y=ve,b=Kr,v=qr,T=ue,D=ce,B=Ur,U=ie,V=N("tippy");return n(),a("div",{class:k(["details-inner-wrap",{"not-in-library":t.book.notInLibrary}])},[t.sortValuesEnabled?(n(),m(l,{key:0,book:t.book},null,8,["book"])):d("",!0),c("div",ha,[t.book.sample&&e.sticky.bookDetailSettings.playButton?(n(),a("div",{key:0,class:"ale-play-sample",onClick:i[0]||(i[0]=Y=>r.playSample(t.book,t.index))},[c("div",null,[f(u)])])):t.book.asin&&e.sticky.bookDetailSettings.cloudPlayer?(n(),a("div",ga,[f(h,{size:20,book:t.book,icon:!0,tooltip:!1,noBG:!0},null,8,["book"])])):d("",!0),c("div",{class:"ale-click-wrap",onClick:i[3]||(i[3]=Y=>t.book.asin?e.$compEmitter.emit("book-clicked",t.book.asin):null)},[t.book.blurb&&e.sticky.bookDetailSettings.blurb?S((n(),a("div",{key:0,class:"blurb-tooltip",content:t.book.blurb},null,8,fa)),[[V,{delay:150,placement:"left",flipBehavior:["left","right","top","bottom"],maxWidth:300}]]):d("",!0),c("div",ma,[t.book.favorite&&e.sticky.bookDetailSettings.favorite?(n(),a("div",pa,[c("span",null,[f(y)]),ya])):d("",!0),t.book.progress==="Finished"&&e.sticky.bookDetailSettings.finished?(n(),a("div",_a,[c("span",null,[f(b)]),ba])):d("",!0),t.book.fromPlusCatalog&&e.sticky.bookDetailSettings.plusCatalog?(n(),a("div",ka,[t.book.unavailable?(n(),a("span",va,[f(v)])):(n(),a("span",Ma,[f(T)])),Sa])):d("",!0),t.book.whispersync==="owned"&&e.sticky.bookDetailSettings.whispersync?(n(),a("div",wa,[c("span",null,[f(D)]),Ia])):d("",!0)]),c("div",La,[c("div",null,[f(B)])]),t.book.notInLibrary?(n(),a("div",$a,[c("div",null,[f(U)])])):d("",!0),t.book.cover?(n(),a("div",Ca,[f($e,{name:"fade"},{default:$(()=>[S(c("img",{onLoad:i[1]||(i[1]=Y=>e.$emit("update:imageLoaded",!0)),class:k(["ale-cover-image",{loaded:t.imageLoaded}]),crossorigin:"anonymous",draggable:"false",onTouchstart:i[2]||(i[2]=Le(()=>{},["prevent"])),src:e.makeCoverUrl(t.book.cover,280),alt:""},null,42,ja),[[ne,t.imageLoaded]])]),_:1})])):(n(),a("div",Ta,[c("div",xa,[t.book.titleShort||t.book.title?(n(),a("div",Da,p(t.book.titleShort||t.book.title),1)):d("",!0),t.book.authors?(n(),a("div",Na,p(t.book.authors[0].name),1)):d("",!0)])]))])])],2)}var Aa=M(da,[["render",za],["__scopeId","data-v-7a742589"]]);const Ea={name:"aleBooks",mixins:[F],data:function(){return{imageLoaded:!1}}};function Ba(e,i,t,o,s,r){const l=Aa,u=ee;return n(),a("div",{class:k(["ale-books grid-view",{"sort-values-on":e.$store.getters.sortValues&&e.$store.getters.sortBy!=="bookNumbers"&&e.$store.getters.sortBy!=="seriesOrder"}]),ref:"booksWrapper"},[(n(!0),a(C,null,j(e.$store.state.chunkCollection,(h,y)=>(n(),m(u,{class:k(["ale-book",{"details-open":!!e.$route.query.book&&e.$route.query.book===h.asin,"image-loaded":e.imageLoaded}]),"data-asin":h.asin,key:"book:"+h.asin},{default:$(()=>[f(l,{book:h,index:y,sortValuesEnabled:e.$store.getters.sortValues,imageLoaded:e.imageLoaded,"onUpdate:imageLoaded":i[0]||(i[0]=b=>e.imageLoaded=b)},null,8,["book","index","sortValuesEnabled","imageLoaded"])]),_:2},1032,["class","data-asin"]))),128))],2)}var Oa=M(Ea,[["render",Ba]]);const Pa={viewBox:"0 0 576 512",width:"1.2em",height:"1.2em"},Ra=c("path",{fill:"currentColor",d:"M352 144c0-44.2 35.8-80 80-80s80 35.8 80 80v48c0 17.7 14.3 32 32 32s32-14.3 32-32v-48C576 64.5 511.5 0 432 0S288 64.5 288 144v48H64c-35.3 0-64 28.7-64 64v192c0 35.3 28.7 64 64 64h320c35.3 0 64-28.7 64-64V256c0-35.3-28.7-64-64-64h-32v-48z"},null,-1),Wa=[Ra];function Ha(e,i){return n(),a("svg",Pa,Wa)}var Ua={name:"fa6-solid-lock-open",render:Ha};const Ya={name:"contextMenuReminder",methods:{hide:function(){this.$store.commit("stickyProp",{key:"contextMenuReminder",value:!1})}}},Fa=e=>(z("data-v-5ea7bcfa"),e=e(),A(),e),Va={class:"reminder slide-in-blurred-top"},Qa=Fa(()=>c("span",null,[I("You can open this gallery page any time from "),c("br"),I("the browser context menu (right-click) ")],-1)),qa=["src"];function Za(e,i,t,o,s,r){const l=ze;return n(),a("div",Va,[Qa,c("div",null,[c("img",{src:e.contextMenuImage,alt:""},null,8,qa)]),f(l,{class:"hide",onClick:r.hide},null,8,["onClick"])])}var Ga=M(Ya,[["render",Za],["__scopeId","data-v-5ea7bcfa"]]),Xa={mixins:[F],methods:{prepCategoriesSubPage:function(e){if(this.$route.name==="category"){const i=this,t={parent:this.$route.params.parent,child:this.$route.params.child,book:this.$route.params.query};let o=_.filter(this.subPageSource.collection,function(s){if(s.categories){const r=s.categories[0]?i.slugify(s.categories[0].name):!1,l=s.categories[1]?i.slugify(s.categories[1].name):!1;if(r&&l&&t.parent===r&&t.child===l)return!0;if(r&&t.parent===r&&!t.child)return!0}});if(o&&(t.parent||t.child)){const s=o[0].categories[0]?o[0].categories[0].name:null,r=o[0].categories[1]?o[0].categories[1].name:null;s&&(this.pageTitle=s),r&&t.child&&(this.pageSubTitle=r)}this.$store.commit("prop",{key:"pageCollection",value:o}),this.collectionSource="pageCollection"}}}},Ja={mixins:[F],methods:{prepCollectionsSubPage:function(e){if(this.$route.name==="collection"){let i=this.$route.params.collection,t=_.find(this.$store.state.library.collections,{id:i});if(t){let o=_.filter(this.$store.state.library.books,function(s){return _.includes(t.books,s.asin)});(t.title||t.description)&&(t.title&&(this.pageTitle=t.title),t.description&&(this.pageSubTitle=t.description)),this.$store.commit("prop",{key:"pageCollection",value:o}),this.collectionSource="pageCollection"}}}}},Ka={methods:{prepSeriesSubPage:function(){if(this.$route.name==="series"){const e=this.$route.params.series,i=_.find(this.$store.state.library.series,{asin:e}),t=i&&i.books&&i.books.length>0&&this.subPageSource.name=="library";t?(this.$store.commit("addListRenderingOpts",{listName:"sort",option:{active:!1,current:!1,key:"seriesOrder",label:"Series order",type:"sort",tippy:"The infinite symbol (\u221E) means the book doesn't have a number"},activate:!(this.$route.query.sort&&this.$route.query.sort!=="seriesOrder"),sortValues:!0,splice:3}),this.$store.commit("addListRenderingOpts",{listName:"filter",option:{type:"divider",key:"divider-series-filters"},splice:3}),this.$store.commit("addListRenderingOpts",{listName:"filter",option:{active:!0,type:"filterExtras",label:"Not In Library",key:"notInLibrary",group:"filterExtras",condition:function(s){return _.get(s,"notInLibrary")}},splice:3}),this.$store.commit("addListRenderingOpts",{listName:"filter",option:{active:!0,type:"filterExtras",label:"In Library",key:"inLibrary",group:"filterExtras",condition:function(s){return!_.get(s,"notInLibrary")}},splice:3})):this.$store.commit("updateListRenderingOpts",{listName:"sort",key:"bookNumbers",active:!1,sortValues:!0});let o=[];if(t){const s=_.get(i,"allBooks");let r=0;o=_.map(s,l=>{if(++r,l.notInLibrary){const u=_.merge({added:r,series:[{asin:i.asin,name:i.name,bookNumbers:l.bookNumbers}]},l);return u.asin||(u.asin=i.asin+"-"+r+"-temp-asin"),u}else{let u=_.find(this.subPageSource.collection,{asin:l.asin});return u=_.cloneDeep(u),u.added=r,u}})}else o=_.filter(this.subPageSource.collection,function(s){return _.find(s.series,{asin:e})});if(o.length>0){let s=null;_.each(o,r=>{const l=_.find(_.get(r,"series"),u=>(u=u||{},e===u.asin&&!!u.name));if(l)return s=l.name,!1}),s&&(this.pageTitle=s),t||(this.pageSubTitle="Couldn't find series order: using number sort")}this.$store.commit("prop",{key:"pageCollection",value:o}),this.collectionSource="pageCollection"}}}},el={mixins:[F],methods:{prepNarratorsSubPage:function(){const e=this;if(this.$route.name==="narrator"){const i=this.$route.params.narrator;let t=_.filter(this.subPageSource.collection,function(o){if(o.narrators)return _.find(o.narrators,function(s){return e.slugify(s.name)===i})});if(t.length>0){const o=_.find(t[0].narrators,function(s){return e.slugify(s.name)===i});o&&(this.pageTitle=o.name)}this.$store.commit("prop",{key:"pageCollection",value:t}),this.collectionSource="pageCollection"}}}},tl={methods:{prepAuthorsSubPage:function(){if(this.$route.name==="author"){const e=this.$route.params.author;let i=_.filter(this.subPageSource.collection,function(t){if(t.authors)return _.find(t.authors,function(o){return o.url===e})});if(i.length>0){const t=_.find(i[0].authors,function(o){return o.url===e});t&&(this.pageTitle=t.name)}this.$store.commit("prop",{key:"pageCollection",value:i}),this.collectionSource="pageCollection"}}}},il={mixins:[F],methods:{prepPublishersSubPage:function(){const e=this;if(this.$route.name==="publisher"){const i=this.$route.params.publisher;let t=_.filter(this.subPageSource.collection,function(o){if(o.publishers)return _.find(o.publishers,function(s){return e.slugify(s.name)===i})});if(t.length>0){const o=_.find(t[0].publishers,function(s){return e.slugify(s.name)===i});o&&(this.pageTitle=o.name)}this.$store.commit("prop",{key:"pageCollection",value:t}),this.collectionSource="pageCollection"}}}},ol={mixins:[F],methods:{prepWishlist:function(e){this.$route.name==="wishlist"&&(this.$store.commit("prop",{key:"pageCollection",value:this.$store.state.library.wishlist}),this.collectionSource="pageCollection")}}},sl={methods:{updateListRenderingOptions:function(){const e=this;let i={scope:[{active:!0,key:"title",weight:15},{active:!0,key:"authors.name",weight:5},{active:!0,key:"narrators.name",weight:5},{active:!0,key:"series.name",weight:10},{active:!1,key:"categories.name",weight:1},{active:!1,key:"tags.name",weight:1},{active:!1,key:"publishers.name",weight:1},{active:!1,key:"blurb",weight:1},{active:!1,key:"summary",weight:1}],filter:[{active:!0,type:"filter",label:"Not started",key:"notStarted",condition:function(t){return!t.progress}},{active:!0,type:"filter",label:"Started",key:"started",condition:function(t){return!!(t.progress&&!t.progress.toLowerCase().match("finished"))},excludeFromWishlist:!0},{active:!0,type:"filter",label:"Finished",key:"finished",condition:function(t){return!!(t.progress&&t.progress.toLowerCase().match("finished"))},excludeFromWishlist:!0},{active:!1,type:"filterExtras",label:"In series",key:"inseries",group:"filterExtras",condition:function(t){return t.series}},{active:!1,type:"filterExtras",label:"Not in series",key:"not-inseries",group:"filterExtras",condition:function(t){return!t.series}},{type:"divider",key:"divider1.1"},{active:!1,type:"filterExtras",label:"Not from plus catalog",key:"not-from-plus-catalog",group:"filterExtras",condition:function(t){return!t.fromPlusCatalog}},{active:!1,type:"filterExtras",label:"Plus catalog: Available",key:"plus-catalog-available",group:"filterExtras",condition:function(t){return t.fromPlusCatalog&&!t.unavailable},tippy:"It is possible for this status to change after last gallery update..."},{active:!1,type:"filterExtras",label:"Plus catalog: Unavailable",excludeFromWishlist:!0,key:"plus-catalog-unavailable",group:"filterExtras",condition:function(t){return t.fromPlusCatalog&&t.unavailable},tippy:"Books that are from the plus catalog, but they are locked. Conditions: a book left the plus catalog or inactive membership."},{type:"divider",key:"divider1.3"},{active:!1,type:"filterExtras",label:"Store page available",key:"store-page-available",group:"filterExtras",condition:function(t){return!(t.storePageChanged||t.storePageMissing)}},{active:!1,type:"filterExtras",label:"Store page unavailable",key:"store-page-unavailable",group:"filterExtras",condition:function(t){return t.storePageChanged||t.storePageMissing},tippy:"Store page has been removed or changed after it was added."},{type:"divider",key:"divider1.4",excludeFromWishlist:!0},{active:!1,type:"filterExtras",label:"Favorites: include",key:"favorites",excludeFromWishlist:!0,group:"filterExtras",condition:function(t){return t.favorite}},{active:!1,type:"filterExtras",label:"Favorites: exclude",key:"favorites-not",excludeFromWishlist:!0,group:"filterExtras",condition:function(t){return!t.favorite}},{type:"divider",key:"divider1.4.1",excludeFromWishlist:!0},{active:!1,type:"filterExtras",label:"Books I have rated",excludeFromWishlist:!0,key:"rated-by-me",group:"filterExtras",condition:function(t){return t.myRating}},{active:!1,type:"filterExtras",label:"Books I haven't rated",excludeFromWishlist:!0,key:"not-rated-by-me",group:"filterExtras",condition:function(t){return!t.myRating}},{type:"divider",key:"divider1.4.2",excludeFromWishlist:!0},{active:!1,type:"filterExtras",label:"New books",excludeFromWishlist:!0,key:"new-books",group:"filterExtras",condition:function(t){return t.isNew},tippy:"Most recent additions."},{type:"divider",key:"divider2.0"},{active:!1,type:"filterExtras",label:"Full cast: include",key:"full-cast-include",group:"filterExtras",condition:function(t){return _.find(t.narrators,function(o){return o.name.match(/full cast/im)})}},{active:!1,type:"filterExtras",label:"Full cast: exclude",key:"full-cast-exclude",group:"filterExtras",condition:function(t){return!_.find(t.narrators,function(o){return o.name.match(/full cast/im)})}},{type:"divider",key:"divider1.9"},{active:!1,excludeFromWishlist:!0,type:"filterExtras",label:"Whisperync: owned",key:"whispersync-owned",group:"filterExtras",condition:function(t){return t.whispersync==="owned"}},{active:!1,type:"filterExtras",label:"Whispersync: available",key:"whispersync-available",group:"filterExtras",condition:function(t){return t.whispersync==="available"}},{active:!1,excludeFromWishlist:!0,type:"filterExtras",label:"Whisperync: available + owned",key:"whispersync-owned-or-available",group:"filterExtras",condition:function(t){return t.whispersync}},{active:!1,type:"filterExtras",label:"Whispersync: unavailable",key:"whispersync-false",group:"filterExtras",tippy:"Either unavailable or unkown...",condition:function(t){return!t.whispersync}},{excludeFromWishlist:!0,type:"divider",key:"divider-archived"},{active:!1,excludeFromWishlist:!0,type:"filterExtras",label:"Archived",key:"archived",group:"filterExtras",condition:function(t){return t.archived}},{active:!1,excludeFromWishlist:!0,type:"filterExtras",label:"Not archived",key:"not-archived",group:"filterExtras",condition:function(t){return!t.archived}},{type:"divider",key:"divider2.2"},{active:!1,type:"filterExtras",label:"Length",key:"length",group:"filterExtras",range:!0,rangeMinDist:1,rangeSuffix:"h",rangeMin:function(){return 0},rangeMax:function(){let t=e.$store.getters.collectionSource,o=_.maxBy(t,function(s){return e.timeStringToSeconds(s.length)});return o?Math.ceil(e.timeStringToSeconds(o.length)/3600):0},condition:function(t){if(t.length){let o=this.range[0],s=this.range[1],r=e.timeStringToSeconds(t.length)/3600;return r>=o&&r<=s}}},{type:"divider",key:"divider2.1"},{active:!1,type:"filterExtras",label:"Narrators",key:"narrators",group:"filterExtras",range:!0,rangeMinDist:0,rangeSuffix:"",rangeMin:function(){return 1},rangeMax:function(){let t=e.$store.getters.collectionSource,o=_.maxBy(t,function(s){let r=_.filter(s.narrators,function(l){return l.name&&!l.name.match("full cast")});return!r.length&&s.narrators&&s.narrators.length&&(r=s.narrators),s.narrators?s.narrators.length:0});return o?o.narrators.length:0},condition:function(t){if(t.narrators){let o=_.find(t.narrators,function(u){return u.name.match("full cast")}),s=this.range[0],r=this.range[1],l=t.narrators.length;return o&&l===1&&(l=r),l>=s&&l<=r}}},{type:"divider",key:"divider3",excludeFromWishlist:!0},{active:!1,type:"filterExtras",excludeFromWishlist:!0,label:"books in series",key:"booksinseries",group:"filterExtras",range:!0,rangeMinDist:0,rangeSuffix:"",tippy:"Number of owned books in series",rangeMin:function(){return 1},rangeMax:function(){let t=_.filter(e.$store.getters.collectionSource,"series"),o=1;return _.each(t,function(s){let r=_.maxBy(s.series,function(l){let u=_.find(e.$store.state.library.series,{asin:l.asin});if(u&&u.books)return u.books.length});if(r){const l=_.find(e.$store.state.library.series,{asin:r.asin}).books.length;o<l&&(o=l)}}),o},condition:function(t){if(t.series){let o=this.range[0],s=this.range[1],r=!1;return _.each(t.series,function(l){const u=_.find(e.$store.state.library.series,{asin:l.asin});if(u&&u.books.length>=o&&u.books.length<=s)return r=!0,!1}),r}}},{type:"divider",key:"divider4"},{active:!1,type:"filterExtras",label:"Average rating",key:"rating",group:"filterExtras",range:!0,rangeMinDist:0,rangeSuffix:"",rangeMin:function(){let t=e.$store.getters.collectionSource,o=_.minBy(t,function(s){if(s.rating)return parseFloat(s.rating)});return o?parseFloat(o.rating):0},rangeMax:function(){let t=e.$store.getters.collectionSource,o=_.maxBy(t,function(s){if(s.rating)return parseFloat(s.rating)});return o?parseFloat(o.rating):0},condition:function(t){if(t.rating){let o=this.range[0],s=this.range[1],r=parseFloat(t.rating);return r>=o&&r<=s}},rangeInterval:.1},{type:"divider",key:"divider5.2"},{active:!1,type:"filterExtras",label:"Ratings",key:"number-of-ratings",group:"filterExtras",range:!0,rangeMinDist:1,rangeSuffix:"",rangeMin:function(){let t=e.$store.getters.collectionSource,o=_.minBy(t,function(s){if(s.ratings)return parseFloat(s.ratings)});return o?o.ratings:0},rangeMax:function(){let t=e.$store.getters.collectionSource,o=_.maxBy(t,function(s){if(s.ratings)return parseFloat(s.ratings)});return o?o.ratings:0},condition:function(t){if(t.ratings){let o=this.range[0],s=this.range[1],r=parseFloat(t.ratings);return r>=o&&r<=s}}},{type:"divider",key:"divider5",excludeFromWishlist:!0},{active:!1,type:"filterExtras",label:"My rating",excludeFromWishlist:!0,key:"myrating",group:"filterExtras",range:!0,rangeMinDist:0,rangeSuffix:"",rangeInterval:1,rangeMarks:function(t){return!0},rangeMin:function(){let t=e.$store.getters.collectionSource,o=_.minBy(t,function(s){if(s.myRating)return parseFloat(s.myRating)});return o?parseFloat(o.myRating):0},rangeMax:function(){let t=e.$store.getters.collectionSource,o=_.maxBy(t,function(s){if(s.myRating)return parseFloat(s.myRating)});return o?parseFloat(o.myRating):0},condition:function(t){if(t.myRating){let o=this.range[0],s=this.range[1],r=parseFloat(t.myRating);return r>=o&&r<=s}},tooltipFormatter:function(t){switch(t){case 1:return t+" (Not for me)";case 2:return t+" (It\u2019s okay)";case 3:return t+" (Pretty good)";case 4:return t+" (It\u2019s great)";case 5:return t+" (I love it)";default:return 0}}},{type:"divider",key:"divider5.1"},{active:!1,type:"filterExtras",label:"Added",key:"added",group:"filterExtras",range:!0,rangeMinDist:1,rangeSuffix:"",rangeMin:function(){let t=e.$store.getters.collectionSource,o=_.minBy(t,function(s){if(s.added)return parseFloat(s.added)});return o?parseFloat(o.added):0},rangeMax:function(){let t=e.$store.getters.collectionSource,o=_.maxBy(t,function(s){if(s.added)return parseFloat(s.added)});return o?parseFloat(o.added):0},condition:function(t){if(t.added){let o=this.range[0],s=this.range[1],r=parseFloat(t.added);return r>=o&&r<=s}},rangeInterval:1,tippy:"Low number = old book <br> High number = new book <br><br> For example: if you pick the range 1-10 you get 10 of the oldest books based on when they were added."},{type:"divider",key:"divider8.8"},{active:!1,type:"filterExtras",label:"Authors",key:"authors-by-name",group:"filterExtras",dropdownOpts:function(t){let o=[];return _.each(e.$store.getters.collectionSource,function(s){s.authors&&o.push(_.map(s.authors,"name"))}),o=_.union(_.flatten(o)).sort(),o},value:[],condition:function(t){if(t.authors){let o=_.map(t.authors,"name"),s=this.value;if(s.length>0){let r=!1;return _.each(s,function(l){if(_.includes(o,l))return r=!0,!1}),r}}}},{type:"divider",key:"divider8.9"},{active:!1,type:"filterExtras",label:"Narrators",key:"narrators-by-name",group:"filterExtras",dropdownOpts:function(t){let o=[];return _.each(e.$store.getters.collectionSource,function(s){s.narrators&&o.push(_.map(s.narrators,"name"))}),o=_.union(_.flatten(o)).sort(),o},value:[],condition:function(t){if(t.narrators){let o=_.map(t.narrators,"name"),s=this.value;if(s.length>0){let r=!1;return _.each(s,function(l){if(_.includes(o,l))return r=!0,!1}),r}}}},{type:"divider",key:"divider9.0"},{active:!1,type:"filterExtras",label:"Tags",key:"tags",group:"filterExtras",dropdownOpts:function(t){let o=[];return _.each(e.$store.getters.collectionSource,function(s){s.tags&&o.push(_.map(s.tags,"name"))}),o=_.union(_.flatten(o)).sort(),o},value:[],condition:function(t){if(t.tags){let o=_.map(t.tags,"name"),s=this.value;if(s.length>0){let r=!1;return _.each(s,function(l){if(_.includes(o,l))return r=!0,!1}),r}}}},{type:"divider",key:"divider9.1"},{active:!1,type:"filterExtras",label:"Language",key:"language",group:"filterExtras",dropdownOpts:function(t){let o=[];return _.each(e.$store.getters.collectionSource,function(s){s.language&&o.push(s.language)}),o=_.union(o).sort(),o},value:[],condition:function(t){if(t.language){let o=this.value;return _.includes(o,t.language)}}},{type:"divider",key:"divider9.4"},{active:!1,type:"filterExtras",label:"Series by name",key:"series-by-name",group:"filterExtras",dropdownOpts:function(t){let o=[];return _.each(e.$store.getters.collectionSource,function(s){s.series&&o.push(_.map(s.series,"name"))}),o=_.union(_.flatten(o)).sort(),o},value:[],condition:function(t){if(t.series){let o=_.map(t.series,"name"),s=this.value;if(s.length>0){let r=!1;return _.each(s,function(l){if(_.includes(o,l))return r=!0,!1}),r}}}},{type:"divider",key:"divider9.5"},{active:!1,type:"filterExtras",label:"Format",key:"format",group:"filterExtras",dropdownOpts:function(t){let o=[];return _.each(e.$store.getters.collectionSource,function(s){s.format&&o.push(s.format)}),o=_.union(o).sort(),o},value:[],condition:function(t){if(t.format)return t.format?_.includes(this.value,t.format):!1}},{type:"divider",key:"divider9.6"},{active:!1,type:"filterExtras",label:"Publishers",key:"publishers-by-name",group:"filterExtras",dropdownOpts:function(t){let o=[];return _.each(e.$store.getters.collectionSource,function(s){s.publishers&&o.push(_.map(s.publishers,"name"))}),o=_.union(_.flatten(o)).sort(),o},value:[],condition:function(t){if(t.publishers){let o=_.map(t.publishers,"name"),s=this.value;if(s.length>0){let r=!1;return _.each(s,function(l){if(_.includes(o,l))return r=!0,!1}),r}}}},{type:"divider",key:"divider9.7"},{active:!1,type:"filterExtras",label:"Collections",key:"collections",group:"filterExtras",excludeFromWishlist:!0,dropdownTrackBy:"valueProp",dropdownLabel:"label",dropdownValueProp:"valueProp",dropdownOpts:function(t){if(e.$store.state.library.collections){let o=_.map(e.$store.state.library.collections,function(s){return{label:s.title,valueProp:s.id}});return _.sortBy(o,"title")}else return[]},value:[],condition:function(t){const o=_.get(this,"value")||[],s=_.get(t,"collectionIds",[]),r=_.get(e.$store.state,"library.collections",[]);if(o.length&&s.length&&r.length){let l=!1;return _.each(o,u=>{if(_.includes(t.collectionIds,u))return l=!0,!1}),l}}}],sort:[{active:!1,sticky:!0,key:"sortValues",label:"Show sort values",type:"sortExtras",tippy:"Shows the active sorter's value on top of the cover in the grid view."},{active:!1,key:"randomize",label:"Randomize",type:"sortExtras",tippy:"Sorting is ignored and the order is randomized."},{type:"divider",key:"divider1"},{active:!0,current:!0,key:"added",label:"Added",type:"sort",tippy:'<small>&#9650;</small> Old at the top <br><small style="display: inline-block; transform: rotate(180deg);">&#9650;</small> New at the top'},{active:!0,current:!1,key:"title",label:"Title",type:"sort"},{active:!0,current:!1,key:"authors.name",label:"Author",type:"sort"},{active:!0,current:!1,key:"narrators.name",label:"Narrator",type:"sort"},{active:!0,current:!1,key:"narratorsNumber",label:"Number of narrators",type:"sort"},{active:!1,current:!1,key:"length",label:"Length",type:"sort"},{active:!0,current:!1,key:"series",label:"Series",type:"sort",tippy:"Sorts books by the series name alphabetically."},{type:"divider",key:"divider2"},{active:!1,current:!1,key:"releaseDate",label:"Release date",type:"sort"},{active:!1,current:!1,key:"rating",label:"Average rating",type:"sort"},{active:!1,current:!1,key:"ratings",label:"Number of ratings",type:"sort"},{active:!1,current:!1,key:"myRating",label:"My rating",type:"sort",excludeFromWishlist:!0},{active:!0,current:!1,key:"publishers.name",label:"Publishers",type:"sort"},{type:"divider",key:"divider3"},{active:!1,current:!1,key:"progress",label:"Progress",type:"sort",excludeFromWishlist:!0},{active:!1,current:!1,key:"favorite",label:"Favorite",type:"sort",excludeFromWishlist:!0},{active:!0,current:!1,key:"categories",label:"Categories",type:"sort"},{active:!0,current:!1,key:"tags.name",label:"Tags",type:"sort"},{active:!1,current:!1,key:"isNew",label:"New books",type:"sort",excludeFromWishlist:!0},{active:!1,current:!1,key:"archived",label:"Archived",type:"sort",excludeFromWishlist:!0},{type:"divider",key:"divider4"},{active:!0,current:!1,key:"language",label:"Language",type:"sort"},{active:!0,current:!1,key:"format",label:"Format",type:"sort"},{active:!1,current:!1,key:"whispersync",label:"Whispersync",type:"sort"},{active:!1,current:!1,key:"fromPlusCatalog",label:"From plus catalog",type:"sort"},{active:!1,current:!1,key:"unavailable",label:"Plus catalog: Unavailable",type:"sort"},{active:!1,current:!1,key:"downloaded",label:"Downloaded",type:"sort",excludeFromWishlist:!0},{type:"divider",key:"divider5"},{active:!1,current:!1,key:"storePageMissing",label:"Store page missing",type:"sort",tippy:"The original store page could not be found. There may be a new store page that replaced it."},{active:!1,current:!1,key:"storePageChanged",label:"Store page changed",type:"sort",tippy:"There is a store page that exists, but it is for a different version of the book."},{active:!1,current:!1,key:"isbn10",label:"Isbn 10",type:"sort",excludeFromWishlist:!0},{active:!1,current:!1,key:"isbn13",label:"Isbn 13",type:"sort",excludeFromWishlist:!0},{active:!0,current:!1,key:"bookNumbers",label:"Book Numbers",type:"sort",tippy:'<strong>This is only a simple number sort.</strong> <br> If you want the correct series order, as listed in Audible, check the series page in the top menu or the "my books in the series" button in book details. <br><br>Click any book cover (or row) to reveal book details. <br><br> The infinite symbol (\u221E) means the book is in a series but does not have a number.'}]};this.removeArchived(i),this.addExcludeDropdowns(i),this.$setListRenderingOpts(i)},addExcludeDropdowns(e){let i=e.filter;const t=_.findIndex(i,"dropdownOpts");i=_.chunk(i,t-1);const o=i[1];_.remove(o,l=>l.type==="divider");const s=_.cloneDeep(o);_.each(s,l=>{l.conditionOriginal=l.condition,l.condition=function(u){return!l.conditionOriginal(u)},l.placeholder="Exclude...",l.key=l.key+"-exclude",l.exclude=!0});let r=_.zip(o,s);_.each(r,(l,u)=>{l.unshift({type:"divider",key:"divider-99999."+u})}),r=_.flatten(r),i[1]=r,e.filter=_.flatten(i)},removeArchived:function(e){if(!this.$store.state.library.collections)return;let i=this.$store.state.library.collections,t=i?_.find(i,{id:"__ARCHIVE"}):null;if(!t||t.books.length<1){let o=["archived","not-archived"];_.remove(e.filter,function(s){return s.key==="divider-archived"||_.includes(o,s.key)}),_.remove(e.sort,function(s){return _.includes(o,s.key)})}}}},Me={exports:{}};(function(e,i){(function(){function t(){var o=window,s=document;if("scrollBehavior"in s.documentElement.style&&o.__forceSmoothScrollPolyfill__!==!0)return;var r=o.HTMLElement||o.Element,l=468,u={scroll:o.scroll||o.scrollTo,scrollBy:o.scrollBy,elementScroll:r.prototype.scroll||v,scrollIntoView:r.prototype.scrollIntoView},h=o.performance&&o.performance.now?o.performance.now.bind(o.performance):Date.now;function y(g){var w=["MSIE ","Trident/","Edge/"];return new RegExp(w.join("|")).test(g)}var b=y(o.navigator.userAgent)?1:0;function v(g,w){this.scrollLeft=g,this.scrollTop=w}function T(g){return .5*(1-Math.cos(Math.PI*g))}function D(g){if(g===null||typeof g!="object"||g.behavior===void 0||g.behavior==="auto"||g.behavior==="instant")return!0;if(typeof g=="object"&&g.behavior==="smooth")return!1;throw new TypeError("behavior member of ScrollOptions "+g.behavior+" is not a valid value for enumeration ScrollBehavior.")}function B(g,w){if(w==="Y")return g.clientHeight+b<g.scrollHeight;if(w==="X")return g.clientWidth+b<g.scrollWidth}function U(g,w){var L=o.getComputedStyle(g,null)["overflow"+w];return L==="auto"||L==="scroll"}function V(g){var w=B(g,"Y")&&U(g,"Y"),L=B(g,"X")&&U(g,"X");return w||L}function Y(g){for(;g!==s.body&&V(g)===!1;)g=g.parentNode||g.host;return g}function Q(g){var w=h(),L,R,W,O=(w-g.startTime)/l;O=O>1?1:O,L=T(O),R=g.startX+(g.x-g.startX)*L,W=g.startY+(g.y-g.startY)*L,g.method.call(g.scrollable,R,W),(R!==g.x||W!==g.y)&&o.requestAnimationFrame(Q.bind(o,g))}function P(g,w,L){var R,W,O,K,Se=h();g===s.body?(R=o,W=o.scrollX||o.pageXOffset,O=o.scrollY||o.pageYOffset,K=u.scroll):(R=g,W=g.scrollLeft,O=g.scrollTop,K=v),Q({scrollable:R,method:K,startTime:Se,startX:W,startY:O,x:w,y:L})}o.scroll=o.scrollTo=function(){if(arguments[0]!==void 0){if(D(arguments[0])===!0){u.scroll.call(o,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:o.scrollX||o.pageXOffset,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:o.scrollY||o.pageYOffset);return}P.call(o,s.body,arguments[0].left!==void 0?~~arguments[0].left:o.scrollX||o.pageXOffset,arguments[0].top!==void 0?~~arguments[0].top:o.scrollY||o.pageYOffset)}},o.scrollBy=function(){if(arguments[0]!==void 0){if(D(arguments[0])){u.scrollBy.call(o,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:0,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:0);return}P.call(o,s.body,~~arguments[0].left+(o.scrollX||o.pageXOffset),~~arguments[0].top+(o.scrollY||o.pageYOffset))}},r.prototype.scroll=r.prototype.scrollTo=function(){if(arguments[0]!==void 0){if(D(arguments[0])===!0){if(typeof arguments[0]=="number"&&arguments[1]===void 0)throw new SyntaxError("Value could not be converted");u.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left:typeof arguments[0]!="object"?~~arguments[0]:this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top:arguments[1]!==void 0?~~arguments[1]:this.scrollTop);return}var g=arguments[0].left,w=arguments[0].top;P.call(this,this,typeof g=="undefined"?this.scrollLeft:~~g,typeof w=="undefined"?this.scrollTop:~~w)}},r.prototype.scrollBy=function(){if(arguments[0]!==void 0){if(D(arguments[0])===!0){u.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop);return}this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior})}},r.prototype.scrollIntoView=function(){if(D(arguments[0])===!0){u.scrollIntoView.call(this,arguments[0]===void 0?!0:arguments[0]);return}var g=Y(this),w=g.getBoundingClientRect(),L=this.getBoundingClientRect();g!==s.body?(P.call(this,g,g.scrollLeft+L.left-w.left,g.scrollTop+L.top-w.top),o.getComputedStyle(g).position!=="fixed"&&o.scrollBy({left:w.left,top:w.top,behavior:"smooth"})):o.scrollBy({left:L.left,top:L.top,behavior:"smooth"})}}e.exports={polyfill:t}})()})(Me);var nl=Me.exports;nl.polyfill();const rl={name:"GalleryRoot",mixins:[Xa,Ja,Ka,el,tl,il,ol,Z,sl,Be],data:function(){return{loading:!0,collectionSource:"library.books",pageTitle:null,pageSubTitle:null,scrollContainer:null,collapseView:null,realLength:0,prepsCompleted:!1,errorMessage:!1,mountedChildren:!1}},beforeCreate:function(){this.$route.query.view&&this.$store.commit("stickyProp",{key:"viewMode",value:this.$route.query.view})},computed:{galleryStyle:function(){return this.$store.state.searchOptOpenHeight?{overflow:"hidden",height:this.$store.state.searchOptOpenHeight+"px"}:!1}},created:function(){this.$route.name==="library"?(this.pageTitle="Library",this.pageSubTitle=null):this.$route.name==="wishlist"&&(this.pageTitle="Wishlist",this.pageSubTitle=null),this.updateListRenderingOptions(),this.prepCategoriesSubPage(),this.prepCollectionsSubPage(),this.prepSeriesSubPage(),this.prepNarratorsSubPage(),this.prepAuthorsSubPage(),this.prepPublishersSubPage(),this.prepWishlist(),this.prepsCompleted=!0,this.$compEmitter.on("book-clicked",this.toggleBookDetails)},mounted(){this.$nextTick(function(){this.errorMessage=!0})},beforeUnmount:function(){this.$compEmitter.off("book-clicked",this.toggleBookDetails),this.errorMessage=!1},watch:{"$store.getters.collection":function(){this.$store.commit("chunkCollectionReset"),this.$store.commit("chunkCollectionAdd")},"$route.query.book":function(e){this.$store.state.bookClicked?this.$store.commit("prop",{key:"bookClicked",value:!1}):this.$updateQueries({refresh:!0})}},methods:{childrenMounted:function(){this.$nextTick(function(){const e=this.$route.query.y?parseFloat(this.$route.query.y):0;if(this.$route.query.book){let i=document.querySelector(".ale-books");i.offsetTop;let t=this.$store.state.sticky.viewMode==="grid",o=t?i.querySelector(".ale-book").getBoundingClientRect().height:i.querySelector("table tbody .ale-row").getBoundingClientRect().height,s=t?i.getBoundingClientRect().width:i.getBoundingClientRect().height,r=Math.floor(s/o)||1,l=_.findIndex(this.$store.getters.collection,{asin:this.$route.query.book}),h=(Math.floor(l/r)+1)*r;this.$store.commit("chunkCollectionAdd",{chunkDistance:h+this.$store.state.chunkDistance}),this.$nextTick(function(){this.mountedChildren=!0})}else if(e||this.$route.query.scrolltop){this.$updateQueries({scrolltop:null});let i=document.querySelector(".ale-books"),t=i.offsetTop,o=this.$store.state.sticky.viewMode==="grid",s=o?i.querySelector(".ale-book").getBoundingClientRect().height:i.querySelector("table tbody .ale-row").getBoundingClientRect().height,r=e+window.innerHeight-t,l=Math.ceil(r/s)||1,u=o?i.getBoundingClientRect().width:i.getBoundingClientRect().height,h=Math.floor(u/s)||1,y=o?l*h:h,b=Math.ceil(y/this.$store.state.chunkDistance)||1;b>1&&this.$store.commit("chunkCollectionAdd",{chunkDistance:this.$store.state.chunkDistance*b}),this.$nextTick(function(){this.$store.state.sticky.viewMode==="grid"?scroll({top:e}):document.querySelector(".list-view-inner-wrap").scroll({top:e}),this.$nextTick(function(){this.mountedChildren=!0})})}else this.$nextTick(function(){this.mountedChildren=!0})})},expandView:function(){this.$updateQueries({book:null},{history:!0}),this.$compEmitter.emit("refresh-page")},gridViewMounted:function(){this.scrollContainer=window,this.scrollContainer.removeEventListener("scroll",this.addDomItems),this.scrollContainer.addEventListener("scroll",this.addDomItems,{passive:!0}),this.childrenMounted()},listViewMounted:function(){this.scrollContainer=document.querySelector(".list-view-inner-wrap"),this.scrollContainer.removeEventListener("scroll",this.addDomItems),this.scrollContainer.addEventListener("scroll",this.addDomItems,{passive:!0}),this.childrenMounted()},viewsbeforeUnmount:function(){this.scrollContainer.removeEventListener("scroll",this.addDomItems),this.mountedChildren=!1},addDomItems:_.throttle(function(e){if(this.$store.state.lazyScroll){const i=this.$store.state.sticky.viewMode==="grid";let t=i?550+window.innerHeight/2:this.scrollContainer.clientHeight/3,o=i?document.documentElement:this.scrollContainer;o.scrollTop+(o.innerHeight||o.clientHeight)+t>=o.scrollHeight&&this.$store.commit("chunkCollectionAdd"),this.$updateQueries({y:o.scrollTop})}},450,{leading:!1,trailing:!0}),searchMounted(){const e=this;this.$nextTick(function(){setTimeout(function(){e.loading=!1},10)})},toggleBookDetails:function(e){this.$store.commit("prop",{key:"bookClicked",value:!0});const i={asin:e},t={asin:_.get(this.$route,"query.book"),newValue:i.asin};!t.newValue==!t.asin&&!t.newValue||(i.asin===t.asin&&(t.newValue=null),t.newValue||(t.newValue=null),this.$updateQueries({book:t.newValue}))}}},al=e=>(z("data-v-c1e9b550"),e=e(),A(),e),ll={id:"ale-gallery"},cl=al(()=>c("span",null,"Expand view",-1)),ul={key:0},dl={key:3},hl={key:4,id:"nothing-here-404"},gl={key:0},fl={key:1,class:"error404"};function ml(e,i,t,o,s,r){const l=Ga,u=Ee,h=Ua,y=Oa,b=Or,v=gr;return n(),a("div",ll,[!e.$store.state.standalone&&e.$store.state.sticky.contextMenuReminder?(n(),m(l,{key:0})):d("",!0),e.prepsCompleted?(n(),m(u,{key:1,collectionSource:e.collectionSource,pageTitle:e.pageTitle,pageSubTitle:e.pageSubTitle,onVnodeMounted:r.searchMounted},null,8,["collectionSource","pageTitle","pageSubTitle","onVnodeMounted"])):d("",!0),e.collapseView?(n(),a("div",{key:2,class:"collection-expanded-btn",onClick:i[0]||(i[0]=(...T)=>r.expandView&&r.expandView(...T))},[c("div",null,[cl,e.realLength?(n(),a("span",ul,"( "+p(e.realLength)+" )",1)):d("",!0),f(h)])])):d("",!0),!e.loading&&e.$store.getters.collection&&e.$store.getters.collection.length>0?(n(),a("div",dl,[c("div",{style:x(r.galleryStyle)},[e.$store.state.sticky.viewMode==="grid"?(n(),m(y,{key:0,onVnodeMounted:r.gridViewMounted,onVnodeBeforeUnmount:r.viewsbeforeUnmount},null,8,["onVnodeMounted","onVnodeBeforeUnmount"])):e.$store.state.sticky.viewMode==="spreadsheet"?(n(),m(b,{key:1,onVnodeMounted:r.listViewMounted,onVnodeBeforeUnmount:r.viewsbeforeUnmount},null,8,["onVnodeMounted","onVnodeBeforeUnmount"])):d("",!0),e.mountedChildren&&e.$route.query.book?(n(),m(v,{key:e.$route.query.book,asin:e.$route.query.book},null,8,["asin"])):d("",!0)],4)])):e.errorMessage?(n(),a("div",hl,[e.$store.getters.searchIsActive&&!e.$store.state.searchCollection.length?(n(),a("h3",gl,"Search: no results")):(n(),a("h3",fl,"404: There's nothing here"))])):d("",!0)])}var Nl=M(rl,[["render",ml],["__scopeId","data-v-c1e9b550"]]);export{Nl as default};
