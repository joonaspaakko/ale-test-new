import{_ as ai}from"./gallery-lazy.bcb33703.js";import{m as jt}from"./gallery-makeCoverUrl.8378190f.js";import{_ as q,i as Oe,r as de,o as a,c as u,b as R,k as re,a as f,t as U,d as k,s as K,h as X,e as P,m as li,u as Ie,x as Le,E as ci,aU as oo,G as ro,J as xi,M as so,X as ao,K as lo,I as co,B as ji,p as ut,F as me,j as _e,n as G,g as le,q as uo,U as Ki,w as ho,T as fo}from"./lodash.21348ef7.js";import{m as xe,_ as go,a as mo,s as en,p as _o,b as vo,c as nt,d as yo}from"./gallery.3d8d6c96.js";import{t as zt}from"./gallery-timeStringToSeconds.9aa0cb6a.js";import{s as tn}from"./gallery-secondsToTimeString.0a6fc9ec.js";import{_ as po,a as bo}from"./gallery-search.64a36aa9.js";import{f as ko}from"./gallery-findSubPageSource.b5dbe77b.js";import"./jquery.050764e9.js";import"./content-script-helpers.e49fc91b.js";import"./howler.22814ddb.js";import"./index.abab9d81.js";import"./tippy.f48e1c74.js";import"./vue.runtime.esm-bundler.a995c875.js";import"./gallery-page-title.2c997460.js";const So={name:"carousel-slide",props:["detailsBook","book","index","mobileWidth","inLibrary","inSeries","inSameSeries","inWishlist","storePageURL"],mixins:[jt],data:function(){return{}},computed:{tag(){return this.mobileWidth?"div":"a"}}},ui=e=>(Ie("data-v-67ee8779"),e=e(),Le(),e),Mo=["data-splide-lazy"],wo={style:{"font-weight":"normal","text-align":"left",padding:"10px","font-size":"13px","line-height":"17px"}},Io={key:0},Lo={style:{"font-size":"1.2em","font-weight":"bold",margin:"0 0 3px 0"}},To=["href"],Eo={key:1},$o={style:{"font-size":"1.1em","font-weight":"normal",margin:"0 0 3px 0"}},Do={key:2},No=ui(()=>f("strong",null,"Authors: ",-1)),Ao={key:3},Co=ui(()=>f("strong",null,"Narrators: ",-1)),xo={key:4},jo=ui(()=>f("strong",null,"Length: ",-1)),zo=["content"],Oo=K(" from this series "),Bo=[Oo],Ro=K(" book in library "),Po=K(" series in library "),Wo={key:0},Uo={key:0},Ho=K(") "),Fo=K(" book in wishlist ");function Yo(e,i,t,n,o,r){const s=Oe("router-link"),l=Oe("tippy"),c=de("tippy");return a(),u("div",null,[R(l,{tag:"div",ref:"tippy","data-book-index":t.index,"data-book-asin":t.book.asin,class:"carousel-cover-tippy"},{content:re(()=>[f("div",wo,[t.book.title?(a(),u("div",Io,[f("h3",Lo,[f("a",{href:t.storePageURL,target:"_blank",rel:"noopener noreferrer"},U(t.book.title),9,To)])])):k("",!0),t.book.subHeading?(a(),u("div",Eo,[f("h2",$o,U(t.book.subHeading),1)])):k("",!0),t.book.authors?(a(),u("div",Do,[No,K(U(t.book.authors),1)])):k("",!0),t.book.narrators?(a(),u("div",Ao,[Co,K(U(t.book.narrators),1)])):k("",!0),t.book.length?(a(),u("div",xo,[jo,K(U(t.book.length),1)])):k("",!0),f("div",null,[t.inSameSeries?X((a(),u("div",{key:0,class:"carousel-gallery-link not-link in-same-series",content:"This carousel book is in the same series as the one you have book details open on right now: <strong>"+t.detailsBook.title||t.detailsBook.titleShort+"</strong>"},Bo,8,zo)),[[c,{maxWidth:300}]]):k("",!0),t.inLibrary&&t.book.asin?(a(),P(s,{key:1,style:{background:"#1065d9"},class:"carousel-gallery-link",to:{name:"library",query:{book:t.book.asin,refresh:!0}}},{default:re(()=>[Ro]),_:1},8,["to"])):k("",!0),t.inSeries&&t.inSeries.asin?(a(),P(s,{key:2,style:{background:"#ae2753"},class:"carousel-gallery-link",to:{name:"series",params:{series:t.inSeries.asin},query:{subPageSource:"library",refresh:!0,scrolltop:!0}}},{default:re(()=>[Po,t.inSeries.ownedBooksLength?(a(),u("span",Wo,[K(" ("+U(t.inSeries.ownedBooksLength),1),t.inSeries.obj.allBooks?(a(),u("span",Uo,"/"+U(t.inSeries.obj.allBooks.length),1)):k("",!0),Ho])):k("",!0)]),_:1},8,["to"])):k("",!0),t.inWishlist&&t.book.asin?(a(),P(s,{key:3,style:{background:"#dd7100"},class:"carousel-gallery-link",to:{name:"wishlist",query:{book:t.book.asin,refresh:!0}}},{default:re(()=>[Fo]),_:1},8,["to"])):k("",!0)])])]),default:re(()=>[(a(),P(li(r.tag),{class:"cover-wrapper",href:r.tag==="a"?t.storePageURL:null,target:"_blank",rel:"noopener noreferrer",ref:"coverLink"},{default:re(()=>[f("img",{crossorigin:"anonymous",class:"cover","data-splide-lazy":e.makeCoverUrl(t.book.cover,150),alt:""},null,8,Mo)]),_:1},8,["href"]))]),_:1},8,["data-book-index","data-book-asin"])])}var Vo=q(So,[["render",Yo],["__scopeId","data-v-67ee8779"]]);function zi(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Go(e,i,t){return i&&zi(e.prototype,i),t&&zi(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}/*!
 * Splide.js
 * Version  : 4.1.3
 * License  : MIT
 * Copyright: 2022 Naotoshi Fujita
 */var Oi="(prefers-reduced-motion: reduce)",Ze=1,qo=2,et=3,ot=4,yt=5,Tt=6,Nt=7,Qo={CREATED:Ze,MOUNTED:qo,IDLE:et,MOVING:ot,SCROLLING:yt,DRAGGING:Tt,DESTROYED:Nt};function Ae(e){e.length=0}function Pe(e,i,t){return Array.prototype.slice.call(e,i,t)}function J(e){return e.bind.apply(e,[null].concat(Pe(arguments,1)))}var nn=setTimeout,ti=function(){};function Bi(e){return requestAnimationFrame(e)}function Ot(e,i){return typeof i===e}function dt(e){return!hi(e)&&Ot("object",e)}var di=Array.isArray,on=J(Ot,"function"),Be=J(Ot,"string"),pt=J(Ot,"undefined");function hi(e){return e===null}function rn(e){try{return e instanceof(e.ownerDocument.defaultView||window).HTMLElement}catch{return!1}}function bt(e){return di(e)?e:[e]}function pe(e,i){bt(e).forEach(i)}function fi(e,i){return e.indexOf(i)>-1}function Et(e,i){return e.push.apply(e,bt(i)),e}function $e(e,i,t){e&&pe(i,function(n){n&&e.classList[t?"add":"remove"](n)})}function Me(e,i){$e(e,Be(i)?i.split(" "):i,!0)}function kt(e,i){pe(i,e.appendChild.bind(e))}function gi(e,i){pe(e,function(t){var n=(i||t).parentNode;n&&n.insertBefore(t,i)})}function ht(e,i){return rn(e)&&(e.msMatchesSelector||e.matches).call(e,i)}function sn(e,i){var t=e?Pe(e.children):[];return i?t.filter(function(n){return ht(n,i)}):t}function St(e,i){return i?sn(e,i)[0]:e.firstElementChild}var ft=Object.keys;function Ye(e,i,t){return e&&(t?ft(e).reverse():ft(e)).forEach(function(n){n!=="__proto__"&&i(e[n],n)}),e}function gt(e){return Pe(arguments,1).forEach(function(i){Ye(i,function(t,n){e[n]=i[n]})}),e}function ze(e){return Pe(arguments,1).forEach(function(i){Ye(i,function(t,n){di(t)?e[n]=t.slice():dt(t)?e[n]=ze({},dt(e[n])?e[n]:{},t):e[n]=t})}),e}function Ri(e,i){pe(i||ft(e),function(t){delete e[t]})}function we(e,i){pe(e,function(t){pe(i,function(n){t&&t.removeAttribute(n)})})}function Y(e,i,t){dt(i)?Ye(i,function(n,o){Y(e,o,n)}):pe(e,function(n){hi(t)||t===""?we(n,i):n.setAttribute(i,String(t))})}function Je(e,i,t){var n=document.createElement(e);return i&&(Be(i)?Me(n,i):Y(n,i)),t&&kt(t,n),n}function be(e,i,t){if(pt(t))return getComputedStyle(e)[i];hi(t)||(e.style[i]=""+t)}function mt(e,i){be(e,"display",i)}function an(e){e.setActive&&e.setActive()||e.focus({preventScroll:!0})}function ke(e,i){return e.getAttribute(i)}function Pi(e,i){return e&&e.classList.contains(i)}function ve(e){return e.getBoundingClientRect()}function Ve(e){pe(e,function(i){i&&i.parentNode&&i.parentNode.removeChild(i)})}function ln(e){return St(new DOMParser().parseFromString(e,"text/html").body)}function Ee(e,i){e.preventDefault(),i&&(e.stopPropagation(),e.stopImmediatePropagation())}function cn(e,i){return e&&e.querySelector(i)}function mi(e,i){return i?Pe(e.querySelectorAll(i)):[]}function De(e,i){$e(e,i,!1)}function ii(e){return e.timeStamp}function Fe(e){return Be(e)?e:e?e+"px":""}var Mt="splide",_i="data-"+Mt;function lt(e,i){if(!e)throw new Error("["+Mt+"] "+(i||""))}var Re=Math.min,At=Math.max,Ct=Math.floor,_t=Math.ceil,ge=Math.abs;function un(e,i,t){return ge(e-i)<t}function $t(e,i,t,n){var o=Re(i,t),r=At(i,t);return n?o<e&&e<r:o<=e&&e<=r}function Qe(e,i,t){var n=Re(i,t),o=At(i,t);return Re(At(n,e),o)}function ni(e){return+(e>0)-+(e<0)}function oi(e,i){return pe(i,function(t){e=e.replace("%s",""+t)}),e}function vi(e){return e<10?"0"+e:""+e}var Wi={};function Xo(e){return""+e+vi(Wi[e]=(Wi[e]||0)+1)}function dn(){var e=[];function i(s,l,c,d){o(s,l,function(h,m,p){var b="addEventListener"in h,g=b?h.removeEventListener.bind(h,m,c,d):h.removeListener.bind(h,c);b?h.addEventListener(m,c,d):h.addListener(c),e.push([h,m,p,c,g])})}function t(s,l,c){o(s,l,function(d,h,m){e=e.filter(function(p){return p[0]===d&&p[1]===h&&p[2]===m&&(!c||p[3]===c)?(p[4](),!1):!0})})}function n(s,l,c){var d,h=!0;return typeof CustomEvent=="function"?d=new CustomEvent(l,{bubbles:h,detail:c}):(d=document.createEvent("CustomEvent"),d.initCustomEvent(l,h,!1,c)),s.dispatchEvent(d),d}function o(s,l,c){pe(s,function(d){d&&pe(l,function(h){h.split(" ").forEach(function(m){var p=m.split(".");c(d,p[0],p[1])})})})}function r(){e.forEach(function(s){s[4]()}),Ae(e)}return{bind:i,unbind:t,dispatch:n,destroy:r}}var We="mounted",Ui="ready",Ce="move",rt="moved",yi="click",hn="active",fn="inactive",gn="visible",mn="hidden",se="refresh",he="updated",tt="resize",Bt="resized",_n="drag",vn="dragging",yn="dragged",Rt="scroll",qe="scrolled",Zo="overflow",pi="destroy",pn="arrows:mounted",bn="arrows:updated",kn="pagination:mounted",Sn="pagination:updated",bi="navigation:mounted",ki="autoplay:play",Mn="autoplay:playing",Si="autoplay:pause",Mi="lazyload:loaded",wn="sk",In="sh",xt="ei";function ie(e){var i=e?e.event.bus:document.createDocumentFragment(),t=dn();function n(r,s){t.bind(i,bt(r).join(" "),function(l){s.apply(s,di(l.detail)?l.detail:[])})}function o(r){t.dispatch(i,r,Pe(arguments,1))}return e&&e.event.on(pi,t.destroy),gt(t,{bus:i,on:n,off:J(t.unbind,i),emit:o})}function Pt(e,i,t,n){var o=Date.now,r,s=0,l,c=!0,d=0;function h(){if(!c){if(s=e?Re((o()-r)/e,1):1,t&&t(s),s>=1&&(i(),r=o(),n&&++d>=n))return p();l=Bi(h)}}function m(I){I||g(),r=o()-(I?s*e:0),c=!1,l=Bi(h)}function p(){c=!0}function b(){r=o(),s=0,t&&t(s)}function g(){l&&cancelAnimationFrame(l),s=0,l=0,c=!0}function v(I){e=I}function T(){return c}return{start:m,rewind:b,pause:p,cancel:g,set:v,isPaused:T}}function Jo(e){var i=e;function t(o){i=o}function n(o){return fi(bt(o),i)}return{set:t,is:n}}function Ko(e,i){var t=Pt(i||0,e,null,1);return function(){t.isPaused()&&t.start()}}function er(e,i,t){var n=e.state,o=t.breakpoints||{},r=t.reducedMotion||{},s=dn(),l=[];function c(){var g=t.mediaQuery==="min";ft(o).sort(function(v,T){return g?+v-+T:+T-+v}).forEach(function(v){h(o[v],"("+(g?"min":"max")+"-width:"+v+"px)")}),h(r,Oi),m()}function d(g){g&&s.destroy()}function h(g,v){var T=matchMedia(v);s.bind(T,"change",m),l.push([g,T])}function m(){var g=n.is(Nt),v=t.direction,T=l.reduce(function(I,w){return ze(I,w[1].matches?w[0]:{})},{});Ri(t),b(T),t.destroy?e.destroy(t.destroy==="completely"):g?(d(!0),e.mount()):v!==t.direction&&e.refresh()}function p(g){matchMedia(Oi).matches&&(g?ze(t,r):Ri(t,ft(r)))}function b(g,v,T){ze(t,g),v&&ze(Object.getPrototypeOf(t),g),(T||!n.is(Ze))&&e.emit(he,t)}return{setup:c,destroy:d,reduce:p,set:b}}var Wt="Arrow",Ut=Wt+"Left",Ht=Wt+"Right",Ln=Wt+"Up",Tn=Wt+"Down",Hi="rtl",Ft="ttb",Zt={width:["height"],left:["top","right"],right:["bottom","left"],x:["y"],X:["Y"],Y:["X"],ArrowLeft:[Ln,Ht],ArrowRight:[Tn,Ut]};function tr(e,i,t){function n(r,s,l){l=l||t.direction;var c=l===Hi&&!s?1:l===Ft?0:-1;return Zt[r]&&Zt[r][c]||r.replace(/width|left|right/i,function(d,h){var m=Zt[d.toLowerCase()][c]||d;return h>0?m.charAt(0).toUpperCase()+m.slice(1):m})}function o(r){return r*(t.direction===Hi?1:-1)}return{resolve:n,orient:o}}var Ne="role",Ke="tabindex",ir="disabled",Se="aria-",wt=Se+"controls",En=Se+"current",Fi=Se+"selected",ye=Se+"label",wi=Se+"labelledby",$n=Se+"hidden",Ii=Se+"orientation",vt=Se+"roledescription",Yi=Se+"live",Vi=Se+"busy",Gi=Se+"atomic",Li=[Ne,Ke,ir,wt,En,ye,wi,$n,Ii,vt],Te=Mt+"__",Ue="is-",Jt=Mt,qi=Te+"track",nr=Te+"list",Yt=Te+"slide",Dn=Yt+"--clone",or=Yt+"__container",Ti=Te+"arrows",Vt=Te+"arrow",Nn=Vt+"--prev",An=Vt+"--next",Gt=Te+"pagination",Cn=Gt+"__page",rr=Te+"progress",sr=rr+"__bar",ar=Te+"toggle",lr=Te+"spinner",cr=Te+"sr",ur=Ue+"initialized",Ge=Ue+"active",xn=Ue+"prev",jn=Ue+"next",ri=Ue+"visible",si=Ue+"loading",zn=Ue+"focus-in",On=Ue+"overflow",dr=[Ge,ri,xn,jn,si,zn,On],hr={slide:Yt,clone:Dn,arrows:Ti,arrow:Vt,prev:Nn,next:An,pagination:Gt,page:Cn,spinner:lr};function fr(e,i){if(on(e.closest))return e.closest(i);for(var t=e;t&&t.nodeType===1&&!ht(t,i);)t=t.parentElement;return t}var gr=5,Qi=200,Bn="touchstart mousedown",Kt="touchmove mousemove",ei="touchend touchcancel mouseup click";function mr(e,i,t){var n=ie(e),o=n.on,r=n.bind,s=e.root,l=t.i18n,c={},d=[],h=[],m=[],p,b,g;function v(){S(),y(),w()}function T(){o(se,I),o(se,v),o(he,w),r(document,Bn+" keydown",function(L){g=L.type==="keydown"},{capture:!0}),r(s,"focusin",function(){$e(s,zn,!!g)})}function I(L){var A=Li.concat("style");Ae(d),De(s,h),De(p,m),we([p,b],A),we(s,L?A:["style",vt])}function w(){De(s,h),De(p,m),h=j(Jt),m=j(qi),Me(s,h),Me(p,m),Y(s,ye,t.label),Y(s,wi,t.labelledby)}function S(){p=M("."+qi),b=St(p,"."+nr),lt(p&&b,"A track/list element is missing."),Et(d,sn(b,"."+Yt+":not(."+Dn+")")),Ye({arrows:Ti,pagination:Gt,prev:Nn,next:An,bar:sr,toggle:ar},function(L,A){c[A]=M("."+L)}),gt(c,{root:s,track:p,list:b,slides:d})}function y(){var L=s.id||Xo(Mt),A=t.role;s.id=L,p.id=p.id||L+"-track",b.id=b.id||L+"-list",!ke(s,Ne)&&s.tagName!=="SECTION"&&A&&Y(s,Ne,A),Y(s,vt,l.carousel),Y(b,Ne,"presentation")}function M(L){var A=cn(s,L);return A&&fr(A,"."+Jt)===s?A:void 0}function j(L){return[L+"--"+t.type,L+"--"+t.direction,t.drag&&L+"--draggable",t.isNavigation&&L+"--nav",L===Jt&&Ge]}return gt(c,{setup:v,mount:T,destroy:I})}var it="slide",st="loop",It="fade";function _r(e,i,t,n){var o=ie(e),r=o.on,s=o.emit,l=o.bind,c=e.Components,d=e.root,h=e.options,m=h.isNavigation,p=h.updateOnMove,b=h.i18n,g=h.pagination,v=h.slideFocus,T=c.Direction.resolve,I=ke(n,"style"),w=ke(n,ye),S=t>-1,y=St(n,"."+or),M;function j(){S||(n.id=d.id+"-slide"+vi(i+1),Y(n,Ne,g?"tabpanel":"group"),Y(n,vt,b.slide),Y(n,ye,w||oi(b.slideLabel,[i+1,e.length]))),L()}function L(){l(n,"click",J(s,yi,H)),l(n,"keydown",J(s,wn,H)),r([rt,In,qe],D),r(bi,W),p&&r(Ce,O)}function A(){M=!0,o.destroy(),De(n,dr),we(n,Li),Y(n,"style",I),Y(n,ye,w||"")}function W(){var B=e.splides.map(function($){var z=$.splide.Components.Slides.getAt(i);return z?z.slide.id:""}).join(" ");Y(n,ye,oi(b.slideX,(S?t:i)+1)),Y(n,wt,B),Y(n,Ne,v?"button":""),v&&we(n,vt)}function O(){M||D()}function D(){if(!M){var B=e.index;N(),C(),$e(n,xn,i===B-1),$e(n,jn,i===B+1)}}function N(){var B=V();B!==Pi(n,Ge)&&($e(n,Ge,B),Y(n,En,m&&B||""),s(B?hn:fn,H))}function C(){var B=ne(),$=!B&&(!V()||S);if(e.state.is([ot,yt])||Y(n,$n,$||""),Y(mi(n,h.focusableNodes||""),Ke,$?-1:""),v&&Y(n,Ke,$?-1:0),B!==Pi(n,ri)&&($e(n,ri,B),s(B?gn:mn,H)),!B&&document.activeElement===n){var z=c.Slides.getAt(e.index);z&&an(z.slide)}}function F(B,$,z){be(z&&y||n,B,$)}function V(){var B=e.index;return B===i||h.cloneStatus&&B===t}function ne(){if(e.is(It))return V();var B=ve(c.Elements.track),$=ve(n),z=T("left",!0),Q=T("right",!0);return Ct(B[z])<=_t($[z])&&Ct($[Q])<=_t(B[Q])}function te(B,$){var z=ge(B-i);return!S&&(h.rewind||e.is(st))&&(z=Re(z,e.length-z)),z<=$}var H={index:i,slideIndex:t,slide:n,container:y,isClone:S,mount:j,destroy:A,update:D,style:F,isWithin:te};return H}function vr(e,i,t){var n=ie(e),o=n.on,r=n.emit,s=n.bind,l=i.Elements,c=l.slides,d=l.list,h=[];function m(){p(),o(se,b),o(se,p)}function p(){c.forEach(function(D,N){v(D,N,-1)})}function b(){M(function(D){D.destroy()}),Ae(h)}function g(){M(function(D){D.update()})}function v(D,N,C){var F=_r(e,N,C,D);F.mount(),h.push(F),h.sort(function(V,ne){return V.index-ne.index})}function T(D){return D?j(function(N){return!N.isClone}):h}function I(D){var N=i.Controller,C=N.toIndex(D),F=N.hasFocus()?1:t.perPage;return j(function(V){return $t(V.index,C,C+F-1)})}function w(D){return j(D)[0]}function S(D,N){pe(D,function(C){if(Be(C)&&(C=ln(C)),rn(C)){var F=c[N];F?gi(C,F):kt(d,C),Me(C,t.classes.slide),A(C,J(r,tt))}}),r(se)}function y(D){Ve(j(D).map(function(N){return N.slide})),r(se)}function M(D,N){T(N).forEach(D)}function j(D){return h.filter(on(D)?D:function(N){return Be(D)?ht(N.slide,D):fi(bt(D),N.index)})}function L(D,N,C){M(function(F){F.style(D,N,C)})}function A(D,N){var C=mi(D,"img"),F=C.length;F?C.forEach(function(V){s(V,"load error",function(){--F||N()})}):N()}function W(D){return D?c.length:h.length}function O(){return h.length>t.perPage}return{mount:m,destroy:b,update:g,register:v,get:T,getIn:I,getAt:w,add:S,remove:y,forEach:M,filter:j,style:L,getLength:W,isEnough:O}}function yr(e,i,t){var n=ie(e),o=n.on,r=n.bind,s=n.emit,l=i.Slides,c=i.Direction.resolve,d=i.Elements,h=d.root,m=d.track,p=d.list,b=l.getAt,g=l.style,v,T,I;function w(){S(),r(window,"resize load",Ko(J(s,tt))),o([he,se],S),o(tt,y)}function S(){v=t.direction===Ft,be(h,"maxWidth",Fe(t.width)),be(m,c("paddingLeft"),M(!1)),be(m,c("paddingRight"),M(!0)),y(!0)}function y(H){var B=ve(h);(H||T.width!==B.width||T.height!==B.height)&&(be(m,"height",j()),g(c("marginRight"),Fe(t.gap)),g("width",A()),g("height",W(),!0),T=B,s(Bt),I!==(I=te())&&($e(h,On,I),s(Zo,I)))}function M(H){var B=t.padding,$=c(H?"right":"left");return B&&Fe(B[$]||(dt(B)?0:B))||"0px"}function j(){var H="";return v&&(H=L(),lt(H,"height or heightRatio is missing."),H="calc("+H+" - "+M(!1)+" - "+M(!0)+")"),H}function L(){return Fe(t.height||ve(p).width*t.heightRatio)}function A(){return t.autoWidth?null:Fe(t.fixedWidth)||(v?"":O())}function W(){return Fe(t.fixedHeight)||(v?t.autoHeight?null:O():L())}function O(){var H=Fe(t.gap);return"calc((100%"+(H&&" + "+H)+")/"+(t.perPage||1)+(H&&" - "+H)+")"}function D(){return ve(p)[c("width")]}function N(H,B){var $=b(H||0);return $?ve($.slide)[c("width")]+(B?0:V()):0}function C(H,B){var $=b(H);if($){var z=ve($.slide)[c("right")],Q=ve(p)[c("left")];return ge(z-Q)+(B?0:V())}return 0}function F(H){return C(e.length-1)-C(0)+N(0,H)}function V(){var H=b(0);return H&&parseFloat(be(H.slide,c("marginRight")))||0}function ne(H){return parseFloat(be(m,c("padding"+(H?"Right":"Left"))))||0}function te(){return e.is(It)||F(!0)>D()}return{mount:w,resize:y,listSize:D,slideSize:N,sliderSize:F,totalSize:C,getPadding:ne,isOverflow:te}}var pr=2;function br(e,i,t){var n=ie(e),o=n.on,r=i.Elements,s=i.Slides,l=i.Direction.resolve,c=[],d;function h(){o(se,m),o([he,tt],b),(d=T())&&(g(d),i.Layout.resize(!0))}function m(){p(),h()}function p(){Ve(c),Ae(c),n.destroy()}function b(){var I=T();d!==I&&(d<I||!I)&&n.emit(se)}function g(I){var w=s.get().slice(),S=w.length;if(S){for(;w.length<I;)Et(w,w);Et(w.slice(-I),w.slice(0,I)).forEach(function(y,M){var j=M<I,L=v(y.slide,M);j?gi(L,w[0].slide):kt(r.list,L),Et(c,L),s.register(L,M-I+(j?0:S),y.index)})}}function v(I,w){var S=I.cloneNode(!0);return Me(S,t.classes.clone),S.id=e.root.id+"-clone"+vi(w+1),S}function T(){var I=t.clones;if(!e.is(st))I=0;else if(pt(I)){var w=t[l("fixedWidth")]&&i.Layout.slideSize(0),S=w&&_t(ve(r.track)[l("width")]/w);I=S||t[l("autoWidth")]&&e.length||t.perPage*pr}return I}return{mount:h,destroy:p}}function kr(e,i,t){var n=ie(e),o=n.on,r=n.emit,s=e.state.set,l=i.Layout,c=l.slideSize,d=l.getPadding,h=l.totalSize,m=l.listSize,p=l.sliderSize,b=i.Direction,g=b.resolve,v=b.orient,T=i.Elements,I=T.list,w=T.track,S;function y(){S=i.Transition,o([We,Bt,he,se],M)}function M(){i.Controller.isBusy()||(i.Scroll.cancel(),L(e.index),i.Slides.update())}function j($,z,Q,ce){$!==z&&H($>Q)&&(D(),A(O(F(),$>Q),!0)),s(ot),r(Ce,z,Q,$),S.start(z,function(){s(et),r(rt,z,Q,$),ce&&ce()})}function L($){A(C($,!0))}function A($,z){if(!e.is(It)){var Q=z?$:W($);be(I,"transform","translate"+g("X")+"("+Q+"px)"),$!==Q&&r(In)}}function W($){if(e.is(st)){var z=N($),Q=z>i.Controller.getEnd(),ce=z<0;(ce||Q)&&($=O($,Q))}return $}function O($,z){var Q=$-te(z),ce=p();return $-=v(ce*(_t(ge(Q)/ce)||1))*(z?1:-1),$}function D(){A(F(),!0),S.cancel()}function N($){for(var z=i.Slides.get(),Q=0,ce=1/0,ae=0;ae<z.length;ae++){var je=z[ae].index,E=ge(C(je,!0)-$);if(E<=ce)ce=E,Q=je;else break}return Q}function C($,z){var Q=v(h($-1)-ne($));return z?V(Q):Q}function F(){var $=g("left");return ve(I)[$]-ve(w)[$]+v(d(!1))}function V($){return t.trimSpace&&e.is(it)&&($=Qe($,0,v(p(!0)-m()))),$}function ne($){var z=t.focus;return z==="center"?(m()-c($,!0))/2:+z*c($)||0}function te($){return C($?i.Controller.getEnd():0,!!t.trimSpace)}function H($){var z=v(O(F(),$));return $?z>=0:z<=I[g("scrollWidth")]-ve(w)[g("width")]}function B($,z){z=pt(z)?F():z;var Q=$!==!0&&v(z)<v(te(!1)),ce=$!==!1&&v(z)>v(te(!0));return Q||ce}return{mount:y,move:j,jump:L,translate:A,shift:O,cancel:D,toIndex:N,toPosition:C,getPosition:F,getLimit:te,exceededLimit:B,reposition:M}}function Sr(e,i,t){var n=ie(e),o=n.on,r=n.emit,s=i.Move,l=s.getPosition,c=s.getLimit,d=s.toPosition,h=i.Slides,m=h.isEnough,p=h.getLength,b=t.omitEnd,g=e.is(st),v=e.is(it),T=J(F,!1),I=J(F,!0),w=t.start||0,S,y=w,M,j,L;function A(){W(),o([he,se,xt],W),o(Bt,O)}function W(){M=p(!0),j=t.perMove,L=t.perPage,S=H();var E=Qe(w,0,b?S:M-1);E!==w&&(w=E,s.reposition())}function O(){S!==H()&&r(xt)}function D(E,Z,fe){if(!je()){var oe=C(E),ue=te(oe);ue>-1&&(Z||ue!==w)&&(Q(ue),s.move(oe,ue,y,fe))}}function N(E,Z,fe,oe){i.Scroll.scroll(E,Z,fe,function(){var ue=te(s.toIndex(l()));Q(b?Re(ue,S):ue),oe&&oe()})}function C(E){var Z=w;if(Be(E)){var fe=E.match(/([+\-<>])(\d+)?/)||[],oe=fe[1],ue=fe[2];oe==="+"||oe==="-"?Z=V(w+ +(""+oe+(+ue||1)),w):oe===">"?Z=ue?B(+ue):T(!0):oe==="<"&&(Z=I(!0))}else Z=g?E:Qe(E,0,S);return Z}function F(E,Z){var fe=j||(ae()?1:L),oe=V(w+fe*(E?-1:1),w,!(j||ae()));return oe===-1&&v&&!un(l(),c(!E),1)?E?0:S:Z?oe:te(oe)}function V(E,Z,fe){if(m()||ae()){var oe=ne(E);oe!==E&&(Z=E,E=oe,fe=!1),E<0||E>S?!j&&($t(0,E,Z,!0)||$t(S,Z,E,!0))?E=B($(E)):g?E=fe?E<0?-(M%L||L):M:E:t.rewind?E=E<0?S:0:E=-1:fe&&E!==Z&&(E=B($(Z)+(E<Z?-1:1)))}else E=-1;return E}function ne(E){if(v&&t.trimSpace==="move"&&E!==w)for(var Z=l();Z===d(E,!0)&&$t(E,0,e.length-1,!t.rewind);)E<w?--E:++E;return E}function te(E){return g?(E+M)%M||0:E}function H(){for(var E=M-(ae()||g&&j?1:L);b&&E-- >0;)if(d(M-1,!0)!==d(E,!0)){E++;break}return Qe(E,0,M-1)}function B(E){return Qe(ae()?E:L*E,0,S)}function $(E){return ae()?Re(E,S):Ct((E>=S?M-1:E)/L)}function z(E){var Z=s.toIndex(E);return v?Qe(Z,0,S):Z}function Q(E){E!==w&&(y=w,w=E)}function ce(E){return E?y:w}function ae(){return!pt(t.focus)||t.isNavigation}function je(){return e.state.is([ot,yt])&&!!t.waitForTransition}return{mount:A,go:D,scroll:N,getNext:T,getPrev:I,getAdjacent:F,getEnd:H,setIndex:Q,getIndex:ce,toIndex:B,toPage:$,toDest:z,hasFocus:ae,isBusy:je}}var Mr="http://www.w3.org/2000/svg",wr="m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z",Lt=40;function Ir(e,i,t){var n=ie(e),o=n.on,r=n.bind,s=n.emit,l=t.classes,c=t.i18n,d=i.Elements,h=i.Controller,m=d.arrows,p=d.track,b=m,g=d.prev,v=d.next,T,I,w={};function S(){M(),o(he,y)}function y(){j(),S()}function M(){var N=t.arrows;N&&!(g&&v)&&W(),g&&v&&(gt(w,{prev:g,next:v}),mt(b,N?"":"none"),Me(b,I=Ti+"--"+t.direction),N&&(L(),D(),Y([g,v],wt,p.id),s(pn,g,v)))}function j(){n.destroy(),De(b,I),T?(Ve(m?[g,v]:b),g=v=null):we([g,v],Li)}function L(){o([We,rt,se,qe,xt],D),r(v,"click",J(A,">")),r(g,"click",J(A,"<"))}function A(N){h.go(N,!0)}function W(){b=m||Je("div",l.arrows),g=O(!0),v=O(!1),T=!0,kt(b,[g,v]),!m&&gi(b,p)}function O(N){var C='<button class="'+l.arrow+" "+(N?l.prev:l.next)+'" type="button"><svg xmlns="'+Mr+'" viewBox="0 0 '+Lt+" "+Lt+'" width="'+Lt+'" height="'+Lt+'" focusable="false"><path d="'+(t.arrowPath||wr)+'" />';return ln(C)}function D(){if(g&&v){var N=e.index,C=h.getPrev(),F=h.getNext(),V=C>-1&&N<C?c.last:c.prev,ne=F>-1&&N>F?c.first:c.next;g.disabled=C<0,v.disabled=F<0,Y(g,ye,V),Y(v,ye,ne),s(bn,g,v,C,F)}}return{arrows:w,mount:S,destroy:j,update:D}}var Lr=_i+"-interval";function Tr(e,i,t){var n=ie(e),o=n.on,r=n.bind,s=n.emit,l=Pt(t.interval,e.go.bind(e,">"),L),c=l.isPaused,d=i.Elements,h=i.Elements,m=h.root,p=h.toggle,b=t.autoplay,g,v,T=b==="pause";function I(){b&&(w(),p&&Y(p,wt,d.track.id),T||S(),j())}function w(){t.pauseOnHover&&r(m,"mouseenter mouseleave",function(W){g=W.type==="mouseenter",M()}),t.pauseOnFocus&&r(m,"focusin focusout",function(W){v=W.type==="focusin",M()}),p&&r(p,"click",function(){T?S():y(!0)}),o([Ce,Rt,se],l.rewind),o(Ce,A)}function S(){c()&&i.Slides.isEnough()&&(l.start(!t.resetProgress),v=g=T=!1,j(),s(ki))}function y(W){W===void 0&&(W=!0),T=!!W,j(),c()||(l.pause(),s(Si))}function M(){T||(g||v?y(!1):S())}function j(){p&&($e(p,Ge,!T),Y(p,ye,t.i18n[T?"play":"pause"]))}function L(W){var O=d.bar;O&&be(O,"width",W*100+"%"),s(Mn,W)}function A(W){var O=i.Slides.getAt(W);l.set(O&&+ke(O.slide,Lr)||t.interval)}return{mount:I,destroy:l.cancel,play:S,pause:y,isPaused:c}}function Er(e,i,t){var n=ie(e),o=n.on;function r(){t.cover&&(o(Mi,J(l,!0)),o([We,he,se],J(s,!0)))}function s(c){i.Slides.forEach(function(d){var h=St(d.container||d.slide,"img");h&&h.src&&l(c,h,d)})}function l(c,d,h){h.style("background",c?'center/cover no-repeat url("'+d.src+'")':"",!0),mt(d,c?"none":"")}return{mount:r,destroy:J(s,!1)}}var $r=10,Dr=600,Nr=.6,Ar=1.5,Cr=800;function xr(e,i,t){var n=ie(e),o=n.on,r=n.emit,s=e.state.set,l=i.Move,c=l.getPosition,d=l.getLimit,h=l.exceededLimit,m=l.translate,p=e.is(it),b,g,v=1;function T(){o(Ce,y),o([he,se],M)}function I(L,A,W,O,D){var N=c();if(y(),W&&(!p||!h())){var C=i.Layout.sliderSize(),F=ni(L)*C*Ct(ge(L)/C)||0;L=l.toPosition(i.Controller.toDest(L%C))+F}var V=un(N,L,1);v=1,A=V?0:A||At(ge(L-N)/Ar,Cr),g=O,b=Pt(A,w,J(S,N,L,D),1),s(yt),r(Rt),b.start()}function w(){s(et),g&&g(),r(qe)}function S(L,A,W,O){var D=c(),N=L+(A-L)*j(O),C=(N-D)*v;m(D+C),p&&!W&&h()&&(v*=Nr,ge(C)<$r&&I(d(h(!0)),Dr,!1,g,!0))}function y(){b&&b.cancel()}function M(){b&&!b.isPaused()&&(y(),w())}function j(L){var A=t.easingFunc;return A?A(L):1-Math.pow(1-L,4)}return{mount:T,destroy:y,scroll:I,cancel:M}}var Xe={passive:!1,capture:!0};function jr(e,i,t){var n=ie(e),o=n.on,r=n.emit,s=n.bind,l=n.unbind,c=e.state,d=i.Move,h=i.Scroll,m=i.Controller,p=i.Elements.track,b=i.Media.reduce,g=i.Direction,v=g.resolve,T=g.orient,I=d.getPosition,w=d.exceededLimit,S,y,M,j,L,A=!1,W,O,D;function N(){s(p,Kt,ti,Xe),s(p,ei,ti,Xe),s(p,Bn,F,Xe),s(p,"click",te,{capture:!0}),s(p,"dragstart",Ee),o([We,he],C)}function C(){var x=t.drag;Ci(!x),j=x==="free"}function F(x){if(W=!1,!O){var ee=ue(x);oe(x.target)&&(ee||!x.button)&&(m.isBusy()?Ee(x,!0):(D=ee?p:window,L=c.is([ot,yt]),M=null,s(D,Kt,V,Xe),s(D,ei,ne,Xe),d.cancel(),h.cancel(),H(x)))}}function V(x){if(c.is(Tt)||(c.set(Tt),r(_n)),x.cancelable)if(L){d.translate(S+fe(ae(x)));var ee=je(x)>Qi,He=A!==(A=w());(ee||He)&&H(x),W=!0,r(vn),Ee(x)}else z(x)&&(L=$(x),Ee(x))}function ne(x){c.is(Tt)&&(c.set(et),r(yn)),L&&(B(x),Ee(x)),l(D,Kt,V),l(D,ei,ne),L=!1}function te(x){!O&&W&&Ee(x,!0)}function H(x){M=y,y=x,S=I()}function B(x){var ee=Q(x),He=ce(ee),at=t.rewind&&t.rewindByDrag;b(!1),j?m.scroll(He,0,t.snap):e.is(It)?m.go(T(ni(ee))<0?at?"<":"-":at?">":"+"):e.is(it)&&A&&at?m.go(w(!0)?">":"<"):m.go(m.toDest(He),!0),b(!0)}function $(x){var ee=t.dragMinThreshold,He=dt(ee),at=He&&ee.mouse||0,no=(He?ee.touch:+ee)||10;return ge(ae(x))>(ue(x)?no:at)}function z(x){return ge(ae(x))>ge(ae(x,!0))}function Q(x){if(e.is(st)||!A){var ee=je(x);if(ee&&ee<Qi)return ae(x)/ee}return 0}function ce(x){return I()+ni(x)*Re(ge(x)*(t.flickPower||600),j?1/0:i.Layout.listSize()*(t.flickMaxPages||1))}function ae(x,ee){return Z(x,ee)-Z(E(x),ee)}function je(x){return ii(x)-ii(E(x))}function E(x){return y===x&&M||y}function Z(x,ee){return(ue(x)?x.changedTouches[0]:x)["page"+v(ee?"Y":"X")]}function fe(x){return x/(A&&e.is(it)?gr:1)}function oe(x){var ee=t.noDrag;return!ht(x,"."+Cn+", ."+Vt)&&(!ee||!ht(x,ee))}function ue(x){return typeof TouchEvent!="undefined"&&x instanceof TouchEvent}function io(){return L}function Ci(x){O=x}return{mount:N,disable:Ci,isDragging:io}}var zr={Spacebar:" ",Right:Ht,Left:Ut,Up:Ln,Down:Tn};function Ei(e){return e=Be(e)?e:e.key,zr[e]||e}var Xi="keydown";function Or(e,i,t){var n=ie(e),o=n.on,r=n.bind,s=n.unbind,l=e.root,c=i.Direction.resolve,d,h;function m(){p(),o(he,b),o(he,p),o(Ce,v)}function p(){var I=t.keyboard;I&&(d=I==="global"?window:l,r(d,Xi,T))}function b(){s(d,Xi)}function g(I){h=I}function v(){var I=h;h=!0,nn(function(){h=I})}function T(I){if(!h){var w=Ei(I);w===c(Ut)?e.go("<"):w===c(Ht)&&e.go(">")}}return{mount:m,destroy:b,disable:g}}var ct=_i+"-lazy",Dt=ct+"-srcset",Br="["+ct+"], ["+Dt+"]";function Rr(e,i,t){var n=ie(e),o=n.on,r=n.off,s=n.bind,l=n.emit,c=t.lazyLoad==="sequential",d=[rt,qe],h=[];function m(){t.lazyLoad&&(p(),o(se,p))}function p(){Ae(h),b(),c?I():(r(d),o(d,g),g())}function b(){i.Slides.forEach(function(w){mi(w.slide,Br).forEach(function(S){var y=ke(S,ct),M=ke(S,Dt);if(y!==S.src||M!==S.srcset){var j=t.classes.spinner,L=S.parentElement,A=St(L,"."+j)||Je("span",j,L);h.push([S,w,A]),S.src||mt(S,"none")}})})}function g(){h=h.filter(function(w){var S=t.perPage*((t.preloadPages||1)+1)-1;return w[1].isWithin(e.index,S)?v(w):!0}),h.length||r(d)}function v(w){var S=w[0];Me(w[1].slide,si),s(S,"load error",J(T,w)),Y(S,"src",ke(S,ct)),Y(S,"srcset",ke(S,Dt)),we(S,ct),we(S,Dt)}function T(w,S){var y=w[0],M=w[1];De(M.slide,si),S.type!=="error"&&(Ve(w[2]),mt(y,""),l(Mi,y,M),l(tt)),c&&I()}function I(){h.length&&v(h.shift())}return{mount:m,destroy:J(Ae,h),check:g}}function Pr(e,i,t){var n=ie(e),o=n.on,r=n.emit,s=n.bind,l=i.Slides,c=i.Elements,d=i.Controller,h=d.hasFocus,m=d.getIndex,p=d.go,b=i.Direction.resolve,g=c.pagination,v=[],T,I;function w(){S(),o([he,se,xt],w);var O=t.pagination;g&&mt(g,O?"":"none"),O&&(o([Ce,Rt,qe],W),y(),W(),r(kn,{list:T,items:v},A(e.index)))}function S(){T&&(Ve(g?Pe(T.children):T),De(T,I),Ae(v),T=null),n.destroy()}function y(){var O=e.length,D=t.classes,N=t.i18n,C=t.perPage,F=h()?d.getEnd()+1:_t(O/C);T=g||Je("ul",D.pagination,c.track.parentElement),Me(T,I=Gt+"--"+L()),Y(T,Ne,"tablist"),Y(T,ye,N.select),Y(T,Ii,L()===Ft?"vertical":"");for(var V=0;V<F;V++){var ne=Je("li",null,T),te=Je("button",{class:D.page,type:"button"},ne),H=l.getIn(V).map(function($){return $.slide.id}),B=!h()&&C>1?N.pageX:N.slideX;s(te,"click",J(M,V)),t.paginationKeyboard&&s(te,"keydown",J(j,V)),Y(ne,Ne,"presentation"),Y(te,Ne,"tab"),Y(te,wt,H.join(" ")),Y(te,ye,oi(B,V+1)),Y(te,Ke,-1),v.push({li:ne,button:te,page:V})}}function M(O){p(">"+O,!0)}function j(O,D){var N=v.length,C=Ei(D),F=L(),V=-1;C===b(Ht,!1,F)?V=++O%N:C===b(Ut,!1,F)?V=(--O+N)%N:C==="Home"?V=0:C==="End"&&(V=N-1);var ne=v[V];ne&&(an(ne.button),p(">"+V),Ee(D,!0))}function L(){return t.paginationDirection||t.direction}function A(O){return v[d.toPage(O)]}function W(){var O=A(m(!0)),D=A(m());if(O){var N=O.button;De(N,Ge),we(N,Fi),Y(N,Ke,-1)}if(D){var C=D.button;Me(C,Ge),Y(C,Fi,!0),Y(C,Ke,"")}r(Sn,{list:T,items:v},O,D)}return{items:v,mount:w,destroy:S,getAt:A,update:W}}var Wr=[" ","Enter"];function Ur(e,i,t){var n=t.isNavigation,o=t.slideFocus,r=[];function s(){e.splides.forEach(function(g){g.isParent||(d(e,g.splide),d(g.splide,e))}),n&&h()}function l(){r.forEach(function(g){g.destroy()}),Ae(r)}function c(){l(),s()}function d(g,v){var T=ie(g);T.on(Ce,function(I,w,S){v.go(v.is(st)?S:I)}),r.push(T)}function h(){var g=ie(e),v=g.on;v(yi,p),v(wn,b),v([We,he],m),r.push(g),g.emit(bi,e.splides)}function m(){Y(i.Elements.list,Ii,t.direction===Ft?"vertical":"")}function p(g){e.go(g.index)}function b(g,v){fi(Wr,Ei(v))&&(p(g),Ee(v))}return{setup:J(i.Media.set,{slideFocus:pt(o)?n:o},!0),mount:s,destroy:l,remount:c}}function Hr(e,i,t){var n=ie(e),o=n.bind,r=0;function s(){t.wheel&&o(i.Elements.track,"wheel",l,Xe)}function l(d){if(d.cancelable){var h=d.deltaY,m=h<0,p=ii(d),b=t.wheelMinThreshold||0,g=t.wheelSleep||0;ge(h)>b&&p-r>g&&(e.go(m?"<":">"),r=p),c(m)&&Ee(d)}}function c(d){return!t.releaseWheel||e.state.is(ot)||i.Controller.getAdjacent(d)!==-1}return{mount:s}}var Fr=90;function Yr(e,i,t){var n=ie(e),o=n.on,r=i.Elements.track,s=t.live&&!t.isNavigation,l=Je("span",cr),c=Pt(Fr,J(h,!1));function d(){s&&(p(!i.Autoplay.isPaused()),Y(r,Gi,!0),l.textContent="\u2026",o(ki,J(p,!0)),o(Si,J(p,!1)),o([rt,qe],J(h,!0)))}function h(b){Y(r,Vi,b),b?(kt(r,l),c.start()):(Ve(l),c.cancel())}function m(){we(r,[Yi,Gi,Vi]),Ve(l)}function p(b){s&&Y(r,Yi,b?"off":"polite")}return{mount:d,disable:p,destroy:m}}var Vr=Object.freeze({__proto__:null,Media:er,Direction:tr,Elements:mr,Slides:vr,Layout:yr,Clones:br,Move:kr,Controller:Sr,Arrows:Ir,Autoplay:Tr,Cover:Er,Scroll:xr,Drag:jr,Keyboard:Or,LazyLoad:Rr,Pagination:Pr,Sync:Ur,Wheel:Hr,Live:Yr}),Gr={prev:"Previous slide",next:"Next slide",first:"Go to first slide",last:"Go to last slide",slideX:"Go to slide %s",pageX:"Go to page %s",play:"Start autoplay",pause:"Pause autoplay",carousel:"carousel",slide:"slide",select:"Select a slide to show",slideLabel:"%s of %s"},qr={type:"slide",role:"region",speed:400,perPage:1,cloneStatus:!0,arrows:!0,pagination:!0,paginationKeyboard:!0,interval:5e3,pauseOnHover:!0,pauseOnFocus:!0,resetProgress:!0,easing:"cubic-bezier(0.25, 1, 0.5, 1)",drag:!0,direction:"ltr",trimSpace:!0,focusableNodes:"a, button, textarea, input, select, iframe",live:!0,classes:hr,i18n:Gr,reducedMotion:{speed:0,rewindSpeed:0,autoplay:"pause"}};function Qr(e,i,t){var n=i.Slides;function o(){ie(e).on([We,se],r)}function r(){n.forEach(function(l){l.style("transform","translateX(-"+100*l.index+"%)")})}function s(l,c){n.style("transition","opacity "+t.speed+"ms "+t.easing),nn(c)}return{mount:o,start:s,cancel:ti}}function Xr(e,i,t){var n=i.Move,o=i.Controller,r=i.Scroll,s=i.Elements.list,l=J(be,s,"transition"),c;function d(){ie(e).bind(s,"transitionend",function(b){b.target===s&&c&&(m(),c())})}function h(b,g){var v=n.toPosition(b,!0),T=n.getPosition(),I=p(b);ge(v-T)>=1&&I>=1?t.useScroll?r.scroll(v,I,!1,g):(l("transform "+I+"ms "+t.easing),n.translate(v,!0),c=g):(n.jump(b),g())}function m(){l(""),r.cancel()}function p(b){var g=t.rewindSpeed;if(e.is(it)&&g){var v=o.getIndex(!0),T=o.getEnd();if(v===0&&b>=T||v>=T&&b===0)return g}return t.speed}return{mount:d,start:h,cancel:m}}var Zr=function(){function e(t,n){this.event=ie(),this.Components={},this.state=Jo(Ze),this.splides=[],this._o={},this._E={};var o=Be(t)?cn(document,t):t;lt(o,o+" is invalid."),this.root=o,n=ze({label:ke(o,ye)||"",labelledby:ke(o,wi)||""},qr,e.defaults,n||{});try{ze(n,JSON.parse(ke(o,_i)))}catch{lt(!1,"Invalid JSON")}this._o=Object.create(ze({},n))}var i=e.prototype;return i.mount=function(n,o){var r=this,s=this.state,l=this.Components;lt(s.is([Ze,Nt]),"Already mounted!"),s.set(Ze),this._C=l,this._T=o||this._T||(this.is(It)?Qr:Xr),this._E=n||this._E;var c=gt({},Vr,this._E,{Transition:this._T});return Ye(c,function(d,h){var m=d(r,l,r._o);l[h]=m,m.setup&&m.setup()}),Ye(l,function(d){d.mount&&d.mount()}),this.emit(We),Me(this.root,ur),s.set(et),this.emit(Ui),this},i.sync=function(n){return this.splides.push({splide:n}),n.splides.push({splide:this,isParent:!0}),this.state.is(et)&&(this._C.Sync.remount(),n.Components.Sync.remount()),this},i.go=function(n){return this._C.Controller.go(n),this},i.on=function(n,o){return this.event.on(n,o),this},i.off=function(n){return this.event.off(n),this},i.emit=function(n){var o;return(o=this.event).emit.apply(o,[n].concat(Pe(arguments,1))),this},i.add=function(n,o){return this._C.Slides.add(n,o),this},i.remove=function(n){return this._C.Slides.remove(n),this},i.is=function(n){return this._o.type===n},i.refresh=function(){return this.emit(se),this},i.destroy=function(n){n===void 0&&(n=!0);var o=this.event,r=this.state;return r.is(Ze)?ie(this).on(Ui,this.destroy.bind(this,n)):(Ye(this._C,function(s){s.destroy&&s.destroy(n)},!0),o.emit(pi),o.destroy(),n&&Ae(this.splides),r.set(Nt)),this},Go(e,[{key:"options",get:function(){return this._o},set:function(n){this._C.Media.set(n,!0,!0)}},{key:"length",get:function(){return this._C.Slides.getLength(!0)}},{key:"index",get:function(){return this._C.Controller.getIndex()}}]),e}(),$i=Zr;$i.defaults={};$i.STATES=Qo;const Zi=[hn,pn,bn,Si,ki,Mn,yi,pi,_n,yn,vn,mn,fn,Mi,We,Ce,rt,bi,kn,Sn,se,tt,Bt,Rt,qe,he,gn],Rn="splide";function Ji(e){return e!==null&&typeof e=="object"}function Jr(e,i){if(e){const t=Object.keys(e);for(let n=0;n<t.length;n++){const o=t[n];if(o!=="__proto__"&&i(e[o],o)===!1)break}}return e}function Pn(e,i){const t=e;return Jr(i,(n,o)=>{Array.isArray(n)?t[o]=n.slice():Ji(n)?t[o]=Pn(Ji(t[o])?t[o]:{},n):t[o]=n}),t}const Kr=ci({name:"SplideTrack",setup(){oo(()=>{var e;const i=ro(Rn);(e=i==null?void 0:i.value)==null||e.refresh()})}}),Di=(e,i)=>{const t=e.__vccOpts||e;for(const[n,o]of i)t[n]=o;return t},es={class:"splide__track"},ts={class:"splide__list"};function is(e,i,t,n,o,r){return a(),u("div",es,[f("ul",ts,[ut(e.$slots,"default")])])}const ns=Di(Kr,[["render",is]]),os=ci({name:"Splide",emits:Zi.map(e=>`splide:${e}`),components:{SplideTrack:ns},props:{tag:{default:"div",type:String},options:{default:{},type:Object},extensions:Object,transition:Function,hasTrack:{default:!0,type:Boolean}},setup(e,i){const t=xi(),n=xi();so(()=>{n.value&&(t.value=new $i(n.value,e.options),c(t.value),t.value.mount(e.extensions,e.transition))}),ao(()=>{var d;(d=t.value)==null||d.destroy()}),lo(()=>Pn({},e.options),d=>{t.value&&(t.value.options=d)},{deep:!0}),co(Rn,t);const o=ji(()=>{var d;return((d=t.value)==null?void 0:d.index)||0}),r=ji(()=>{var d;return((d=t.value)==null?void 0:d.length)||0});function s(d){var h;(h=t.value)==null||h.go(d)}function l(d){var h;(h=t.value)==null||h.sync(d)}function c(d){Zi.forEach(h=>{d.on(h,(...m)=>{i.emit(`splide:${h}`,d,...m)})})}return{splide:t,root:n,index:o,length:r,go:s,sync:l}}});function rs(e,i,t,n,o,r){const s=Oe("SplideTrack");return a(),P(li(e.tag),{class:"splide",ref:"root"},{default:re(()=>[e.hasTrack?(a(),P(s,{key:0},{default:re(()=>[ut(e.$slots,"default")]),_:3})):ut(e.$slots,"default",{key:1})]),_:3},512)}const ss=Di(os,[["render",rs]]),as=ci({name:"SplideSlide"}),ls={class:"splide__slide"};function cs(e,i,t,n,o,r){return a(),u("li",ls,[ut(e.$slots,"default")])}const us=Di(as,[["render",cs]]);const ds={name:"carousel",props:["detailsBook","books","width","mobileWidth"],components:{Splide:ss,SplideSlide:us},mixins:[xe],data:function(){return{options:{type:"loop",rewind:!0,width:null,trimSpace:!1,gap:"4px",lazyLoad:"nearby",preloadPages:1,perPage:5},coverSize:127,scrolling:!1,scrollContainer:null,inLibrary:null,inSeries:{asin:null,obj:null,ownedBooksLength:null},inSameSeries:null,inWishlist:null,storePageURL:null,scrollContainer:null,tippy:null,prevIndex:null,book:null}},mounted:function(){const e=window.innerWidth,i=e<="716";this.options.width=i?e:this.$el.offsetWidth;const t=i?e-42*2:this.$el.offsetWidth-42*2;e<="500"&&(this.coverSize=102),e<="415"&&(this.coverSize=72),this.options.perPage=Math.floor(t/this.coverSize),this.scrollContainer=document.querySelector(".list-view-inner-wrap")||window,this.scrollContainer.addEventListener("scroll",this.windowScrollStarted,{passive:!0})},beforeUnmount:function(){this.scrollContainer.removeEventListener("scroll",this.windowScrollStarted,{passive:!0})},methods:{appendTo(){return document.body},windowScrollStarted(){this.$route.query.carousel&&this.$updateQueries({carousel:null})},tippyMount(e){console.log("after update",e)},onShow(e,i){const t=i.target.getAttribute("data-book-index");this.prevIndex!==t&&(this.prevIndex=t,this.repositionTooltip(e),this.additionalData=null,this.inLibrary=null,this.inSeries.asin=null,this.inSeries.obj=null,this.inSeries.ownedBooksLength=null,this.inSameSeries=null,this.inWishlist=null,this.book=this.books[t],this.findBookFromLibrary(),this.findBookFromSeries(),this.findSameSeries(),this.findInWishlist(),this.storePageURL=this.makeUrl("book",this.book.asin),this.$updateQueries({carousel:!0}),this.repositionTooltip(e))},onHide(e,i){e.clearDelayTimeouts()},scrollHide(){const e=this.tippy;e&&e.state.isVisible&&(e.hide(),e.reference.blur())},repositionTooltip(e){this.$nextTick(()=>{try{e.popperInstance.update()}catch{}})},findBookFromLibrary(){const e=this.$store.state.library.books;_.find(e,{asin:this.book.asin})&&(this.inLibrary=!0)},findBookFromSeries(){const e=this.book.asin,i=this.$store.state.library.series,t=_.find(i,function(n){const o=_.get(n,"allBooks");if(o)return _.find(o,{asin:e})});if(t){this.inSeries.asin=t.asin,this.inSeries.obj=t;const n=_.get(t,"allBooks");n&&(this.inSeries.ownedBooksLength=_.filter(n,function(o){return!o.notInLibrary}).length)}},findSameSeries(){if(this.inSeries.obj){const e=_.get(this.inSeries,"obj.allBooks"),i=_.find(e,{asin:this.detailsBook.asin});this.inSameSeries=!!i}},findInWishlist(){const e=this.book.asin,i=this.$store.state.library.wishlist;this.inWishlist=_.find(i,{asin:e})}}},hs=["data-scrolling"],fs={class:"ale-heading"};function gs(e,i,t,n,o,r){const s=Vo,l=Oe("splide-slide"),c=Oe("splide"),d=Oe("tippy-singleton"),h=ai;return a(),u("div",{class:"ale-carousel","data-scrolling":e.scrolling},[f("h3",fs,[ut(e.$slots,"default")]),R(h,{offset:-60,delay:10,class:"lazyboy"},{default:re(()=>[R(d,{"move-transition":"transform 0.2s ease-out",placement:"top",appendTo:r.appendTo,interactive:!0,interactiveDebounce:75,interactiveBorder:30,allowHTML:!0,delay:520,onTrigger:r.onShow,onUntrigger:r.onHide},{default:re(()=>[R(c,{options:e.options,ref:"splide"},{default:re(()=>[(a(!0),u(me,null,_e(t.books,(m,p)=>(a(),P(l,{class:"ale-carousel-item",key:p},{default:re(()=>[R(s,{detailsBook:t.detailsBook,book:m,index:p,mobileWidth:t.mobileWidth,inLibrary:e.inLibrary,inSeries:e.inSeries,inSameSeries:e.inSameSeries,inWishlist:e.inWishlist,storePageURL:e.storePageURL},null,8,["detailsBook","book","index","mobileWidth","inLibrary","inSeries","inSameSeries","inWishlist","storePageURL"])]),_:2},1024))),128))]),_:1},8,["options"])]),_:1},8,["appendTo","onTrigger","onUntrigger"])]),_:1})],8,hs)}var ms=q(ds,[["render",gs]]);const _s={viewBox:"0 0 448 512",width:"1.2em",height:"1.2em"},vs=f("path",{fill:"currentColor",d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},null,-1),ys=[vs];function ps(e,i){return a(),u("svg",_s,ys)}var Wn={name:"fa-solid-chevron-down",render:ps};const bs={viewBox:"0 0 448 512",width:"1.2em",height:"1.2em"},ks=f("path",{fill:"currentColor",d:"m240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495L69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"},null,-1),Ss=[ks];function Ms(e,i){return a(),u("svg",bs,Ss)}var ws={name:"fa-solid-chevron-up",render:Ms};const Is={props:["up"]},Ls={class:"chevron-icon"};function Ts(e,i,t,n,o,r){const s=ws,l=Wn;return a(),u("div",Ls,[t.up?(a(),P(s,{key:0})):(a(),P(l,{key:1}))])}var qt=q(Is,[["render",Ts],["__scopeId","data-v-6d32f727"]]);const Es={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},$s=f("path",{fill:"currentColor",d:"M256 80C141.1 80 48 173.1 48 288v104c0 13.3-10.7 24-24 24S0 405.3 0 392V288C0 146.6 114.6 32 256 32s256 114.6 256 256v104c0 13.3-10.7 24-24 24s-24-10.7-24-24V288c0-114.9-93.1-208-208-208zM80 352c0-35.3 28.7-64 64-64h16c17.7 0 32 14.3 32 32v128c0 17.7-14.3 32-32 32h-16c-35.3 0-64-28.7-64-64v-64zm288-64c35.3 0 64 28.7 64 64v64c0 35.3-28.7 64-64 64h-16c-17.7 0-32-14.3-32-32V320c0-17.7 14.3-32 32-32h16z"},null,-1),Ds=[$s];function Ns(e,i){return a(),u("svg",Es,Ds)}var Un={name:"fa6-solid-headphones-simple",render:Ns};const As={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},Cs=f("path",{fill:"currentColor",d:"M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256s114.6 256 256 256zm-24-168v-64h-64c-13.3 0-24-10.7-24-24s10.7-24 24-24h64v-64c0-13.3 10.7-24 24-24s24 10.7 24 24v64h64c13.3 0 24 10.7 24 24s-10.7 24-24 24h-64v64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"},null,-1),xs=[Cs];function js(e,i){return a(),u("svg",As,xs)}var Hn={name:"fa6-solid-circle-plus",render:js};const zs={viewBox:"0 0 576 512",width:"1.2em",height:"1.2em"},Os=f("path",{fill:"currentColor",d:"M253.3 35.1c6.1-11.8 1.5-26.3-10.2-32.4s-26.3-1.5-32.4 10.2L117.6 192H32c-17.7 0-32 14.3-32 32s14.3 32 32 32l51.9 207.5C91 492 116.6 512 146 512h284c29.4 0 55-20 62.1-48.5L544 256c17.7 0 32-14.3 32-32s-14.3-32-32-32h-85.6L365.3 12.9c-6.1-11.7-20.6-16.3-32.4-10.2s-16.3 20.6-10.2 32.4L404.3 192H171.7l81.6-156.9zM192 304v96c0 8.8-7.2 16-16 16s-16-7.2-16-16v-96c0-8.8 7.2-16 16-16s16 7.2 16 16zm96-16c8.8 0 16 7.2 16 16v96c0 8.8-7.2 16-16 16s-16-7.2-16-16v-96c0-8.8 7.2-16 16-16zm128 16v96c0 8.8-7.2 16-16 16s-16-7.2-16-16v-96c0-8.8 7.2-16 16-16s16 7.2 16 16z"},null,-1),Bs=[Os];function Rs(e,i){return a(),u("svg",zs,Bs)}var Ps={name:"fa6-solid-basket-shopping",render:Rs};const Ws={name:"bookTags",props:["book"],mixins:[xe],data:function(){return{}}},Us={class:"book-tags"},Hs=["href"];function Fs(e,i,t,n,o,r){return a(),u("div",Us,[(a(!0),u(me,null,_e(t.book.tags,s=>(a(),u("a",{href:e.makeUrl("tags",s),target:"_blank",rel:"noopener noreferrer",class:"book-tag",key:s.name},U(s.name),9,Hs))),128))])}var Ys=q(Ws,[["render",Fs],["__scopeId","data-v-6bf8396a"]]);const Vs={name:"arrayToHTML",data:function(){return{inputDataExists:null}},props:["label","array","delim","noLabel","chevron"],mixins:[xe],created:function(){this.inputDataExists=this.checkIfArrayHasData()},computed:{identifierClass:function(){return"details-"+_.kebabCase(this.label)}},methods:{checkIfArrayHasData:function(){return this.array&&!_.isEmpty(this.array)}}},Gs={key:0,class:"strong-label"},qs={key:0},Qs={key:0,class:"chevron"},Xs={key:1},Zs=["href"],Js={key:1,class:"book-number"},Ks=K(" (book "),ea={key:0},ta=K(")");function ia(e,i,t,n,o,r){const s=go;return e.inputDataExists?(a(),u("div",{key:0,class:G(r.identifierClass)},[t.noLabel?k("",!0):(a(),u("strong",Gs,U(t.label)+":",1)),(a(!0),u(me,null,_e(t.array,(l,c)=>(a(),u("span",{key:l.name+"("+c+")"},[f("span",null,[c!==0?(a(),u("span",qs,[t.chevron?(a(),u("span",Qs,[R(s)])):(a(),u("span",Xs,U(t.delim||", "),1))])):k("",!0),f("a",{href:e.makeUrl(t.label.toLowerCase(),l),target:"_blank",rel:"noopener noreferrer"},U(l.name),9,Zs),l.bookNumbers?(a(),u("span",Js,[Ks,(a(!0),u(me,null,_e(l.bookNumbers,(d,h)=>(a(),u("span",null,[h!==0?(a(),u("span",ea,U(","))):k("",!0),f("span",null,U(d),1)]))),256)),ta])):k("",!0)])]))),128))],2)):k("",!0)}var Fn=q(Vs,[["render",ia],["__scopeId","data-v-bd1a8f70"]]);const na={name:"bookDetailsTitle",props:["book","tempAsin"],mixins:[xe],computed:{showSubtitle(){const e=this.$store.state.sticky.bookDetailSettings.titleShort,i=!!this.book.subtitle,t=!!this.book.title&&!!this.book.titleShort&&this.book.title!==this.book.titleShort;return e&&(i||t)},audibleURL(){if(this.tempAsin){const e=_.get(this.book,"series.0");return this.makeUrl("series",e)}else return this.makeUrl("book",this.book.asin)}}},oa={class:"book-title"},ra=["href"],sa=["innerHTML"],aa=["innerHTML"],la=["innerHTML"];function ca(e,i,t,n,o,r){return a(),u("div",null,[f("h2",oa,[f("a",{href:r.audibleURL,target:"_blank",rel:"noopener noreferrer"},[e.$store.state.sticky.bookDetailSettings.titleShort?(a(),u("span",{key:1,innerHTML:t.book.titleShort||t.book.title},null,8,aa)):(a(),u("span",{key:0,innerHTML:t.book.title||t.book.titleShort},null,8,sa))],8,ra)]),r.showSubtitle?(a(),u("div",{key:0,class:"subblementary-book-title",innerHTML:t.book.subtitle||t.book.title},null,8,la)):k("",!0)])}var Yn=q(na,[["render",ca]]);const ua={name:"bookSummary",props:["book","bookSummary","mobileWidth"],mixins:[xe],data:function(){return{summary:{readmore:{toggle:!1,exists:!1},maxHeight:null,maxHeightTemp:null,fullHeight:null}}},watch:{summaryHTML(e){e&&this.getSummaryMaxHeight()}},computed:{summaryHTML:function(){return this.book.summary||this.bookSummary||this.book.blurb},showReadMore:function(){const e=this.summary;if(!!e.maxHeightTemp)return e.fullHeight>e.maxHeightTemp}},mounted:function(){this.getSummaryMaxHeight()},created:function(){this.$compEmitter.on("afterWindowResize",this.windowResized),this.$compEmitter.on("resizeSummary",this.getSummaryMaxHeight)},beforeUnmount:function(){this.$compEmitter.off("afterWindowResize",this.windowResized),this.$compEmitter.off("resizeSummary",this.getSummaryMaxHeight)},methods:{getSummaryMaxHeight(){!this.summaryHTML||this.$nextTick(function(){const i=_.get(this.$refs,"summaryMetaTop.offsetHeight",0)+300,t=_.get(this.$refs,"summary.offsetHeight",0);this.summary.fullHeight=t;const n=document.querySelector("#ale-bookdetails .information"),o=_.get(n,"offsetHeight",0);let r=o;(this.mobileWidth||t>i&&i>o)&&(r=i),this.summary.maxHeight=r,this.summary.maxHeightTemp=r})},windowResized(){this.getSummaryMaxHeight()},summaryReadMoreclick:function(){if(this.summary.readmore.toggle=!this.summary.readmore.toggle,this.summary.maxHeight=this.summary.readmore.toggle?"none":this.summary.maxHeightTemp,!this.summary.readmore.toggle){const e=this.$refs.readMoreBtn.getBoundingClientRect().top;this.$nextTick(function(){scroll({top:this.$refs.readMoreBtn.getBoundingClientRect().top+window.pageYOffset-e})})}}}},da={class:"book-summary",ref:"summary"},ha={class:"summary-meta-top",ref:"summaryMetaTop"},fa={key:0,class:"categories"},ga={class:"inline-children smoll-text"},ma={class:"info-tags"},_a={key:0,class:"info-tag store-page-changed",content:"There is a store page for the book, but it's for a different version of the book. <br><br>This is the reason why some data is unavailable."},va=K(" changed "),ya={key:1,class:"info-tag store-page-missing",content:"Store page was possibly removed or it became unavailable in your region since it was added. In some cases there may still be a store page for a different version of the book. <br><br>This is the reason why some data is unavailable."},pa=K(" missing "),ba=["content"],ka=K(" Plus catalog "),Sa=["content"],Ma=K(" whispersync "),wa={key:1,class:"release-date",content:"YYYY-MM-DD"},Ia=f("span",{class:"strong-label"},"Released:",-1),La=f("div",{class:"meta-padding"},null,-1),Ta=["innerHTML"];function Ea(e,i,t,n,o,r){const s=Yn,l=Fn,c=Ys,d=Ps,h=Hn,m=Un,p=qt,b=de("tippy");return a(),u("div",{class:G(["book-summary-wrapper",{expanded:e.summary.readmore.toggle}]),ref:"summaryWrapper",style:le({maxHeight:e.summary.maxHeight?e.summary.maxHeight+"px":null,paddingBottom:e.summary.readmore.toggle?"50px":"0px"})},[f("div",da,[f("div",ha,[R(s,{book:t.book},null,8,["book"]),t.book.categories?(a(),u("div",fa,[t.book.categories?(a(),P(l,{key:0,label:"categories",noLabel:!0,array:t.book.categories,chevron:!0},null,8,["array"])):k("",!0)])):k("",!0),f("div",ga,[t.book.tags?(a(),P(c,{key:0,book:t.book},null,8,["book"])):k("",!0),f("div",ma,[t.book.storePageChanged?X((a(),u("div",_a,[R(d),va])),[[b,{maxWidth:300}]]):t.book.storePageMissing?X((a(),u("div",ya,[R(d),pa])),[[b,{maxWidth:300}]]):k("",!0),t.book.fromPlusCatalog?X((a(),u("div",{key:2,class:G(["info-tag plus-catalog",{"plus-catalog-unavailable":t.book.unavailable}]),content:t.book.unavailable?"Used to be in the plus catalog but you no longer have access to it":"In the plus catalog"},[R(h),ka],10,ba)),[[b,{maxWidth:300}]]):k("",!0),t.book.whispersync?X((a(),u("div",{key:3,class:G(["info-tag whispersync",{owned:t.book.whispersync==="owned"}]),content:t.book.whispersync==="owned"?"I own the Kindle version":"Kindle book available for purchase..."},[R(m),Ma],10,Sa)),[[b,{maxWidth:300}]]):k("",!0)]),t.book.releaseDate?X((a(),u("div",wa,[Ia,f("span",null,U(t.book.releaseDate),1)])),[[b]]):k("",!0)]),La],512),r.summaryHTML?(a(),u("div",{key:0,class:"summary-inner-wrap",ref:"summaryInnerWrap",innerHTML:r.summaryHTML},null,8,Ta)):k("",!0)],512),r.showReadMore?(a(),u("div",{key:0,class:"summary-read-more",ref:"readMoreBtn",onClick:i[0]||(i[0]=(...g)=>r.summaryReadMoreclick&&r.summaryReadMoreclick(...g))},[f("span",null,U(e.summary.readmore.toggle?"Read less":"Read more"),1),R(p,{class:"read-more-icon",up:e.summary.readmore.toggle},null,8,["up"])],512)):k("",!0)],6)}var $a=q(ua,[["render",Ea]]);const Da={name:"booksInSeriesLink",props:["series","book","index","seriesName"],mixins:[xe],data:function(){return{seriesPage:!1,routerLink:null,title:null,linkDisabled:!1,sameSeries:null}},created:function(){this.seriesPage=this.$route.name==="series",this.routerLink={name:"series",params:{series:this.series.asin},query:{subPageSource:"library",refresh:!0}},this.seriesName?this.routerLink.query.closeBookDetails=!0:this.routerLink.query.book=this.book.asin;const e=this.seriesPage&&this.$route.params.series===this.series.asin;this.linkDisabled=this.book.notInLibrary||e,this.sameSeries=e},methods:{openBook:function(e){e.preventDefault(),this.book&&!this.book.notInLibrary&&this.book.asin!==this.$route.query.book&&this.$compEmitter.emit("book-clicked",this.book.obj.asin)}}},Na={class:"linky"},Aa={key:0,class:"series-not-link"},Ca=["href","content"],xa={class:"numbers"},ja={class:"title"},za={key:0,style:{"white-space":"normal","padding-bottom":"3px",display:"inline-block"}},Oa={key:1,class:"numbers"},Ba={key:2,class:"title"};function Ra(e,i,t,n,o,r){const s=Oe("router-link"),l=de("tippy");return a(),u("div",Na,[t.seriesName&&e.linkDisabled?(a(),u("span",Aa,U(t.seriesName),1)):!t.seriesName&&t.book.notInLibrary&&t.book.asin?X((a(),u("a",{key:1,class:"clickety-click cursor-alias",target:"_blank",rel:"noopener noreferrer",href:e.makeUrl("book",t.book.asin),content:t.book.title!==t.book.titleShort?t.book.title:!1},[f("span",xa,U(t.book.bookNumbers),1),f("span",ja,U(t.book.titleShort||t.book.title),1)],8,Ca)),[[l,{maxWidth:350,placement:"right",flipBehavior:["right","top","bottom"]}]]):X((a(),P(s,{key:2,class:G(["clickety-click",{"link-disabled":e.linkDisabled,"same-series":e.sameSeries}]),event:e.linkDisabled?"":"click",onClick:i[0]||(i[0]=c=>e.linkDisabled&&r.openBook(c)),to:e.linkDisabled?"":e.routerLink,content:t.seriesName?null:(t.book.notInLibrary?"<strong>Not available:</strong> ":"")+(t.book.title!==t.book.titleShort?t.book.title:"")},{default:re(()=>[t.seriesName?(a(),u("span",za,U(t.seriesName),1)):k("",!0),t.seriesName?k("",!0):(a(),u("span",Oa,U(t.book.bookNumbers),1)),t.seriesName?k("",!0):(a(),u("span",Ba,U(t.book.titleShort||t.book.title),1))]),_:1},8,["class","event","to","content"])),[[l,{maxWidth:350,placement:"right",flipBehavior:["right","top","bottom"]}]])])}var Vn=q(Da,[["render",Ra],["__scopeId","data-v-46f60766"]]);const Pa={name:"goodReadsLink",props:["book","icon","size","muted"],mixins:[mo],data:function(){return{goodreadsUrl:null}},created:function(){this.book&&(this.goodreadsUrl=this.makeGoodReadsUrl())}},Wa=["href"],Ua={key:0,src:"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iNTEyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik01LjExMSAxOC45MDdoLjEyOWMuNTg1IDAgMS4xNzYgMCAxLjc2Mi4wMDUuMDc0IDAgLjE0My0uMDE5LjE2Ni4wOTguMzI4IDEuNjM2IDEuMzgzIDIuNTU5IDIuOSAyLjk5NSAxLjI0MS4zNTYgMi40OTUuMzY2IDMuNzQ5LjA4NCAxLjU1OC0uMzQ3IDIuNTgyLTEuMzI3IDMuMTM2LTIuODMxLjM2OS0xLjAwOC40OTQtMi4wNTMuNTA4LTMuMTE3LjAwNS0uMjcyLjAxNC0yLjIwMy0uMDA5LTIuNDc1bC0uMDQxLS4wMTRjLS4wMzcuMDctLjA3OS4xMzYtLjExNS4yMDYtMS4wMTkgMi4wMi0yLjgyNiAzLjE1OS00Ljg2MSAzLjIzOS00Ljc1LjE4OC03LjgxMi0yLjY3Mi03LjkzMi04LjI1OS0uMDIzLTEuMTExLjA4My0yLjE5OC4zODMtMy4yNjcuOTUtMy4zMzMgMy40NC01LjU0MSA3LjA5Ny01LjU2OSAyLjgyNi0uMDE5IDQuNjgxIDEuODE0IDUuMzU5IDMuMjk1LjAyMy4wNTIuMDYuMTA4LjExLjA4OVYuNDk4aDIuMDQzYzAgMTMuMTM5LjAwNSAxNS41NzIuMDA1IDE1LjU3Mi0uMDA1IDMuNjgtMS4yMzIgNi43MzYtNC43NSA3LjYwMy0zLjIwNS43OTItNy4zMzIuMjI1LTkuMDM5LTIuNjgxLS4zNjktLjYzMy0uNTQ0LTEuMzI3LS41OTktMi4wODZ6bTYuNzQ3LTE3LjE5NEM5LjQzNyAxLjY5IDYuODU0IDMuNjIxIDYuNTU0IDcuOTg1Yy0uMTg5IDIuNzY2LjY4MyA1LjcyOCAzLjI5OCA2Ljk2NiAxLjI3My42MDUgMy40MjcuNzAzIDQuOTk1LS40MDggMi4xOTUtMS41NTYgMi44OTEtNC41NDcgMi41MjctNy4yMTktLjQ0OC0zLjMzMy0yLjIwNS01LjYyNS01LjUxNi01LjYxMXoiIGZpbGw9IiM0ZTM0MmUiLz48L3N2Zz4=",alt:""},Ha={key:1,alt:"",src:"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iNTEyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik01LjExMSAxOC45MDdoLjEyOWMuNTg1IDAgMS4xNzYgMCAxLjc2Mi4wMDUuMDc0IDAgLjE0My0uMDE5LjE2Ni4wOTguMzI4IDEuNjM2IDEuMzgzIDIuNTU5IDIuOSAyLjk5NSAxLjI0MS4zNTYgMi40OTUuMzY2IDMuNzQ5LjA4NCAxLjU1OC0uMzQ3IDIuNTgyLTEuMzI3IDMuMTM2LTIuODMxLjM2OS0xLjAwOC40OTQtMi4wNTMuNTA4LTMuMTE3LjAwNS0uMjcyLjAxNC0yLjIwMy0uMDA5LTIuNDc1bC0uMDQxLS4wMTRjLS4wMzcuMDctLjA3OS4xMzYtLjExNS4yMDYtMS4wMTkgMi4wMi0yLjgyNiAzLjE1OS00Ljg2MSAzLjIzOS00Ljc1LjE4OC03LjgxMi0yLjY3Mi03LjkzMi04LjI1OS0uMDIzLTEuMTExLjA4My0yLjE5OC4zODMtMy4yNjcuOTUtMy4zMzMgMy40NC01LjU0MSA3LjA5Ny01LjU2OSAyLjgyNi0uMDE5IDQuNjgxIDEuODE0IDUuMzU5IDMuMjk1LjAyMy4wNTIuMDYuMTA4LjExLjA4OVYuNDk4aDIuMDQzYzAgMTMuMTM5LjAwNSAxNS41NzIuMDA1IDE1LjU3Mi0uMDA1IDMuNjgtMS4yMzIgNi43MzYtNC43NSA3LjYwMy0zLjIwNS43OTItNy4zMzIuMjI1LTkuMDM5LTIuNjgxLS4zNjktLjYzMy0uNTQ0LTEuMzI3LS41OTktMi4wODZ6bTYuNzQ3LTE3LjE5NEM5LjQzNyAxLjY5IDYuODU0IDMuNjIxIDYuNTU0IDcuOTg1Yy0uMTg5IDIuNzY2LjY4MyA1LjcyOCAzLjI5OCA2Ljk2NiAxLjI3My42MDUgMy40MjcuNzAzIDQuOTk1LS40MDggMi4xOTUtMS41NTYgMi44OTEtNC41NDcgMi41MjctNy4yMTktLjQ0OC0zLjMzMy0yLjIwNS01LjYyNS01LjUxNi01LjYxMXoiIGZpbGw9IiNmZmYiLz48L3N2Zz4="},Fa={key:1};function Ya(e,i,t,n,o,r){const s=de("tippy");return e.goodreadsUrl||t.muted?(a(),u("a",{key:0,href:e.goodreadsUrl,target:"_blank",rel:"noopener noreferrer",class:G(["good-reads-icon",{muted:t.muted,placeholder:!e.goodreadsUrl}])},[t.icon?X((a(),u("div",{key:0,class:"gr-icon",style:le({width:(t.size||30)+"px",height:(t.size||30)+"px"}),content:"Search for the book in Goodreads"},[t.muted?(a(),u("img",Ha)):(a(),u("img",Ua))],4)),[[s]]):(a(),u("span",Fa,"Search in Goodreads"))],10,Wa)):k("",!0)}var Gn=q(Pa,[["render",Ya],["__scopeId","data-v-dcae3364"]]);const Va={name:"openInApp",props:["book","size","muted"],data:function(){return{url:null}},created:function(){_.get(this.book,"asin")&&(this.url="https://smart.link/o3waqx4wg1gdn?asin="+this.book.asin)}},Ga=e=>(Ie("data-v-e36df8a0"),e=e(),Le(),e),qa=["href","tabindex"],Qa=Ga(()=>f("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNTEuNSA5My43IiB3aWR0aD0iMTUxLjUiIGhlaWdodD0iOTMuNyI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiNmZmY7fTwvc3R5bGU+PC9kZWZzPjxnPjxnPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggODAuN2w3NS43LTQ3LjJ2MTIuOEw3NS44IDkzLjcgMCA0Ni4zVjMzLjVsNzUuOCA0Ny4yeiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggMjEuNWE0OC4xNyA0OC4xNyAwIDAgMC00MC43IDIxLjkgMTIuOTQgMTIuOTQgMCAwIDEgMS44LTEuNmMyMS4zLTE3LjcgNTItMTMuNyA2OC43IDguNmwxMS4xLTcuMWE0OS44MiA0OS44MiAwIDAgMC00MC45LTIxLjgiLz48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik03NS44IDQzLjRhMjcuNzIgMjcuNzIgMCAwIDAtMjIuNCAxMS41IDIyLjcgMjIuNyAwIDAgMSAxMy41LTQuNGM4LjIgMCAxNS41IDQuMiAyMC40IDExLjNsMTAuNi02LjZhMjUuNzkgMjUuNzkgMCAwIDAtMjIuMS0xMS44TTI0LjYgMjQuMkM1NS44LS40IDk5LjkgNi4zIDEyMy40IDM5bC4yLjIgMTEuNS03LjFhNzAuODIgNzAuODIgMCAwIDAtMTE4LjYgMCA2MC42MyA2MC42MyAwIDAgMSA4LjEtNy45Ii8+PC9nPjwvZz48L3N2Zz4=",alt:""},null,-1)),Xa=[Qa];function Za(e,i,t,n,o,r){const s=de("tippy");return e.url||t.muted?(a(),u("a",{key:0,href:e.url,target:"_blank",rel:"noopener noreferrer",class:G(["audible-app-link",{muted:t.muted,placeholder:!t.book.asin}]),tabindex:t.muted?0:-1},[X((a(),u("div",{class:"gr-icon",style:le({width:(t.size||30)+"px",height:(t.size||30)+"px"}),content:"Open in app"},Xa,4)),[[s,{placement:t.muted?"left":"top",flipBehavior:t.muted?["left","top","bottom","right"]:["top","bottom","right","left"]}]])],10,qa)):k("",!0)}var qn=q(Va,[["render",Za],["__scopeId","data-v-e36df8a0"]]);const Ja={name:"booksInSeriesBooks",props:["series","book"],data:function(){return{}},computed:{filteredBooks(){return _.filter(this.series.books,i=>{if(_.get(i,"notInLibrary"))return this.$store.state.sticky.booksInSeriesAll;if(this.$store.state.sticky.booksInSeriesFinished)return!0;{let t=_.get(i,"obj.progress");return t?!t.match(/finished/i):!0}})}},methods:{numbersClass:function(e){var i=_.get(e,"obj.progress");return{finished:!!(i&&i.toLowerCase().match("finished")),reading:!!(i&&!i.toLowerCase().match("finished")),unfinished:!i,current:this.book.asin===_.get(e,"obj.asin"),"not-in-library":e.notInLibrary}},iconTippyContent:function(e){if(e.free&&e.notInLibrary)return"This book is free...";if(e.plus&&e.notInLibrary)return"In the plus catalog...";if(e.notInLibrary)return"Not in library...";{const t=this.numbersClass(e);var i="";return t.finished?i="Finished!":t.unfinished?i="Not started...":t.reading&&(i="Started..."),i}},booksInSeriesIcon:function(e){if(e.free&&e.notInLibrary)return"fa-solid fa-circle-minus";if(e.plus&&e.notInLibrary)return"fa-solid fa-circle-plus";if(e.notInLibrary)return"fa-solid fa-ban";{const t=this.numbersClass(e);var i="";return t.finished?i="fa-solid fa-archive":t.unfinished?i="fa-solid fa-book":t.reading&&(i="fa-solid fa-book-reader"),i}}}},Ka=["data-series-name"],el=["content"];function tl(e,i,t,n,o,r){const s=qn,l=Gn,c=Vn,d=de("tippy");return a(),u("div",null,[(a(!0),u(me,null,_e(r.filteredBooks,(h,m)=>(a(),u("div",{"data-series-name":t.series.name,class:G(["numbers-list-item",r.numbersClass(h)]),key:h.asin},[e.$store.state.sticky.booksInSeriesOpenInApp?(a(),P(s,{key:0,size:14,book:h,muted:!0},null,8,["book"])):(a(),P(l,{key:1,size:14,book:h,icon:!0,muted:!0},null,8,["book"])),X((a(),u("span",{class:"icon",content:r.iconTippyContent(h)},[f("i",{class:G(r.booksInSeriesIcon(h))},null,2)],8,el)),[[d,{placement:"left",flipBehavior:["left","top","bottom"]}]]),R(c,{series:t.series,book:h,index:m},null,8,["series","book","index"])],10,Ka))),128))])}var il=q(Ja,[["render",tl]]);const nl={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},ol=f("path",{fill:"currentColor",d:"M32 32h448c17.7 0 32 14.3 32 32v32c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32V64c0-17.7 14.3-32 32-32zm0 128h448v256c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V160zm128 80c0 8.8 7.2 16 16 16h160c8.8 0 16-7.2 16-16s-7.2-16-16-16H176c-8.8 0-16 7.2-16 16z"},null,-1),rl=[ol];function sl(e,i){return a(),u("svg",nl,rl)}var al={name:"fa6-solid-box-archive",render:sl};const ll={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},cl=f("path",{fill:"currentColor",d:"M367.2 412.5L99.5 144.8C77.1 176.1 64 214.5 64 256c0 106 86 192 192 192c41.5 0 79.9-13.1 111.2-35.5zm45.3-45.3C434.9 335.9 448 297.5 448 256c0-106-86-192-192-192c-41.5 0-79.9 13.1-111.2 35.5l267.7 267.7zM512 256c0 141.4-114.6 256-256 256S0 397.4 0 256S114.6 0 256 0s256 114.6 256 256z"},null,-1),ul=[cl];function dl(e,i){return a(),u("svg",ll,ul)}var Ni={name:"fa6-solid-ban",render:dl};const hl={name:"booksInSeriesFilters",props:["series"],data:function(){return{store:this.$store.state,showAllToggle:!1,showFinishedToggle:!1,count:{notInLibrary:0,finished:0}}},created:function(){this.series.collection&&(this.count.finished=this.countFinished(),this.showFinishedToggle=this.count.finished>0,this.count.notInLibrary=this.countNotInLibrary(),this.showAllToggle=this.count.notInLibrary>0)},methods:{countFinished:function(){let e=0;return _.each(this.series.collection,function(i){i.books&&(e+=_.filter(i.books,function(n){let o=_.get(n,"obj.progress");return o?o.match(/finished/i):!1}).length)}),e},countNotInLibrary:function(){let e=0;return _.each(this.series.collection,function(i){i.books&&(e+=_.filter(i.books,"notInLibrary").length)}),e},clickedShowAll(){this.$store.commit("stickyProp",{key:"booksInSeriesAll",value:!this.$store.state.sticky.booksInSeriesAll}),this.$nextTick(function(){this.$compEmitter.emit("resizeSummary")})},clickedShowFinished(){this.$store.commit("stickyProp",{key:"booksInSeriesFinished",value:!this.$store.state.sticky.booksInSeriesFinished}),this.$nextTick(function(){this.$compEmitter.emit("resizeSummary")})}}},Qn=e=>(Ie("data-v-31bdf55e"),e=e(),Le(),e),fl={class:"row"},gl={key:0},ml={key:0},_l={key:0},vl=Qn(()=>f("img",{class:"img-icon",src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNTEuNSA5My43IiB3aWR0aD0iMTUxLjUiIGhlaWdodD0iOTMuNyI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiNmZmY7fTwvc3R5bGU+PC9kZWZzPjxnPjxnPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggODAuN2w3NS43LTQ3LjJ2MTIuOEw3NS44IDkzLjcgMCA0Ni4zVjMzLjVsNzUuOCA0Ny4yeiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggMjEuNWE0OC4xNyA0OC4xNyAwIDAgMC00MC43IDIxLjkgMTIuOTQgMTIuOTQgMCAwIDEgMS44LTEuNmMyMS4zLTE3LjcgNTItMTMuNyA2OC43IDguNmwxMS4xLTcuMWE0OS44MiA0OS44MiAwIDAgMC00MC45LTIxLjgiLz48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik03NS44IDQzLjRhMjcuNzIgMjcuNzIgMCAwIDAtMjIuNCAxMS41IDIyLjcgMjIuNyAwIDAgMSAxMy41LTQuNGM4LjIgMCAxNS41IDQuMiAyMC40IDExLjNsMTAuNi02LjZhMjUuNzkgMjUuNzkgMCAwIDAtMjIuMS0xMS44TTI0LjYgMjQuMkM1NS44LS40IDk5LjkgNi4zIDEyMy40IDM5bC4yLjIgMTEuNS03LjFhNzAuODIgNzAuODIgMCAwIDAtMTE4LjYgMCA2MC42MyA2MC42MyAwIDAgMSA4LjEtNy45Ii8+PC9nPjwvZz48L3N2Zz4=",alt:""},null,-1)),yl=[vl],pl={key:1},bl=Qn(()=>f("img",{class:"img-icon",src:"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iNTEyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik01LjExMSAxOC45MDdoLjEyOWMuNTg1IDAgMS4xNzYgMCAxLjc2Mi4wMDUuMDc0IDAgLjE0My0uMDE5LjE2Ni4wOTguMzI4IDEuNjM2IDEuMzgzIDIuNTU5IDIuOSAyLjk5NSAxLjI0MS4zNTYgMi40OTUuMzY2IDMuNzQ5LjA4NCAxLjU1OC0uMzQ3IDIuNTgyLTEuMzI3IDMuMTM2LTIuODMxLjM2OS0xLjAwOC40OTQtMi4wNTMuNTA4LTMuMTE3LjAwNS0uMjcyLjAxNC0yLjIwMy0uMDA5LTIuNDc1bC0uMDQxLS4wMTRjLS4wMzcuMDctLjA3OS4xMzYtLjExNS4yMDYtMS4wMTkgMi4wMi0yLjgyNiAzLjE1OS00Ljg2MSAzLjIzOS00Ljc1LjE4OC03LjgxMi0yLjY3Mi03LjkzMi04LjI1OS0uMDIzLTEuMTExLjA4My0yLjE5OC4zODMtMy4yNjcuOTUtMy4zMzMgMy40NC01LjU0MSA3LjA5Ny01LjU2OSAyLjgyNi0uMDE5IDQuNjgxIDEuODE0IDUuMzU5IDMuMjk1LjAyMy4wNTIuMDYuMTA4LjExLjA4OVYuNDk4aDIuMDQzYzAgMTMuMTM5LjAwNSAxNS41NzIuMDA1IDE1LjU3Mi0uMDA1IDMuNjgtMS4yMzIgNi43MzYtNC43NSA3LjYwMy0zLjIwNS43OTItNy4zMzIuMjI1LTkuMDM5LTIuNjgxLS4zNjktLjYzMy0uNTQ0LTEuMzI3LS41OTktMi4wODZ6bTYuNzQ3LTE3LjE5NEM5LjQzNyAxLjY5IDYuODU0IDMuNjIxIDYuNTU0IDcuOTg1Yy0uMTg5IDIuNzY2LjY4MyA1LjcyOCAzLjI5OCA2Ljk2NiAxLjI3My42MDUgMy40MjcuNzAzIDQuOTk1LS40MDggMi4xOTUtMS41NTYgMi44OTEtNC41NDcgMi41MjctNy4yMTktLjQ0OC0zLjMzMy0yLjIwNS01LjYyNS01LjUxNi01LjYxMXoiIGZpbGw9IiNmZmYiLz48L3N2Zz4="},null,-1)),kl=[bl];function Sl(e,i,t,n,o,r){const s=Ni,l=al;return a(),u("div",{class:"list-filter-wrapper",style:le({top:e.$store.state.sticky.viewMode==="grid"?e.$store.state.topNavOffset+"px":"31px"})},[f("div",fl,[e.showAllToggle?(a(),u("div",{key:0,class:"show-all-toggle",onClick:i[0]||(i[0]=(...c)=>r.clickedShowAll&&r.clickedShowAll(...c))},[f("div",null,[R(s,{style:{"padding-right":"4px"},class:G({active:e.$store.state.sticky.booksInSeriesAll})},null,8,["class"]),e.showFinishedToggle?k("",!0):(a(),u("span",gl,"Not in library:")),f("span",null,U(e.count.notInLibrary),1)])])):k("",!0),e.showFinishedToggle?(a(),u("div",{key:1,class:"show-finished",onClick:i[1]||(i[1]=(...c)=>r.clickedShowFinished&&r.clickedShowFinished(...c))},[f("div",null,[R(l,{style:{"padding-right":"4px"},class:G({active:e.$store.state.sticky.booksInSeriesFinished})},null,8,["class"]),e.showAllToggle?k("",!0):(a(),u("span",ml,"Finished books:")),f("span",null,U(e.count.finished),1)])])):k("",!0),f("div",{style:{flex:"unset","padding-left":"6px","padding-right":"6px","min-width":"30px"},onClick:i[2]||(i[2]=c=>e.$store.commit("stickyProp",{key:"booksInSeriesOpenInApp",value:!e.$store.state.sticky.booksInSeriesOpenInApp}))},[e.$store.state.sticky.booksInSeriesOpenInApp?(a(),u("span",_l,yl)):(a(),u("span",pl,kl))])])],4)}var Ml=q(hl,[["render",Sl],["__scopeId","data-v-31bdf55e"]]);const wl={name:"booksInSeries",props:["book"],mixins:[xe],data:function(){return{inSeries:!1,series:{collection:null,toggle:!1}}},created:function(){this.seriesPage=this.$route.name==="series",this.series.collection=this.getBooksInSeries(),this.series.count=this.getSeriesCount();const e=this;_.each(this.series.collection,function(i){if(i.books.length)return e.inSeries=!0,!1})},mounted:function(){this.$store.state.sticky.booksInSeriesToggle&&this.$nextTick(()=>{this.$compEmitter.emit("resizeSummary")})},methods:{inLibraryLength:function(e){return _.filter(e.books,function(i){return!i.notInLibrary}).length},checkFilter:function(e){if(_.get(e,"notInLibrary"))return this.$store.state.sticky.booksInSeriesAll;if(this.$store.state.sticky.booksInSeriesFinished)return!0;{let i=_.get(e,"obj.progress");return i?!i.match(/finished/i):!0}},getBooksInSeries:function(){const e=this;let i=[];return e.book.series&&_.each(e.book.series,function(t,n){const o=_.find(e.$store.state.library.series,{asin:t.asin});if(o){let r=o.books;o.allBooks&&(r=o.allBooks),i.push({asin:t.asin,name:t.name,length:o.length,books:_.map(r,function(s){let l=s.asin||s;if(_.includes(o.books,l)){let h=_.find(e.$store.state.library.books,{asin:l});var d=_.find(h.series,{asin:t.asin});let m=o.allBooks?s.bookNumbers:_.isArray(d.bookNumbers)?d.bookNumbers.join(","):d.bookNumbers;return{asin:s.asin||h.asin,bookNumbers:m,title:s.title||h.title,titleShort:s.titleShort||h.titleShort,obj:h}}else return s.notInLibrary=!0,s.obj={authors:e.book.authors,notInLibrary:!0},s})})}}),i.length>0?i:null},getSeriesCount:function(){let e=[];return _.each(this.series.collection,function(i,t){i.books.length&&_.each(i.books,function(n){n.notInLibrary||(e[t]||e.push(0),++e[t])})}),e.join(", ")},booksInSeriesLabelClick:function(){this.$store.commit("stickyProp",{key:"booksInSeriesToggle",value:!this.$store.state.sticky.booksInSeriesToggle}),this.$nextTick(()=>{this.$compEmitter.emit("resizeSummary")})}}},Il={key:0,"data-scroll-to-url-param":"&scrollToSeries=true"},Ll=f("span",{class:"heading"},"My books in the series",-1),Tl={class:"count"},El={key:0,class:"hidden-section my-books-in-series"},$l={class:"series-heading",content:"<div style='text-align: left;'>The first number is how many books you have in the series. The total is based on every single listing in the series page, including different versions or bundles with books you may already have.</div>"},Dl={class:"series-name"},Nl={class:"series-length"};function Al(e,i,t,n,o,r){const s=qt,l=Ml,c=Vn,d=il,h=de("tippy");return e.inSeries?(a(),u("div",Il,[f("div",{class:"label hidden-section-label my-books-in-series-label",onClick:i[0]||(i[0]=(...m)=>r.booksInSeriesLabelClick&&r.booksInSeriesLabelClick(...m))},[Ll,f("span",Tl,U(e.series.count),1),R(s,{up:e.$store.state.sticky.booksInSeriesToggle},null,8,["up"])]),e.$store.state.sticky.booksInSeriesToggle?(a(),u("div",El,[R(l,{series:e.series},null,8,["series"]),(a(!0),u(me,null,_e(e.series.collection,(m,p)=>(a(),u("div",{class:"series-section",key:m.asin},[X((a(),u("div",$l,[f("div",Dl,[R(c,{series:m,book:{},index:-1,seriesName:m.name},null,8,["series","seriesName"])]),f("div",Nl,U(r.inLibraryLength(m))+" / "+U(m.length),1)])),[[h,{placement:"right",flipBehavior:["right","top","bottom"],maxWidth:300,allowHTML:!0}]]),R(d,{series:m,book:t.book},null,8,["series","book"])]))),128))])):k("",!0)])):k("",!0)}var Cl=q(wl,[["render",Al]]);const xl={name:"collectionsDrawer",props:["book"],data:function(){return{collections:null,store:this.$store.state}},created:function(){this.compileCollections()},mounted:function(){this.$store.state.sticky.collectionsDrawerToggle&&this.$nextTick(()=>{this.$compEmitter.emit("resizeSummary")})},methods:{compileCollections:function(){const e=this.book.collectionIds,i=this.store.library.collections;!e||!i||(this.collections=_.filter(i,function(t){return _.includes(e,t.id)}))},labelClick:function(){this.$store.commit("stickyProp",{key:"collectionsDrawerToggle",value:!this.$store.state.sticky.collectionsDrawerToggle}),this.$nextTick(()=>{this.$compEmitter.emit("resizeSummary")})}}},jl=e=>(Ie("data-v-6076e220"),e=e(),Le(),e),zl={key:0},Ol=jl(()=>f("span",{class:"heading"},"This book in collections",-1)),Bl={class:"count"},Rl={key:0,class:"hidden-section"},Pl={class:"text"},Wl={class:"total-books"};function Ul(e,i,t,n,o,r){const s=qt,l=Oe("router-link");return e.collections?(a(),u("div",zl,[f("div",{class:"label hidden-section-label",onClick:i[0]||(i[0]=(...c)=>r.labelClick&&r.labelClick(...c))},[Ol,f("span",Bl,U(e.collections.length),1),R(s,{up:e.$store.state.sticky.collectionsDrawerToggle},null,8,["up"])]),e.$store.state.sticky.collectionsDrawerToggle?(a(),u("div",Rl,[(a(!0),u(me,null,_e(e.collections,c=>(a(),P(l,{class:"collection-link",key:c.id,to:{name:"collection",params:{collection:c.id},query:{book:t.book.asin}}},{default:re(()=>[f("span",Pl,U(c.title),1),f("span",Wl,U(c.books.length),1)]),_:2},1032,["to"]))),128))])):k("",!0)])):k("",!0)}var Hl=q(xl,[["render",Ul],["__scopeId","data-v-6076e220"]]);const Fl={name:"starRating",props:["size","rating","stars","ratings","ratingsText","prioritizeRatingsText","number","numberOf","block","image","placeholderImage","placeholderOpacity","noPlaceholder"],data:function(){return{opt:null,config:{rating:null,length:null}}},created:function(){this.opt={rating:5,stars:5,size:15,number:!1,numberOf:!1,block:!1,image:!1,placeholderImage:!1,placeholderOpacity:!1,noPlaceholder:!1};const e=this.splitDecimals(this.rating);this.config.rating=this.toPercentage(e);const i=this.noPlaceholder||this.opt.noPlacehoder;this.config.length=i?this.config.rating.whole+(this.config.rating.fraction?1:0):parseInt(this.stars||this.opt.stars,10)},methods:{splitDecimals:function(e){const i=""+e;let t;return i.indexOf(".")>-1?t=i.split("."):i.indexOf(",")>-1&&(t=i.split(",")),t?{whole:t[0],fraction:"."+t[1]}:{whole:e,fraction:null}},toPercentage:function(e){let i={whole:parseInt(e.whole,10)};return e.fraction&&(i.originalFraction=e.fraction),e.fraction&&(i.fraction=Math.floor(parseFloat(e.fraction,10)*100)),i}}},Yl=["data-rating"],Vl={key:0,class:"rating-count"},Gl=["innerHTML"],ql={key:0},Ql=["data-star","data-whole","data-fraction"],Xl=["innerHTML"],Zl={key:2,class:"rating-count"},Jl=K("("),Kl=["innerHTML"],ec={key:0},tc=K(")");function ic(e,i,t,n,o,r){return e.config.rating?(a(),u("div",{key:0,class:G(["sRatings-wrapper",{"sRatings-block":t.block||e.opt.block,"prioritize-ratings-text":t.prioritizeRatingsText}]),"data-rating":t.rating||0},[t.ratings&&t.prioritizeRatingsText?(a(),u("div",Vl,[f("span",{innerHTML:t.ratings},null,8,Gl),t.ratingsText!==!1?(a(),u("span",ql," ratings")):k("",!0)])):k("",!0),(a(!0),u(me,null,_e(e.config.length,(s,l)=>(a(),u("div",{key:l,"data-star":s,"data-whole":e.config.rating.whole===s,"data-fraction":e.config.rating.fraction&&e.config.rating.whole===s-1,style:le({width:e.config.rating.whole===s-1&&(t.noPlaceholder||e.opt.noPlaceholder)&&e.config.rating.fraction?(t.size||e.opt.size)*e.config.rating.originalFraction+"px":(t.size||e.opt.size)+"px",height:(t.size||e.opt.size)+"px"})},[e.config.rating.whole<=s&&!(t.noPlaceholder||e.opt.noPlaceholder)?(a(),u("div",{key:0,class:G(["sRatings-placeholder",{"sRatings-show":e.config.rating.whole<s}]),style:le({left:e.config.rating.fraction&&e.config.rating.whole===s-1?e.config.rating.fraction+"%":"0%","background-size":(t.size||e.opt.size)+"px","background-image":t.image||t.placeholderImage||e.opt.placeholderImage?"url("+(t.image&&!t.placeholderImage?t.image:t.placeholderImage||e.opt.placeholderImage)+")":!1,opacity:t.placeholderOpacity||e.opt.placeholderOpacity})},null,6)):k("",!0),e.config.rating.whole>=s||e.config.rating.fraction&&e.config.rating.whole===s-1?(a(),u("div",{key:1,class:"sRatings-star",style:le({width:e.config.rating.whole>=s||e.config.rating.whole===s-1&&(t.noPlaceholder||e.opt.noPlaceholder)?"100%":e.config.rating.fraction+"%","background-size":(t.size||e.opt.size)+"px","background-image":t.image||e.opt.image?"url("+(t.image||e.opt.image)+")":!1})},null,4)):k("",!0)],12,Ql))),128)),t.number||e.opt.number?(a(),u("div",{key:1,class:"text-label",style:le({width:t.numberOf||e.opt.numberOf?"auto":!1,padding:t.numberOf||e.opt.numberOf?"0 6px":!1}),innerHTML:t.numberOf||e.opt.numberOf?t.rating+"/"+(t.stars||e.opt.stars):t.rating},null,12,Xl)):k("",!0),t.ratings&&!t.prioritizeRatingsText?(a(),u("div",Zl,[Jl,f("span",{innerHTML:t.ratings},null,8,Kl),t.ratingsText!==!1?(a(),u("span",ec," ratings")):k("",!0),tc])):k("",!0)],10,Yl)):k("",!0)}var Xn=q(Fl,[["render",ic],["__scopeId","data-v-0e4f9484"]]);const nc={name:"aleBookBasicInfo",props:["book","goodreads"],data:function(){return{ratingTippyOpts:{placement:"top",flipBehavior:["top","right","left","bottom"],allowHTML:!0},ratingLegend:`
        <style>
        .ratings-tippy {
          margin: 0; 
          padding: 0px 0px 0px 15px;
        }
        .ratings-tippy li {
          padding-bottom: 5px;
        }
        </style>
        <ol class="ratings-tippy">
          <li>Not for me</li>
          <li>It\u2019s okay</li>
          <li>Pretty good</li>
          <li>It\u2019s great</li>
          <li>I love it</li>
        </ol>
      `}},methods:{myRatingLabel:function(e){switch(parseFloat(e)){case 1:return"Not for me";case 2:return"It\u2019s okay";case 3:return"Pretty good";case 4:return"It\u2019s great";case 5:return"I love it"}}}},Qt=e=>(Ie("data-v-b2021f1a"),e=e(),Le(),e),oc={class:"basic-info"},rc={key:4},sc=Qt(()=>f("strong",{class:"strong-label"},"Length:",-1)),ac={key:5,class:"language"},lc=Qt(()=>f("strong",{class:"strong-label"},"Language:",-1)),cc={key:6,class:"format"},uc=Qt(()=>f("strong",{class:"strong-label"},"Format:",-1)),dc={key:7,class:"format",content:"YYYY-MM-DD"},hc=Qt(()=>f("strong",{class:"strong-label"},"Release date:",-1)),fc={key:8,class:"rating"},gc=["content"],mc=K("Rating:"),_c=[mc],vc={key:9,class:"own-rating"},yc=["content"],pc=K("My rating: "),bc=[pc];function kc(e,i,t,n,o,r){const s=Fn,l=Xn,c=de("tippy");return a(),u("div",oc,[t.book.authors?(a(),P(s,{key:0,label:"Author",array:t.book.authors},null,8,["array"])):k("",!0),t.book.narrators?(a(),P(s,{key:1,label:"Narrator",array:t.book.narrators},null,8,["array"])):k("",!0),t.book.series?(a(),P(s,{key:2,label:"Series",array:t.book.series},null,8,["array"])):k("",!0),t.book.publishers?(a(),P(s,{key:3,label:"Publisher",array:t.book.publishers},null,8,["array"])):k("",!0),t.book.length?(a(),u("div",rc,[sc,K(U(t.book.length),1)])):k("",!0),t.book.language?(a(),u("div",ac,[lc,f("span",null,U(t.book.language),1)])):k("",!0),t.book.format?(a(),u("div",cc,[uc,f("span",null,U(t.book.format),1)])):k("",!0),t.book.releaseDate?X((a(),u("div",dc,[hc,f("span",null,U(t.book.releaseDate),1)])),[[c]]):k("",!0),t.book.rating?(a(),u("div",fc,[X((a(),u("strong",{class:"strong-label",content:e.ratingLegend},_c,8,gc)),[[c,e.ratingTippyOpts]]),R(l,{size:12,rating:t.book.rating,number:"true",ratings:t.book.ratings},null,8,["rating","ratings"])])):k("",!0),t.book.myRating?(a(),u("div",vc,[X((a(),u("strong",{class:"strong-label",content:e.ratingLegend},bc,8,yc)),[[c,e.ratingTippyOpts]]),X(R(l,{size:12,content:r.myRatingLabel(t.book.myRating),rating:t.book.myRating,number:"true"},null,8,["content","rating"]),[[c,{placement:"right",flipBehavior:["right","top","bottom"]}]])])):k("",!0)])}var Sc=q(nc,[["render",kc],["__scopeId","data-v-b2021f1a"]]);const Mc={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},wc=f("path",{fill:"currentColor",d:"M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256s114.6 256 256 256zm-86.2-346.7c7.9-22.3 29.1-37.3 52.8-37.3h58.3c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24v-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1h-58.3c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM288 352c0 17.7-14.3 32-32 32s-32-14.3-32-32s14.3-32 32-32s32 14.3 32 32z"},null,-1),Ic=[wc];function Lc(e,i){return a(),u("svg",Mc,Ic)}var Tc={name:"fa6-solid-circle-question",render:Lc},Ec="assets/gallery-sidebar.326a6628.jpg",$c="assets/gallery-cover-plus-calatog-indicator.930228c5.jpg",Dc="assets/gallery-sidebar-series-list.5caf72bb.jpg",Nc="assets/gallery-sidebar-toolbar.e9af4245.jpg",Ac="assets/gallery-carousel.5d8cda9f.jpg",Cc="assets/gallery-prefer-short-title.7398728a.jpg",xc="assets/gallery-sample-play-button.76880d32.jpg",jc="assets/gallery-cover-favorite-finished-indicators.deaa62ec.jpg",zc="assets/gallery-book-cover-cloud-player-button.c51131a2.jpg",Oc="assets/gallery-blurb-hover-corner.72b0391b.jpg",Bc="assets/gallery-sidebar-collections-list.e36f2c6e.jpg",Rc="assets/gallery-cover-whispersync-indicator.5e5fc680.jpg",Pc="assets/gallery-sidebar-main-info.fc6f5930.jpg",Wc="assets/gallery-sidebar-cover.71816002.jpg";const Uc={name:"bookDetailsSettings",data:function(){const e=this;this.$store.state;const i=this.$store.state.sticky;return{showSettings:!0,settings:[{type:"heading",label:"Grid book cover"},{enabled:!0,type:"checkbox",label:"Show sample play button",info:`<img src="${xc}" class="tippy-info-image" />`,parent:"sampleButton",value:i.bookDetailSettings.playButton,event:function(t){const n=[{key:"sticky.bookDetailSettings.playButton",value:t.target.checked}];i.bookDetailSettings.cloudPlayer&&(n.push({key:"sticky.bookDetailSettings.cloudPlayer",value:!t.target.checked}),e.mutateChildren("cloudButton","value",!t.target.checked)),e.mutateChildren("sampleButton","value",t.target.checked),e.$store.commit("prop",n)}},{enabled:!0,type:"checkbox",label:"Show cloud player button",parent:"cloudButton",info:`You have to be logged in. Try opening <a targer="_blank" href="'+ store.urlOrigin +'/library">your library</a> first before opening the cloud player.<br>If you can open your library, you can also open the cloud player through the ALE gallery.<br><br><img src="${zc}" class="tippy-info-image" />`,interactiveTippy:!0,value:i.bookDetailSettings.cloudPlayer,event:function(t){const n=[{key:"sticky.bookDetailSettings.cloudPlayer",value:t.target.checked}];i.bookDetailSettings.playButton&&(n.push({key:"sticky.bookDetailSettings.playButton",value:!t.target.checked}),e.mutateChildren("sampleButton","value",!t.target.checked)),e.mutateChildren("cloudButton","value",t.target.checked),e.$store.commit("prop",n)}},{enabled:!0,type:"checkbox",label:"Show blurb on hover",info:`This is never visible on mobile <br/><img src="${Oc}" class="tippy-info-image" />`,value:i.bookDetailSettings.blurb,event:function(t){e.$store.commit("prop",{key:"sticky.bookDetailSettings.blurb",value:t.target.checked})}},{enabled:!0,type:"checkbox",label:"Show whispersync (owned) indicator",info:`<img src="${Rc}" class="tippy-info-image" />`,value:i.bookDetailSettings.whispersync,event:function(t){e.$store.commit("prop",{key:"sticky.bookDetailSettings.whispersync",value:t.target.checked})}},{enabled:!0,type:"checkbox",label:"Show plus catalog indicator",info:`<img src="${$c}" class="tippy-info-image" />`,value:i.bookDetailSettings.plusCatalog,event:function(t){e.$store.commit("prop",{key:"sticky.bookDetailSettings.plusCatalog",value:t.target.checked})}},{enabled:!0,type:"checkbox",label:"Show favorite indicator",info:`<strong>The RED dot</strong><br><img src="${jc}" class="tippy-info-image" />`,value:i.bookDetailSettings.favorite,event:function(t){e.$store.commit("prop",{key:"sticky.bookDetailSettings.favorite",value:t.target.checked})}},{enabled:!0,type:"checkbox",label:"Show finished indicator",info:'<strong>The GREEN dot</strong><br><img src="images/info/cover-favorite-finished-indicators.jpg" class="tippy-info-image" />',value:i.bookDetailSettings.finished,event:function(t){e.$store.commit("prop",{key:"sticky.bookDetailSettings.finished",value:t.target.checked})}},{type:"divider"},{type:"heading",label:"Above summary"},{enabled:!0,type:"checkbox",label:"Prefer short title",info:`This makes the title a little more readable without actually removing anything from the title, just diplaying it differently. Short title is used if available (for newly extracted data since v.0.2.9). Subtitle is shown below with a smaller font similar to Audible store pages. <br/><br/><strong>In case subtitle is not available, the full title is shown below instead, so you always get to see the full title either way.</strong><br/><br/><img src='${Cc}' class='tippy-info-image' />`,value:i.bookDetailSettings.titleShort,event:function(t){e.$store.commit("prop",{key:"sticky.bookDetailSettings.titleShort",value:t.target.checked}),e.$nextTick(()=>{e.$compEmitter.emit("resizeSummary")})}},{type:"divider"},{type:"heading",label:"Sidebar"},{enabled:!0,type:"checkbox",label:"Show sidebar",info:`<strong>The entire sidebar!</strong> <br><img src="${Ec}" class="tippy-info-image" />`,value:i.bookDetailSettings.sidebar.show,event:function(t){const n=t.target.checked;e.$store.commit("prop",{key:"sticky.bookDetailSettings.sidebar.show",value:n}),e.$nextTick(()=>{e.$compEmitter.emit("resizeSummary")}),e.mutateChildren("sidebar","enabled",n)},init:function(t){e.mutateChildren("sidebar","enabled",i.bookDetailSettings.sidebar.show)}},{enabled:!0,type:"checkbox",label:"Show book cover",parent:"sidebar",info:`There is also an easy access toggle swith on the left side of the sidebar (arrow up) <br><img src="${Wc}" class="tippy-info-image" />`,value:!i.bookDetailsCollapsedCover,event:function(t){e.$store.commit("prop",{key:"sticky.bookDetailsCollapsedCover",value:!t.target.checked}),e.$nextTick(()=>{e.$compEmitter.emit("resizeSummary")})}},{enabled:!0,type:"checkbox",label:"Show icon toolbar",parent:"sidebar",info:`<img src="${Nc}" class="tippy-info-image" />`,value:i.bookDetailSettings.sidebar.iconToolbar,event:function(t){e.$store.commit("prop",{key:"sticky.bookDetailSettings.sidebar.iconToolbar",value:t.target.checked}),e.$nextTick(()=>{e.$compEmitter.emit("resizeSummary")})}},{enabled:!0,type:"checkbox",label:"Show main details",parent:"sidebar",info:`There is also an easy access toggle swith on the left side of the sidebar (arrow up) <br><img src="${Pc}" class="tippy-info-image" />`,value:!i.bookDetailsCollapsedDetails,event:function(t){e.$store.commit("prop",{key:"sticky.bookDetailsCollapsedDetails",value:!t.target.checked}),e.$nextTick(()=>{e.$compEmitter.emit("resizeSummary")})}},{enabled:!0,type:"checkbox",label:"Show collections list",parent:"sidebar",info:`If a book is in a collection... <br><img src="${Bc}" class="tippy-info-image" />`,value:i.bookDetailSettings.sidebar.collectionsList,event:function(t){e.$store.commit("prop",{key:"sticky.bookDetailSettings.sidebar.collectionsList",value:t.target.checked}),e.$nextTick(()=>{e.$compEmitter.emit("resizeSummary")})}},{enabled:!0,type:"checkbox",label:"Show series list",parent:"sidebar",info:`If a book is in a series... <br><img src="${Dc}" class="tippy-info-image" />`,value:i.bookDetailSettings.sidebar.seriesList,event:function(t){e.$store.commit("prop",{key:"sticky.bookDetailSettings.sidebar.seriesList",value:t.target.checked}),e.$nextTick(()=>{e.$compEmitter.emit("resizeSummary")})}},{type:"divider"},{type:"heading",label:"Bottom of the details view"},{enabled:!0,type:"checkbox",label:"Show carousel",info:`<img src="${Ac}" class="tippy-info-image" />`,value:i.bookDetailSettings.carousel,event:function(t){e.$store.commit("prop",{key:"sticky.bookDetailSettings.carousel",value:t.target.checked})}}]}},created:function(){const e=_.filter(this.settings,"init");_.each(e,function(i){i.init(i)}),this.dividerIds()},mounted:function(){this.$nextTick(function(){this.setMinHeight()})},methods:{mutateChildren:function(e,i,t){const n=_.filter(this.settings,{parent:e});_.each(n,function(o){o[i]=t})},dividerIds:function(){const e="divider",i=_.filter(this.settings,{type:e});_.each(i,function(t,n){t.label=e+"-"+n})},setMinHeight:function(){const e=this.$el.offsetHeight;this.$store.state.sticky.bookDetailSettings.minHeight,this.$store.commit("prop",{key:"sticky.bookDetailSettings.minHeight",value:e+"px"})}}},Zn=e=>(Ie("data-v-96f21b58"),e=e(),Le(),e),Hc={class:"settings-outer-wrapper"},Fc={class:"tabs"},Yc={key:0,class:"settings-wrapper"},Vc=Zn(()=>f("div",{class:"settings-info"}," Your browser will remember these settings! ",-1)),Gc={key:0,class:"heading"},qc={key:1,class:"divider"},Qc={key:2,class:"inner-wrapper"},Xc=["checked","onChange","disabled"],Zc=Zn(()=>f("div",{class:"visual-checkbox"},[f("div",{class:"switch"})],-1)),Jc={class:"label-text"},Kc={key:1,class:"shortcuts-wrapper"},eu=uo("<table data-v-96f21b58><tr data-v-96f21b58><th data-v-96f21b58>description</th><th data-v-96f21b58>shortcut</th></tr><tr data-v-96f21b58><td data-v-96f21b58>Close</td><td data-v-96f21b58>Esc</td></tr><tr data-v-96f21b58><td data-v-96f21b58>Open adjacent book</td><td data-v-96f21b58>Arrow Keys</td></tr><tr data-v-96f21b58><td data-v-96f21b58>Open adjacent book</td><td data-v-96f21b58>TAB &amp; Shift+TAB</td></tr></table>",1),tu=[eu];function iu(e,i,t,n,o,r){const s=Tc,l=de("tippy");return a(),u("div",Hc,[f("div",Fc,[f("h3",{onClick:i[0]||(i[0]=c=>e.showSettings=!0),class:G({active:e.showSettings})},"Settings",2),f("h3",{onClick:i[1]||(i[1]=c=>e.showSettings=!1),class:G({active:!e.showSettings})},"Shortcuts",2)]),f("div",null,[e.showSettings?(a(),u("div",Yc,[Vc,(a(!0),u(me,null,_e(e.settings,c=>(a(),u("div",{class:G(["setting",{disabled:!c.enabled}]),key:c.label},[c.type==="heading"?(a(),u("div",Gc,[f("h3",null,U(c.label),1)])):c.type==="divider"?(a(),u("div",qc)):(a(),u("div",Qc,[f("label",null,[f("input",{type:"checkbox",checked:c.value,onChange:c.event,disabled:!c.enabled},null,40,Xc),Zc,f("div",Jc,[f("span",null,U(c.label),1)])]),c.info?X((a(),P(s,{key:0,class:"more-info-icon",content:c.info},null,8,["content"])),[[l,{trigger:"mouseenter focus click",interactive:c.interactiveTippy,hideOnClick:!1,delay:0,placement:"right",flipBehavior:["right","top","left","bottom"],allowHTML:!0}]]):k("",!0)]))],2))),128))])):(a(),u("div",Kc,tu))])])}var nu=q(Uc,[["render",iu],["__scopeId","data-v-96f21b58"]]);const ou={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ru=f("path",{fill:"currentColor",d:"m21.32 9.55l-1.89-.63l.89-1.78A1 1 0 0 0 20.13 6L18 3.87a1 1 0 0 0-1.15-.19l-1.78.89l-.63-1.89A1 1 0 0 0 13.5 2h-3a1 1 0 0 0-.95.68l-.63 1.89l-1.78-.89A1 1 0 0 0 6 3.87L3.87 6a1 1 0 0 0-.19 1.15l.89 1.78l-1.89.63a1 1 0 0 0-.68.94v3a1 1 0 0 0 .68.95l1.89.63l-.89 1.78A1 1 0 0 0 3.87 18L6 20.13a1 1 0 0 0 1.15.19l1.78-.89l.63 1.89a1 1 0 0 0 .95.68h3a1 1 0 0 0 .95-.68l.63-1.89l1.78.89a1 1 0 0 0 1.13-.19L20.13 18a1 1 0 0 0 .19-1.15l-.89-1.78l1.89-.63a1 1 0 0 0 .68-.94v-3a1 1 0 0 0-.68-.95ZM20 12.78l-1.2.4A2 2 0 0 0 17.64 16l.57 1.14l-1.1 1.1l-1.11-.6a2 2 0 0 0-2.79 1.16l-.4 1.2h-1.59l-.4-1.2A2 2 0 0 0 8 17.64l-1.14.57l-1.1-1.1l.6-1.11a2 2 0 0 0-1.16-2.82l-1.2-.4v-1.56l1.2-.4A2 2 0 0 0 6.36 8l-.57-1.11l1.1-1.1L8 6.36a2 2 0 0 0 2.82-1.16l.4-1.2h1.56l.4 1.2A2 2 0 0 0 16 6.36l1.14-.57l1.1 1.1l-.6 1.11a2 2 0 0 0 1.16 2.79l1.2.4ZM12 8a4 4 0 1 0 4 4a4 4 0 0 0-4-4Zm0 6a2 2 0 1 1 2-2a2 2 0 0 1-2 2Z"},null,-1),su=[ru];function au(e,i){return a(),u("svg",ou,su)}var lu={name:"uil-cog",render:au};const cu={viewBox:"0 0 576 512",width:"1.2em",height:"1.2em"},uu=f("path",{fill:"currentColor",d:"M272 416c17.7 0 32-14.3 32-32s-14.3-32-32-32H160c-17.7 0-32-14.3-32-32V192h32c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-64-64c-12.5-12.5-32.8-12.5-45.3 0l-64 64c-9.2 9.2-11.9 22.9-6.9 34.9S19.1 192 32.1 192h32v128c0 53 43 96 96 96H272zm32-320c-17.7 0-32 14.3-32 32s14.3 32 32 32h112c17.7 0 32 14.3 32 32v128h-32c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l64 64c12.5 12.5 32.8 12.5 45.3 0l64-64c9.2-9.2 11.9-22.9 6.9-34.9S556.9 320 543.9 320h-32V192c0-53-43-96-96-96H304z"},null,-1),du=[uu];function hu(e,i){return a(),u("svg",cu,du)}var fu={name:"fa6-solid-retweet",render:hu};const gu={name:"sidebarFlipper",data:function(){return{detailSettings:this.$store.state.sticky.bookDetailSettings}},methods:{flip(){this.$store.commit("prop",{key:"sticky.bookDetailSettings.reverseDirection",value:!this.detailSettings.reverseDirection})}}};function mu(e,i,t,n,o,r){const s=fu;return a(),u("div",{class:G(["action-reverse-direction",{flip:e.detailSettings.reverseDirection}])},[R(s,{onClick:r.flip},null,8,["onClick"])],2)}var _u=q(gu,[["render",mu],["__scopeId","data-v-36e4bbb7"]]);const vu={viewBox:"0 0 576 512",width:"1.2em",height:"1.2em"},yu=f("path",{fill:"currentColor",d:"M160 256c0-70.7 57.3-128 128-128s128 57.3 128 128s-57.3 128-128 128s-128-57.3-128-128zm128 80c44.2 0 80-35.8 80-80s-35.8-80-80-80h-2.9c2.2 5.1 2.9 10.5 2.9 16c0 35.3-28.7 64-64 64c-5.5 0-10.9-.7-16-2.9v2c0 45.1 35.8 80.9 80 80.9zM95.42 112.6C142.5 68.84 207.2 32 288 32c80.8 0 145.5 36.84 192.6 80.6c46.8 43.4 78.1 94.5 92.9 131.1c3.3 7.9 3.3 16.7 0 24.6c-14.8 35.7-46.1 86.8-92.9 131.1C433.5 443.2 368.8 480 288 480s-145.5-36.8-192.58-80.6C48.62 355.1 17.34 304 2.461 268.3a31.967 31.967 0 0 1 0-24.6C17.34 207.1 48.62 156 95.42 112.6zM288 80c-65.2 0-118.8 29.6-159.9 67.7c-38.5 35.8-65.08 77.4-78.66 108.3c13.58 30 40.16 72.5 78.66 108.3C169.2 402.4 222.8 432 288 432s118.8-29.6 159.9-67.7c38.5-35.8 64.2-78.3 78.7-108.3c-14.5-30.9-40.2-72.5-78.7-108.3C406.8 109.6 353.2 80 288 80z"},null,-1),pu=[yu];function bu(e,i){return a(),u("svg",vu,pu)}var ku={name:"fa6-regular-eye",render:bu};const Su={viewBox:"0 0 640 512",width:"1.2em",height:"1.2em"},Mu=f("path",{fill:"currentColor",d:"M150.7 92.77C195 58.27 251.8 32 320 32c80.8 0 145.5 36.84 192.6 80.6c46.8 43.4 78.1 94.5 92.9 131.1c3.3 7.9 3.3 16.7 0 24.6c-13.4 32.3-40.3 77.8-79.9 118.4l105.2 82.4c10.4 8.2 12.3 23.3 4.1 33.7c-8.2 10.4-23.3 12.3-33.7 4.1L9.196 42.89C-1.236 34.71-3.065 19.63 5.112 9.196C13.29-1.236 28.37-3.065 38.81 5.112L150.7 92.77zm39.1 30.73l46 36c22.5-19.6 52-31.5 84.2-31.5c70.7 0 128 57.3 128 128c0 21.2-5.1 41.1-14.2 58.7l53.8 42.2c33.5-34.1 58.3-73.8 71-100.9c-14.5-30.9-40.2-72.5-78.7-108.3c-41.1-38.1-94.7-68.6-159.9-68.6c-50.5 0-94.9 18.63-130.2 44.4zm205.1 160.7c3.3-8.8 5.1-18.3 5.1-29.1c0-43.3-35.8-80-80-80c-.7 0-1.3.9-2.9.9c2.2 5.1 2.9 10.5 2.9 15.1c0 11.1-2.4 20.7-6.6 29.2l81.5 63.9zm9.4 130.3l41.9 33C409.9 467.1 367.8 480 320 480c-80.8 0-145.5-36.8-192.6-80.6c-46.78-44.3-78.06-95.4-92.94-131.1a31.98 31.98 0 0 1 0-24.6c9.54-22.9 25.83-52.5 48.63-82.2l37.71 29.7c-18.7 23.3-31.04 46.4-39.35 63.9c13.57 30.9 40.15 73.4 78.65 109.2C201.2 402.4 254.8 432 320 432c30.7 0 58.8-6.6 84.3-17.5zM192 255.1c0-2 .1-4.8.3-7.6l56.1 44.2c10.5 21.1 30.1 36.9 53.6 41.4l56.2 45.1c-12.1 2.9-24.9 5.8-39.1 5.8c-69.8 0-128-57.3-128-128.9h.9z"},null,-1),wu=[Mu];function Iu(e,i){return a(),u("svg",Su,wu)}var Lu={name:"fa6-regular-eye-slash",render:Iu};const Tu={name:"sidebarFlipper",data:function(){return{detailSettings:this.$store.state.sticky.bookDetailSettings}},methods:{flip(){this.$store.commit("prop",{key:"sticky.bookDetailSettings.hideFirstSection",value:!this.detailSettings.hideFirstSection})}}};function Eu(e,i,t,n,o,r){const s=Lu,l=ku;return a(),u("div",{class:G(["details-first-hider",{flip:e.detailSettings.hideFirstSection}]),onClick:i[0]||(i[0]=(...c)=>r.flip&&r.flip(...c))},[e.detailSettings.hideFirstSection?(a(),P(s,{key:0})):(a(),P(l,{key:1}))],2)}var $u=q(Tu,[["render",Eu],["__scopeId","data-v-738e4906"]]);const Du={name:"openWebPlayer",props:["book","icon","topRight","size","tooltip","noBG"],data:function(){return{url:null}},created:function(){this.book&&(this.url="https://www.audible.com/webplayer?asin="+this.book.asin)}},Nu=e=>(Ie("data-v-696c5989"),e=e(),Le(),e),Au=["href"],Cu=["content"],xu=Nu(()=>f("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNTEuNSA5My43IiB3aWR0aD0iMTUxLjUiIGhlaWdodD0iOTMuNyI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiNmZmY7fTwvc3R5bGU+PC9kZWZzPjxnPjxnPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggODAuN2w3NS43LTQ3LjJ2MTIuOEw3NS44IDkzLjcgMCA0Ni4zVjMzLjVsNzUuOCA0Ny4yeiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTc1LjggMjEuNWE0OC4xNyA0OC4xNyAwIDAgMC00MC43IDIxLjkgMTIuOTQgMTIuOTQgMCAwIDEgMS44LTEuNmMyMS4zLTE3LjcgNTItMTMuNyA2OC43IDguNmwxMS4xLTcuMWE0OS44MiA0OS44MiAwIDAgMC00MC45LTIxLjgiLz48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik03NS44IDQzLjRhMjcuNzIgMjcuNzIgMCAwIDAtMjIuNCAxMS41IDIyLjcgMjIuNyAwIDAgMSAxMy41LTQuNGM4LjIgMCAxNS41IDQuMiAyMC40IDExLjNsMTAuNi02LjZhMjUuNzkgMjUuNzkgMCAwIDAtMjIuMS0xMS44TTI0LjYgMjQuMkM1NS44LS40IDk5LjkgNi4zIDEyMy40IDM5bC4yLjIgMTEuNS03LjFhNzAuODIgNzAuODIgMCAwIDAtMTE4LjYgMCA2MC42MyA2MC42MyAwIDAgMSA4LjEtNy45Ii8+PC9nPjwvZz48L3N2Zz4=",alt:""},null,-1)),ju=[xu],zu={key:1};function Ou(e,i,t,n,o,r){const s=de("tippy");return e.url?(a(),u("a",{key:0,href:e.url,target:"_blank",rel:"noopener noreferrer",class:G({"top-right":t.topRight,"no-bg":t.noBG})},[t.icon?X((a(),u("div",{key:0,class:"gr-icon audible-cloudplayer-link",style:le({width:(t.size||30)+"px",height:(t.size||30)+"px"}),content:t.tooltip?"Open web player":""},ju,12,Cu)),[[s]]):(a(),u("span",zu,"Search in Goodreads"))],10,Au)):k("",!0)}var Ai=q(Du,[["render",Ou],["__scopeId","data-v-696c5989"]]);const Bu={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},Ru=f("path",{fill:"currentColor",d:"M512 256c0 141.4-114.6 256-256 256S0 397.4 0 256S114.6 0 256 0s256 114.6 256 256zM188.3 147.1c-7.6 4.2-12.3 12.3-12.3 20.9v176c0 8.7 4.7 16.7 12.3 20.9s16.8 4.1 24.3-.5l144-88c7.1-4.4 11.5-12.1 11.5-20.5s-4.4-16.1-11.5-20.5l-144-88c-7.4-4.5-16.7-4.7-24.3-.5z"},null,-1),Pu=[Ru];function Wu(e,i){return a(),u("svg",Bu,Pu)}var Uu={name:"fa6-solid-circle-play",render:Wu};const Hu={name:"sampleButton",props:["book","index","topRight","size"],methods:{playSample:function(e,i){this.$compEmitter.emit("play-audio",{from:"sampleButton",route:this.$route,book:e,index:i})}}};function Fu(e,i,t,n,o,r){const s=Uu,l=de("tippy");return X((a(),P(s,{class:G(["pointer",{"top-right":t.topRight}]),onClick:i[0]||(i[0]=c=>r.playSample(t.book,e.rowIndex)),style:le({width:(t.size||30)+"px",height:"auto"}),content:"Play sample audio"},null,8,["class","style"])),[[l]])}var Jn=q(Hu,[["render",Fu],["__scopeId","data-v-10b712b2"]]);const Yu={name:"book-info-toolbar",props:["book","tempAsin"],data:function(){return{size:20}}},Vu={class:"book-info-toolbar"};function Gu(e,i,t,n,o,r){const s=Jn,l=Gn,c=qn,d=Ai;return a(),u("div",Vu,[t.book.sample?(a(),P(s,{key:0,size:e.size,book:t.book},null,8,["size","book"])):k("",!0),R(l,{size:e.size,book:t.book,icon:!0},null,8,["size","book"]),t.tempAsin?k("",!0):(a(),P(c,{key:1,size:e.size,book:t.book},null,8,["size","book"])),!t.tempAsin&&!t.book.notInLibrary?(a(),P(d,{key:2,size:e.size,book:t.book,icon:!0},null,8,["size","book"])):k("",!0)])}var qu=q(Yu,[["render",Gu]]),Kn={mixins:[zt],methods:{progressbarWidth:function(e){if(e.progress){if(e.progress.toLowerCase().trim()==="finished")return{width:"100%"};if(e.length){var i=this.timeStringToSeconds(e.progress);const t=this.timeStringToSeconds(e.length);return i=t-i,{width:i/t*100+"%"}}else return{width:0}}else return{width:0}}}};const Qu={name:"bookDetails",props:["asin"],mixins:[zt,tn,Kn,jt,xe],data:function(){return{store:this.$store.state,sticky:this.$store.state.sticky,book:null,index:null,maxWidth:"unset",loading:!0,clickedBook:null,peopleAlsoBoughtJSON:null,bookSummaryJSON:null,scrpt:null,imageLoaded:!1}},created:function(){this.index=_.findIndex(this.$store.state.chunkCollection,{asin:this.asin}),this.book=this.$store.state.chunkCollection[this.index],this.loadJSON()},mounted:function(){this.$nextTick(function(){this.clickedBook=document.querySelector('.ale-book[data-asin="'+this.book.asin+'"]')||document.querySelector('.ale-row[data-asin="'+this.book.asin+'"]'),this.resetScroll(),this.maxWidth=this.repositionBookDetails()+"px",this.$updateQueries({book:this.book.asin}),this.$store.commit("prop",{key:"timeStamp",value:new Date().getTime()}),this.$compEmitter.on("afterWindowResize",this.onWindowResize),this.loading=!1,this.scrollToCarousel(),this.scrollToMyBooksInTheSeries()})},beforeUnmount:function(){this.scrpt&&(this.scrpt.remove(),this.scrpt=null),this.$compEmitter.off("afterWindowResize",this.onWindowResize),this.peopleAlsoBoughtJSON=null,this.bookSummaryJSON=null,this.$store.commit("prop",{key:"bookDetailSettingsOpen",value:!1}),document.querySelector("#ale-bookdetails").remove()},computed:{peopleAlsoBought:function(){return this.book.peopleAlsoBought||this.peopleAlsoBoughtJSON},getMaxWidth:function(){return this.sticky.viewMode==="spreadsheet"?this.maxWidth:window.innerWidth>800?this.maxWidth:"800px"},mobileWidth(){return this.store.windowWidth<=688},tempAsin(){return!!this.book.asin.match(/temp-asin/i)}},methods:{collapseBtnClicked:function(e){this.$store.commit("stickyProp",{key:e,value:!this.sticky[e]}),this.$nextTick(()=>{this.$compEmitter.emit("resizeSummary")})},loadJSON:function(e){if(this.store.standalone){let i=this,t=document.createElement("script");this.scrpt=t,t.src="data/split-book-data/"+i.book.asin+"."+this.store.library.extras.cacheID+".js",t.type="text/javascript",t.onload=function(){i.bookSummaryJSON=window.bookSummaryJSON,window.bookSummaryJSON=!0,i.peopleAlsoBoughtJSON=window.peopleAlsoBoughtJSON,window.peopleAlsoBoughtJSON=!0,t=null},t.onerror=function(){t=null,setTimeout(function(){e||i.loadJSON("afterError")},1e3)},document.head.appendChild(t)}},onWindowResize:function(e){e.widthChanged&&(this.maxWidth=this.repositionBookDetails()+"px",this.resetScroll())},changeUrl:function(){_.get(this.$route,"query.book")!==this.book.asin&&this.$router.replace({query:{book:this.book.asin}})},resetScroll:function(){this.$nextTick(function(){this.$nextTick(function(){this.sticky.viewMode==="grid"?scroll({top:this.clickedBook.offsetTop-this.store.topNavOffset-25,behavior:"auto"}):document.querySelector(".list-view-inner-wrap").scroll({top:this.clickedBook.offsetTop-45})})})},scrollToCarousel:function(){!this.$route.query.carousel||(this.$updateQueries({carousel:null}),this.$nextTick(function(){const e=parseFloat(this.$route.query.y);this.sticky.viewMode==="grid"?scroll({top:e}):document.querySelector(".list-view-inner-wrap").scroll({top:e})}))},scrollToMyBooksInTheSeries:function(){!this.$route.query.scrollToSeries||(this.$updateQueries({scrollToSeries:null}),this.$store.commit("stickyProp",{key:"booksInSeriesToggle",value:!0}),this.$nextTick(function(){const e=this.$el.querySelector(".my-books-in-series-label");if(e){let i=e.getBoundingClientRect().top+window.scrollY;i=i-$store.state.topNavOffset-25,this.sticky.viewMode==="grid"?scroll({top:i,behavior:"smooth"}):document.querySelector(".list-view-inner-wrap").scroll({top:i,behavior:"smooth"})}}))},repositionBookDetails:function(){const e=document.querySelector(".ale-books"),i=e.querySelector(".ale-book")?e.querySelectorAll(".ale-book"):e.querySelector("table tbody").querySelectorAll(".ale-row"),t={};t.el=i[this.index],t.index=this.index,t.width=t.el.getBoundingClientRect().width,t.siblings=i;const n={};n.el=e,n.width=n.el.getBoundingClientRect().width;const o={};o.cols=Math.floor(n.width/t.width)||1,o.cols<2?o.rowEndEl=t.el:(o.currentRow=Math.floor(t.index/o.cols)+1,o.rowEnd=o.currentRow*o.cols,o.getRowEndEl=function(s){let l=t.siblings[s];return l||(l=o.getRowEndEl(--s)),l},o.rowEndEl=o.getRowEndEl(o.rowEnd-1));let r=document.querySelector(".target-row-end");return r&&r.classList.remove("target-row-end"),o.rowEndEl.classList.add("target-row-end"),o.rowEndEl.parentNode.insertBefore(this.$refs.bookDetails,o.rowEndEl.nextSibling),this.sticky.viewMode!=="spreadsheet"&&this.repositionBookDetailsArrow(t.el),this.sticky.viewMode==="spreadsheet"?n.width-60:t.width*o.cols},repositionBookDetailsArrow:function(e){const t=e.getBoundingClientRect().left+window.scrollX+e.offsetWidth/2;this.$refs.arrow.style.left=t+"px"},openAdjacentBookDetails:_.throttle(function(e){const i=this;if(this.sticky.viewMode==="grid")switch(e.srcKey){case"left":case"tabShift":i.keyboardMove("prev");break;case"right":case"tab":i.keyboardMove("next");break;case"up":case"down":i.keyboardMove_inGrid_vertically(e);break}else switch(e.srcKey){case"left":case"up":case"tabShift":i.keyboardMove("prev");break;case"right":case"down":case"tab":i.keyboardMove("next");break}},70,{leading:!1,trailing:!0}),keyboardMove(e){const i=e==="prev",t=i?this.index-1:this.index+1,n=this.store.chunkCollection[t];(i?t>-1:t<this.store.chunkCollection.length)&&(!i&&t>this.store.chunkCollection.length-2?(this.$store.commit("chunkCollectionAdd"),this.$nextTick(function(){this.$compEmitter.emit("book-clicked",n.asin)})):this.$compEmitter.emit("book-clicked",n.asin))},keyboardMove_inGrid_vertically(e){const i=this,t={};t.el=document.querySelector(".ale-books"),t.width=t.el.offsetWidth;const n={};n.el=this.clickedBook,n.index=this.index,n.width=n.el.offsetWidth;const o=Math.floor(t.width/n.width),s=function(){const h=e.srcKey;let m=-1;if(h==="up")m=i.index-o,m<0&&(m=0);else{m=i.index+o;const p=i.store.chunkCollection.length-1;m>p&&(m=p)}return m}(),l=i.store.chunkCollection[s],c=this.store.chunkCollection.length-1;(e.srcKey==="up"?!(i.index===0&&s==0):!(i.index===c&&s===c))&&(e.srcKey==="down"&&s>i.store.chunkCollection.length-2?(this.$store.commit("chunkCollectionAdd"),this.$nextTick(function(){this.$compEmitter.emit("book-clicked",l.asin)})):this.$compEmitter.emit("book-clicked",l.asin))},closeBookDetails:function(){_.get(this.$route,"query.book")!==void 0&&this.$updateQueries({book:null})},progressTooltip:function(e){if(e.progress.toLowerCase().trim()==="finished"){const i=this.timeStringToSeconds(e.length);return"Finished: ( "+this.secondsToTimeString(i)+" )"}else{const i=this.timeStringToSeconds(e.progress),t=this.timeStringToSeconds(e.length),n=t-i;return"Progress: "+this.secondsToTimeString(n)+" / "+this.secondsToTimeString(t)}},progressInfo:function(e){if(e.progress&&e.length)if(e.progress.toLowerCase().trim()==="finished"){const i=this.timeStringToSeconds(e.length);return'<div class="stretch-center" style="flex: 1;"><strong>Finished!</strong> ( '+this.secondsToTimeString(i,!0)+" )</div>"}else{const i=this.timeStringToSeconds(e.progress),t=this.timeStringToSeconds(e.length),n=t-i;return"<strong>Progress: </strong><div>"+this.secondsToTimeString(n,!0)+" / "+this.secondsToTimeString(t,!0)+"</div>"}else return'<div class="stretch-center" style="flex: 1;"><strong>Length:</strong> '+(e.length||"unkown")+"</div>"}}},Xu={key:0,class:"arrow",ref:"arrow"},Zu={key:0,class:"information",ref:"information"},Ju=["content"],Ku=["href"],ed={class:"progressbar"},td=["src"],id=["innerHTML"],nd={class:"basic-details"},od=["content"],rd={key:2,class:"carousel-wrap"},sd=K(" Listeners also enjoyed ");function ad(e,i,t,n,o,r){const s=Ni,l=Yn,c=qu,d=$u,h=_u,m=lu,p=nu,b=qt,g=Sc,v=Hl,T=Cl,I=$a,w=ms,S=de("tippy"),y=de("shortkey");return e.book?X((a(),u("div",{key:0,id:"ale-bookdetails",ref:"bookDetails",onShortkey:i[5]||(i[5]=(...M)=>r.closeBookDetails&&r.closeBookDetails(...M)),class:G({"spreadsheet-details":e.sticky.viewMode==="spreadsheet","mobile-width":r.mobileWidth})},[e.sticky.viewMode!=="spreadsheet"?(a(),u("div",Xu,null,512)):k("",!0),X((a(),u("div",{id:"book-info-container",onShortkey:i[4]||(i[4]=(...M)=>r.openAdjacentBookDetails&&r.openAdjacentBookDetails(...M)),class:G({"book-detail-settings-open":e.store.bookDetailSettingsOpen})},[e.book.notInLibrary?(a(),u("div",{key:0,class:"inner-wrap",style:le({maxWidth:r.getMaxWidth,minHeight:e.store.bookDetailSettingsOpen?e.sticky.bookDetailSettings.minHeight:null})},[R(s,{style:{"font-size":"30px",color:"#ff404e","margin-bottom":"20px"}}),R(l,{book:e.book,tempAsin:r.tempAsin},null,8,["book","tempAsin"]),e.sticky.bookDetailSettings.sidebar.iconToolbar?(a(),P(c,{key:0,style:{"margin-top":"15px"},book:e.book,tempAsin:r.tempAsin},null,8,["book","tempAsin"])):k("",!0)],4)):(a(),u("div",{key:1,class:"inner-wrap",style:le({maxWidth:r.getMaxWidth,minHeight:e.store.bookDetailSettingsOpen?e.sticky.bookDetailSettings.minHeight:null})},[r.mobileWidth?(a(),P(d,{key:0})):k("",!0),R(h),R(m,{class:G(["book-details-info",{active:e.store.bookDetailSettingsOpen}]),onClick:i[0]||(i[0]=M=>e.$store.commit("prop",{key:"bookDetailSettingsOpen",value:!e.store.bookDetailSettingsOpen}))},null,8,["class"]),e.store.bookDetailSettingsOpen?(a(),P(p,{key:1})):k("",!0),f("div",{class:G(["top details-wrap",{"reverse-direction":e.sticky.bookDetailSettings.reverseDirection}])},[e.sticky.bookDetailSettings.sidebar.show&&!(!e.sticky.bookDetailSettings.reverseDirection&&e.sticky.bookDetailSettings.hideFirstSection&&r.mobileWidth)?(a(),u("div",Zu,[r.mobileWidth?k("",!0):X((a(),u("div",{key:0,class:"collapse-btn",content:(e.sticky.bookDetailsCollapsedCover?"Expand":"Collapse")+" cover image.",style:{top:"5px"},onClick:i[1]||(i[1]=M=>r.collapseBtnClicked("bookDetailsCollapsedCover"))},[R(b,{up:!e.sticky.bookDetailsCollapsedCover},null,8,["up"])],8,Ju)),[[S]]),f("div",{class:G(["cover-wrap",{"cover-height":!e.sticky.bookDetailsCollapsedCover&&e.book.cover&&!r.mobileWidth}])},[f("a",{href:e.makeUrl("book",e.book.asin),target:"_blank",rel:"noopener noreferrer"},[f("div",ed,[f("div",{class:"progress",style:le(e.progressbarWidth(e.book))},null,4)]),!e.sticky.bookDetailsCollapsedCover&&e.book.cover&&!r.mobileWidth?X((a(),u("img",{key:0,onLoad:i[2]||(i[2]=M=>e.imageLoaded=!0),crossorigin:"anonymous",class:G(["cover",{loaded:e.imageLoaded}]),src:e.makeCoverUrl(e.book.cover)},null,42,td)),[[Ki,e.imageLoaded]]):k("",!0)],8,Ku)],2),f("div",{class:"progress-info",innerHTML:r.progressInfo(e.book)},null,8,id),f("div",nd,[X((a(),u("div",{class:"collapse-btn",content:(e.sticky.bookDetailsCollapsedDetails?"Expand":"Collapse")+" book details.",style:le({top:e.sticky.bookDetailsCollapsedDetails?"-10px":"25px"}),onClick:i[3]||(i[3]=M=>r.collapseBtnClicked("bookDetailsCollapsedDetails"))},[R(b,{up:!e.sticky.bookDetailsCollapsedDetails},null,8,["up"])],12,od)),[[S]]),e.sticky.bookDetailSettings.sidebar.iconToolbar?(a(),P(c,{key:0,book:e.book},null,8,["book"])):k("",!0),e.sticky.bookDetailsCollapsedDetails?k("",!0):(a(),P(g,{key:1,book:e.book},null,8,["book"]))]),e.sticky.bookDetailSettings.sidebar.seriesList?(a(),P(v,{key:1,book:e.book},null,8,["book"])):k("",!0),e.sticky.bookDetailSettings.sidebar.collectionsList?(a(),P(T,{key:2,book:e.book},null,8,["book"])):k("",!0)],512)):k("",!0),!e.loading&&!(e.sticky.bookDetailSettings.reverseDirection&&e.sticky.bookDetailSettings.hideFirstSection&&r.mobileWidth)?(a(),P(I,{key:1,book:e.book,bookSummary:e.bookSummaryJSON,mobileWidth:r.mobileWidth},null,8,["book","bookSummary","mobileWidth"])):k("",!0)],2),e.sticky.bookDetailSettings.carousel&&!e.loading?(a(),u("div",rd,[r.peopleAlsoBought&&r.peopleAlsoBought!==!0&&!(e.store.standalone&&!e.store.siteOnline)?(a(),P(w,{detailsBook:e.book,books:r.peopleAlsoBought,key:e.maxWidth,mobileWidth:r.mobileWidth},{default:re(()=>[sd]),_:1},8,["detailsBook","books","mobileWidth"])):k("",!0)])):k("",!0)],4))],34)),[[y,{left:["arrowleft"],up:["arrowup"],right:["arrowright"],down:["arrowdown"],tab:["tab"],tabShift:["tab","shift"]}]])],34)),[[y,["esc"],void 0,{once:!0}]]):k("",!0)}var ld=q(Qu,[["render",ad],["__scopeId","data-v-05a9d932"]]);const cd={name:"aleListItem",props:["book","rowIndex","keys"],mixins:[en,jt,xe],data:function(){return{sticky:this.$store.state.sticky,coverUrl:"",coverUrl27:"",bookTitle:"",goodreadsUrl:"",columns:null,imageLoading:!0}},created:function(){this.coverUrl=this.makeCoverUrl(this.book.cover),this.coverUrl&&(this.coverUrl27=this.coverUrl.replace("_SL500_","_SL54_")),this.bookTitle=this.book.title||this.book.titleShort,this.columns=this.prepareColumns()},mounted:function(){this.$nextTick(function(){this.imageLoading=!1})},methods:{prepareColumns:function(){const e=this;return _.map(this.keys,function(i){let t={};switch(t.key=i,t.class="col-"+_.kebabCase(i),i){case"authors":case"narrators":case"categories":case"publishers":case"tags":t.text=e.stringifyArray(e.book[i],"name",i==="categories"?" > ":null);break;case"series":var n=e.book.series;n&&(n=_.map(n,function(s){let l=s.bookNumbers?" (book "+s.bookNumbers.join(", ")+")":"";return s.name+l}).join(", ")),t.text=n||"";break;case"title":t.text=e.book[i]||e.book.titleShort,t.class+=" sticky-col";break;case"bookNumbers":if(!e.book.series)t.text="";else{let s=e.book.series.filter(function(l){return l.bookNumbers});s=s.map(function(l){return l.bookNumbers}),s=s.join(", "),t.text=s||"\u221E"}break;case"isbn10":const o=_.find(e.book.isbns,{type:"ISBN_10"});o&&(t.text=o.identifier);break;case"isbn13":const r=_.find(e.book.isbns,{type:"ISBN_13"});r&&(t.text=r.identifier);break;default:t.text=e.book[i],t.name="";break}return t.text||(t.text=null),t})}}},ud=["name"],dd={class:"ale-col-inner"},hd={key:0,class:"icons-n-stuff"},fd={class:"info-icon"},gd={key:1,class:"cloud-player-icon"},md={class:"thumbnail-wrapper"},_d=["src"],vd={class:"text-container"};function yd(e,i,t,n,o,r){const s=Wn,l=Jn,c=Ai;return a(),u("tr",{class:"ale-row-inner",onClick:i[0]||(i[0]=d=>e.$compEmitter.emit("book-clicked",t.book.asin))},[(a(!0),u(me,null,_e(e.columns,d=>(a(),u("td",{key:d.key,class:G(["ale-col",d.class]),name:d.name},[f("div",dd,[d.key==="title"?(a(),u("span",hd,[f("span",fd,[R(s,{class:"pointer"})]),e.sticky.bookDetailSettings.playButton?(a(),P(l,{key:0,book:t.book,index:t.rowIndex,size:16},null,8,["book","index"])):t.book.asin&&e.sticky.bookDetailSettings.cloudPlayer?(a(),u("div",gd,[R(c,{size:20,book:t.book,icon:!0,tooltip:!1,noBG:!0},null,8,["book"])])):k("",!0),f("div",md,[e.imageLoading?k("",!0):(a(),u("img",{key:0,crossorigin:"anonymous",src:e.coverUrl27,alt:""},null,8,_d))])])):k("",!0),f("span",vd,U(d.text||"\xA0"),1)])],10,ud))),128))])}var pd=q(cd,[["render",yd]]);const bd={name:"colResizer",props:["identifier"],data:function(){return{colClass:"",startPosition:null,endPosition:null,dragging:!1,minWidth:30,width:null,mouseX:0,threshold:10}},created:function(){this.colClass=this.identifier.split(" ")[0]},methods:{resizeMouseDown:function(e){this.endPosition=null,this.startPosition=e.clientX},resizeMouseMove:_.throttle(function(e){this.startPosition&&Math.abs(this.startPosition-e.clientX)>=this.threshold&&(this.dragging=!0,this.mouseX=e.clientX)},65),resizeMouseUp:function(e){if(this.dragging){this.endPosition=e.clientX;const i=this.width?this.width:e.currentTarget.parentElement.offsetWidth,t=Math.abs(this.startPosition-this.endPosition),n=this.endPosition>this.startPosition,o=i+(n?+t:-t);this.width=o<this.minWidth?this.minWidth:o}this.dragging=null,this.endPosition=null,this.startPosition=null,this.mouseX=0}}};function kd(e,i,t,n,o,r){return a(),u("div",{class:G(["col-resizer",{dragging:e.startPosition}]),onMousedown:i[0]||(i[0]=(...s)=>r.resizeMouseDown&&r.resizeMouseDown(...s)),onMouseup:i[1]||(i[1]=(...s)=>r.resizeMouseUp&&r.resizeMouseUp(...s)),onMousemove:i[2]||(i[2]=(...s)=>r.resizeMouseMove&&r.resizeMouseMove(...s))},[e.mouseX?(a(),u("div",{key:0,class:"floater-boy",style:le({left:e.mouseX+"px"})},null,4)):k("",!0),e.width?(a(),P(li("style"),{key:1,type:"text/css"},{default:re(()=>[K(" ."+U(e.colClass)+" { width: "+U(e.width)+"px !important; } ",1)]),_:1})):k("",!0)],34)}var Sd=q(bd,[["render",kd],["__scopeId","data-v-94bbf484"]]);const Md={name:"aleHeader",props:["keys"],data:function(){return{listName:"sort",optionsList:null,headers:null}},created:function(){this.optionsList=this.$store.state.listRenderingOpts[this.listName],this.headers=this.prepareHeaders(this.keys)},methods:{prepareHeaders:function(e){return _.map(e,function(i){const t={key:i,label:_.startCase(i),align:"left",class:"col-"+_.kebabCase(i)};switch(i){case"titleShort":case"title":t.class=t.class+" sticky-col";break;case"authors":case"narrators":case"publishers":case"tags":t.key+=".name";break}return t})},sorterIndex:function(e){return _.findIndex(this.optionsList,{key:e.key})},sorterItem:function(e){const i=new RegExp("^"+e);return _.find(this.optionsList,function(t){return t.key.match(i)})}}},wd={class:"list-view-header ale-row"},Id={class:"ale-row-inner"},Ld={class:"ale-col-inner"},Td={key:1,class:"text-container"};function Ed(e,i,t,n,o,r){const s=Sd,l=po;return a(),u("div",wd,[f("tr",Id,[(a(!0),u(me,null,_e(e.headers,(c,d)=>(a(),u("th",{key:c.label,class:G(["header-item ale-col",c.class])},[R(s,{identifier:c.class},null,8,["identifier"]),f("div",Ld,[r.sorterIndex(c)>-1?(a(),P(l,{key:0,label:!1,item:r.sorterItem(c.key),index:r.sorterIndex(c),currentList:e.optionsList,listName:e.listName,tippyTop:!0},{default:re(()=>[K(U(c.label),1)]),_:2},1032,["item","index","currentList","listName"])):(a(),u("span",Td,U(c.label),1))])],2))),128))])])}var $d=q(Md,[["render",Ed]]);const Dd={name:"aleBooks",mixins:[en,_o],data:function(){return{spreadsheetTop:170,keys:"",prevScrollTop:0}},created:function(){this.keys=this.prepareKeys()},mounted:function(){this.setSpreadsheetOffset(),this.$compEmitter.on("afterWindowResize",this.setSpreadsheetOffset)},beforeUnmount:function(){this.$compEmitter.off("afterWindowResize",this.setSpreadsheetOffset)},methods:{setSpreadsheetOffset:function(){this.$nextTick(function(){const e=document.querySelector("#ale-search-wrap"),i=window.pageYOffset+e.getBoundingClientRect().top,t=e.offsetHeight;this.spreadsheetTop=i+t})}}},Nd={class:"list-view-inner-wrap"};function Ad(e,i,t,n,o,r){const s=$d,l=pd,c=ai;return a(),u("div",{class:"ale-books list-view",ref:"listView",style:le({top:e.spreadsheetTop+"px"})},[f("div",Nd,[f("table",null,[f("thead",null,[R(s,{keys:e.keys},null,8,["keys"])]),f("tbody",null,[(a(!0),u(me,null,_e(e.$store.state.chunkCollection,(d,h)=>(a(),P(c,{class:"ale-row","data-asin":d.asin,key:"book:"+d.asin,ref_for:!0,ref:"domBooks"},{default:re(()=>[R(l,{book:d,rowIndex:h,keys:e.keys},null,8,["book","rowIndex","keys"])]),_:2},1032,["data-asin"]))),128))])])])],4)}var Cd=q(Dd,[["render",Ad]]);const xd={viewBox:"0 0 448 512",width:"1.2em",height:"1.2em"},jd=f("path",{fill:"currentColor",d:"M96 0C43 0 0 43 0 96v320c0 53 43 96 96 96h320c17.7 0 32-14.3 32-32s-14.3-32-32-32v-64c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H96zm0 384h256v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16zm16 48h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16s7.2-16 16-16z"},null,-1),zd=[jd];function Od(e,i){return a(),u("svg",xd,zd)}var Bd={name:"fa6-solid-book",render:Od};const Rd={viewBox:"0 0 448 512",width:"1.2em",height:"1.2em"},Pd=f("path",{fill:"currentColor",d:"M224 64c-44.2 0-80 35.8-80 80v48h240c35.3 0 64 28.7 64 64v192c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V256c0-35.3 28.7-64 64-64h16v-48C80 64.5 144.5 0 224 0c57.5 0 107 33.7 130.1 82.3c7.6 16 .8 35.1-15.2 42.6s-35.1.8-42.6-15.2C283.4 82.6 255.9 64 224 64zm32 320c17.7 0 32-14.3 32-32s-14.3-32-32-32h-64c-17.7 0-32 14.3-32 32s14.3 32 32 32h64z"},null,-1),Wd=[Pd];function Ud(e,i){return a(),u("svg",Rd,Wd)}var Hd={name:"fa6-solid-unlock-keyhole",render:Ud};const Fd={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},Yd=f("path",{fill:"currentColor",d:"M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7l233.4-233.3c12.5-12.5 32.8-12.5 45.3 0z"},null,-1),Vd=[Yd];function Gd(e,i){return a(),u("svg",Fd,Vd)}var qd={name:"fa6-solid-check",render:Gd};const Qd={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},Xd=f("path",{fill:"currentColor",d:"m47.6 300.4l180.7 168.7c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9l180.7-168.7c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141c-45.6-7.6-92 7.3-124.6 39.9l-12 12l-12-12c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"},null,-1),Zd=[Xd];function Jd(e,i){return a(),u("svg",Qd,Zd)}var eo={name:"fa6-solid-heart",render:Jd};const Kd={name:"sortValues",props:["book"],mixins:[zt,tn,Kn],data:function(){return{notAvailable:"&nbsp;"}},methods:{sortContents:function(){let e=this.$store.getters.sortBy;switch(e){case"bookNumbers":if(this.$route.params.series&&this.book.series){let o=_.find(this.book.series,{asin:this.$route.params.series});return o&&_.isArray(o.bookNumbers)?o.bookNumbers.join(", "):""}else if(this.book.series){let o=_.filter(this.book.series,"bookNumbers");return o=_.map(o,"bookNumbers"),o=_.flatten(o),_.isEmpty(o)?o=null:_.isArray(o)&&(o=o.join(", ")),o||"\u221E"}else return"";case"seriesOrder":const n=", ";if(this.book.series){const o=this.$route.params.series,r=_.find(this.book.series,{asin:o});if(r){const s=r.bookNumbers;return s?_.isArray(s)?s.join(n):s:"\u221E"}else return this.notAvailable}else return this.notAvailable;case"authors.name":case"narrators.name":case"publishers.name":case"tags.name":var i=_.get(this.book,e.replace(".name","[0].name"));return i||this.notAvailable;case"rating":return this.book.ratings?this.book[e]:this.notAvailable;case"ratings":return this.book.rating?this.book.rating:this.notAvailable;case"progress":var t=this.progressbarWidth(this.book);return this.progress(this.book)+'<div class="progress-bar"><div style="width: '+t.width+';"></div></div>';case"title":return this.book.titleShort||this.book.title||this.notAvailable;case"series":return this.book.series?_.map(this.book.series,"name").join(", "):this.notAvailable;case"categories":return this.book.categories?this.book.categories[0].name:this.notAvailable;case"isbn10":case"isbn13":if(this.book.isbns)if(e==="isbn10"){const o=_.find(this.book.isbns,["type","ISBN_10"]);if(o)return o.identifier}else if(e==="isbn13"){const o=_.find(this.book.isbns,["type","ISBN_13"]);if(o)return o.identifier}else return this.notAvailable;else return this.notAvailable;break;case"narratorsNumber":if(this.book.narrators){let o=_.find(this.book.narrators,function(r){return r.name.match("full cast")});return o&&this.book.narrators.length===1?"\u200B\u221E full cast":this.book.narrators.length-(o?1:0)+(o?" full cast":"")}else return this.notAvailable;default:return this.book[e]?this.book[e]:this.notAvailable}},progress:function(e){if(e.progress&&e.length)if(e.progress.toLowerCase().trim()==="finished"){const i=this.timeStringToSeconds(e.length);return"<div>Finished ( "+this.secondsToTimeString(i,!0)+" )</div>"}else{const i=this.timeStringToSeconds(e.progress),t=this.timeStringToSeconds(e.length),n=t-i;return this.secondsToTimeString(n,!0)+" <strong class='audible-orange-text'>/</strong> "+this.secondsToTimeString(t,!0)}else return e.progress?"<div>"+e.progress+" ("+this.notAvailable+")</div>":e.length?"<div>Length: "+e.length+"</div>":"<div>"+e.progress+"</div>"}}},eh={class:"sort-values-container"},th=["content"],ih=["innerHTML","content"],nh={key:1};function oh(e,i,t,n,o,r){const s=Xn,l=eo,c=de("tippy");return a(),u("div",eh,[(e.$store.getters.sortBy==="myRating"||e.$store.getters.sortBy==="rating"||e.$store.getters.sortBy==="ratings")&&r.sortContents()!=="\xA0"?X((a(),u("div",{key:0,class:"ratings",content:(e.$store.getters.sortBy!=="myRating"&&t.book.myRating?"My rating: "+t.book.myRating+"<br>":"")+(e.$store.getters.sortBy==="myRating"&&t.book.rating?"Average rating: "+t.book.rating+"<br>":"")+(e.$store.getters.sortBy==="myRating"&&t.book.ratings?"Number of ratings: "+t.book.ratings+"<br>":"")},[R(s,{prioritizeRatingsText:e.$store.getters.sortBy==="ratings",size:10,rating:r.sortContents(),number:!0,ratingsText:!1,ratings:(e.$store.getters.sortBy==="rating"||e.$store.getters.sortBy==="ratings")&&t.book.ratings?t.book.ratings:null},null,8,["prioritizeRatingsText","rating","ratings"])],8,th)),[[c,{trigger:"click mouseenter",allowHTML:!0}]]):e.$store.getters.sortBy!=="favorite"?X((a(),u("div",{key:1,class:G("sort-"+e.$store.getters.sortBy),innerHTML:r.sortContents(),content:(e.$store.getters.sortBy==="progress"?t.book.progress:"")+""},null,10,ih)),[[c,{trigger:"click mouseenter",allowHTML:!0}]]):(a(),u("div",{key:2,class:G("sort-"+e.$store.getters.sortBy)},[t.book.favorite?(a(),P(l,{key:0})):(a(),u("span",nh,"\xA0"))],2))])}var rh=q(Kd,[["render",oh]]);const sh={name:"book",props:["book","index","sortValuesEnabled","imageLoaded"],mixins:[jt],data:function(){return{store:this.$store.state,sticky:this.$store.state.sticky,smartLink:"https://smart.link/o3waqx4wg1gdn?asin="}},methods:{playSample:function(e,i){this.$compEmitter.emit("play-audio",{from:"book",route:this.$route,book:e,index:i})}}},Xt=e=>(Ie("data-v-979474b4"),e=e(),Le(),e),ah={class:"ale-cover"},lh={key:1,class:"ale-play-sample cloud-player-icon"},ch=["content"],uh={class:"info-icons-wrapper"},dh={key:0,class:"favorite-marker"},hh=Xt(()=>f("span",null,"favorite",-1)),fh={key:1,class:"finished-marker"},gh=Xt(()=>f("span",null,"finished",-1)),mh={key:2,class:"plus-catalog-marker"},_h={key:0},vh={key:1},yh=Xt(()=>f("span",null,"catalog",-1)),ph={key:3,class:"kindle-marker"},bh=Xt(()=>f("span",null,"In my kindle",-1)),kh={class:"ale-info-indicator"},Sh={key:1,class:"ale-info-indicator not-in-library"},Mh={key:2,class:"placeholder-cover"},wh={class:"cover-content"},Ih={key:0,class:"title"},Lh={key:1,class:"author"},Th={key:3,class:"cover-img-wrapper"},Eh=["src"];function $h(e,i,t,n,o,r){const s=rh,l=vo,c=Ai,d=eo,h=qd,m=Hd,p=Hn,b=Un,g=Bd,v=Ni,T=de("tippy");return a(),u("div",{class:G(["details-inner-wrap",{"not-in-library":t.book.notInLibrary}])},[t.sortValuesEnabled?(a(),P(s,{key:0,book:t.book},null,8,["book"])):k("",!0),f("div",ah,[t.book.sample&&e.sticky.bookDetailSettings.playButton?(a(),u("div",{key:0,class:"ale-play-sample",onClick:i[0]||(i[0]=I=>r.playSample(t.book,t.index))},[f("div",null,[R(l)])])):t.book.asin&&e.sticky.bookDetailSettings.cloudPlayer?(a(),u("div",lh,[R(c,{size:20,book:t.book,icon:!0,tooltip:!1,noBG:!0},null,8,["book"])])):k("",!0),f("div",{class:"ale-click-wrap",onClick:i[3]||(i[3]=I=>t.book.asin?e.$compEmitter.emit("book-clicked",t.book.asin):null)},[t.book.blurb&&e.sticky.bookDetailSettings.blurb?X((a(),u("div",{key:0,class:"blurb-tooltip",content:t.book.blurb},null,8,ch)),[[T,{delay:150,placement:"left",flipBehavior:["left","right","top","bottom"],maxWidth:300}]]):k("",!0),f("div",uh,[t.book.favorite&&e.sticky.bookDetailSettings.favorite?(a(),u("div",dh,[f("span",null,[R(d)]),hh])):k("",!0),t.book.progress==="Finished"&&e.sticky.bookDetailSettings.finished?(a(),u("div",fh,[f("span",null,[R(h)]),gh])):k("",!0),t.book.fromPlusCatalog&&e.sticky.bookDetailSettings.plusCatalog?(a(),u("div",mh,[t.book.unavailable?(a(),u("span",_h,[R(m)])):(a(),u("span",vh,[R(p)])),yh])):k("",!0),t.book.whispersync==="owned"&&e.sticky.bookDetailSettings.whispersync?(a(),u("div",ph,[f("span",null,[R(b)]),bh])):k("",!0)]),f("div",kh,[f("div",null,[R(g)])]),t.book.notInLibrary?(a(),u("div",Sh,[f("div",null,[R(v)])])):k("",!0),t.book.cover?(a(),u("div",Th,[R(fo,{name:"fade"},{default:re(()=>[X(f("img",{onLoad:i[1]||(i[1]=I=>e.$emit("update:imageLoaded",!0)),class:G(["ale-cover-image",{loaded:t.imageLoaded}]),crossorigin:"anonymous",draggable:"false",onTouchstart:i[2]||(i[2]=ho(()=>{},["prevent"])),src:e.makeCoverUrl(t.book.cover,280),alt:""},null,42,Eh),[[Ki,t.imageLoaded]])]),_:1})])):(a(),u("div",Mh,[f("div",wh,[t.book.titleShort||t.book.title?(a(),u("div",Ih,U(t.book.titleShort||t.book.title),1)):k("",!0),t.book.authors?(a(),u("div",Lh,U(t.book.authors[0].name),1)):k("",!0)])]))])])],2)}var Dh=q(sh,[["render",$h],["__scopeId","data-v-979474b4"]]);const Nh={name:"aleBooks",mixins:[nt],data:function(){return{imageLoaded:!1}}};function Ah(e,i,t,n,o,r){const s=Dh,l=ai;return a(),u("div",{class:G(["ale-books grid-view",{"sort-values-on":e.$store.getters.sortValues&&e.$store.getters.sortBy!=="bookNumbers"&&e.$store.getters.sortBy!=="seriesOrder"}]),ref:"booksWrapper"},[(a(!0),u(me,null,_e(e.$store.state.chunkCollection,(c,d)=>(a(),P(l,{class:G(["ale-book",{"details-open":!!e.$route.query.book&&e.$route.query.book===c.asin,"image-loaded":e.imageLoaded}]),"data-asin":c.asin,key:"book:"+c.asin},{default:re(()=>[R(s,{book:c,index:d,sortValuesEnabled:e.$store.getters.sortValues,imageLoaded:e.imageLoaded,"onUpdate:imageLoaded":i[0]||(i[0]=h=>e.imageLoaded=h)},null,8,["book","index","sortValuesEnabled","imageLoaded"])]),_:2},1032,["class","data-asin"]))),128))],2)}var Ch=q(Nh,[["render",Ah]]);const xh={viewBox:"0 0 576 512",width:"1.2em",height:"1.2em"},jh=f("path",{fill:"currentColor",d:"M352 144c0-44.2 35.8-80 80-80s80 35.8 80 80v48c0 17.7 14.3 32 32 32s32-14.3 32-32v-48C576 64.5 511.5 0 432 0S288 64.5 288 144v48H64c-35.3 0-64 28.7-64 64v192c0 35.3 28.7 64 64 64h320c35.3 0 64-28.7 64-64V256c0-35.3-28.7-64-64-64h-32v-48z"},null,-1),zh=[jh];function Oh(e,i){return a(),u("svg",xh,zh)}var Bh={name:"fa6-solid-lock-open",render:Oh};const Rh={name:"contextMenuReminder",methods:{hide:function(){this.$store.commit("stickyProp",{key:"contextMenuReminder",value:!1})}}},Ph=e=>(Ie("data-v-5ea7bcfa"),e=e(),Le(),e),Wh={class:"reminder slide-in-blurred-top"},Uh=Ph(()=>f("span",null,[K("You can open this gallery page any time from "),f("br"),K("the browser context menu (right-click) ")],-1)),Hh=["src"];function Fh(e,i,t,n,o,r){const s=yo;return a(),u("div",Wh,[Uh,f("div",null,[f("img",{src:e.contextMenuImage,alt:""},null,8,Hh)]),R(s,{class:"hide",onClick:r.hide},null,8,["onClick"])])}var Yh=q(Rh,[["render",Fh],["__scopeId","data-v-5ea7bcfa"]]),Vh={mixins:[nt],methods:{prepCategoriesSubPage:function(e){if(this.$route.name==="category"){const i=this,t={parent:this.$route.params.parent,child:this.$route.params.child,book:this.$route.params.query};let n=_.filter(this.subPageSource.collection,function(o){if(o.categories){const r=o.categories[0]?i.slugify(o.categories[0].name):!1,s=o.categories[1]?i.slugify(o.categories[1].name):!1;if(r&&s&&t.parent===r&&t.child===s)return!0;if(r&&t.parent===r&&!t.child)return!0}});if(n&&(t.parent||t.child)){const o=n[0].categories[0]?n[0].categories[0].name:null,r=n[0].categories[1]?n[0].categories[1].name:null;o&&(this.pageTitle=o),r&&t.child&&(this.pageSubTitle=r)}this.$store.commit("prop",{key:"pageCollection",value:n}),this.collectionSource="pageCollection"}}}},Gh={mixins:[nt],methods:{prepCollectionsSubPage:function(e){if(this.$route.name==="collection"){let i=this.$route.params.collection,t=_.find(this.$store.state.library.collections,{id:i});if(t){let n=_.filter(this.$store.state.library.books,function(o){return _.includes(t.books,o.asin)});(t.title||t.description)&&(t.title&&(this.pageTitle=t.title),t.description&&(this.pageSubTitle=t.description)),this.$store.commit("prop",{key:"pageCollection",value:n}),this.collectionSource="pageCollection"}}}}},qh={methods:{prepSeriesSubPage:function(){if(this.$route.name==="series"){const e=this.$route.params.series,i=_.find(this.$store.state.library.series,{asin:e}),t=i&&i.books&&i.books.length>0&&this.subPageSource.name=="library";t?this.$store.commit("addListRenderingOpts",{listName:"sort",option:{active:!1,current:!1,key:"seriesOrder",label:"Series order",type:"sort",tippy:"The infinite symbol (\u221E) means the book doesn't have a number"},activate:!(this.$route.query.sort&&this.$route.query.sort!=="seriesOrder"),sortValues:!0,splice:3}):this.$store.commit("updateListRenderingOpts",{listName:"sort",key:"bookNumbers",active:!1,sortValues:!0});let n=[];if(t){const o=_.get(i,"allBooks");let r=-1;n=_.map(o,s=>{if(++r,s.notInLibrary){const l=_.merge({added:r,series:[{asin:i.asin,name:i.name,bookNumbers:s.bookNumbers}]},s);return l.asin||(l.asin=i.asin+"-"+r+"-temp-asin"),l}else{let l=_.find(this.subPageSource.collection,{asin:s.asin});return l=_.cloneDeep(l),l.added=r,l}}),console.log(_.cloneDeep(n))}else n=_.filter(this.subPageSource.collection,function(o){return _.find(o.series,{asin:e})});if(n.length>0){const o=_.find(_.get(n,"0.series"),{asin:e});o&&(this.pageTitle=o.name),t||(this.pageSubTitle="Couldn't find series order: using number sort")}this.$store.commit("prop",{key:"pageCollection",value:n}),this.collectionSource="pageCollection"}}}},Qh={mixins:[nt],methods:{prepNarratorsSubPage:function(){const e=this;if(this.$route.name==="narrator"){const i=this.$route.params.narrator;let t=_.filter(this.subPageSource.collection,function(n){if(n.narrators)return _.find(n.narrators,function(o){return e.slugify(o.name)===i})});if(t.length>0){const n=_.find(t[0].narrators,function(o){return e.slugify(o.name)===i});n&&(this.pageTitle=n.name)}this.$store.commit("prop",{key:"pageCollection",value:t}),this.collectionSource="pageCollection"}}}},Xh={methods:{prepAuthorsSubPage:function(){if(this.$route.name==="author"){const e=this.$route.params.author;let i=_.filter(this.subPageSource.collection,function(t){if(t.authors)return _.find(t.authors,function(n){return n.url===e})});if(i.length>0){const t=_.find(i[0].authors,function(n){return n.url===e});t&&(this.pageTitle=t.name)}this.$store.commit("prop",{key:"pageCollection",value:i}),this.collectionSource="pageCollection"}}}},Zh={mixins:[nt],methods:{prepPublishersSubPage:function(){const e=this;if(this.$route.name==="publisher"){const i=this.$route.params.publisher;let t=_.filter(this.subPageSource.collection,function(n){if(n.publishers)return _.find(n.publishers,function(o){return e.slugify(o.name)===i})});if(t.length>0){const n=_.find(t[0].publishers,function(o){return e.slugify(o.name)===i});n&&(this.pageTitle=n.name)}this.$store.commit("prop",{key:"pageCollection",value:t}),this.collectionSource="pageCollection"}}}},Jh={mixins:[nt],methods:{prepWishlist:function(e){this.$route.name==="wishlist"&&(this.$store.commit("prop",{key:"pageCollection",value:this.$store.state.library.wishlist}),this.collectionSource="pageCollection")}}},Kh={methods:{updateListRenderingOptions:function(){const e=this;let i={scope:[{active:!0,key:"title",weight:15},{active:!0,key:"authors.name",weight:5},{active:!0,key:"narrators.name",weight:5},{active:!0,key:"series.name",weight:10},{active:!1,key:"categories.name",weight:1},{active:!1,key:"tags.name",weight:1},{active:!1,key:"publishers.name",weight:1},{active:!1,key:"blurb",weight:1},{active:!1,key:"summary",weight:1}],filter:[{active:!0,type:"filter",label:"Not started",key:"notStarted",condition:function(t){return!t.progress}},{active:!0,type:"filter",label:"Started",key:"started",condition:function(t){return!!(t.progress&&!t.progress.toLowerCase().match("finished"))},excludeFromWishlist:!0},{active:!0,type:"filter",label:"Finished",key:"finished",condition:function(t){return!!(t.progress&&t.progress.toLowerCase().match("finished"))},excludeFromWishlist:!0},{active:!1,type:"filterExtras",label:"In series",key:"inseries",group:"filterExtras",condition:function(t){return t.series}},{active:!1,type:"filterExtras",label:"Not in series",key:"not-inseries",group:"filterExtras",condition:function(t){return!t.series}},{type:"divider",key:"divider1.1"},{active:!1,type:"filterExtras",label:"Not from plus catalog",key:"not-from-plus-catalog",group:"filterExtras",condition:function(t){return!t.fromPlusCatalog}},{active:!1,type:"filterExtras",label:"Plus catalog: Available",key:"plus-catalog-available",group:"filterExtras",condition:function(t){return t.fromPlusCatalog&&!t.unavailable},tippy:"It is possible for this status to change after last gallery update..."},{active:!1,type:"filterExtras",label:"Plus catalog: Unavailable",excludeFromWishlist:!0,key:"plus-catalog-unavailable",group:"filterExtras",condition:function(t){return t.fromPlusCatalog&&t.unavailable},tippy:"Books that are from the plus catalog, but they are locked. Conditions: a book left the plus catalog or inactive membership."},{type:"divider",key:"divider1.3"},{active:!1,type:"filterExtras",label:"Store page available",key:"store-page-available",group:"filterExtras",condition:function(t){return!(t.storePageChanged||t.storePageMissing)}},{active:!1,type:"filterExtras",label:"Store page unavailable",key:"store-page-unavailable",group:"filterExtras",condition:function(t){return t.storePageChanged||t.storePageMissing},tippy:"Store page has been removed or changed after it was added."},{type:"divider",key:"divider1.4",excludeFromWishlist:!0},{active:!1,type:"filterExtras",label:"Favorites: include",key:"favorites",excludeFromWishlist:!0,group:"filterExtras",condition:function(t){return t.favorite}},{active:!1,type:"filterExtras",label:"Favorites: exclude",key:"favorites-not",excludeFromWishlist:!0,group:"filterExtras",condition:function(t){return!t.favorite}},{type:"divider",key:"divider1.4.1",excludeFromWishlist:!0},{active:!1,type:"filterExtras",label:"Books I have rated",excludeFromWishlist:!0,key:"rated-by-me",group:"filterExtras",condition:function(t){return t.myRating}},{active:!1,type:"filterExtras",label:"Books I haven't rated",excludeFromWishlist:!0,key:"not-rated-by-me",group:"filterExtras",condition:function(t){return!t.myRating}},{type:"divider",key:"divider1.4.2",excludeFromWishlist:!0},{active:!1,type:"filterExtras",label:"New books",excludeFromWishlist:!0,key:"new-books",group:"filterExtras",condition:function(t){return t.isNew},tippy:"Most recent additions."},{type:"divider",key:"divider2.0"},{active:!1,type:"filterExtras",label:"Full cast: include",key:"full-cast-include",group:"filterExtras",condition:function(t){return _.find(t.narrators,function(n){return n.name.match(/full cast/im)})}},{active:!1,type:"filterExtras",label:"Full cast: exclude",key:"full-cast-exclude",group:"filterExtras",condition:function(t){return!_.find(t.narrators,function(n){return n.name.match(/full cast/im)})}},{type:"divider",key:"divider1.9"},{active:!1,excludeFromWishlist:!0,type:"filterExtras",label:"Whisperync: owned",key:"whispersync-owned",group:"filterExtras",condition:function(t){return t.whispersync==="owned"}},{active:!1,type:"filterExtras",label:"Whispersync: available",key:"whispersync-available",group:"filterExtras",condition:function(t){return t.whispersync==="available"}},{active:!1,excludeFromWishlist:!0,type:"filterExtras",label:"Whisperync: available + owned",key:"whispersync-owned-or-available",group:"filterExtras",condition:function(t){return t.whispersync}},{active:!1,type:"filterExtras",label:"Whispersync: unavailable",key:"whispersync-false",group:"filterExtras",tippy:"Either unavailable or unkown...",condition:function(t){return!t.whispersync}},{excludeFromWishlist:!0,type:"divider",key:"divider-archived"},{active:!1,excludeFromWishlist:!0,type:"filterExtras",label:"Archived",key:"archived",group:"filterExtras",condition:function(t){return t.archived}},{active:!1,excludeFromWishlist:!0,type:"filterExtras",label:"Not archived",key:"not-archived",group:"filterExtras",condition:function(t){return!t.archived}},{type:"divider",key:"divider2.2"},{active:!1,type:"filterExtras",label:"Length",key:"length",group:"filterExtras",range:!0,rangeMinDist:1,rangeSuffix:"h",rangeMin:function(){return 0},rangeMax:function(){let t=e.$store.getters.collectionSource,n=_.maxBy(t,function(o){return e.timeStringToSeconds(o.length)});return n?Math.ceil(e.timeStringToSeconds(n.length)/3600):0},condition:function(t){if(t.length){let n=this.range[0],o=this.range[1],r=e.timeStringToSeconds(t.length)/3600;return r>=n&&r<=o}}},{type:"divider",key:"divider2.1"},{active:!1,type:"filterExtras",label:"Narrators",key:"narrators",group:"filterExtras",range:!0,rangeMinDist:0,rangeSuffix:"",rangeMin:function(){return 1},rangeMax:function(){let t=e.$store.getters.collectionSource,n=_.maxBy(t,function(o){let r=_.filter(o.narrators,function(s){return s.name&&!s.name.match("full cast")});return!r.length&&o.narrators&&o.narrators.length&&(r=o.narrators),o.narrators?o.narrators.length:0});return n?n.narrators.length:0},condition:function(t){if(t.narrators){let n=_.find(t.narrators,function(l){return l.name.match("full cast")}),o=this.range[0],r=this.range[1],s=t.narrators.length;return n&&s===1&&(s=r),s>=o&&s<=r}}},{type:"divider",key:"divider3",excludeFromWishlist:!0},{active:!1,type:"filterExtras",excludeFromWishlist:!0,label:"books in series",key:"booksinseries",group:"filterExtras",range:!0,rangeMinDist:0,rangeSuffix:"",tippy:"Number of owned books in series",rangeMin:function(){return 1},rangeMax:function(){let t=_.filter(e.$store.getters.collectionSource,"series"),n=1;return _.each(t,function(o){let r=_.maxBy(o.series,function(s){let l=_.find(e.$store.state.library.series,{asin:s.asin});if(l&&l.books)return l.books.length});if(r){const s=_.find(e.$store.state.library.series,{asin:r.asin}).books.length;n<s&&(n=s)}}),n},condition:function(t){if(t.series){let n=this.range[0],o=this.range[1],r=!1;return _.each(t.series,function(s){const l=_.find(e.$store.state.library.series,{asin:s.asin});if(l&&l.books.length>=n&&l.books.length<=o)return r=!0,!1}),r}}},{type:"divider",key:"divider4"},{active:!1,type:"filterExtras",label:"Average rating",key:"rating",group:"filterExtras",range:!0,rangeMinDist:0,rangeSuffix:"",rangeMin:function(){let t=e.$store.getters.collectionSource,n=_.minBy(t,function(o){if(o.rating)return parseFloat(o.rating)});return n?parseFloat(n.rating):0},rangeMax:function(){let t=e.$store.getters.collectionSource,n=_.maxBy(t,function(o){if(o.rating)return parseFloat(o.rating)});return n?parseFloat(n.rating):0},condition:function(t){if(t.rating){let n=this.range[0],o=this.range[1],r=parseFloat(t.rating);return r>=n&&r<=o}},rangeInterval:.1},{type:"divider",key:"divider5.2"},{active:!1,type:"filterExtras",label:"Ratings",key:"number-of-ratings",group:"filterExtras",range:!0,rangeMinDist:1,rangeSuffix:"",rangeMin:function(){let t=e.$store.getters.collectionSource,n=_.minBy(t,function(o){if(o.ratings)return parseFloat(o.ratings)});return n?n.ratings:0},rangeMax:function(){let t=e.$store.getters.collectionSource,n=_.maxBy(t,function(o){if(o.ratings)return parseFloat(o.ratings)});return n?n.ratings:0},condition:function(t){if(t.ratings){let n=this.range[0],o=this.range[1],r=parseFloat(t.ratings);return r>=n&&r<=o}}},{type:"divider",key:"divider5",excludeFromWishlist:!0},{active:!1,type:"filterExtras",label:"My rating",excludeFromWishlist:!0,key:"myrating",group:"filterExtras",range:!0,rangeMinDist:0,rangeSuffix:"",rangeInterval:1,rangeMarks:function(t){return!0},rangeMin:function(){let t=e.$store.getters.collectionSource,n=_.minBy(t,function(o){if(o.myRating)return parseFloat(o.myRating)});return n?parseFloat(n.myRating):0},rangeMax:function(){let t=e.$store.getters.collectionSource,n=_.maxBy(t,function(o){if(o.myRating)return parseFloat(o.myRating)});return n?parseFloat(n.myRating):0},condition:function(t){if(t.myRating){let n=this.range[0],o=this.range[1],r=parseFloat(t.myRating);return r>=n&&r<=o}},tooltipFormatter:function(t){switch(t){case 1:return t+" (Not for me)";case 2:return t+" (It\u2019s okay)";case 3:return t+" (Pretty good)";case 4:return t+" (It\u2019s great)";case 5:return t+" (I love it)";default:return 0}}},{type:"divider",key:"divider5.1"},{active:!1,type:"filterExtras",label:"Added",key:"added",group:"filterExtras",range:!0,rangeMinDist:1,rangeSuffix:"",rangeMin:function(){let t=e.$store.getters.collectionSource,n=_.minBy(t,function(o){if(o.added)return parseFloat(o.added)});return n?parseFloat(n.added):0},rangeMax:function(){let t=e.$store.getters.collectionSource,n=_.maxBy(t,function(o){if(o.added)return parseFloat(o.added)});return n?parseFloat(n.added):0},condition:function(t){if(t.added){let n=this.range[0],o=this.range[1],r=parseFloat(t.added);return r>=n&&r<=o}},rangeInterval:1,tippy:"Low number = old book <br> High number = new book <br><br> For example: if you pick the range 1-10 you get 10 of the oldest books based on when they were added."},{type:"divider",key:"divider8.8"},{active:!1,type:"filterExtras",label:"Authors",key:"authors-by-name",group:"filterExtras",dropdownOpts:function(t){let n=[];return _.each(e.$store.getters.collectionSource,function(o){o.authors&&n.push(_.map(o.authors,"name"))}),n=_.union(_.flatten(n)).sort(),n},value:[],condition:function(t){if(t.authors){let n=_.map(t.authors,"name"),o=this.value;if(o.length>0){let r=!1;return _.each(o,function(s){if(_.includes(n,s))return r=!0,!1}),r}}}},{type:"divider",key:"divider8.9"},{active:!1,type:"filterExtras",label:"Narrators",key:"narrators-by-name",group:"filterExtras",dropdownOpts:function(t){let n=[];return _.each(e.$store.getters.collectionSource,function(o){o.narrators&&n.push(_.map(o.narrators,"name"))}),n=_.union(_.flatten(n)).sort(),n},value:[],condition:function(t){if(t.narrators){let n=_.map(t.narrators,"name"),o=this.value;if(o.length>0){let r=!1;return _.each(o,function(s){if(_.includes(n,s))return r=!0,!1}),r}}}},{type:"divider",key:"divider9.0"},{active:!1,type:"filterExtras",label:"Tags",key:"tags",group:"filterExtras",dropdownOpts:function(t){let n=[];return _.each(e.$store.getters.collectionSource,function(o){o.tags&&n.push(_.map(o.tags,"name"))}),n=_.union(_.flatten(n)).sort(),n},value:[],condition:function(t){if(t.tags){let n=_.map(t.tags,"name"),o=this.value;if(o.length>0){let r=!1;return _.each(o,function(s){if(_.includes(n,s))return r=!0,!1}),r}}}},{type:"divider",key:"divider9.1"},{active:!1,type:"filterExtras",label:"Language",key:"language",group:"filterExtras",dropdownOpts:function(t){let n=[];return _.each(e.$store.getters.collectionSource,function(o){o.language&&n.push(o.language)}),n=_.union(n).sort(),n},value:[],condition:function(t){if(t.language){let n=this.value;return _.includes(n,t.language)}}},{type:"divider",key:"divider9.4"},{active:!1,type:"filterExtras",label:"Series by name",key:"series-by-name",group:"filterExtras",dropdownOpts:function(t){let n=[];return _.each(e.$store.getters.collectionSource,function(o){o.series&&n.push(_.map(o.series,"name"))}),n=_.union(_.flatten(n)).sort(),n},value:[],condition:function(t){if(t.series){let n=_.map(t.series,"name"),o=this.value;if(o.length>0){let r=!1;return _.each(o,function(s){if(_.includes(n,s))return r=!0,!1}),r}}}},{type:"divider",key:"divider9.5"},{active:!1,type:"filterExtras",label:"Format",key:"format",group:"filterExtras",dropdownOpts:function(t){let n=[];return _.each(e.$store.getters.collectionSource,function(o){o.format&&n.push(o.format)}),n=_.union(n).sort(),n},value:[],condition:function(t){if(t.format)return t.format?_.includes(this.value,t.format):!1}},{type:"divider",key:"divider9.6"},{active:!1,type:"filterExtras",label:"Publishers",key:"publishers-by-name",group:"filterExtras",dropdownOpts:function(t){let n=[];return _.each(e.$store.getters.collectionSource,function(o){o.publishers&&n.push(_.map(o.publishers,"name"))}),n=_.union(_.flatten(n)).sort(),n},value:[],condition:function(t){if(t.publishers){let n=_.map(t.publishers,"name"),o=this.value;if(o.length>0){let r=!1;return _.each(o,function(s){if(_.includes(n,s))return r=!0,!1}),r}}}},{type:"divider",key:"divider9.7"},{active:!1,type:"filterExtras",label:"Collections",key:"collections",group:"filterExtras",excludeFromWishlist:!0,dropdownTrackBy:"valueProp",dropdownLabel:"label",dropdownValueProp:"valueProp",dropdownOpts:function(t){if(e.$store.state.library.collections){let n=_.map(e.$store.state.library.collections,function(o){return{label:o.title,valueProp:o.id}});return _.sortBy(n,"title")}else return[]},value:[],condition:function(t){const n=_.get(this,"value")||[],o=_.get(t,"collectionIds",[]),r=_.get(e.$store.state,"library.collections",[]);if(n.length&&o.length&&r.length){let s=!1;return _.each(n,l=>{if(_.includes(t.collectionIds,l))return s=!0,!1}),s}}}],sort:[{active:!1,sticky:!0,key:"sortValues",label:"Show sort values",type:"sortExtras",tippy:"Shows the active sorter's value on top of the cover in the grid view."},{active:!1,key:"randomize",label:"Randomize",type:"sortExtras",tippy:"Sorting is ignored and the order is randomized."},{type:"divider",key:"divider1"},{active:!0,current:!0,key:"added",label:"Added",type:"sort",tippy:'<small>&#9650;</small> Old at the top <br><small style="display: inline-block; transform: rotate(180deg);">&#9650;</small> New at the top'},{active:!0,current:!1,key:"title",label:"Title",type:"sort"},{active:!0,current:!1,key:"authors.name",label:"Author",type:"sort"},{active:!0,current:!1,key:"narrators.name",label:"Narrator",type:"sort"},{active:!0,current:!1,key:"narratorsNumber",label:"Number of narrators",type:"sort"},{active:!1,current:!1,key:"length",label:"Length",type:"sort"},{active:!0,current:!1,key:"series",label:"Series",type:"sort",tippy:"Sorts books by the series name alphabetically."},{type:"divider",key:"divider2"},{active:!1,current:!1,key:"releaseDate",label:"Release date",type:"sort"},{active:!1,current:!1,key:"rating",label:"Average rating",type:"sort"},{active:!1,current:!1,key:"ratings",label:"Number of ratings",type:"sort"},{active:!1,current:!1,key:"myRating",label:"My rating",type:"sort",excludeFromWishlist:!0},{active:!0,current:!1,key:"publishers.name",label:"Publishers",type:"sort"},{type:"divider",key:"divider3"},{active:!1,current:!1,key:"progress",label:"Progress",type:"sort",excludeFromWishlist:!0},{active:!1,current:!1,key:"favorite",label:"Favorite",type:"sort",excludeFromWishlist:!0},{active:!0,current:!1,key:"categories",label:"Categories",type:"sort"},{active:!0,current:!1,key:"tags.name",label:"Tags",type:"sort"},{active:!1,current:!1,key:"isNew",label:"New books",type:"sort",excludeFromWishlist:!0},{active:!1,current:!1,key:"archived",label:"Archived",type:"sort",excludeFromWishlist:!0},{type:"divider",key:"divider4"},{active:!0,current:!1,key:"language",label:"Language",type:"sort"},{active:!0,current:!1,key:"format",label:"Format",type:"sort"},{active:!1,current:!1,key:"whispersync",label:"Whispersync",type:"sort"},{active:!1,current:!1,key:"fromPlusCatalog",label:"From plus catalog",type:"sort"},{active:!1,current:!1,key:"unavailable",label:"Plus catalog: Unavailable",type:"sort"},{active:!1,current:!1,key:"downloaded",label:"Downloaded",type:"sort",excludeFromWishlist:!0},{type:"divider",key:"divider5"},{active:!1,current:!1,key:"storePageMissing",label:"Store page missing",type:"sort",tippy:"The original store page could not be found. There may be a new store page that replaced it."},{active:!1,current:!1,key:"storePageChanged",label:"Store page changed",type:"sort",tippy:"There is a store page that exists, but it is for a different version of the book."},{active:!1,current:!1,key:"isbn10",label:"Isbn 10",type:"sort",excludeFromWishlist:!0},{active:!1,current:!1,key:"isbn13",label:"Isbn 13",type:"sort",excludeFromWishlist:!0},{active:!0,current:!1,key:"bookNumbers",label:"Book Numbers",type:"sort",tippy:'<strong>This is only a simple number sort.</strong> <br> If you want the correct series order, as listed in Audible, check the series page in the top menu or the "my books in the series" button in book details. <br><br>Click any book cover (or row) to reveal book details. <br><br> The infinite symbol (\u221E) means the book is in a series but does not have a number.'}]};this.removeArchived(i),this.addExcludeDropdowns(i),this.$setListRenderingOpts(i)},addExcludeDropdowns(e){let i=e.filter;const t=_.findIndex(i,"dropdownOpts");i=_.chunk(i,t-1);const n=i[1];_.remove(n,s=>s.type==="divider");const o=_.cloneDeep(n);_.each(o,s=>{s.conditionOriginal=s.condition,s.condition=function(l){return!s.conditionOriginal(l)},s.placeholder="Exclude...",s.key=s.key+"-exclude",s.exclude=!0});let r=_.zip(n,o);_.each(r,(s,l)=>{s.unshift({type:"divider",key:"divider-99999."+l})}),r=_.flatten(r),i[1]=r,e.filter=_.flatten(i)},removeArchived:function(e){if(!this.$store.state.library.collections)return;let i=this.$store.state.library.collections,t=i?_.find(i,{id:"__ARCHIVE"}):null;if(!t||t.books.length<1){let n=["archived","not-archived"];_.remove(e.filter,function(o){return o.key==="divider-archived"||_.includes(n,o.key)}),_.remove(e.sort,function(o){return _.includes(n,o.key)})}}}},to={exports:{}};(function(e,i){(function(){function t(){var n=window,o=document;if("scrollBehavior"in o.documentElement.style&&n.__forceSmoothScrollPolyfill__!==!0)return;var r=n.HTMLElement||n.Element,s=468,l={scroll:n.scroll||n.scrollTo,scrollBy:n.scrollBy,elementScroll:r.prototype.scroll||m,scrollIntoView:r.prototype.scrollIntoView},c=n.performance&&n.performance.now?n.performance.now.bind(n.performance):Date.now;function d(y){var M=["MSIE ","Trident/","Edge/"];return new RegExp(M.join("|")).test(y)}var h=d(n.navigator.userAgent)?1:0;function m(y,M){this.scrollLeft=y,this.scrollTop=M}function p(y){return .5*(1-Math.cos(Math.PI*y))}function b(y){if(y===null||typeof y!="object"||y.behavior===void 0||y.behavior==="auto"||y.behavior==="instant")return!0;if(typeof y=="object"&&y.behavior==="smooth")return!1;throw new TypeError("behavior member of ScrollOptions "+y.behavior+" is not a valid value for enumeration ScrollBehavior.")}function g(y,M){if(M==="Y")return y.clientHeight+h<y.scrollHeight;if(M==="X")return y.clientWidth+h<y.scrollWidth}function v(y,M){var j=n.getComputedStyle(y,null)["overflow"+M];return j==="auto"||j==="scroll"}function T(y){var M=g(y,"Y")&&v(y,"Y"),j=g(y,"X")&&v(y,"X");return M||j}function I(y){for(;y!==o.body&&T(y)===!1;)y=y.parentNode||y.host;return y}function w(y){var M=c(),j,L,A,W=(M-y.startTime)/s;W=W>1?1:W,j=p(W),L=y.startX+(y.x-y.startX)*j,A=y.startY+(y.y-y.startY)*j,y.method.call(y.scrollable,L,A),(L!==y.x||A!==y.y)&&n.requestAnimationFrame(w.bind(n,y))}function S(y,M,j){var L,A,W,O,D=c();y===o.body?(L=n,A=n.scrollX||n.pageXOffset,W=n.scrollY||n.pageYOffset,O=l.scroll):(L=y,A=y.scrollLeft,W=y.scrollTop,O=m),w({scrollable:L,method:O,startTime:D,startX:A,startY:W,x:M,y:j})}n.scroll=n.scrollTo=function(){if(arguments[0]!==void 0){if(b(arguments[0])===!0){l.scroll.call(n,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:n.scrollX||n.pageXOffset,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:n.scrollY||n.pageYOffset);return}S.call(n,o.body,arguments[0].left!==void 0?~~arguments[0].left:n.scrollX||n.pageXOffset,arguments[0].top!==void 0?~~arguments[0].top:n.scrollY||n.pageYOffset)}},n.scrollBy=function(){if(arguments[0]!==void 0){if(b(arguments[0])){l.scrollBy.call(n,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:0,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:0);return}S.call(n,o.body,~~arguments[0].left+(n.scrollX||n.pageXOffset),~~arguments[0].top+(n.scrollY||n.pageYOffset))}},r.prototype.scroll=r.prototype.scrollTo=function(){if(arguments[0]!==void 0){if(b(arguments[0])===!0){if(typeof arguments[0]=="number"&&arguments[1]===void 0)throw new SyntaxError("Value could not be converted");l.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left:typeof arguments[0]!="object"?~~arguments[0]:this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top:arguments[1]!==void 0?~~arguments[1]:this.scrollTop);return}var y=arguments[0].left,M=arguments[0].top;S.call(this,this,typeof y=="undefined"?this.scrollLeft:~~y,typeof M=="undefined"?this.scrollTop:~~M)}},r.prototype.scrollBy=function(){if(arguments[0]!==void 0){if(b(arguments[0])===!0){l.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop);return}this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior})}},r.prototype.scrollIntoView=function(){if(b(arguments[0])===!0){l.scrollIntoView.call(this,arguments[0]===void 0?!0:arguments[0]);return}var y=I(this),M=y.getBoundingClientRect(),j=this.getBoundingClientRect();y!==o.body?(S.call(this,y,y.scrollLeft+j.left-M.left,y.scrollTop+j.top-M.top),n.getComputedStyle(y).position!=="fixed"&&n.scrollBy({left:M.left,top:M.top,behavior:"smooth"})):n.scrollBy({left:j.left,top:j.top,behavior:"smooth"})}}e.exports={polyfill:t}})()})(to);var ef=to.exports;ef.polyfill();const tf={name:"GalleryRoot",mixins:[Vh,Gh,qh,Qh,Xh,Zh,Jh,zt,Kh,ko],data:function(){return{loading:!0,collectionSource:"library.books",pageTitle:null,pageSubTitle:null,scrollContainer:null,collapseView:null,realLength:0,prepsCompleted:!1,errorMessage:!1,mountedChildren:!1}},beforeCreate:function(){this.$route.query.view&&this.$store.commit("stickyProp",{key:"viewMode",value:this.$route.query.view})},computed:{galleryStyle:function(){return this.$store.state.searchOptOpenHeight?{overflow:"hidden",height:this.$store.state.searchOptOpenHeight+"px"}:!1}},created:function(){this.$route.name==="library"?(this.pageTitle="Library",this.pageSubTitle=null):this.$route.name==="wishlist"&&(this.pageTitle="Wishlist",this.pageSubTitle=null),this.updateListRenderingOptions(),this.prepCategoriesSubPage(),this.prepCollectionsSubPage(),this.prepSeriesSubPage(),this.prepNarratorsSubPage(),this.prepAuthorsSubPage(),this.prepPublishersSubPage(),this.prepWishlist(),this.prepsCompleted=!0,this.$compEmitter.on("book-clicked",this.toggleBookDetails)},mounted(){this.$nextTick(function(){this.errorMessage=!0})},beforeUnmount:function(){this.$compEmitter.off("book-clicked",this.toggleBookDetails),this.errorMessage=!1},watch:{"$store.getters.collection":function(){this.$store.commit("chunkCollectionReset"),this.$store.commit("chunkCollectionAdd")},"$route.query.book":function(e){this.$store.state.bookClicked?this.$store.commit("prop",{key:"bookClicked",value:!1}):this.$updateQueries({refresh:!0})}},methods:{childrenMounted:function(){this.$nextTick(function(){const e=this.$route.query.y?parseFloat(this.$route.query.y):0;if(this.$route.query.book){let i=document.querySelector(".ale-books");i.offsetTop;let t=this.$store.state.sticky.viewMode==="grid",n=t?i.querySelector(".ale-book").getBoundingClientRect().height:i.querySelector("table tbody .ale-row").getBoundingClientRect().height,o=t?i.getBoundingClientRect().width:i.getBoundingClientRect().height,r=Math.floor(o/n)||1,s=_.findIndex(this.$store.getters.collection,{asin:this.$route.query.book}),c=(Math.floor(s/r)+1)*r;this.$store.commit("chunkCollectionAdd",{chunkDistance:c+this.$store.state.chunkDistance}),this.$nextTick(function(){this.mountedChildren=!0})}else if(e||this.$route.query.scrolltop){this.$updateQueries({scrolltop:null});let i=document.querySelector(".ale-books"),t=i.offsetTop,n=this.$store.state.sticky.viewMode==="grid",o=n?i.querySelector(".ale-book").getBoundingClientRect().height:i.querySelector("table tbody .ale-row").getBoundingClientRect().height,r=e+window.innerHeight-t,s=Math.ceil(r/o)||1,l=n?i.getBoundingClientRect().width:i.getBoundingClientRect().height,c=Math.floor(l/o)||1,d=n?s*c:c,h=Math.ceil(d/this.$store.state.chunkDistance)||1;h>1&&this.$store.commit("chunkCollectionAdd",{chunkDistance:this.$store.state.chunkDistance*h}),this.$nextTick(function(){this.$store.state.sticky.viewMode==="grid"?scroll({top:e}):document.querySelector(".list-view-inner-wrap").scroll({top:e}),this.$nextTick(function(){this.mountedChildren=!0})})}else this.$nextTick(function(){this.mountedChildren=!0})})},expandView:function(){this.$updateQueries({book:null},{history:!0}),this.$compEmitter.emit("refresh-page")},gridViewMounted:function(){this.scrollContainer=window,this.scrollContainer.removeEventListener("scroll",this.addDomItems),this.scrollContainer.addEventListener("scroll",this.addDomItems,{passive:!0}),this.childrenMounted()},listViewMounted:function(){this.scrollContainer=document.querySelector(".list-view-inner-wrap"),this.scrollContainer.removeEventListener("scroll",this.addDomItems),this.scrollContainer.addEventListener("scroll",this.addDomItems,{passive:!0}),this.childrenMounted()},viewsbeforeUnmount:function(){this.scrollContainer.removeEventListener("scroll",this.addDomItems),this.mountedChildren=!1},addDomItems:_.throttle(function(e){if(this.$store.state.lazyScroll){const i=this.$store.state.sticky.viewMode==="grid";let t=i?550+window.innerHeight/2:this.scrollContainer.clientHeight/3,n=i?document.documentElement:this.scrollContainer;n.scrollTop+(n.innerHeight||n.clientHeight)+t>=n.scrollHeight&&this.$store.commit("chunkCollectionAdd"),this.$updateQueries({y:n.scrollTop})}},450,{leading:!1,trailing:!0}),searchMounted(){const e=this;this.$nextTick(function(){setTimeout(function(){e.loading=!1},10)})},toggleBookDetails:function(e){this.$store.commit("prop",{key:"bookClicked",value:!0});const i={asin:e},t={asin:_.get(this.$route,"query.book"),newValue:i.asin};!t.newValue==!t.asin&&!t.newValue||(i.asin===t.asin&&(t.newValue=null),t.newValue||(t.newValue=null),this.$updateQueries({book:t.newValue}))}}},nf=e=>(Ie("data-v-2a50b788"),e=e(),Le(),e),of={id:"ale-gallery"},rf=nf(()=>f("span",null,"Expand view",-1)),sf={key:0},af={key:3},lf={key:4,id:"nothing-here-404"},cf={key:0},uf={key:1,class:"error404"};function df(e,i,t,n,o,r){const s=Yh,l=bo,c=Bh,d=Ch,h=Cd,m=ld;return a(),u("div",of,[!e.$store.state.standalone&&e.$store.state.sticky.contextMenuReminder?(a(),P(s,{key:0})):k("",!0),e.prepsCompleted?(a(),P(l,{key:1,collectionSource:e.collectionSource,pageTitle:e.pageTitle,pageSubTitle:e.pageSubTitle,onVnodeMounted:r.searchMounted},null,8,["collectionSource","pageTitle","pageSubTitle","onVnodeMounted"])):k("",!0),e.collapseView?(a(),u("div",{key:2,class:"collection-expanded-btn",onClick:i[0]||(i[0]=(...p)=>r.expandView&&r.expandView(...p))},[f("div",null,[rf,e.realLength?(a(),u("span",sf,"( "+U(e.realLength)+" )",1)):k("",!0),R(c)])])):k("",!0),!e.loading&&e.$store.getters.collection&&e.$store.getters.collection.length>0?(a(),u("div",af,[f("div",{style:le(r.galleryStyle)},[e.$store.state.sticky.viewMode==="grid"?(a(),P(d,{key:0,onVnodeMounted:r.gridViewMounted,onVnodeBeforeUnmount:r.viewsbeforeUnmount},null,8,["onVnodeMounted","onVnodeBeforeUnmount"])):e.$store.state.sticky.viewMode==="spreadsheet"?(a(),P(h,{key:1,onVnodeMounted:r.listViewMounted,onVnodeBeforeUnmount:r.viewsbeforeUnmount},null,8,["onVnodeMounted","onVnodeBeforeUnmount"])):k("",!0),e.mountedChildren&&e.$route.query.book?(a(),P(m,{key:e.$route.query.book,asin:e.$route.query.book},null,8,["asin"])):k("",!0)],4)])):e.errorMessage?(a(),u("div",lf,[e.$store.getters.searchIsActive&&!e.$store.state.searchCollection.length?(a(),u("h3",cf,"Search: no results")):(a(),u("h3",uf,"404: There's nothing here"))])):k("",!0)])}var Tf=q(tf,[["render",df],["__scopeId","data-v-2a50b788"]]);export{Tf as default};
