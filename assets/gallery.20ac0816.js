import{m as se}from"./makeCoverUrl.f6649fcf.js";import{o as c,c as d,a,_ as C,b as v,n as S,w as Z,d as g,e as w,f as R,U as D,h as me,t as B,g as H,r as V,i as x,j as F,F as E,k as z,l as J,m as fe,p as ie,q as ge,v as _e,s as O,u as K,x as Q,y as Y,z as ve,A as ye,B as be,C as ke,D as we,E as $e,V as Se}from"./vendor.e7714c30.js";/* empty css              */import{h as Ce}from"./helpers.c1b1b2ae.js";const xe={viewBox:"0 0 320 512",width:"1.2em",height:"1.2em"},Pe=a("path",{fill:"currentColor",d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256L34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},null,-1),Oe=[Pe];function Le(e,t){return c(),d("svg",xe,Oe)}var Re={name:"fa-solid-chevron-right",render:Le};const Me={viewBox:"0 0 320 512",width:"1.2em",height:"1.2em"},Te=a("path",{fill:"currentColor",d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},null,-1),Ie=[Te];function Ne(e,t){return c(),d("svg",Me,Ie)}var Ae={name:"fa-solid-chevron-left",render:Ne};const Be={name:"backForwardBtns",props:["viewportFloat"],methods:{navigate:function(e){this.$store.state.navHistory[e].length>0&&(this.$store.commit("navHistory",{key:e,value:this.$route.name}),this.$router[e]())}}};function Ee(e,t,s,i,o,n){const r=Ae,l=Re;return c(),d("div",{class:S(["mobile-back-btns-wrapper",{"viewport-float":s.viewportFloat}])},[a("div",{class:S(["mobile-back-btns",{disabled:e.$store.state.navHistory.back.length<1}]),onClick:t[0]||(t[0]=Z(u=>n.navigate("back"),["prevent"]))},[v(r)],2),a("div",{class:S(["mobile-back-btns",{disabled:e.$store.state.navHistory.forward.length<1}]),onClick:t[1]||(t[1]=Z(u=>n.navigate("forward"),["prevent"]))},[v(l)],2)],2)}var ne=C(Be,[["render",Ee],["__scopeId","data-v-78ba882a"]]);const ze={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},Ve=a("path",{fill:"currentColor",d:"M470.38 1.51L150.41 96A32 32 0 0 0 128 126.51v261.41A139 139 0 0 0 96 384c-53 0-96 28.66-96 64s43 64 96 64s96-28.66 96-64V214.32l256-75v184.61a138.4 138.4 0 0 0-32-3.93c-53 0-96 28.66-96 64s43 64 96 64s96-28.65 96-64V32a32 32 0 0 0-41.62-30.49z"},null,-1),qe=[Ve];function He(e,t){return c(),d("svg",ze,qe)}var We={name:"fa-solid-music",render:He};const Ue={viewBox:"0 0 448 512",width:"1.2em",height:"1.2em"},Ge=a("path",{fill:"currentColor",d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},null,-1),je=[Ge];function De(e,t){return c(),d("svg",Ue,je)}var Fe={name:"fa-solid-bars",render:De};const Je={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},Ke=a("path",{fill:"currentColor",d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128c0-70.7 57.2-128 128-128c70.7 0 128 57.2 128 128c0 70.7-57.2 128-128 128z"},null,-1),Qe=[Ke];function Ze(e,t){return c(),d("svg",Je,Qe)}var oe={name:"fa-solid-search",render:Ze};const Ye={name:"mobileMenuFloaters",props:["mobileMenuOpen"],data:function(){return{store:this.$store.state}}},Xe={class:"second-row"},et={key:0,class:"player-open-indicator"};function tt(e,t,s,i,o,n){const r=oe,l=ne,u=Fe,m=We;return c(),d("div",{id:"mobile-menu-floaters",class:S({mobile:s.mobileMenuOpen})},[a("div",Xe,[e.$store.state.searchMounted&&!s.mobileMenuOpen?(c(),d("div",{key:0,class:"search-btn",onClick:t[0]||(t[0]=f=>e.$emit("startSearching"))},[v(r)])):g("",!0),e.$store.state.displayMode&&!s.mobileMenuOpen?(c(),w(l,{key:1})):g("",!0),a("div",{class:"burger-menu",onClick:t[1]||(t[1]=f=>e.$emit("update:mobileMenuOpen",!s.mobileMenuOpen))},[v(u,{class:"brgr-btn"}),e.$store.state.playingAudio?(c(),d("div",et,[v(m,{class:"brgr-btn"})])):g("",!0)])])],2)}var st=C(Ye,[["render",tt]]);const it={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},nt=a("path",{fill:"currentColor",d:"M256.455 8c66.269.119 126.437 26.233 170.859 68.685l35.715-35.715C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.75c-30.864-28.899-70.801-44.907-113.23-45.273c-92.398-.798-170.283 73.977-169.484 169.442C88.764 348.009 162.184 424 256 424c41.127 0 79.997-14.678 110.629-41.556c4.743-4.161 11.906-3.908 16.368.553l39.662 39.662c4.872 4.872 4.631 12.815-.482 17.433C378.202 479.813 319.926 504 256 504C119.034 504 8.001 392.967 8 256.002C7.999 119.193 119.646 7.755 256.455 8z"},null,-1),ot=[nt];function rt(e,t){return c(),d("svg",it,ot)}var at={name:"fa-solid-redo-alt",render:rt};const lt={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},ct=a("path",{fill:"currentColor",d:"M255.545 8c-66.269.119-126.438 26.233-170.86 68.685L48.971 40.971C33.851 25.851 8 36.559 8 57.941V192c0 13.255 10.745 24 24 24h134.059c21.382 0 32.09-25.851 16.971-40.971l-41.75-41.75c30.864-28.899 70.801-44.907 113.23-45.273c92.398-.798 170.283 73.977 169.484 169.442C423.236 348.009 349.816 424 256 424c-41.127 0-79.997-14.678-110.63-41.556c-4.743-4.161-11.906-3.908-16.368.553L89.34 422.659c-4.872 4.872-4.631 12.815.482 17.433C133.798 479.813 192.074 504 256 504c136.966 0 247.999-111.033 248-247.998C504.001 119.193 392.354 7.755 255.545 8z"},null,-1),ut=[ct];function dt(e,t){return c(),d("svg",lt,ut)}var ht={name:"fa-solid-undo-alt",render:dt};const pt={viewBox:"0 0 352 512",width:"1.2em",height:"1.2em"},mt=a("path",{fill:"currentColor",d:"m242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28L75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256L9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},null,-1),ft=[mt];function gt(e,t){return c(),d("svg",pt,ft)}var re={name:"fa-solid-times",render:gt};const _t={viewBox:"0 0 320 512",width:"1.2em",height:"1.2em"},vt=a("path",{fill:"currentColor",d:"M48 64C21.5 64 0 85.5 0 112v288c0 26.5 21.5 48 48 48h32c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H48zm192 0c-26.5 0-48 21.5-48 48v288c0 26.5 21.5 48 48 48h32c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48h-32z"},null,-1),yt=[vt];function bt(e,t){return c(),d("svg",_t,yt)}var kt={name:"fa6-solid-pause",render:bt};const wt={viewBox:"0 0 384 512",width:"1.2em",height:"1.2em"},$t=a("path",{fill:"currentColor",d:"M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80v352c0 17.4 9.4 33.4 24.5 41.9S58.2 482 73 473l288-176c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"},null,-1),St=[$t];function Ct(e,t){return c(),d("svg",wt,St)}var xt={name:"fa6-solid-play",render:Ct};const Pt={name:"audioPlayer",data:function(){return{audio:null,howler:null,timeDisplay:"00:00",progress:0,sample:!0}},computed:{book(){return R.get(this.audio,"book",{})},title(){return this.book.title||this.book.titleShort},audioSource(){const e=R.get(this.book,"sample");var t=new D(e);return window.location.protocol==="http:"&&(t.protocol="http"),t.toString()},route(){return R.get(this.audio,"route",{})},progressFillerStyle(){const e={};return this.progress&&(e.width=this.progress+"%"),e}},mounted(){this.$compEmitter.on("play-audio",this.initPlayer)},beforeUnmount(){this.$compEmitter.off("play-audio",this.initPlayer),this.destroyHowler()},methods:{initPlayer(e){this.audio=e,this.play()},openBook(){const e=this.book.asin,t=this.$route.query.book;this.route&&this.route.fullPath!==this.$route.fullPath&&this.$router.push(this.route.fullPath),(!t||e&&t!==e)&&this.$nextTick(function(){this.$compEmitter.emit("book-clicked",this.book.asin)})},play:function(){let e=this;this.destroyHowler("keepAudioData"),this.$store.commit("prop",{key:"playingAudio",value:!0}),this.howler=new me.Howl({src:this.audioSource,autoplay:!0,loop:!1,volume:1,onplayerror:function(){e.howler.once("unlock",function(){e.howler.play()})},onloaderror:function(t){},onstop:function(t){}}),this.seekToCachedPosition(),this.howler.customSeek=function(t){t=t||{},t.value=t.value||30;const s=e.howler.duration(),i={going:{forward:t.direction==="forward",backward:t.direction==="backward"},at:{end:!1,start:!1},value:null},o=i.going.forward?"add":"subtract";i.value=R[o](e.howler.current.time,t.value),i.at.end=i.value>=s,i.at.start=i.value>=s,i.value=i.going.forward?i.at.end?s:i.value:i.at.start?0:i.value,e.howler.seek(i.value),i.at.start||i.at.end?e.updateCurrent():e.howler.playing()||e.howler.play()},this.howler.current={timer:null,time:null,timeDisplay:null,percentage:null},this.howler.current.timer=setInterval(function(){e.howler.playing()&&(e.updateCurrent(),e.$refs.timeline.blur()),e.updateBookProgress()},500)},formatTime(e){const t=[],s=function(r){t.push((r<10?"0":"")+r)};let i=Math.floor(e/3600);s(i);let o=Math.floor(e/60)||0;s(o);let n=e-o*60||0;return s(n),t.shift(),t.join(":")},updateCurrent(){var e=this.howler.seek()||0;this.howler.current.time=e,this.howler.current.timeDisplay=this.formatTime(Math.round(e)),this.howler.current.percentage=e/this.howler.duration()*100||0,this.timeDisplay=this.howler.current.timeDisplay,this.progress=this.howler.current.percentage.toFixed(1)},pause:function(e){this.howler&&this.howler.playing()&&this.howler.pause()},scrubberPause:function(e){let t=this;this.howler&&this.howler.playing()&&(this.howler.pause(),this.clearPause(),this.howler.pauseTimer=setTimeout(function(){t.howler.play()},500))},clearPause:function(){this.howler&&clearTimeout(this.howler.pauseTimer)},stop:function(){this.destroyHowler()},seekBack:function(){this.howler&&this.howler.customSeek({direction:"backward"})},seekForward:function(){this.howler&&this.howler.customSeek({direction:"forward"})},userScrubbed:function(e){if(this.howler){this.clearPause();var t=e.target.value/100*this.howler.duration();this.progress=e.target.value,this.howler.seek(t),this.howler.play()}},destroyHowler(e){this.howler&&(this.clearPause(),R.get(this.howler,"current.timer")&&clearInterval(this.howler.current.timer),R.get(this.howler,"unload")&&this.howler.unload(),this.howler=null),e||(this.audio=null),this.$store.commit("prop",{key:"playingAudio",value:!1})},updateBookProgress:R.throttle(function(){this.sample||this.$store.commit("updatePlayerProgress",{asin:this.book.asin,progress:this.howler.current.time})},3e3,{leading:!1,trailing:!0}),seekToCachedPosition(){const e=R.find(this.$store.state.sticky.player.books,{asin:this.book.asin});e&&this.howler.seek(e.progress)}}},Ot={key:0,id:"audio-player"},Lt={class:"inner-wrap"},Rt={key:0},Mt={class:"player-innards"},Tt={key:0,class:"time-display"},It={class:"scrubber-wrapper"},Nt=["value"],At={class:"progress-filler"},Bt={class:"player-buttons"};function Et(e,t,s,i,o,n){const r=xt,l=kt,u=re,m=ht,f=at;return e.audio?(c(),d("div",Ot,[a("div",Lt,[n.title?(c(),d("div",{key:0,class:"book",onClick:t[0]||(t[0]=(...p)=>n.openBook&&n.openBook(...p))},[e.sample?(c(),d("strong",Rt,"sample\xA0|\xA0")):g("",!0),a("span",null,B(n.title),1)])):g("",!0),a("div",Mt,[e.timeDisplay?(c(),d("div",Tt,B(e.timeDisplay),1)):g("",!0),a("div",It,[a("input",{class:"scrubber",ref:"timeline",type:"range",step:"0.1",min:"0",value:e.progress,max:"100",onMousedown:t[1]||(t[1]=(...p)=>n.scrubberPause&&n.scrubberPause(...p)),onTouchstart:t[2]||(t[2]=(...p)=>n.scrubberPause&&n.scrubberPause(...p)),onInput:t[3]||(t[3]=(...p)=>n.clearPause&&n.clearPause(...p)),onChange:t[4]||(t[4]=(...p)=>n.userScrubbed&&n.userScrubbed(...p))},null,40,Nt),a("div",At,[a("div",{style:H(n.progressFillerStyle)},null,4)])]),a("div",Bt,[e.howler&&e.howler.playing()?(c(),d("div",{key:1,class:"pause",onClick:t[6]||(t[6]=(...p)=>n.pause&&n.pause(...p))},[v(l)])):(c(),d("div",{key:0,class:"play",onClick:t[5]||(t[5]=(...p)=>n.play&&n.play(...p))},[v(r)])),a("div",{class:"stop",onClick:t[7]||(t[7]=(...p)=>n.stop&&n.stop(...p))},[v(u)]),a("div",{class:"back",onClick:t[8]||(t[8]=(...p)=>n.seekBack&&n.seekBack(...p))},[v(m)]),a("div",{class:"forward",onClick:t[9]||(t[9]=(...p)=>n.seekForward&&n.seekForward(...p))},[v(f)])])])])])):g("",!0)}var zt=C(Pt,[["render",Et],["__scopeId","data-v-6e5dd5d5"]]);const Vt={viewBox:"0 0 640 512",width:"1.2em",height:"1.2em"},qt=a("path",{fill:"currentColor",d:"M579.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0l112.3-112.3zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5l112.2-112.3c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z"},null,-1),Ht=[qt];function Wt(e,t){return c(),d("svg",Vt,Ht)}var Ut={name:"fa6-solid-link",render:Wt};const Gt={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},jt=a("path",{fill:"currentColor",d:"M640 384v256H384V384h256zm64 0h192v256H704V384zm-64 512H384V704h256v192zm64 0V704h192v192H704zm-64-768v192H384V128h256zm64 0h192v192H704V128zM320 384v256H128V384h192zm0 512H128V704h192v192zm0-768v192H128V128h192z"},null,-1),Dt=[jt];function Ft(e,t){return c(),d("svg",Gt,Dt)}var ae={name:"ep-grid",render:Ft};const Jt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Kt=a("path",{fill:"currentColor",d:"M4 3h16a2 2 0 0 1 2 2v15a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2m0 4v3h4V7H4m6 0v3h4V7h-4m10 3V7h-4v3h4M4 12v3h4v-3H4m0 8h4v-3H4v3m6-8v3h4v-3h-4m0 8h4v-3h-4v3m10 0v-3h-4v3h4m0-8h-4v3h4v-3Z"},null,-1),Qt=[Kt];function Zt(e,t){return c(),d("svg",Jt,Qt)}var Yt={name:"mdi-table-large",render:Zt};const Xt={name:"ViewModeSwitcher",props:["justIcon"],data:function(){return{sticky:this.$store.state.sticky,viewModes:["grid","spreadsheet"]}},methods:{changeViewMode:function(){const e=this;let t=_.findIndex(this.viewModes,function(i){return i===e.sticky.viewMode});t+1>this.viewModes.length-1?t=0:t=t+1;const s=this.viewModes[t];this.$store.commit("stickyProp",{key:"viewMode",value:s}),this.$updateQuery({query:"y",value:null}),this.$updateQuery({query:"view",value:s})}}},es=["content"];function ts(e,t,s,i,o,n){const r=Yt,l=ae,u=V("tippy");return x((c(),d("div",{class:S(["view-mode-switcher icon",{"no-style":s.justIcon}]),onClick:t[0]||(t[0]=(...m)=>n.changeViewMode&&n.changeViewMode(...m)),content:"Change to <strong>"+(e.sticky.viewMode==="grid"?"spreadsheet":"grid")+"</strong> view"},[e.sticky.viewMode==="grid"?(c(),w(r,{key:0,class:"icon"})):e.sticky.viewMode==="spreadsheet"?(c(),w(l,{key:1,class:"icon"})):g("",!0)],10,es)),[[u,{allowHTML:!0}]])}var ss=C(Xt,[["render",ts]]);const is={props:["float"],methods:{startSearching(){this.$compEmitter.emit("ios-auto-zoom-disable"),this.$compEmitter.emit("search-focus")}}};function ns(e,t,s,i,o,n){const r=oe,l=V("tippy");return e.$store.state.searchMounted,x((c(),d("div",{key:0,class:S(["search-btn",{float:s.float}]),onClick:t[0]||(t[0]=(...u)=>n.startSearching&&n.startSearching(...u)),content:`
    Click to scroll up and search. <br>
    Read about advanced search operators 
    <a target="_blank" rel="noopener noreferrer" href="https://joonaspaakko.gitbook.io/audible-library-extractor/gallery/advanced-search">
      here
    </a>.`},[v(r)],2)),[[l,{interactive:!0,allowHTML:!0}]])}var os=C(is,[["render",ns],["__scopeId","data-v-772beaa4"]]);const rs={viewBox:"0 0 384 512",width:"1.2em",height:"1.2em"},as=a("path",{fill:"currentColor",d:"M223.5 32C100 32 0 132.3 0 256s100 224 223.5 224c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"},null,-1),ls=[as];function cs(e,t){return c(),d("svg",rs,ls)}var us={name:"fa6-solid-moon",render:cs};const ds={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},hs=a("path",{fill:"currentColor",d:"M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391l-19.9 107.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391L13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256L2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121l19.9-107.9c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1l90.3-62.3c4.5-3.1 10.2-3.7 15.2-1.6zM352 256c0 53-43 96-96 96s-96-43-96-96s43-96 96-96s96 43 96 96zm32 0c0-70.7-57.3-128-128-128s-128 57.3-128 128s57.3 128 128 128s128-57.3 128-128z"},null,-1),ps=[hs];function ms(e,t){return c(),d("svg",ds,ps)}var fs={name:"fa6-solid-sun",render:ms};const gs={name:"lightSwitch",data:function(){return{tippyContent:""}},created:function(){this.lightSwitchToggle(!0)},methods:{lightSwitchToggle:function(e){e?this.autoLightsOff():(this.$store.commit("stickyProp",{key:"lightSwitch",value:this.$store.state.sticky.lightSwitch?0:1}),this.$store.state.sticky.lightSwitchSetByUser||this.$store.commit("stickyProp",{key:"lightSwitchSetByUser",value:!0}));const t=document.querySelector("html");t.classList.remove("theme-light"),t.classList.remove("theme-dark"),t.classList.add(this.$store.state.sticky.lightSwitch?"theme-light":"theme-dark")},autoLightsOff:function(){window.matchMedia("(prefers-color-scheme)").media!=="not all"&&this.$store.state.sticky.lightSwitch&&!this.$store.state.sticky.lightSwitchSetByUser&&this.$store.commit("stickyProp",{key:"lightSwitch",value:0})}}},_s={class:"light-switch text-button"};function vs(e,t,s,i,o,n){const r=fs,l=us;return c(),d("div",_s,[a("div",{class:"icon",onClick:t[0]||(t[0]=u=>n.lightSwitchToggle(!1))},[e.$store.state.sticky.lightSwitch?(c(),w(r,{key:0})):(c(),w(l,{key:1}))])])}var ys=C(gs,[["render",vs],["__scopeId","data-v-1fa78d9e"]]);const bs={name:"menuLooper",props:["routes","childRoutes","mobileMenuOpen","inRoot"],data:function(){return{menuOpen:!0,copiedToClipboard:!1}},methods:{getHrefAttr(e){return e.tag==="a"?"href":"to"},itemActive(e){const t=this.$route.name;return t===e.name||_.find(e.children,{name:t})?"router-link-active":null},subItemActive(e){const t=this.$route.name;return _.find(e.childItems,function(i){return t===i.name||_.find(i.children,{name:t})})?"router-link-active":null},getRoutePath(e){return _.get(e,"path")?{name:_.get(e,"name")||_.get(e,"children[0].name"),query:{refresh:!0}}:_.get(e,"href")},getRouteName(e){if(e.altName)return e.altName(e);{const t=_.get(e,"children[0].meta.title")||_.get(e,"children[0].name")||e.name;return _.get(e,"meta.nestedGroup")==="extension-tools"?t:_.startCase(t)}},closeMenu(){this.menuOpen=!1,this.$nextTick(function(){this.menuOpen=!0})},additionalClick(e){this.mobileMenuOpen?this.$emit("update:mobileMenuOpen",!this.mobileMenuOpen):this.$emit("closeMenu")},copyToClipboard(){navigator.clipboard.writeText(window.location.href);const e=_.get(this.$refs,"copyToClipboard.$el")||_.get(this.$refs,"copyToClipboard.$el");e._tippy.show(),setTimeout(()=>{e._tippy.hide()},2e3)}}},ks={key:0},ws={key:1,class:"mobile-menu-top-spacer"},$s=["onClick"],Ss={key:0,class:"menu-item-icon"},Cs=["innerHTML"],xs={key:0,class:"sub-menu"},Ps={key:2,class:"menu-icon-toolbar"},Os={key:0},Ls={key:1},Rs={key:2};function Ms(e,t,s,i,o,n){const r=F("menuLooper"),l=ys,u=os,m=ss,f=Ut,p=zt,b=V("tippy");return c(),d("div",{class:S(["menu-items",{"has-sub-menu":s.childRoutes,mobileMenu:s.mobileMenuOpen}])},[e.menuOpen?(c(),d("div",ks,[s.mobileMenuOpen?(c(),d("div",{key:0,class:"mobile-menu-top-filler",onClick:t[0]||(t[0]=h=>e.$emit("update:mobileMenuOpen",!s.mobileMenuOpen))})):g("",!0),s.mobileMenuOpen?(c(),d("div",ws)):g("",!0),(c(!0),d(E,null,z(s.routes,h=>x((c(),w(ie(h.tag||"router-link"),fe({key:h.path,[n.getHrefAttr(h)||""]:n.getRoutePath(h),target:h.href?"_blank":null,class:["menu-item",[h.meta.groupName,n.itemActive(h),n.subItemActive(h),h.disabled||(h.condition?!h.condition():null)?"disabled":""]],content:typeof h.tippy=="function"?h.tippy():h.tippy,onClick:y=>h.click?h.click(h):null}),{default:J(()=>[a("div",{class:"menu-item-inner",onClick:y=>n.additionalClick(h)},[h.meta.icon?(c(),d("span",Ss,[a("i",{class:S(h.meta.icon)},null,2)])):g("",!0),a("span",{class:"menu-item-text",innerHTML:n.getRouteName(h)},null,8,Cs)],8,$s),h.childItems?(c(),d("div",xs,[v(r,{routes:h.childItems,childRoutes:h.childItems,onCloseMenu:n.closeMenu},null,8,["routes","childRoutes","onCloseMenu"])])):g("",!0)]),_:2},1040,["target","class","content","onClick"])),[[b,{placement:"left",flipBehavior:["left","top","bottom"],maxWidth:400}]])),128)),s.inRoot?(c(),d("div",Ps,[a("div",null,[v(l)]),s.mobileMenuOpen?g("",!0):(c(),d("div",Os,[v(u)])),s.mobileMenuOpen?(c(),d("div",Ls,[e.$store.state.searchMounted?(c(),w(m,{key:0,justIcon:!0})):g("",!0)])):g("",!0),s.mobileMenuOpen?(c(),d("div",Rs,[x(v(f,{class:"icon",onClick:t[1]||(t[1]=h=>n.copyToClipboard()),content:"Page URL copied to clipboard!",ref:"copyToClipboard"},null,512),[[b,{trigger:"manual"}]])])):g("",!0)])):g("",!0)])):g("",!0),s.inRoot?(c(),w(p,{key:1})):g("",!0)],2)}var Ts=C(bs,[["render",Ms],["__scopeId","data-v-5a747b87"]]);const Is={name:"modal",props:["toggled"],data:function(){return{modalOpen:!0}},created:function(){},methods:{close:function(){this.$emit("closeModal")},closeOverlay:function(e){let t=this;(e.target===this.$refs.modalGrandpa||e.target===this.$refs.modalPapa)&&t.close()}}},Ns={class:"outer-wrap",ref:"modalPapa"},As={class:"inner-wrap"};function Bs(e,t,s,i,o,n){const r=re,l=V("shortkey");return c(),d("div",{id:"modal-wrapper",ref:"modalGrandpa",onClick:t[2]||(t[2]=(...u)=>n.closeOverlay&&n.closeOverlay(...u))},[a("div",Ns,[a("div",As,[ge(e.$slots,"default"),x((c(),d("div",{class:"close-btn",onClick:t[0]||(t[0]=(...u)=>n.close&&n.close(...u)),onShortkey:t[1]||(t[1]=(...u)=>n.close&&n.close(...u))},[v(r)],32)),[[l,["esc"],void 0,{once:!0}]])])],512)],512)}var W=C(Is,[["render",Bs]]);const Es={viewBox:"0 0 16 16",width:"1.2em",height:"1.2em"},zs=a("path",{fill:"currentColor","fill-rule":"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59c.4.07.55-.17.55-.38c0-.19-.01-.82-.01-1.49c-2.01.37-2.53-.49-2.69-.94c-.09-.23-.48-.94-.82-1.13c-.28-.15-.68-.52-.01-.53c.63-.01 1.08.58 1.23.82c.72 1.21 1.87.87 2.33.66c.07-.52.28-.87.51-1.07c-1.78-.2-3.64-.89-3.64-3.95c0-.87.31-1.59.82-2.15c-.08-.2-.36-1.02.08-2.12c0 0 .67-.21 2.2.82c.64-.18 1.32-.27 2-.27c.68 0 1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82c.44 1.1.16 1.92.08 2.12c.51.56.82 1.27.82 2.15c0 3.07-1.87 3.75-3.65 3.95c.29.25.54.73.54 1.48c0 1.07-.01 1.93-.01 2.2c0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"},null,-1),Vs=[zs];function qs(e,t){return c(),d("svg",Es,Vs)}var Hs={name:"octicon-mark-github16",render:qs};const Ws={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},Us=a("path",{fill:"currentColor",d:"M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32v242.7l-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7V32zM64 352c-35.3 0-64 28.7-64 64v32c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64v-32c0-35.3-28.7-64-64-64H346.5l-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352H64zm368 104c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"},null,-1),Gs=[Us];function js(e,t){return c(),d("svg",Ws,Gs)}var le={name:"fa6-solid-download",render:js};const Ds={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},Fs=a("path",{fill:"currentColor",d:"M222.7 32.1c5 16.9-4.6 34.8-21.5 39.8C121.8 95.6 64 169.1 64 256c0 106 86 192 192 192s192-86 192-192c0-86.9-57.8-160.4-137.1-184.1c-16.9-5-26.6-22.9-21.5-39.8s22.9-26.6 39.8-21.5C434.9 42.1 512 140 512 256c0 141.4-114.6 256-256 256S0 397.4 0 256C0 140 77.1 42.1 182.9 10.6c16.9-5 34.8 4.6 39.8 21.5z"},null,-1),Js=[Fs];function Ks(e,t){return c(),d("svg",Ds,Js)}var ce={name:"fa6-solid-circle-notch",render:Ks};const Qs={viewBox:"0 0 512 512",width:"1.2em",height:"1.2em"},Zs=a("path",{fill:"currentColor",d:"m173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69L432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},null,-1),Ys=[Zs];function Xs(e,t){return c(),d("svg",Qs,Ys)}var ei={name:"fa-solid-check",render:Xs};const ti={name:"saveGallery",components:{modal:W},data:function(){return{files:[],dataSources:[{checked:!0,disabled:!1,key:"Library"},{checked:!0,disabled:!1,key:"Categories",parent:["Library","Wishlist"],subPage:!0},{checked:!0,disabled:!1,key:"Authors",parent:["Library","Wishlist"],subPage:!0},{checked:!0,disabled:!1,key:"Publishers",parent:["Library","Wishlist"],subPage:!0},{checked:!0,disabled:!1,key:"Collections",parent:"Library"},{checked:!0,disabled:!1,key:"Series",parent:["Library","Wishlist"],subPage:!0},{checked:!0,disabled:!1,key:"Narrators",parent:["Library","Wishlist"],subPage:!0},{checked:!0,disabled:!1,key:"Wishlist"},{checked:!0,disabled:!0,key:"Export archived books",extra:!0,tippy:'If unchecked, the "archive" collection and all archived books are excluded from the export and "My books in the series" will list archived books as not owned. This option is disabled if the archive is empty.'}],zip:null,cacheBuster:null,bundling:!1,saveBtnEnabled:!0,progressWidth:null,iconSize:20}},created:function(){this.files=this.files.concat(window.chunksFilePaths);let e=this;this.$store.state.sticky.exportSettingsGallery&&_.each(this.$store.state.sticky.exportSettingsGallery,function(n){var r=_.find(e.dataSources,{key:n.key});r.checked=n.checked,r.disabled=n.disabled});let t=_.find(this.dataSources,{key:"Library"});t.disabled=!this.$store.state.library.books;let s=_.find(this.dataSources,{key:"Wishlist"});s.disabled=!this.$store.state.library.wishlist;let i=this.$store.state.library.collections,o=i?_.find(i,{id:"__ARCHIVE"}):null;if(o&&o.books.length>0){let n=_.find(this.dataSources,{key:"Export archived books"});n&&(n.disabled=!1)}},mounted:function(){let e=this;this.iconSize=this.$refs.textWrapper.offsetHeight,e.$store.getters.saveStandaloneAfter&&this.$nextTick(function(){try{let t=JSON.parse(JSON.stringify(e.$store.state.extractSettings)),s=_.find(t.extraSettings,{name:"saveStandaloneAfter"});s.deactivated=!0,this.$store.commit("prop",{key:"extractSettings",value:t}),chrome.storage.local.set({config:t}).then(function(){e.saveButtonClicked()})}catch{}})},beforeUnmount:function(){this.zip=null,this.cacheBuster=null},computed:{chunkSource:function(){return _.chunk(this.dataSources,4)}},methods:{cancelZipping:function(){window.location.reload()},divideLargerDatapoints:function(e,t){let s=this;_.each(t,function(i){let o="";i.peopleAlsoBought&&i.asin&&(o+="window.peopleAlsoBoughtJSON = "+JSON.stringify(i.peopleAlsoBought)+`; 
`,delete i.peopleAlsoBought),i.summary&&i.asin&&(o+="window.bookSummaryJSON = "+JSON.stringify(i.summary)+`; 
`,delete i.summary),o!==""&&e.file("data/split-book-data/"+i.asin+"."+s.cacheBuster+".js",o)})},saveButtonClicked:async function(){const e=this;if(!(this.bundling||this.$store.state.devMode))try{e.bundling=!0,e.$store.commit("prop",{key:"bundlingGallery",value:!0}),e.cacheBuster=this.runCachebuster(),e.zip=new JSZip;const t=e.zip;t.file(".nojekyll","");let s=this.excludeData(JSON.parse(JSON.stringify(this.$store.state.library)));s.extras.cacheID=e.cacheBuster;let i={books:!!s.books,series:!!s.series,collections:!!s.collections,wishlist:!!s.wishlist,extras:s.extras},o=`
          if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.${e.cacheBuster}.js')
            .then(function(registration) {
              console.log('Registration successful, scope is:', registration.scope);
            })
            .catch(function(error) {
              console.log('Service worker registration failed, error:', error);
            });
          }
        `;o=!1?"<script>"+o+"<\/script>":"";const r=function(m,f){let p="^assets\\/"+m+"\\..+\\."+(f||"js")+"$";return p=new RegExp(p),_.find(e.files,b=>b.match(p))},l='<!DOCTYPE html><html lang="en" class="theme-dark standalone-gallery" style="background: #171717; min-height: 100%;"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta http-equiv="Cache-control" content="no-cache, no-store, must-revalidate"><meta http-equiv="Pragma" content="no-cache"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="mobile-web-app-capable" content="yes"><link rel="apple-touch-icon" sizes="180x180" href="favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicons/favicon-16x16.png"><link rel="manifest" href="app.webmanifest"><link rel="mask-icon" href="favicons/safari-pinned-tab.svg" color="#f29a33"><link rel="shortcut icon" href="favicons/favicon.ico"><meta name="msapplication-TileColor" content="#222222"><meta name="msapplication-config" content="favicons/browserconfig.xml"><meta name="theme-color" content="#f29a33"><title>My Audible Library</title>'+o+'<link id="ale-css" rel="stylesheet" href="'+r("gallery","css")+'"></head><body><div id="audible-library-extractor" data-version="'+this.$store.state.version+'" data-cache-id="'+e.cacheBuster+'"></div><script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"><\/script><script id="ale-js" src="'+r("gallery","js")+'" type="module"><\/script><noscript>This library requires javascript to work!</noscript></body></html>';t.file("index.html",l),t.file("ALE-Documentation.url",`[InternetShortcut]
URL=https://joonaspaakko.gitbook.io/audible-library-extractor/`),s.wishlist&&s.books?this.divideLargerDatapoints(t,_.unionBy(s.books,s.wishlist,"asin")):(s.wishlist&&this.divideLargerDatapoints(t,s.wishlist),s.books&&this.divideLargerDatapoints(t,s.books)),t.file("data/temp-data."+e.cacheBuster+".js","window.tempDataJSON = "+JSON.stringify(i)+";"),s.books&&t.file("data/library."+e.cacheBuster+".js","window.libraryJSON = "+JSON.stringify(s.books)+";"),s.collections&&t.file("data/collections."+e.cacheBuster+".js","window.collectionsJSON = "+JSON.stringify(s.collections)+";"),s.series&&t.file("data/series."+e.cacheBuster+".js","window.seriesJSON = "+JSON.stringify(s.series)+";"),s.wishlist&&t.file("data/wishlist."+e.cacheBuster+".js","window.wishlistJSON = "+JSON.stringify(s.wishlist)+";"),_.remove(e.files,function(m){return _.includes(["chunks/save-csv.js","chunks/save-gallery.js","chunks/save-gallery.css","chunks/save-locally.css","chunks/save-locally.js"],m)}),console.log(e.files);for(let m of e.files){const f=await JSZipUtils.getBinaryContent(m);t.file(m,f,{binary:!0})}const u=await t.generateAsync({type:"blob",streamFiles:!0},function(f){e.progressWidth=f.percent+"%"});saveAs(u,"ALE-gallery.zip")}finally{setTimeout(function(){e.bundling=!1,e.$store.commit("prop",{key:"bundlingGallery",value:!1}),e.progressWidth=0},1e3)}},sourceChecked:function(e,t){let s=this,i=_.filter(this.dataSources,function(n){return _.isArray(n.parent)?_.includes(n.parent,t.key):n.parent===t.key});_.each(i,function(n){if(_.isArray(n.parent)){let r=_.map(n.parent,function(u){return _.find(s.dataSources,{key:u})}),l=_.filter(r,function(u){return u.checked&&!u.disabled}).length>0;n.disabled=!e.target.checked&&!l}else n.disabled=!e.target.checked});let o=_.filter(this.dataSources,{checked:!0,disabled:!1});this.saveBtnEnabled=!!o.length,this.$store.commit("stickyProp",{key:"exportSettingsGallery",value:this.dataSources})},excludeData:function(e){return _.each(this.dataSources,function(t){var s=t.key.toLowerCase(),i=!t.checked||t.disabled;switch(t.key){case"Library":i&&(delete e.books,delete e.series,delete e.collections);break;case"Series":i&&delete e.series;break;case"Collections":i&&delete e.collections;break;case"Wishlist":i&&delete e.wishlist;break;case"Export archived books":if(i){let o=e.collections,n=o?_.find(o,{id:"__ARCHIVE"}):null;n&&n.books.length>0&&e.books&&(_.remove(e.books,"archived"),e.series&&(_.each(e.series,function(r){r.books.length>0&&_.remove(r.books,function(l){return _.includes(n.books,l)}),r.allBooks.length>0&&_.each(r.allBooks,function(l){_.includes(n.books,l.asin)&&(l.notInLibrary=!0)})}),_.remove(e.series,function(r){return r.books.length===0})),_.each(o,function(r){_.remove(r.books,function(l){return _.includes(n.books,l)})})),n&&_.remove(o,function(r){return r.id==="__ARCHIVE"||!r.books||r.books.length===0})}break}t.subPage&&(e.extras.subPageStates=e.extras.subPageStates||[],e.extras.subPageStates.push({key:s,enabled:!i}))}),e},serviceWorker:function(){return`
      importScripts('https://storage.googleapis.com/workbox-cdn/releases/6.1.5/workbox-sw.js');

      workbox.setConfig({
        debug: false,
      });

      const {registerRoute} = workbox.routing;
      const {
        NetworkFirst,
        StaleWhileRevalidate,
        CacheFirst
      } = workbox.strategies;
      const CacheableResponsePlugin = workbox.cacheableResponse.CacheableResponsePlugin;
      const ExpirationPlugin = workbox.expiration.ExpirationPlugin;

      // Cache page navigations (html) with a Network First strategy
      registerRoute(
        // Check to see if the request is a navigation to a new page
        ({ request }) => request.mode === 'navigate',
        // Use a Network First caching strategy
        new NetworkFirst({
          // Put all cached files in a cache named 'pages'
          cacheName: 'pages',
          plugins: [
            // Ensure that only requests that result in a 200 status are cached
            new CacheableResponsePlugin({
              statuses: [200],
            }),
          ],
        }),
      );

      // Cache CSS, JS, and Web Worker requests with a Stale While Revalidate strategy
      registerRoute(
        // Check to see if the request's destination is style for stylesheets, script for JavaScript, or worker for web worker
        ({ request }) =>
          request.destination === 'style' ||
          request.destination === 'script' ||
          request.destination === 'worker',
        // Use a Stale While Revalidate caching strategy
        new StaleWhileRevalidate({
          // Put all cached files in a cache named 'assets'
          cacheName: 'assets',
          plugins: [
            // Ensure that only requests that result in a 200 status are cached
            new CacheableResponsePlugin({
              statuses: [200],
            }),
          ],
        }),
      );

      // Cache images with a Cache First strategy
      registerRoute(
        // Check to see if the request's destination is style for an image
        ({ url, request }) =>
          (request.destination === 'image' && url.origin !== 'https://m.media-amazon.com') ||
          (request.destination === 'image' && url.origin === 'https://m.media-amazon.com' && !url.href.match(/_SL200_/) && !url.href.match(/_SL150_/)),
        // Use a Cache First caching strategy
        new CacheFirst({
          // Put all cached files in a cache named 'images'
          cacheName: 'images',
          plugins: [
            // Ensure that only requests that result in a 200 status are cached
            new CacheableResponsePlugin({
              statuses: [200],
            }),
            // Don't cache more than 50 items, and expire them after 30 days
            new ExpirationPlugin({
              maxEntries: 50,
              maxAgeSeconds: 60 * 60 * 24 * 30, // 30 Days
            }),
          ],
        }),
      );

      // Cache the Google Fonts stylesheets with a stale-while-revalidate strategy.
      registerRoute(
        ({url}) => url.origin === 'https://fonts.googleapis.com',
        new StaleWhileRevalidate({
          cacheName: 'google-fonts-stylesheets',
        })
      );

      // Cache the underlying font files with a cache-first strategy for 1 year.
      registerRoute(
        ({url}) => url.origin === 'https://fonts.gstatic.com',
        new CacheFirst({
          cacheName: 'google-fonts-webfonts',
          plugins: [
            new CacheableResponsePlugin({
              statuses: [0, 200],
            }),
            new ExpirationPlugin({
              maxAgeSeconds: 60 * 60 * 24 * 365,
              maxEntries: 30,
            }),
          ],
        })
      );
      `},runCachebuster:function(){return new Date().getTime()}}},L=e=>(K("data-v-ccfba252"),e=e(),Q(),e),si={class:"export-group"},ii={class:"top-wrapper"},ni={class:"text-wrapper",ref:"textWrapper"},oi=L(()=>a("h2",null,"Stand-alone gallery",-1)),ri=L(()=>a("div",{class:"description"}," This saves the gallery as a stand-alone web page that can be uploaded online and shared or viewed as is by unpacking the zip file and opening the index.html file in a web chrome. ",-1)),ai=[oi,ri],li=L(()=>a("h3",null,"Include:",-1)),ci={class:"options opt-groups"},ui=["data-extra","content"],di=["disabled","onUpdate:modelValue","onChange"],hi={class:"visual-checkbox"},pi={class:"icon"},mi=L(()=>a("h3",null,"Output:",-1)),fi=L(()=>a("div",null,"Hosted online",-1)),gi={content:"Only use this option if you wish to view the gallery locally on your computer. Don't upload this online, unless you're really into slow load times."},_i=O("Local viewing"),vi=[_i],yi={class:"buttons-footer"},bi={class:"btn-wrapper"},ki={key:0,style:{color:"#999","font-weight":"bold","margin-bottom":"5px"}},wi=O(" Saving the standalone gallery is only possible "),$i=L(()=>a("br",null,null,-1)),Si=O(' in "production" builds ('),Ci=L(()=>a("code",null,"yarn vite build",-1)),xi=O(") "),Pi=[wi,$i,Si,Ci,xi],Oi=["disabled"],Li={key:0},Ri=O(" ALE-gallery.zip"),Mi={class:"github-btn",target:"_blank",rel:"noopener noreferrer",href:"https://joonaspaakko.gitbook.io/audible-library-extractor/sharing/uploading-to-github"},Ti=L(()=>a("span",null,"Upload instructions",-1)),Ii={class:"github-btn",target:"_blank",rel:"noopener noreferrer",href:"https://joonaspaakko.gitbook.io/audible-library-extractor/sharing/uploading-to-github/updating-gallery-in-github"},Ni=L(()=>a("span",null,"Update instructions",-1));function Ai(e,t,s,i,o,n){const r=ae,l=ei,u=ce,m=le,f=Hs,p=W,b=V("tippy");return c(),w(p,{onCloseModal:t[2]||(t[2]=h=>e.$emit("closeComp"))},{default:J(()=>[a("div",si,[a("div",ii,[a("div",{class:"icon-wrapper",style:H({fontSize:e.iconSize/1.2+"px",lineHeight:e.iconSize/1.2+"px",paddingRight:e.iconSize/2.5+"px"})},[v(r)],4),a("div",ni,ai,512)]),li,a("div",ci,[(c(!0),d(E,null,z(n.chunkSource,(h,y)=>(c(),d("div",{class:S(["opt-group",["group-"+y]]),key:y},[(c(!0),d(E,null,z(h,(k,U)=>x((c(),d("label",{class:S(["item-"+U,k.disabled?"disabled":null]),"data-extra":k.extra,key:k.key,content:k.tippy},[x(a("input",{type:"checkbox",disabled:k.disabled,"onUpdate:modelValue":G=>k.checked=G,onChange:G=>n.sourceChecked(G,k)},null,40,di),[[_e,k.checked]]),a("div",hi,[a("span",pi,[v(l)])]),a("span",null,B(k.key),1)],10,ui)),[[b]])),128))],2))),128))]),mi,fi,x((c(),d("div",gi,vi)),[[b]]),a("div",yi,[a("div",bi,[e.$store.state.devMode?(c(),d("div",ki,Pi)):g("",!0),a("button",{class:S(["save-btn save-gallery",{saving:e.bundling}]),onClick:t[1]||(t[1]=(...h)=>n.saveButtonClicked&&n.saveButtonClicked(...h)),disabled:!e.$store.state.devMode&&(e.bundling||!e.saveBtnEnabled)},[a("span",null,[e.bundling?(c(),d("strong",Li,"Packaging:")):g("",!0),Ri]),e.bundling?(c(),w(u,{key:0,spin:""})):(c(),w(m,{key:1})),e.bundling&&e.progressWidth?(c(),d("div",{key:2,class:"progress",style:H({width:e.progressWidth})},null,4)):g("",!0),e.bundling?(c(),d("button",{key:3,class:"cancel-packaging",onClick:t[0]||(t[0]=(...h)=>n.cancelZipping&&n.cancelZipping(...h))},"cancel")):g("",!0)],10,Oi),a("div",null,[a("a",Mi,[Ti,v(f)]),a("a",Ii,[Ni,v(f)])])])])])]),_:1})}var Bi=C(ti,[["render",Ai],["__scopeId","data-v-ccfba252"]]);const Ei={viewBox:"0 0 576 512",width:"1.2em",height:"1.2em"},zi=a("path",{fill:"currentColor",d:"M384 24c0-9.6 5.7-18.2 14.5-22s19-2 26 4.6l144 136c4.8 4.5 7.5 10.8 7.5 17.4s-2.7 12.9-7.5 17.4l-144 136c-7 6.6-17.2 8.4-26 4.6S384 305.5 384 296v-72h-46.5c-45 0-81.5 36.5-81.5 81.5c0 22.3 10.3 34.3 19.2 40.5c6.8 4.7 12.8 12 12.8 20.3c0 9.8-8 17.8-17.8 17.8h-2.5c-2.4 0-4.8-.4-7.1-1.4C242.8 374.8 160 333.4 160 240c0-79.5 64.5-144 144-144h80V24zM0 144c0-44.2 35.8-80 80-80h16c17.7 0 32 14.3 32 32s-14.3 32-32 32H80c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16v-16c0-17.7 14.3-32 32-32s32 14.3 32 32v16c0 44.2-35.8 80-80 80H80c-44.2 0-80-35.8-80-80V144z"},null,-1),Vi=[zi];function qi(e,t){return c(),d("svg",Ei,Vi)}var Hi={name:"fa6-solid-share-from-square",render:qi};const Wi={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ui=a("path",{fill:"currentColor",d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10s10-4.47 10-10S17.53 2 12 2z"},null,-1),Gi=[Ui];function ji(e,t){return c(),d("svg",Wi,Gi)}var Di={name:"ic-baseline-circle",render:ji};const Fi={viewBox:"0 0 384 512",width:"1.2em",height:"1.2em"},Ji=a("path",{fill:"currentColor",d:"M64 0C28.7 0 0 28.7 0 64v384c0 35.3 28.7 64 64 64h256c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zm192 0v128h128L256 0zM80 224h16c22.1 0 40 17.9 40 40v8c0 8.8-7.2 16-16 16s-16-7.2-16-16v-8c0-4.4-3.6-8-8-8H80c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8h16c4.4 0 8-3.6 8-8v-8c0-8.8 7.2-16 16-16s16 7.2 16 16v8c0 22.1-17.9 40-40 40H80c-22.1 0-40-17.9-40-40v-80c0-22.1 17.9-40 40-40zm72 46.4c0-25.6 20.8-46.4 46.4-46.4H216c8.8 0 16 7.2 16 16s-7.2 16-16 16h-17.6c-7.9 0-14.4 6.4-14.4 14.4c0 5.2 2.8 9.9 7.2 12.5l25.4 14.5C231 305.7 240 321 240 337.7c0 25.6-20.8 46.4-46.4 46.4H168c-8.8 0-16-7.2-16-16s7.2-16 16-16h25.6c7.9 0 14.4-6.4 14.4-14.4c0-5.2-2.8-9.9-7.2-12.5l-25.4-14.5c-14.5-8.3-23.4-23.7-23.4-40.3zM280 240v31.6c0 23 5.5 45.6 16 66c10.5-20.3 16-42.9 16-66V240c0-8.8 7.2-16 16-16s16 7.2 16 16v31.6c0 34.7-10.3 68.7-29.6 97.6l-5.1 7.7c-3 4.5-8 7.1-13.3 7.1s-10.3-2.7-13.3-7.1l-5.1-7.7c-19.3-28.9-29.6-62.9-29.6-97.6V240c0-8.8 7.2-16 16-16s16 7.2 16 16z"},null,-1),Ki=[Ji];function Qi(e,t){return c(),d("svg",Fi,Ki)}var Zi={name:"fa6-solid-file-csv",render:Qi},Yi={methods:{stringifyArray:function(e,t,s){return Array.isArray(e)?t?e.map(function(i){return i[t]}).join(s||", "):e.join(", "):e||""}}},Xi={methods:{makeFullUrl:function(e){const t=new D(this.$store.state.urlOrigin+e);return t.query.ipRedirectOverride=!0,t.query.overrideBaseCountry=!0,t.toString()},makeUrl:function(e,t){const s=this.$store.state.urlOrigin;let i="";switch(e){case"store":case"book":i=s+"/pd/"+encodeURIComponent(t);break;case"author":t.url?i=s+"/author/"+t.url:i=s+"/search?searchAuthor="+encodeURIComponent(t.name);break;case"narrator":t.name&&(i=s+"/search?searchNarrator="+encodeURIComponent(t.name));break;case"series":t.asin&&(i=s+"/series/"+t.asin);break;case"publisher":t.name&&(i=s+"/search?searchProvider="+encodeURIComponent(t.name));break;case"categories":case"tags":t.url&&(i=s+"/cat/"+t.url);break}if(i){let o=new D(i);return o.query.ipRedirectOverride=!0,o.query.overrideBaseCountry=!0,o.toString()}else return""}}},en={methods:{prepareKeys:function(e){e=e||{};let t=e.collection||_.get(this.$store.state,this.$store.state.collectionSource),s=_.union(_.flatten(_.map(t,r=>_.keys(r))));s=s.concat(["isbn10","isbn13"]);let i=["added","title","series","bookNumbers","authors","narrators","tags","categories","length","progress","releaseDate","publishers","myRating","rating","ratings","favorite","format","language","whispersync","fromPlusCatalog","unavailable","archived","downloaded","storePageChanged","storePageMissing"];e.priorityKeys&&(i=e.priorityKeys);let o=_.remove(s,function(r){return!_.includes(i,r)});s=i.concat(o),i=null,o=null;let n=["titleShort","sample","blurb","url","summary","moreLikeThis","peopleAlsoBought","asin","cover","sample","cover","isbns"];return s=_.remove(s,function(r){return!_.includes(e.removeKeys||n,r)}),s}}},tn={methods:{slugify:function(e){const t="\xE0\xE1\xE2\xE4\xE6\xE3\xE5\u0101\u0103\u0105\xE7\u0107\u010D\u0111\u010F\xE8\xE9\xEA\xEB\u0113\u0117\u0119\u011B\u011F\u01F5\u1E27\xEE\xEF\xED\u012B\u012F\xEC\u0142\u1E3F\xF1\u0144\u01F9\u0148\xF4\xF6\xF2\xF3\u0153\xF8\u014D\xF5\u0151\u1E55\u0155\u0159\xDF\u015B\u0161\u015F\u0219\u0165\u021B\xFB\xFC\xF9\xFA\u016B\u01D8\u016F\u0171\u0173\u1E83\u1E8D\xFF\xFD\u017E\u017A\u017C\xB7/_,:;",s="aaaaaaaaaacccddeeeeeeeegghiiiiiilmnnnnoooooooooprrsssssttuuuuuuuuuwxyyzzz------",i=new RegExp(t.split("").join("|"),"g");return encodeURIComponent(e.toString().toLowerCase().replace(/\s+/g,"-").replace(i,o=>s.charAt(t.indexOf(o))).replace(/&/g,"-and-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,""))}}},sn={methods:{makeGoodReadsUrl:function(e){e=e||this.book;const t=e.authors?e.authors[0].name+" - ":e.obj&&e.obj.authors?e.obj.authors[0].name+" - ":"";let s=(t&&e.titleShort?e.titleShort:e.title)||"";const i=t+s;return e.titleShort||e.title?"https://www.goodreads.com/search?q="+encodeURIComponent(i):null}}};const nn={name:"saveCsv",mixins:[Yi,se,Xi,en,tn,sn],components:{modal:W},data:function(){return{settings:{dataSourcesChecked:"Library",dataSources:[{key:"Library"},{key:"Wishlist"},{key:"Current list",tippy:"What you see is what you get. For example, in a series sub page this option would export the entire series as listed, unless you modify it by adding filters or by searching. This option also exports with the current sorting, whereas the other two use the default descending sort by added. <strong>This data source only works on gallery pages with books.</strong>"}],compatibilityChecked:"Google Sheets",compatibility:[{key:"Raw data",label:"Raw data",tippy:"This is the format that works with any CSV capable application, like Open Office, Excel, Numbers, Google Sheets (though the GS specific format is recommended)."},{key:"Google Sheets",tippy:"<strong>Google Sheets compatible formulas:</strong> <ul><li>Cover image and store page hyperlink</li><li>Sample audio icon and hyperlink</li><li>Web player icon and hyperlink</li><li>Goodreads search icon and hyperlink</li><li>Title with a hyperlink to store page</li></ul>"},{key:"Goodreads",tippy:"This one has just the columns that are relevant to Goodreads and removes any books that don't have ISBNs because Goodreads won't import books without any. <br><br>Each book is imported in bookshelves as per their status: not started (to-read), started(currently-reading), finished (read). The categories are divided into shelves as well."}]},bundling:!1,iconSize:20}},mounted:function(){this.$store.state.sticky.exportSettingsCSVdataSources&&(this.settings.dataSourcesChecked=this.$store.state.sticky.exportSettingsCSVdataSources),this.$store.state.sticky.exportSettingsCSVcompatibility&&(this.settings.compatibilityChecked=this.$store.state.sticky.exportSettingsCSVcompatibility),this.iconSize=this.$refs.textWrapper.offsetHeight},computed:{dataSourceActive(){return _.find(this.settings.dataSources,{key:this.settings.dataSourcesChecked})},compatibilityActive(){return _.find(this.settings.compatibility,{key:this.settings.compatibilityChecked})},googleSheets:function(){return this.settings.compatibilityChecked==="Google Sheets"},filename:function(){let e="";if(this.settings.dataSourcesChecked==="Library")e="library";else if(this.settings.dataSourcesChecked==="Wishlist")e="wishlist";else if(this.settings.dataSourcesChecked==="Current list"){let t=this.$store.state.pageTitle?this.slugify(this.$store.state.pageTitle):null,s=this.$route.name;e=t||s}return e!==""&&(e="-"+e),"ALE-spreadsheet"+e+".csv"},dataSource:function(){switch(this.settings.dataSourcesChecked){case"Library":return this.$store.state.library.books;case"Wishlist":return this.$store.state.library.wishlist;case"Current list":return this.$store.getters.collection}},saveBtnEnabled:function(){if(this.settings.dataSourcesChecked==="Current list"){if(this.$route.meta.gallery)return!0}else return this.settings.dataSourcesChecked==="Wishlist"&&this.settings.compatibilityChecked==="Goodreads"?!1:this.dataSource&&this.dataSource.length>0}},methods:{saveButtonClicked:function(){if(!this.bundling){const e=this;e.bundling=!0;let t=JSON.parse(JSON.stringify(this.dataSource)),s=this.prepKeys(t),i=Papa.unparse({fields:_.map(s,function(o){return o==="isbn10"&&o==="isbn13"?o.toUpperCase():_.startCase(o)}),data:this.processData(s,t),quotes:!1,quoteChar:'"',escapeChar:'"',delimiter:",",header:!0,newline:`\r
`,skipEmptyLines:!1,columns:null});saveAs(new File([i],this.filename,{type:"text/csv;charset=utf-8"})),setTimeout(function(){e.bundling=!1},1e3)}},inputChanged:function(e){this.$store.state.sticky.exportSettingsCSVdataSources!==this.settings.dataSourcesChecked&&this.$store.commit("stickyProp",{key:"exportSettingsCSVdataSources",value:this.settings.dataSourcesChecked}),this.$store.state.sticky.exportSettingsCSVcompatibility!==this.settings.compatibilityChecked&&this.$store.commit("stickyProp",{key:"exportSettingsCSVcompatibility",value:this.settings.compatibilityChecked})},processData:function(e,t){let s=this;return this.$store.state.sticky.exportSettingsCSVcompatibility==="Goodreads"?this.processDataGoodreads(e,t):_.map(t,function(i){return _.map(e,function(o){switch(o){case"authors":case"narrators":case"categories":case"publishers":case"tags":return s.stringifyArray(i[o],"name",o==="categories"?" > ":null)||"";case"series":let n=i.series;return n&&(n=_.map(n,function(k){let U=k.bookNumbers?" (book "+k.bookNumbers.join(", ")+")":"";return k.name+U}).join(", ")),n;case"bookNumbers":let r=_.filter(i.series,"bookNumbers");return r=_.map(r,"bookNumbers"),r=_.flatten(r),_.isEmpty(r)?r=null:_.isArray(r)&&(r=r.join(", ")),r=r||"\u221E",s.googleSheets&&(r="'"+r),i.series?r:"";case"isbn10":const l=_.find(i.isbns,{type:"ISBN_10"});return l?s.googleSheets?"'"+l.identifier:l.identifier:"";case"isbn13":const u=_.find(i.isbns,{type:"ISBN_13"});return u?s.googleSheets?"'"+u.identifier:u.identifier:"";case"peopleAlsoBought":return i.peopleAlsoBought?s.stringifyArray(i.peopleAlsoBought,"title"):"";case"summary":return i.summary?i.summary.replace(/(\n|\r)/g):"";case"cover":let m=i.cover?s.makeCoverUrl(i.cover):"";return i.cover&&m&&i.asin&&s.googleSheets&&(m=s.googleSheetsLinkifyImage(s.makeUrl("book",i.asin),s.makeCoverUrl(i.cover,75),0)),m;case"title":let f=i[o]||i.titleShort||"";return f&&i.asin&&s.googleSheets&&(f=s.googleSheetsLinkify(f,s.makeUrl("book",i.asin))),f;case"titleShort":let p=i[o]||i.title||"";return p&&i.asin&&s.googleSheets&&(p=s.googleSheetsLinkify(p,s.makeUrl("book",i.asin))),p;case"sample":let b=i[o]||"";return b&&s.googleSheets&&(b=s.googleSheetsLinkifyImage(b,"https://i.imgur.com/R2N6OTy.png",20)),b;case"searchInGoodreads":let h=s.makeGoodReadsUrl(i);return h&&s.googleSheets&&(h=s.googleSheetsLinkifyImage(h,"https://i.imgur.com/RPJRqNX.png",20)),h||"";case"webPlayer":let y=i.asin?"https://www.audible.com/webplayer?asin="+i.asin:"";return y&&s.googleSheets&&(y=s.googleSheetsLinkifyImage(y,"https://i.imgur.com/PdFLCdl.png",20)),y||"";case"parentCategory":return i.categories&&i.categories[0]?i.categories[0].name:"";case"childCategory":return i.categories&&i.categories[1]?i.categories[1].name:"";case"storePage":return i.asin?s.makeUrl("book",i.asin):"";case"asin":case"length":case"progress":case"myRating":case"rating":case"ratings":case"isbn":case"isbn10":case"isbn13":return s.googleSheets?"'"+(i[o]||""):i[o]||"";case"storePageUrl":return i.asin?s.makeUrl("book",i.asin):"";default:return i[o]||""}})})},googleSheetsLinkify:function(e,t){return'=HYPERLINK("'+t+'";"'+e.replace(/\"/g,'""')+'")'},googleSheetsLinkifyImage:function(e,t,s){s=s||0;let i=s?"; 4; "+s+"; "+s:"";return'=HYPERLINK("'+e+'"; IMAGE("'+t+'"'+i+"))"},googleSheetsImagefy:function(e,t){t=t||0;let s=t?"; 4; "+t+"; "+t:"";return'=IMAGE("'+e+'"'+s+")"},processDataGoodreads:function(e,t){let s=this;return t=_.filter(t,function(i){const o=_.find(i.isbns,{type:"ISBN_10"}),n=_.find(i.isbns,{type:"ISBN_13"});return o||n}),_.map(t,function(i){return _.map(e,function(o){switch(o){case"title":return i.title||i.titleShort||"";case"author":case"publisher":return i[o+"s"]&&s.stringifyArray([i[o+"s"][0]],"name")||"";case"myRating":return i.myRating||"";case"binding":return"Audible Audio";case"yearPublished":return i.releaseDate||"";case"dateAdded":let n=new Date,r=n.getTimezoneOffset();return n=new Date(n.getTime()-r*60*1e3),n.toISOString().split("T")[0];case"bookshelves":let l=[],u=!i.progress,m=!!(i.progress&&!i.progress.toLowerCase().match("finished")),f=!!(i.progress&&i.progress.toLowerCase().match("finished")),p=u?"to-read":m?"currently-reading":f?"read":"to-read";l.push(p),l.push("audible"),l.push("audiobook"),i.fromPlusCatalog&&l.push("audible-plus");let b=i.categories&&i.categories[0]?i.categories[0].name:null;b&&l.push(s.slugify(b));let h=i.categories&&i.categories[1]?i.categories[1].name:null;return h&&l.push(s.slugify(h)),l.join(" ");case"isbn":const y=_.find(i.isbns,{type:"ISBN_10"});return y?y.identifier:"";case"isbn13":const k=_.find(i.isbns,{type:"ISBN_13"});return k?k.identifier:"";default:return""}})})},prepKeys:function(e){let t=[];switch(this.settings.compatibilityChecked){case"Google Sheets":case"Raw data":let i=["added","cover","sample","webPlayer","searchInGoodreads","title","titleShort","series","bookNumbers","blurb","authors","narrators","tags","categories","parentCategory","childCategory","length","progress","releaseDate","publishers","myRating","rating","ratings","favorite","format","language","whispersync","fromPlusCatalog","unavailable","archived","downloaded","storePageChanged","storePageMissing","asin","isbn10","isbn13","summary","peopleAlsoBought"];const o=this.settings.compatibilityChecked==="Raw data";if(o&&i.push("storePageUrl"),o){var s=["sample","webPlayer","cover","searchInGoodreads"];i=_.remove(i,function(n){return!_.includes(s,n)}),i=i.concat(s)}t=this.prepareKeys({collection:e||[],removeKeys:["isbns"],priorityKeys:i});break;case"Goodreads":t=["dateRead","myReview","title","bookshelves","author","publisher","myRating","binding","yearPublished","dateAdded","isbn","isbn13"];break}return t}}},I=e=>(K("data-v-198d6622"),e=e(),Q(),e),on={class:"export-group"},rn={class:"top-wrapper"},an={class:"text-wrapper",ref:"textWrapper"},ln=I(()=>a("h2",null," CSV (Spreadsheet)",-1)),cn=I(()=>a("div",{class:"description"}," CSV is a generic file format for tabular data that is supported by any proper spreadsheet application. ",-1)),un=[ln,cn],dn=I(()=>a("h3",null,"Data source:",-1)),hn={class:"options"},pn=["content"],mn=["value"],fn={class:"visual-radiobutton"},gn={class:"icon"},_n=I(()=>a("div",{class:"description",style:{"margin-top":"10px"}},[O(" Use "),a("strong",null,"current list"),O(" to export csv file from any page with custom filtering and sorting. ")],-1)),vn=I(()=>a("h3",null,"Compatibility:",-1)),yn={class:"options"},bn=["content"],kn=["value"],wn={class:"visual-radiobutton"},$n={class:"icon"},Sn=I(()=>a("div",{class:"description",style:{"margin-top":"10px"}},[O(" Use "),a("strong",null,"raw data"),O(" to export a csv file from any page with any kind of custom filtering and sorting. ")],-1)),Cn={class:"buttons-footer"},xn={class:"btn-wrapper"},Pn=["disabled"],On={class:"github-btn",target:"_blank",rel:"noopener noreferrer",href:"https://joonaspaakko.gitbook.io/audible-library-extractor/gallery/csv-export/google-sheets-import"},Ln=I(()=>a("span",null,"Google Sheets import",-1)),Rn={class:"github-btn",target:"_blank",rel:"noopener noreferrer",href:"https://joonaspaakko.gitbook.io/audible-library-extractor/gallery/csv-export/goodreads-import"},Mn=I(()=>a("span",null,"Goodreads import",-1));function Tn(e,t,s,i,o,n){const r=Zi,l=Di,u=ce,m=le,f=Hi,p=W,b=V("tippy");return c(),w(p,{onCloseModal:t[5]||(t[5]=h=>e.$emit("closeComp"))},{default:J(()=>[a("div",on,[a("div",rn,[a("div",{class:"icon-wrapper",style:H({fontSize:e.iconSize/1.2+"px",lineHeight:e.iconSize/1.2+"px",paddingRight:e.iconSize/2.5+"px"})},[v(r)],4),a("div",an,un,512)]),dn,a("div",hn,[(c(!0),d(E,null,z(e.settings.dataSources,h=>x((c(),d("label",{key:h.key,content:h.tippy},[x(a("input",{type:"radio",name:"dataSources","onUpdate:modelValue":t[0]||(t[0]=y=>e.settings.dataSourcesChecked=y),value:h.key,onChange:t[1]||(t[1]=(...y)=>n.inputChanged&&n.inputChanged(...y))},null,40,mn),[[Y,e.settings.dataSourcesChecked]]),a("div",fn,[a("div",gn,[v(l)])]),a("span",null,B(h.key),1)],8,pn)),[[b,{allowHTML:!0,maxWidth:500}]])),128))]),_n,vn,a("div",yn,[(c(!0),d(E,null,z(e.settings.compatibility,h=>x((c(),d("label",{key:h.key,content:h.tippy},[x(a("input",{type:"radio",name:"compatibility","onUpdate:modelValue":t[2]||(t[2]=y=>e.settings.compatibilityChecked=y),value:h.key,onChange:t[3]||(t[3]=(...y)=>n.inputChanged&&n.inputChanged(...y))},null,40,kn),[[Y,e.settings.compatibilityChecked]]),a("div",wn,[a("div",$n,[v(l)])]),a("span",null,B(h.label||h.key),1)],8,bn)),[[b,{allowHTML:!0,maxWidth:500}]])),128))]),Sn,a("div",Cn,[a("div",xn,[a("button",{class:S(["save-btn save-csv",{saving:e.bundling}]),onClick:t[4]||(t[4]=(...h)=>n.saveButtonClicked&&n.saveButtonClicked(...h)),disabled:e.bundling||!n.saveBtnEnabled},[a("span",null,B(n.filename),1),e.bundling?(c(),w(u,{key:0,spin:""})):(c(),w(m,{key:1}))],10,Pn),a("div",null,[a("a",On,[Ln,v(f)]),a("a",Rn,[Mn,v(f)])])])])])]),_:1})}var In=C(nn,[["render",Tn],["__scopeId","data-v-198d6622"]]);const Nn={name:"aleMenuActions",data:function(){return{store:this.$store.state,mobileMenuOpen:!1,sampleData:null,mobileWidth:630,subMenuActive:null,routeAvailable:{},loading:!0,routes:null,clickedRoute:null}},computed:{clickedRouteComp(){const e=_.get(this.clickedRoute,"meta.component");if(e)return{...e}},mobileThreshold(){return this.$store.state.windowWidth<this.mobileWidth}},watch:{"$store.state.playingAudio":function(){this.globalTopNavHeight(this.mobileSize)},mobileThreshold(e){this.mobileMenuOpen=!1,this.routes=this.getRoutes(),this.globalTopNavHeight(e)},mobileMenuOpen(e){this.$store.commit("prop",{key:"blockScrolling",value:e}),this.routes=this.getRoutes()},clickedRouteComp(e){this.$store.commit("prop",{key:"blockScrolling",value:e})}},created(){this.routes=this.getRoutes()},mounted:function(){this.loading=!1,this.globalTopNavHeight(this.mobileSize)},beforeUnmount:function(){},methods:{startSearching(){this.$compEmitter.emit("ios-auto-zoom-disable"),this.$compEmitter.emit("search-focus")},getRoutes(){let e=_.filter(this.$router.options.routes,"meta.icon");return e=JSON.parse(JSON.stringify(e)),this.mobileThreshold||(this.getExtraItems(e),this.getNestedGroups(e)),e},getNestedGroups(e){const t=this,s=this.getNestedIndexes(e);let i=_.remove(e,function(o){return _.get(o,"meta.nestedGroup")});i=_.groupBy(i,"meta.nestedGroup"),_.each(i,function(o,n){const r=_.find(s,{key:n});r&&e.splice(r.index,0,t.getSubPageSettings(o,n))})},getSubPageSettings(e,t){const s=this,i={name:t,meta:{groupName:e[0].meta.nestedGroup,icon:"fa-solid fa-chevron-down"},tag:"div",childItems:e};switch(e[0].meta.nestedGroup){case"subPages":i.altName=function(n){const r=_.get(s.$route,"meta.title"),l="children.0.meta.title",u=_.find(e,[l,r]);if(u){const m=s.$route.query.subPageSource||s.$store.state.sticky.subPageSource;return _.startCase(m)+": "+_.get(u,l)}else return _.startCase(t)};break}return i},getNestedIndexes(e){e=_.clone(e);const t=[];return _.remove(e,function(s){const i=_.get(s,"meta.nestedGroup"),o=!_.includes(t,i);if(i)if(o)t.push(i);else return!0}),_.each(t,function(s,i){const o=_.findIndex(e,{meta:{nestedGroup:s}});t[i]={key:s,index:o}}),t},getExtraItems(e){const t=this;let s=[];if(!this.$store.state.standalone){const i=[{tag:"a",href:"https://joonaspaakko.gitbook.io/audible-library-extractor/",name:"Extension documentation",disabled:!1,meta:{icon:"fa-solid fa-graduation-cap",nestedGroup:"extension-tools"}},{tag:"div",name:"Save gallery locally",disabled:!1,click:this.routeClick,meta:{icon:"fa-solid fa-floppy-disk",nestedGroup:"extension-tools",component:Bi}},{tag:"div",name:"CSV export&nbsp;<small>(spreadsheet)</small>",disabled:!1,click:this.routeClick,meta:{icon:"fa-solid fa-file-csv",nestedGroup:"extension-tools",component:In}},{tag:"div",name:"Wallpaper creator",disabled:!1,click:function(o){if(!!o.condition())try{let n=_.filter(t.$store.getters.collection,"asin");n=JSON.parse(JSON.stringify(n)),n=_.chunk(n,50);let r={imageEditorChunks:n,imageEditorChunksLength:n.length,imageEditorTimeCode:new Date().getTime()};t.$store.state.pageTitle&&(r.imageEditorPageTitle=t.$store.state.pageTitle),t.$store.state.pageSubTitle&&(r.imageEditorPageSubTitle=t.$store.state.pageSubTitle),chrome.storage.local.set(r).then(()=>{chrome.runtime.sendMessage({action:"openImageEditor"})})}catch{}},condition:function(){return t.$route.meta.gallery&&t.$store.getters.collection&&t.$store.getters.collection.length},tippy:function(){let o="When you open wallpaper creator, books are imported from the current page with the active sorting. Search and filters also affect what gets imported.";const n=!(t.$route.meta.gallery&&t.$store.getters.collection&&t.$store.getters.collection.length),r=_.filter(t.$store.getters.collection,"cover");return n?o+="<br><br> <strong style='color: #f79a1c; font-size: 19px;'>Can't be opened on pages that don't have any books.</strong>":o+="<br><br> <strong style='color: #f79a1c;'>"+r.length+" importable book covers on this page.</strong>",o},meta:{icon:"fa-solid fa-table-cells-large",nestedGroup:"extension-tools"}},{tag:"div",name:"Set as gallery landing page",tippy:"Click here and any links leading to the extension gallery (in browser context menu or extraction settings) will open this exact page. The url will be saved as is, so all url parameters will be saved as well. This includes: searches, filters, sorting, and some other things. <br><br>For example, open the library page, filter out finished books, click this menu item, and now you don't have to do that every time you open the gallery, if that is what you prefer...",disabled:!1,click:function(o){try{const n=window.location.pathname,r="."+n+window.location.href.split(n)[1];chrome.runtime.sendMessage({action:"changeGalleryUrl",url:r}).then(()=>{chrome.storage.local.get(["extras"]).then(l=>{l.extras.galleryUrl=r,chrome.storage.local.set({extras:l.extras}).then(()=>{})})})}catch{}},meta:{icon:"fa-solid fa-crosshairs",nestedGroup:"extension-tools"}},{tag:"div",name:"Reset gallery landing page",disabled:!1,click:function(o){try{chrome.runtime.sendMessage({action:"changeGalleryUrl",url:null}).then(()=>{chrome.storage.local.get(["extras"]).then(r=>{r.extras.galleryUrl=null,chrome.storage.local.set({extras:r.extras}).then(()=>{})})})}catch{}},meta:{icon:"fa-solid fa-house",nestedGroup:"extension-tools"}}];s=s.concat(i)}s.length&&_.each(s,function(i){e.push(i)})},routeClick(e){this.clickedRoute=e},globalTopNavHeight(e){this.$nextTick(function(){let t=0;if(!e){const s=this.$refs.navigation;s&&(t=Math.floor(s.getBoundingClientRect().height))}this.$store.commit("prop",{key:"topNavOffset",value:t})})}}},An={id:"ale-navigation",ref:"navigation"},Bn={key:0,class:"floater-components"};function En(e,t,s,i,o,n){const r=Ts,l=st,u=ne;return e.loading?g("",!0):(c(),d("div",{key:0,id:"nav-outer-wrapper",class:S({regular:!n.mobileThreshold,"mobile-nav":n.mobileThreshold,"mobile-nav-open":e.mobileMenuOpen})},[a("div",An,[v(r,{routes:e.routes,mobileMenuOpen:e.mobileMenuOpen,"onUpdate:mobileMenuOpen":t[0]||(t[0]=m=>e.mobileMenuOpen=m),inRoot:!0},null,8,["routes","mobileMenuOpen"]),n.mobileThreshold?g("",!0):(c(),d("div",Bn,[n.clickedRouteComp?(c(),w(ie(n.clickedRouteComp),{key:0,onCloseComp:t[1]||(t[1]=m=>e.clickedRoute=null)},null,32)):g("",!0)]))],512),n.mobileThreshold?(c(),w(l,{key:0,mobileMenuOpen:e.mobileMenuOpen,"onUpdate:mobileMenuOpen":t[2]||(t[2]=m=>e.mobileMenuOpen=m),onStartSearching:n.startSearching},null,8,["mobileMenuOpen","onStartSearching"])):g("",!0),e.$store.state.displayMode&&!n.mobileThreshold?(c(),w(u,{key:1,viewportFloat:!0})):g("",!0)],2))}var zn=C(Nn,[["render",En]]);const Vn={name:"aleBackground",mixins:[se],data:function(){return{coverSource:null,books:null,booksLength:null,windowWidth:null,timer1:null,timer2:null}},mounted:function(){this.windowWidth=window.innerWidth,this.books=this.getBooks(),this.flipAnimationRandomizer(),this.$compEmitter.on("afterWindowResize",this.onWindowResize)},beforeUnmounted:function(){this.$compEmitter.off("afterWindowResize",this.onWindowResize),clearInterval(this.timer1),clearInterval(this.timer2)},methods:{bgGridSize:function(){let e=t(15);this.windowWidth<530?e=t(5):this.windowWidth<760?e=t(6):this.windowWidth<1e3?e=t(8):this.windowWidth<1300&&(e=t(12));function t(s){return 6*s}return e},getBooks:function(){const e=this.bgGridSize();this.coverSource=this.$store.state.library.books?this.$store.state.library.books:this.$store.state.library.wishlist;let t=function(s){const i=s.length;if(i<=e){const o=Math.floor(e/i),n=e-i*o,r=o;let l=[];for(let u=0;u<r;u++)l=l.concat(s);return n>0&&(l=l.concat(s.splice(-1,n))),l}else return _.sampleSize(s,e)}(_.filter(this.coverSource,"cover"));return t=_.map(t,function(s){let i=_.pick(s,["cover"]);return i.flipOut=!1,i}),this.booksLength=t.length,t},flipAnimationRandomizer:function(){const e=this;clearInterval(e.timer1),clearInterval(e.timer2),e.timer1=setInterval(function(){e.coverSwitcheroo()},e.randomNumber(1500,3e3)),e.timer2=setInterval(function(){e.coverSwitcheroo()},e.randomNumber(3500,5e3))},coverSwitcheroo:function(){const e=this,t=this.randomNumber(0,this.booksLength-1),s=this.books[t];s.flipOut=!0,setTimeout(function(){const i=_.filter(e.coverSource,"cover"),o=e.randomNumber(0,i.length-1),n=i[o];s.cover=n.cover,s.flipOut=!1},850)},randomNumber:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},onWindowResize:function(e){e.widthChanged&&(this.windowWidth=e.width,this.books=this.getBooks())}}},qn=e=>(K("data-v-5134cb1e"),e=e(),Q(),e),Hn={key:0,id:"ale-background"},Wn=["src"],Un=qn(()=>a("div",{class:"dimmer-overlay"},null,-1));function Gn(e,t,s,i,o,n){return e.books?(c(),d("div",Hn,[(c(!0),d(E,null,z(e.books,(r,l)=>(c(),d("div",{key:r.cover+l,class:S(["image-wrapper",{"flip-out":r.flipOut}])},[a("img",{crossorigin:"anonymous",src:e.makeCoverUrl(r.cover,200),alt:""},null,8,Wn)],2))),128)),Un])):g("",!0)}var jn=C(Vn,[["render",Gn],["__scopeId","data-v-5134cb1e"]]);const Dn={data:function(){return{general:{route:null,standalone:null,categories:null,tippyTheme:"dark"},window:{width:window.innerWidth,height:window.innerHeight}}},created:function(){if(!this.$store.state.sticky.lightSwitchSetByUser){const t=document.querySelector("html");t.classList.remove("theme-dark"),t.classList.add("theme-light")}let e=this;this.checkIf_iOS()&&document.querySelector("body").classList.add("is-ios"),this.$compEmitter.on("refresh-page",this.refreshPage),this.$store.commit("prop",{key:"siteOnline",value:navigator.onLine}),window.addEventListener("offline",function(){e.$store.commit("prop",{key:"siteOnline",value:!1})},{passive:!0}),window.addEventListener("online",function(){e.$store.commit("prop",{key:"siteOnline",value:!0})},{passive:!0})},mounted:function(){const e=this;window.addEventListener("resize",e.onWindowResize,{passive:!0}),this.showTheBackgroundGrid()},beforeUnmount:function(){this.$compEmitter.off("refresh-page",this.refreshPage)},methods:{refreshPage:function(e){const t=this,s=new Date().getTime();this.$store.commit("prop",{key:"viewRefresh",value:s}),this.$nextTick(function(){setTimeout(function(){t.$store.commit("prop",{key:"viewRefresh",value:""}),t.$nextTick(function(){typeof e=="function"&&e(t)})},10)})},checkIf_iOS:function(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},showTheBackgroundGrid:function(){if(!this.$store.state.showBackground){const e=this;this.$nextTick(function(){setTimeout(function(){e.$store.commit("prop",{key:"showBackground",value:!0})},1200)})}},onWindowResize:_.debounce(function(){const e=window.innerWidth,t=window.innerHeight,s=this.window.width!==e,i=this.window.height!==t;(s||i)&&(this.window.width=e,this.window.height=t,s&&this.$store.commit("prop",{key:"windowWidth",value:e}),this.$compEmitter.emit("afterWindowResize",{from:"app",width:e,widthChanged:s,height:t,heightChanged:i}))},320,{leading:!0,trailing:!0})},watch:{$route:function(e,t){let s=e.params?_.map(e.params,function(i,o){return o+":"+i}).join(","):null;this.$store.commit("prop",[{key:"route",value:e},{key:"routeParams",value:s}]),this.$nextTick(function(){this.$store.state.pageTitle&&(this.$route.meta.title||this.$route.meta.title==="")?document.title="ALE \u2022 "+(this.$route.meta.title===this.$store.state.pageTitle?this.$store.state.pageTitle:this.$route.meta.title+": "+this.$store.state.pageTitle):e.meta.title&&(document.title="ALE \u2022 "+(e.meta.title||"My Audible Library"))})}}},Fn=["data-version","data-block-scrolling"],Jn={key:1},Kn={key:2,id:"nothing-here-404"},Qn={key:0},Zn={key:1};function Yn(e,t,s,i,o,n){const r=jn,l=zn,u=F("router-view");return c(),d("div",{"data-version":e.$store.state.version,class:S({"mobile-threshold":e.$store.state.windowWidth<630}),"data-block-scrolling":e.$store.state.blockScrolling},[e.$store.state.showBackground&&!(e.$store.state.standalone&&!e.$store.state.siteOnline)?(c(),w(r,{key:0})):g("",!0),v(l),e.$route.name!=="404"?(c(),d("div",Jn,[(c(),w(u,{key:e.$route.name+"-"+e.$store.state.routeParams+"-"+e.$store.state.refreshView}))])):(c(),d("div",Kn,[e.$store.getters.searchIsActive&&!e.$store.state.searchCollection.length?(c(),d("h3",Qn,"Search: no results")):(c(),d("h3",Zn,"404: There's nothing here"))]))],10,Fn)}var Xn=C(Dn,[["render",Yn]]);var eo={sticky:{lightSwitch:1,lightSwitchSetByUser:!1,viewMode:"grid",chunkLocation:0,booksInSeriesToggle:!1,collectionsDrawerToggle:!0,exportSettingsGallery:null,exportSettingsCSVdataSources:null,exportSettingsCSVcompatibility:null,booksInSeriesAll:!0,booksInSeriesFinished:!0,booksInSeriesOpenInApp:!0,subPageSource:"library",bookDetailsCollapsedCover:!1,bookDetailsCollapsedDetails:!1,contextMenuReminder:!0,bookDetailSettings:{minHeight:null,titleShort:!0,sidebar:{show:!0,iconToolbar:!0,seriesList:!0,collectionsList:!0},carousel:!0,playButton:!0,cloudPlayer:!1,blurb:!0,statusIndicators:!0,whispersync:!0,plusCatalog:!0,favorite:!0,finished:!0,reverseDirection:!1,hideFirstSection:!1},collectionsHidePremade:!1,player:{books:[]}},bookDetailSettingsOpen:!1,searchMounted:!1,searchCollection:[],mutatingCollection:[],collectionSource:null,pageCollection:null,route:null,routeParams:null,library:null,urlOrigin:null,searchQuery:"",standalone:null,displayMode:null,listRenderingOpts:null,windowWidth:window.innerWidth,showBackground:!1,chunkCollection:[],chunkDistance:40,refreshView:new Date().getTime(),pageTitle:null,pageSubTitle:null,version:"0.2.9",extractSettings:null,siteOnline:!0,searchOptCloseGuard:!1,bundlingGallery:!1,bookDetails:{book:null,index:-1},searchOptOpenHeight:null,devMode:!1,lazyScroll:!0,navHistory:{btnNavigation:!1,forward:[],back:[]},modal:{saveLocally:!1},blockScrolling:!1,playingAudio:!1,topNavOffset:0,bookClicked:!1},to={fromLocalStorage:function(e){const t=JSON.parse(localStorage.getItem("aleSettings"));t&&_.merge(e.sticky,t)},prop(e,t){let s=function(i){if(i=i||{},i.key){let o=i.freeze?Object.freeze(i.value):i.value;i.key==="refreshView"&&(o=new Date().getTime()),_.set(e,i.key,o)}};_.isArray(t)?_.each(t,function(i){s(i)}):s(t)},buildStandaloneData:function(e,t){e.library=e.library||{},_.each(t,function(s){s.key&&_.set(e,"library."+s.key,Object.freeze(s.value))})},stickyProp:function(e,t){e.sticky[t.key]=t.value},addListRenderingOpts:function(e,t){if(t.sortValues!==void 0){let s=_.find(e.listRenderingOpts.sort,{key:"sortValues"});s&&(s.active=t.sortValues)}if(t.splice?e.listRenderingOpts[t.listName].splice(t.splice,0,t.option):t.unshift?e.listRenderingOpts[t.listName].unshift(t.option):e.listRenderingOpts[t.listName].push(t.option),t.activate)if(t.listName==="sort"){const s=_.find(e.listRenderingOpts[t.listName],"current");s&&(s.current=!1),t.option.current=!0}else{const s=_.find(e.listRenderingOpts[t.listName],"active");s.active=!1,t.option.active=!0}},updateListRenderingOpts:function(e,t){let s=e.listRenderingOpts[t.listName],i=s[t.index===0||t.index?t.index:_.findIndex(s,{key:t.key})];if(t.sortValues!==void 0){let o=_.find(e.listRenderingOpts.sort,{key:"sortValues"});o&&(o.active=t.sortValues)}if((t.active===!1||t.active===!0)&&(i.active=t.active),i.type==="filterExtras"&&(t.range&&(i.range=t.range),t.value&&(i.value=t.value)),t.listName==="sort"&&i.type==="sort"){const o=_.find(s,"current");o.current=!1,i.current=!0}},resetFilters:function(e,t){_.each(e.listRenderingOpts.filter,function(s){s.active=s.type==="filter"})},chunkCollectionReset:function(e){e.chunkDistance=e.sticky.viewMode==="grid"?52:80,e.sticky.chunkLocation=0,e.chunkCollection=[]},chunkCollectionAdd:function(e,t){t=t||{};const i=e.searchQuery.trim()!==""?e.searchCollection:e.mutatingCollection;if(i.length>0){const o=t.chunkDistance?t.chunkDistance:parseFloat(e.sticky.chunkLocation);let n=t.chunkDistance?i.slice(0,o):i.slice(o,o+e.chunkDistance);n.length>0&&(t.chunkDistance?e.chunkCollection=n:e.chunkCollection=e.chunkCollection.concat(n),e.sticky.chunkLocation=o+e.chunkDistance)}},navHistory:function(e,t){const s=t.pushOnly?t.key:t.key==="back"?"forward":"back";e.navHistory[s].push(t.value),t.pushOnly||(e.navHistory[t.key].pop,e.navHistory.btnNavigation=!0)},updatePlayerProgress:function(e,t){const s=_.findIndex(e.sticky.player.books,{asin:t.asin});s>-1?_.set(e.sticky.player,"books["+s+"].progress",t.progress):e.sticky.player.books.push(t)}},so={sortValues:function(e){return _.find(e.listRenderingOpts.sort,{key:"sortValues"}).active},sortBy:function(e){return _.find(e.listRenderingOpts.sort,"current").key},regularFilters:function(e){return _.filter(e.listRenderingOpts.filter,{type:"filter"}).length>0},filterKeys:function(e){return _.map(_.filter(e.listRenderingOpts.filter,{type:"filter",active:!0}),function(t){return t.key}).join(",")},filterKeysLength:function(e){return _.filter(e.listRenderingOpts.filter,{type:"filter"}).length},filterExtrasKeys:function(e){return _.map(_.filter(e.listRenderingOpts.filter,{type:"filterExtras",active:!0}),function(t){return t.key}).join(",")},scopeKeys:function(e){return _.map(_.filter(e.listRenderingOpts.scope,"active"),function(t){return t.key}).join(",")},searchIsActive:function(e){return e.searchQuery.trim()!==""},collectionSource:function(e){return e.searchQuery.trim()!==""?e.searchCollection:_.get(e,e.collectionSource)},collectionTotal:function(e){return _.get(e,e.collectionSource,[]).length},collection:function(e){return e.searchQuery.trim()!==""?e.searchCollection:e.mutatingCollection},saveStandaloneAfter:function(e){let t=_.get(e,"extractSettings.extraSettings");if(t&&_.find(t,{name:"saveStandaloneAfter",value:!0,deactivated:!1}))return!0}},$=ve({state:eo,mutations:to,getters:so});const io="modulepreload",X={},no="",N=function(t,s){return!s||s.length===0?t():Promise.all(s.map(i=>{if(i=`${no}${i}`,i in X)return;X[i]=!0;const o=i.endsWith(".css"),n=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${n}`))return;const r=document.createElement("link");if(r.rel=o?"stylesheet":io,o||(r.as="script",r.crossOrigin=""),r.href=i,document.head.appendChild(r),o)return new Promise((l,u)=>{r.addEventListener("load",l),r.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t())},oo={name:"aleLibraryView",mounted(){}},ro={key:1,id:"nothing-here-404"},ao={key:0},lo={key:1};function co(e,t,s,i,o,n){const r=F("router-view");return c(),d("div",null,[e.$route.name!=="404"?(c(),w(r,{key:e.$route.name+"-"+e.$store.state.routeParams+"-"+e.$store.state.refreshView})):(c(),d("div",ro,[e.$store.getters.searchIsActive&&!e.$store.state.searchCollection.length?(c(),d("h3",ao,"Search: no results")):(c(),d("h3",lo,"404: There's nothing here"))]))])}var M=C(oo,[["render",co]]);const T=()=>N(()=>import("./aleGallery.f1066281.js"),["assets/aleGallery.f1066281.js","assets/aleGallery.68b2bd58.css","assets/tippy.c4165dec.css","assets/lazy.b07c228c.js","assets/vendor.e7714c30.js","assets/vendor.e11b6f39.css","assets/makeCoverUrl.f6649fcf.js","assets/timeStringToSeconds.340b6df7.js","assets/secondsToTimeString.bc24dd43.js","assets/aleSearch.919723bc.js","assets/aleSearch.f25c456d.css","assets/findSubPageSource.cf8b7e77.js","assets/findSubPageSource.f810c64d.css","assets/page-title.15791cee.js","assets/page-title.10184fc1.css","assets/helpers.c1b1b2ae.js"]),uo=()=>N(()=>import("./aleCollections.6ec6b5fa.js"),["assets/aleCollections.6ec6b5fa.js","assets/aleCollections.3c9c4f28.css","assets/tippy.c4165dec.css","assets/lazy.b07c228c.js","assets/vendor.e7714c30.js","assets/vendor.e11b6f39.css","assets/page-title.15791cee.js","assets/page-title.10184fc1.css","assets/makeCoverUrl.f6649fcf.js","assets/helpers.c1b1b2ae.js"]),ho=()=>N(()=>import("./aleCategories.54585910.js"),["assets/aleCategories.54585910.js","assets/aleCategories.6981574d.css","assets/tippy.c4165dec.css","assets/findSubPageSource.cf8b7e77.js","assets/findSubPageSource.f810c64d.css","assets/vendor.e7714c30.js","assets/vendor.e11b6f39.css","assets/page-title.15791cee.js","assets/page-title.10184fc1.css","assets/makeCoverUrl.f6649fcf.js","assets/helpers.c1b1b2ae.js"]),po=()=>N(()=>import("./aleSeries.7e51a43e.js"),["assets/aleSeries.7e51a43e.js","assets/aleSeries.e39b3c4a.css","assets/tippy.c4165dec.css","assets/lazy.b07c228c.js","assets/vendor.e7714c30.js","assets/vendor.e11b6f39.css","assets/aleSearch.919723bc.js","assets/aleSearch.f25c456d.css","assets/findSubPageSource.cf8b7e77.js","assets/findSubPageSource.f810c64d.css","assets/page-title.15791cee.js","assets/page-title.10184fc1.css","assets/timeStringToSeconds.340b6df7.js","assets/makeCoverUrl.f6649fcf.js","assets/helpers.c1b1b2ae.js"]),mo=()=>N(()=>import("./aleAuthors.fb779af7.js"),["assets/aleAuthors.fb779af7.js","assets/aleAuthors.f775e54e.css","assets/tippy.c4165dec.css","assets/lazy.b07c228c.js","assets/vendor.e7714c30.js","assets/vendor.e11b6f39.css","assets/aleSearch.919723bc.js","assets/aleSearch.f25c456d.css","assets/findSubPageSource.cf8b7e77.js","assets/findSubPageSource.f810c64d.css","assets/page-title.15791cee.js","assets/page-title.10184fc1.css","assets/timeStringToSeconds.340b6df7.js","assets/makeCoverUrl.f6649fcf.js","assets/helpers.c1b1b2ae.js"]),fo=()=>N(()=>import("./aleNarrators.ca4e980d.js"),["assets/aleNarrators.ca4e980d.js","assets/aleNarrators.2de40c03.css","assets/tippy.c4165dec.css","assets/lazy.b07c228c.js","assets/vendor.e7714c30.js","assets/vendor.e11b6f39.css","assets/aleSearch.919723bc.js","assets/aleSearch.f25c456d.css","assets/findSubPageSource.cf8b7e77.js","assets/findSubPageSource.f810c64d.css","assets/page-title.15791cee.js","assets/page-title.10184fc1.css","assets/timeStringToSeconds.340b6df7.js","assets/makeCoverUrl.f6649fcf.js","assets/helpers.c1b1b2ae.js"]),go=()=>N(()=>import("./alePublishers.ca8b7f67.js"),["assets/alePublishers.ca8b7f67.js","assets/alePublishers.d6cdcde4.css","assets/tippy.c4165dec.css","assets/lazy.b07c228c.js","assets/vendor.e7714c30.js","assets/vendor.e11b6f39.css","assets/aleSearch.919723bc.js","assets/aleSearch.f25c456d.css","assets/findSubPageSource.cf8b7e77.js","assets/findSubPageSource.f810c64d.css","assets/page-title.15791cee.js","assets/page-title.10184fc1.css","assets/timeStringToSeconds.340b6df7.js","assets/makeCoverUrl.f6649fcf.js","assets/helpers.c1b1b2ae.js"]);var A={library:{name:"library",path:"/library",component:T,meta:{gallery:!0,title:"Library",icon:"fa-solid fa-book"}},collections:{path:"/collections",component:M,meta:{icon:"fa-regular fa-folder-open"},children:[{name:"collections",path:"",component:uo,meta:{title:"Collections"}},{name:"collection",path:":collection",component:T,meta:{gallery:!0,title:"Collections"}}]},wishlist:{path:"/wishlist",component:M,meta:{icon:"fa-solid fa-bookmark"},children:[{name:"wishlist",path:"",component:T,meta:{gallery:!0,title:"Wishlist"}}]},subPages:{categories:{path:"/categories",meta:{icon:"fa-solid fa-indent",nestedGroup:"subPages"},component:M,children:[{name:"categories",path:"",component:ho,meta:{subPage:!0,title:"Categories"}},{name:"category",path:":parent/:child?",component:T,meta:{gallery:!0,subPage:!0,title:"Categories"}}]},series:{path:"/series",component:M,meta:{icon:"fa-solid fa-list-ol",nestedGroup:"subPages"},children:[{name:"all-series",path:"",component:po,meta:{subPage:!0,title:"Series"}},{name:"series",path:":series",component:T,meta:{gallery:!0,subPage:!0,title:"Series"}}]},authors:{path:"/authors",component:M,meta:{icon:"fa-solid fa-user-group",nestedGroup:"subPages"},children:[{name:"authors",path:"",component:mo,meta:{subPage:!0,title:"Authors"}},{name:"author",path:":author",component:T,meta:{gallery:!0,subPage:!0,title:"Authors"}}]},narrators:{path:"/narrators",component:M,meta:{icon:"fa-solid fa-users",nestedGroup:"subPages"},children:[{name:"narrators",path:"",component:fo,meta:{subPage:!0,title:"Narrators"}},{name:"narrator",path:":narrator",component:T,meta:{gallery:!0,subPage:!0,title:"Narrators"}}]},publishers:{path:"/publishers",component:M,meta:{icon:"fa-solid fa-book",nestedGroup:"subPages"},children:[{name:"publishers",path:"",component:go,meta:{subPage:!0,title:"Publishers"}},{name:"publisher",path:":publisher",component:T,meta:{gallery:!0,subPage:!0,title:"Publishers"}}]}},fallback:{path:"/:pathMatch(.*)*",name:"404",component:M,meta:{}}};function _o(e){if(e){let s=[];e.books?s.push({path:"/",redirect:"/library"}):e.wishlist&&s.push({path:"/",redirect:"/wishlist"}),e.books&&s.push(A.library),!e.books&&e.wishlist&&s.push(A.wishlist);var t=A.subPages;let i=_.get(e,"extras.subPageStates");i?_.each(i,function(r){r.enabled&&s.push(t[r.key])}):(e.books||e.wishlist)&&_.each(t,function(r){s.push(r)}),e.collections&&s.push(A.collections),e.books&&e.wishlist&&s.push(A.wishlist),s.push(A.fallback);const o=ye({history:be(""),routes:s,scrollBehavior(r,l,u){return u||(l&&r.name===l.name&&_.isEqual(r.params,l.params)?void 0:{x:0,y:0})}});if(document.querySelector("html.standalone-gallery")){let r=function(u){return new Promise(function(m,f){let p=document.createElement("script");p.src=(u.prefix||"data/")+u.name+"."+e.extras.cacheID+".js",p.type="text/javascript",p.onload=function(){m(u),p=null},p.onerror=function(){f(u),p=null},document.body.appendChild(p)})},l=function(u,m,f,p,b){p=_.filter(p,function(y){return window[y.name+"JSON"]!==!0});let h=[];p.forEach(function(y){h.push(r(y))}),Promise.all(h).catch(function(){b||setTimeout(function(){l(u,m,f,p,"afterError")},1e3)}).finally(function(){let y=_.map(p,function(k){return{key:k.keyOverride||k.name,value:window[k.name+"JSON"]}});$.commit("buildStandaloneData",y),_.each(p,function(k){window[k.name+"JSON"]=!0}),j(u,m,f)})};o.beforeEach((u,m,f)=>{if(u.name&&(m.name!==u.name||_.get(m,"query.book")!==_.get(u,"query.book")||m.query.subPageSource!==u.query.subPageSource)){const p=[],b=u.name==="wishlist"||u.query.subPageSource==="wishlist"||u.meta.subPage&&!u.query.subPageSource&&$.state.sticky.subPageSource==="wishlist";e.wishlist&&b?p.push({name:"wishlist"}):e.books&&p.push({name:"library",keyOverride:"books"}),e.series&&p.push({name:"series"}),e.collections&&p.push({name:"collections"}),l(u,m,f,p)}else j(u,m,f)})}else o.beforeEach((r,l,u)=>{j(r,l,u)});return o.afterEach((r,l,u)=>{if(l.name!==r.name){const m=$.state.navHistory.forward,f=$.state.navHistory.back;l.name&&l.name!==m[m.length-1]&&l.name!==f[f.length-1]&&$.commit("navHistory",{key:"back",value:l.name,pushOnly:!0}),$.state.navHistory.btnNavigation||$.commit("prop",{key:"navHistory.forward",value:[]}),$.commit("prop",{key:"navHistory.btnNavigation",value:!1})}}),o}}function j(e,t,s){e.query.refresh?(delete e.query.refresh,$.commit("prop",{key:"refreshView"}),s(e)):s()}const ue={};ue.install=function(e,t){e.config.globalProperties.$updateQuery=function(s){s=s||{};let i=s.query,o=s.value,n=s.history,r=s.queries||this.$route.query,l=JSON.parse(JSON.stringify(r));o===void 0?l[i]?delete l[i]:l[i]=!0:o?l[i]=o:delete l[i],console.log(i,l),n?this.$router.push({query:l}).catch(()=>{}):this.$router.replace({query:l}).catch(()=>{})},e.config.globalProperties.$updateQueries=function(s,i){i=i||{};let o=i.history,n=JSON.parse(JSON.stringify(i.queries||this.$route.query));_.merge(n,s),_.each(n,function(r,l){r==null&&delete n[l]}),o?this.$router.push({query:n}).catch(()=>{}):this.$router.replace({query:n}).catch(()=>{})}};let de=null,q=null,ee=function(){const e=de;e&&e.state.isVisible&&(e.hide(),e.reference.blur())};var vo={directive:"tippy",component:"tippy",componentSingleton:"tippy-singleton",defaultProps:{placement:"top",flipBehavior:["top","bottom","left","right"],allowHTML:!0,arrow:!0,theme:"dark",maxWidth:650,delay:[500,0],a11y:!1,onShow:e=>{de=e,q=document.querySelector(".list-view-inner-wrap")||window,q.addEventListener("scroll",ee,{passive:!0});let t=e.props.content;return(!t||t==="false")&&(t=!1),t},onHide:e=>{q||(q=document.querySelector(".list-view-inner-wrap")||window),q.addEventListener("scroll",ee,{passive:!0})},boundary:"viewport",flipDuration:0}};const yo=700;var bo={created:function(e,{value:t},s){if(typeof t!="function"){console.warn(`Expect a function, got ${t}`);return}let i=null;const o=r=>{r.type==="touchstart"&&r.preventDefault(),!(r.type==="click"&&r.button!==0)&&i===null&&(i=setTimeout(()=>t(r),yo))},n=()=>{i!==null&&(clearTimeout(i),i=null)};["mousedown","touchstart"].forEach(r=>e.addEventListener(r,o,{passive:!0})),["click","mouseout","touchend","touchcancel"].forEach(r=>e.addEventListener(r,n,{passive:!0}))},unmounted:function(e,t){["mousedown","touchstart"].forEach(s=>e.removeEventListener(s,start,{passive:!0})),["click","mouseout","touchend","touchcancel"].forEach(s=>e.removeEventListener(s,cancel,{passive:!0}))}};const he={};he.install=function(e,t){e.config.globalProperties.$setListRenderingOpts=function(s){if(this.$route.query.sortValues){const i=_.findIndex(s.sort,{key:"sortValues"});s.sort[i].active=this.$route.query.sortValues}if(this.$route.query.sort){let i=_.find(s.sort,{current:!0});i.current=!1;const o=_.findIndex(s.sort,{key:this.$route.query.sort});o>-1&&(s.sort[o].current=!0,s.sort[o].active=this.$route.query.sortDir==="desc")}if(this.$route.query.filter){let i=decodeURIComponent(this.$route.query.filter).split(",");_.each(_.filter(s.filter,{type:"filter"}),function(o){o.active=!1,_.each(i,function(n){o.key===n&&(o.active=!0)})})}if(this.$route.query.filterExtras){let i=this.$route.query.filterExtras.split(",");i=_.map(i,function(o){return decodeURIComponent(o)}),_.each(i,function(o){let n=o.split(":"),r=n[0],l=_.find(s.filter,{type:"filterExtras",key:r});if(console.log(l),l&&(l.active=!0,n.length>1)){if(l.dropdownOpts)l.value=n[1].split("|"),console.log(l.value);else if(l.range){let u=n[1].split("-"),m=parseFloat(u[0]),f=parseFloat(u[1]);l.range=[m,f]}}})}if(this.$route.query.scope){let i=decodeURIComponent(this.$route.query.scope).split(",");_.each(s.scope,function(o){o.active=!1,_.each(i,function(n){o.key===n&&(o.active=!0)})})}this.$store.commit("prop",{key:"listRenderingOpts",value:s})}};function ko(e){$.commit("fromLocalStorage"),$.subscribe(function(s,i){s.type==="stickyProp"||s.type==="updatePlayerProgress"?localStorage.setItem("aleSettings",JSON.stringify(i.sticky)):s.type==="prop"&&_.each(_.isArray(s.payload)?s.payload:[s.payload],function(o){const n=_.get(o,"key","");(_.get(n,"0")==="sticky"||!!n.match(/^sticky\./i))&&localStorage.setItem("aleSettings",JSON.stringify(i.sticky))})});const t=document.querySelector("html.standalone-gallery");$.commit("prop",[{key:"library",value:e,freeze:!t},{key:"standalone",value:!!t},{key:"displayMode",value:window.matchMedia("(display-mode: standalone)").matches},{key:"urlOrigin",value:"https://audible"+e.extras["domain-extension"]},{key:"extractSettings",value:e.config}]),e.extras.pages.wishlist?e.extras.pages.books||$.commit("stickyProp",{key:"subPageSource",value:"wishlist"}):$.commit("stickyProp",{key:"subPageSource",value:"library"}),!e.books&&e.wishlist&&$.commit("stickyProp",{key:"subPageSource",value:"wishlist"})}const pe=document.querySelector("html.standalone-gallery"),P=ke(Xn);P.config.devtools=!1;P.config.productionTip=!1;P.use(we);P.use(ue);P.config.globalProperties.$compEmitter=new $e;P.use($);P.use(Se,vo);P.directive("longpress",bo);P.use(he);if(pe){let e=function(t){let s=document.createElement("script"),i=document.querySelector("#audible-library-extractor").getAttribute("data-cache-id");s.src="data/temp-data."+i+".js",s.type="text/javascript",s.onload=function(){let o=window.tempDataJSON;window.bookSummaryJSON=!0,s=null,te(o)},s.onerror=function(){s=null,setTimeout(function(){t||e("afterError")},1e3)},document.head.appendChild(s)};e()}else try{chrome.storage.local.get(null).then(e=>{!_.isEmpty(e)&&e.chunks?(console.log("%cIf this page is empty and you're getting an error, try to reload a few times...","background: #f41b1b; color: #fff; padding: 2px 5px; border-radius: 8px;"),Ce.methods.glueFriesBackTogether(e),te(e)):alert("No existing data found: extract your library again.")})}catch{}function te(e){let t;if(e.extras.pages=e.extras.pages||{},pe){t=JSON.parse(JSON.stringify(e));var s=["books","series","collections","wishlist"];_.each(s,function(o){_.get(e,o)===!0&&(delete e[o],_.set(e,"extras.pages.books",!0),e.extras.pages.books=!0)})}ko(e);let i=_o(t||e);P.use(i),P.mount("#audible-library-extractor")}export{Re as _,sn as a,xt as b,tn as c,re as d,ei as e,at as f,N as g,ss as h,Xi as m,en as p,Yi as s};
